var uo=Object.defineProperty;var eo=_e=>{throw TypeError(_e)};var fo=(_e,$,et)=>$ in _e?uo(_e,$,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[$]=et;var An=(_e,$,et)=>fo(_e,typeof $!="symbol"?$+"":$,et),_i=(_e,$,et)=>$.has(_e)||eo("Cannot "+et);var Yt=(_e,$,et)=>(_i(_e,$,"read from private field"),et?et.call(_e):$.get(_e)),Sn=(_e,$,et)=>$.has(_e)?eo("Cannot add the same private member more than once"):$ instanceof WeakSet?$.add(_e):$.set(_e,et),bn=(_e,$,et,tt)=>(_i(_e,$,"write to private field"),tt?tt.call(_e,et):$.set(_e,et),et),Mn=(_e,$,et)=>(_i(_e,$,"access private method"),et);var Xr=(_e,$,et,tt)=>({set _(nt){bn(_e,$,nt,et)},get _(){return Yt(_e,$,tt)}});function _mergeNamespaces(_e,$){for(var et=0;et<$.length;et++){const tt=$[et];if(typeof tt!="string"&&!Array.isArray(tt)){for(const nt in tt)if(nt!=="default"&&!(nt in _e)){const rt=Object.getOwnPropertyDescriptor(tt,nt);rt&&Object.defineProperty(_e,nt,rt.get?rt:{enumerable:!0,get:()=>tt[nt]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const $=document.createElement("link").relList;if($&&$.supports&&$.supports("modulepreload"))return;for(const nt of document.querySelectorAll('link[rel="modulepreload"]'))tt(nt);new MutationObserver(nt=>{for(const rt of nt)if(rt.type==="childList")for(const it of rt.addedNodes)it.tagName==="LINK"&&it.rel==="modulepreload"&&tt(it)}).observe(document,{childList:!0,subtree:!0});function et(nt){const rt={};return nt.integrity&&(rt.integrity=nt.integrity),nt.referrerPolicy&&(rt.referrerPolicy=nt.referrerPolicy),nt.crossOrigin==="use-credentials"?rt.credentials="include":nt.crossOrigin==="anonymous"?rt.credentials="omit":rt.credentials="same-origin",rt}function tt(nt){if(nt.ep)return;nt.ep=!0;const rt=et(nt);fetch(nt.href,rt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$3=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$2(_e){return _e===null||typeof _e!="object"?null:(_e=z$1&&_e[z$1]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$3={};function E$3(_e,$,et){this.props=_e,this.context=$,this.refs=D$3,this.updater=et||B$1}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(_e,$){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,$,"setState")};E$3.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F(){}F.prototype=E$3.prototype;function G$1(_e,$,et){this.props=_e,this.context=$,this.refs=D$3,this.updater=et||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$2(H$1,E$3.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$1={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$2(_e,$,et){var tt,nt={},rt=null,it=null;if($!=null)for(tt in $.ref!==void 0&&(it=$.ref),$.key!==void 0&&(rt=""+$.key),$)J$1.call($,tt)&&!L$3.hasOwnProperty(tt)&&(nt[tt]=$[tt]);var ot=arguments.length-2;if(ot===1)nt.children=et;else if(1<ot){for(var st=Array(ot),at=0;at<ot;at++)st[at]=arguments[at+2];nt.children=st}if(_e&&_e.defaultProps)for(tt in ot=_e.defaultProps,ot)nt[tt]===void 0&&(nt[tt]=ot[tt]);return{$$typeof:l$2,type:_e,key:rt,ref:it,props:nt,_owner:K$1.current}}function N$2(_e,$){return{$$typeof:l$2,type:_e.type,key:$,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$2(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$2}function escape(_e){var $={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(et){return $[et]})}var P$3=/\/+/g;function Q$1(_e,$){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape(""+_e.key):$.toString(36)}function R$2(_e,$,et,tt,nt){var rt=typeof _e;(rt==="undefined"||rt==="boolean")&&(_e=null);var it=!1;if(_e===null)it=!0;else switch(rt){case"string":case"number":it=!0;break;case"object":switch(_e.$$typeof){case l$2:case n$2:it=!0}}if(it)return it=_e,nt=nt(it),_e=tt===""?"."+Q$1(it,0):tt,I$2(nt)?(et="",_e!=null&&(et=_e.replace(P$3,"$&/")+"/"),R$2(nt,$,et,"",function(at){return at})):nt!=null&&(O$2(nt)&&(nt=N$2(nt,et+(!nt.key||it&&it.key===nt.key?"":(""+nt.key).replace(P$3,"$&/")+"/")+_e)),$.push(nt)),1;if(it=0,tt=tt===""?".":tt+":",I$2(_e))for(var ot=0;ot<_e.length;ot++){rt=_e[ot];var st=tt+Q$1(rt,ot);it+=R$2(rt,$,et,st,nt)}else if(st=A$2(_e),typeof st=="function")for(_e=st.call(_e),ot=0;!(rt=_e.next()).done;)rt=rt.value,st=tt+Q$1(rt,ot++),it+=R$2(rt,$,et,st,nt);else if(rt==="object")throw $=String(_e),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return it}function S$2(_e,$,et){if(_e==null)return _e;var tt=[],nt=0;return R$2(_e,tt,"","",function(rt){return $.call(et,rt,nt++)}),tt}function T$2(_e){if(_e._status===-1){var $=_e._result;$=$(),$.then(function(et){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=et)},function(et){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=et)}),_e._status===-1&&(_e._status=0,_e._result=$)}if(_e._status===1)return _e._result.default;throw _e._result}var U$2={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(_e,$,et){S$2(_e,function(){$.apply(this,arguments)},et)},count:function(_e){var $=0;return S$2(_e,function(){$++}),$},toArray:function(_e){return S$2(_e,function($){return $})||[]},only:function(_e){if(!O$2(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$3;react_production_min.Fragment=p$3;react_production_min.Profiler=r$3;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(_e,$,et){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var tt=C$2({},_e.props),nt=_e.key,rt=_e.ref,it=_e._owner;if($!=null){if($.ref!==void 0&&(rt=$.ref,it=K$1.current),$.key!==void 0&&(nt=""+$.key),_e.type&&_e.type.defaultProps)var ot=_e.type.defaultProps;for(st in $)J$1.call($,st)&&!L$3.hasOwnProperty(st)&&(tt[st]=$[st]===void 0&&ot!==void 0?ot[st]:$[st])}var st=arguments.length-2;if(st===1)tt.children=et;else if(1<st){ot=Array(st);for(var at=0;at<st;at++)ot[at]=arguments[at+2];tt.children=ot}return{$$typeof:l$2,type:_e.type,key:nt,ref:rt,props:tt,_owner:it}};react_production_min.createContext=function(_e){return _e={$$typeof:u$1,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$1,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$2;react_production_min.createFactory=function(_e){var $=M$2.bind(null,_e);return $.type=_e,$};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$3,render:_e}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(_e){return{$$typeof:y$1,_payload:{_status:-1,_result:_e},_init:T$2}};react_production_min.memo=function(_e,$){return{$$typeof:x$1,type:_e,compare:$===void 0?null:$}};react_production_min.startTransition=function(_e){var $=V$1.transition;V$1.transition={};try{_e()}finally{V$1.transition=$}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(_e,$){return U$2.current.useCallback(_e,$)};react_production_min.useContext=function(_e){return U$2.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$2.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,$){return U$2.current.useEffect(_e,$)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(_e,$,et){return U$2.current.useImperativeHandle(_e,$,et)};react_production_min.useInsertionEffect=function(_e,$){return U$2.current.useInsertionEffect(_e,$)};react_production_min.useLayoutEffect=function(_e,$){return U$2.current.useLayoutEffect(_e,$)};react_production_min.useMemo=function(_e,$){return U$2.current.useMemo(_e,$)};react_production_min.useReducer=function(_e,$,et){return U$2.current.useReducer(_e,$,et)};react_production_min.useRef=function(_e){return U$2.current.useRef(_e)};react_production_min.useState=function(_e){return U$2.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,$,et){return U$2.current.useSyncExternalStore(_e,$,et)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const e$2=getDefaultExportFromCjs$1(reactExports),React=_mergeNamespaces({__proto__:null,default:e$2},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q(_e,$,et){var tt,nt={},rt=null,it=null;et!==void 0&&(rt=""+et),$.key!==void 0&&(rt=""+$.key),$.ref!==void 0&&(it=$.ref);for(tt in $)m$2.call($,tt)&&!p$2.hasOwnProperty(tt)&&(nt[tt]=$[tt]);if(_e&&_e.defaultProps)for(tt in $=_e.defaultProps,$)nt[tt]===void 0&&(nt[tt]=$[tt]);return{$$typeof:k$1,type:_e,key:rt,ref:it,props:nt,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function $(Lt,en){var rn=Lt.length;Lt.push(en);e:for(;0<rn;){var sn=rn-1>>>1,hn=Lt[sn];if(0<nt(hn,en))Lt[sn]=en,Lt[rn]=hn,rn=sn;else break e}}function et(Lt){return Lt.length===0?null:Lt[0]}function tt(Lt){if(Lt.length===0)return null;var en=Lt[0],rn=Lt.pop();if(rn!==en){Lt[0]=rn;e:for(var sn=0,hn=Lt.length,mn=hn>>>1;sn<mn;){var wn=2*(sn+1)-1,Cn=Lt[wn],kn=wn+1,yn=Lt[kn];if(0>nt(Cn,rn))kn<hn&&0>nt(yn,Cn)?(Lt[sn]=yn,Lt[kn]=rn,sn=kn):(Lt[sn]=Cn,Lt[wn]=rn,sn=wn);else if(kn<hn&&0>nt(yn,rn))Lt[sn]=yn,Lt[kn]=rn,sn=kn;else break e}}return en}function nt(Lt,en){var rn=Lt.sortIndex-en.sortIndex;return rn!==0?rn:Lt.id-en.id}if(typeof performance=="object"&&typeof performance.now=="function"){var rt=performance;_e.unstable_now=function(){return rt.now()}}else{var it=Date,ot=it.now();_e.unstable_now=function(){return it.now()-ot}}var st=[],at=[],lt=1,dt=null,pt=3,ht=!1,vt=!1,mt=!1,kt=typeof setTimeout=="function"?setTimeout:null,bt=typeof clearTimeout=="function"?clearTimeout:null,gt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function St(Lt){for(var en=et(at);en!==null;){if(en.callback===null)tt(at);else if(en.startTime<=Lt)tt(at),en.sortIndex=en.expirationTime,$(st,en);else break;en=et(at)}}function yt(Lt){if(mt=!1,St(Lt),!vt)if(et(st)!==null)vt=!0,on(Et);else{var en=et(at);en!==null&&an(yt,en.startTime-Lt)}}function Et(Lt,en){vt=!1,mt&&(mt=!1,bt(Rt),Rt=-1),ht=!0;var rn=pt;try{for(St(en),dt=et(st);dt!==null&&(!(dt.expirationTime>en)||Lt&&!At());){var sn=dt.callback;if(typeof sn=="function"){dt.callback=null,pt=dt.priorityLevel;var hn=sn(dt.expirationTime<=en);en=_e.unstable_now(),typeof hn=="function"?dt.callback=hn:dt===et(st)&&tt(st),St(en)}else tt(st);dt=et(st)}if(dt!==null)var mn=!0;else{var wn=et(at);wn!==null&&an(yt,wn.startTime-en),mn=!1}return mn}finally{dt=null,pt=rn,ht=!1}}var Tt=!1,wt=null,Rt=-1,xt=5,Pt=-1;function At(){return!(_e.unstable_now()-Pt<xt)}function Nt(){if(wt!==null){var Lt=_e.unstable_now();Pt=Lt;var en=!0;try{en=wt(!0,Lt)}finally{en?Bt():(Tt=!1,wt=null)}}else Tt=!1}var Bt;if(typeof gt=="function")Bt=function(){gt(Nt)};else if(typeof MessageChannel<"u"){var Jt=new MessageChannel,ln=Jt.port2;Jt.port1.onmessage=Nt,Bt=function(){ln.postMessage(null)}}else Bt=function(){kt(Nt,0)};function on(Lt){wt=Lt,Tt||(Tt=!0,Bt())}function an(Lt,en){Rt=kt(function(){Lt(_e.unstable_now())},en)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Lt){Lt.callback=null},_e.unstable_continueExecution=function(){vt||ht||(vt=!0,on(Et))},_e.unstable_forceFrameRate=function(Lt){0>Lt||125<Lt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xt=0<Lt?Math.floor(1e3/Lt):5},_e.unstable_getCurrentPriorityLevel=function(){return pt},_e.unstable_getFirstCallbackNode=function(){return et(st)},_e.unstable_next=function(Lt){switch(pt){case 1:case 2:case 3:var en=3;break;default:en=pt}var rn=pt;pt=en;try{return Lt()}finally{pt=rn}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Lt,en){switch(Lt){case 1:case 2:case 3:case 4:case 5:break;default:Lt=3}var rn=pt;pt=Lt;try{return en()}finally{pt=rn}},_e.unstable_scheduleCallback=function(Lt,en,rn){var sn=_e.unstable_now();switch(typeof rn=="object"&&rn!==null?(rn=rn.delay,rn=typeof rn=="number"&&0<rn?sn+rn:sn):rn=sn,Lt){case 1:var hn=-1;break;case 2:hn=250;break;case 5:hn=1073741823;break;case 4:hn=1e4;break;default:hn=5e3}return hn=rn+hn,Lt={id:lt++,callback:en,priorityLevel:Lt,startTime:rn,expirationTime:hn,sortIndex:-1},rn>sn?(Lt.sortIndex=rn,$(at,Lt),et(st)===null&&Lt===et(at)&&(mt?(bt(Rt),Rt=-1):mt=!0,an(yt,rn-sn))):(Lt.sortIndex=hn,$(st,Lt),vt||ht||(vt=!0,on(Et))),Lt},_e.unstable_shouldYield=At,_e.unstable_wrapCallback=function(Lt){var en=pt;return function(){var rn=pt;pt=en;try{return Lt.apply(this,arguments)}finally{pt=rn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(_e){for(var $="https://reactjs.org/docs/error-decoder.html?invariant="+_e,et=1;et<arguments.length;et++)$+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+_e+"; visit "+$+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,$){ha(_e,$),ha(_e+"Capture",$)}function ha(_e,$){for(ea[_e]=$,_e=0;_e<$.length;_e++)da.add($[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,$,et,tt){if(et!==null&&et.type===0)return!1;switch(typeof $){case"function":case"symbol":return!0;case"boolean":return tt?!1:et!==null?!et.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,$,et,tt){if($===null||typeof $>"u"||pa(_e,$,et,tt))return!0;if(tt)return!1;if(et!==null)switch(et.type){case 3:return!$;case 4:return $===!1;case 5:return isNaN($);case 6:return isNaN($)||1>$}return!1}function v$2(_e,$,et,tt,nt,rt,it){this.acceptsBooleans=$===2||$===3||$===4,this.attributeName=tt,this.attributeNamespace=nt,this.mustUseProperty=et,this.propertyName=_e,this.type=$,this.sanitizeURL=rt,this.removeEmptyString=it}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z[_e]=new v$2(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var $=_e[0];z[$]=new v$2($,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z[_e]=new v$2(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z[_e]=new v$2(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z[_e]=new v$2(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z[_e]=new v$2(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z[_e]=new v$2(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z[_e]=new v$2(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z[_e]=new v$2(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var $=_e.replace(ra,sa);z[$]=new v$2($,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var $=_e.replace(ra,sa);z[$]=new v$2($,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var $=_e.replace(ra,sa);z[$]=new v$2($,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,$,et,tt){var nt=z.hasOwnProperty($)?z[$]:null;(nt!==null?nt.type!==0:tt||!(2<$.length)||$[0]!=="o"&&$[0]!=="O"||$[1]!=="n"&&$[1]!=="N")&&(qa($,et,nt,tt)&&(et=null),tt||nt===null?oa($)&&(et===null?_e.removeAttribute($):_e.setAttribute($,""+et)):nt.mustUseProperty?_e[nt.propertyName]=et===null?nt.type===3?!1:"":et:($=nt.attributeName,tt=nt.attributeNamespace,et===null?_e.removeAttribute($):(nt=nt.type,et=nt===3||nt===4&&et===!0?"":""+et,tt?_e.setAttributeNS(tt,$,et):_e.setAttribute($,et))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$1=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(et){var $=et.stack.trim().match(/\n( *(at )?)/);La=$&&$[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,$){if(!_e||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if($)if($=function(){throw Error()},Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(at){var tt=at}Reflect.construct(_e,[],$)}else{try{$.call()}catch(at){tt=at}_e.call($.prototype)}else{try{throw Error()}catch(at){tt=at}_e()}}catch(at){if(at&&tt&&typeof at.stack=="string"){for(var nt=at.stack.split(`
`),rt=tt.stack.split(`
`),it=nt.length-1,ot=rt.length-1;1<=it&&0<=ot&&nt[it]!==rt[ot];)ot--;for(;1<=it&&0<=ot;it--,ot--)if(nt[it]!==rt[ot]){if(it!==1||ot!==1)do if(it--,ot--,0>ot||nt[it]!==rt[ot]){var st=`
`+nt[it].replace(" at new "," at ");return _e.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",_e.displayName)),st}while(1<=it&&0<=ot);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var $=_e.render;return _e=_e.displayName,_e||(_e=$.displayName||$.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return $=_e.displayName||null,$!==null?$:Qa(_e.type)||"Memo";case Ha:$=_e._payload,_e=_e._init;try{return Qa(_e($))}catch{}}return null}function Ra(_e){var $=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return($.displayName||"Context")+".Consumer";case 10:return($._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=$.render,_e=_e.displayName||_e.name||"",$.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return $;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa($);case 8:return $===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var $=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&($==="checkbox"||$==="radio")}function Ua(_e){var $=Ta(_e)?"checked":"value",et=Object.getOwnPropertyDescriptor(_e.constructor.prototype,$),tt=""+_e[$];if(!_e.hasOwnProperty($)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var nt=et.get,rt=et.set;return Object.defineProperty(_e,$,{configurable:!0,get:function(){return nt.call(this)},set:function(it){tt=""+it,rt.call(this,it)}}),Object.defineProperty(_e,$,{enumerable:et.enumerable}),{getValue:function(){return tt},setValue:function(it){tt=""+it},stopTracking:function(){_e._valueTracker=null,delete _e[$]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var $=_e._valueTracker;if(!$)return!0;var et=$.getValue(),tt="";return _e&&(tt=Ta(_e)?_e.checked?"true":"false":_e.value),_e=tt,_e!==et?($.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,$){var et=$.checked;return A$1({},$,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??_e._wrapperState.initialChecked})}function Za(_e,$){var et=$.defaultValue==null?"":$.defaultValue,tt=$.checked!=null?$.checked:$.defaultChecked;et=Sa($.value!=null?$.value:et),_e._wrapperState={initialChecked:tt,initialValue:et,controlled:$.type==="checkbox"||$.type==="radio"?$.checked!=null:$.value!=null}}function ab(_e,$){$=$.checked,$!=null&&ta(_e,"checked",$,!1)}function bb(_e,$){ab(_e,$);var et=Sa($.value),tt=$.type;if(et!=null)tt==="number"?(et===0&&_e.value===""||_e.value!=et)&&(_e.value=""+et):_e.value!==""+et&&(_e.value=""+et);else if(tt==="submit"||tt==="reset"){_e.removeAttribute("value");return}$.hasOwnProperty("value")?cb(_e,$.type,et):$.hasOwnProperty("defaultValue")&&cb(_e,$.type,Sa($.defaultValue)),$.checked==null&&$.defaultChecked!=null&&(_e.defaultChecked=!!$.defaultChecked)}function db(_e,$,et){if($.hasOwnProperty("value")||$.hasOwnProperty("defaultValue")){var tt=$.type;if(!(tt!=="submit"&&tt!=="reset"||$.value!==void 0&&$.value!==null))return;$=""+_e._wrapperState.initialValue,et||$===_e.value||(_e.value=$),_e.defaultValue=$}et=_e.name,et!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,et!==""&&(_e.name=et)}function cb(_e,$,et){($!=="number"||Xa(_e.ownerDocument)!==_e)&&(et==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+et&&(_e.defaultValue=""+et))}var eb=Array.isArray;function fb(_e,$,et,tt){if(_e=_e.options,$){$={};for(var nt=0;nt<et.length;nt++)$["$"+et[nt]]=!0;for(et=0;et<_e.length;et++)nt=$.hasOwnProperty("$"+_e[et].value),_e[et].selected!==nt&&(_e[et].selected=nt),nt&&tt&&(_e[et].defaultSelected=!0)}else{for(et=""+Sa(et),$=null,nt=0;nt<_e.length;nt++){if(_e[nt].value===et){_e[nt].selected=!0,tt&&(_e[nt].defaultSelected=!0);return}$!==null||_e[nt].disabled||($=_e[nt])}$!==null&&($.selected=!0)}}function gb(_e,$){if($.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},$,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,$){var et=$.value;if(et==null){if(et=$.children,$=$.defaultValue,et!=null){if($!=null)throw Error(p$1(92));if(eb(et)){if(1<et.length)throw Error(p$1(93));et=et[0]}$=et}$==null&&($=""),et=$}_e._wrapperState={initialValue:Sa(et)}}function ib(_e,$){var et=Sa($.value),tt=Sa($.defaultValue);et!=null&&(et=""+et,et!==_e.value&&(_e.value=et),$.defaultValue==null&&_e.defaultValue!==et&&(_e.defaultValue=et)),tt!=null&&(_e.defaultValue=""+tt)}function jb(_e){var $=_e.textContent;$===_e._wrapperState.initialValue&&$!==""&&$!==null&&(_e.value=$)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,$){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb($):_e==="http://www.w3.org/2000/svg"&&$==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function($,et,tt,nt){MSApp.execUnsafeLocalFunction(function(){return _e($,et,tt,nt)})}:_e}(function(_e,$){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=$;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+$.valueOf().toString()+"</svg>",$=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;$.firstChild;)_e.appendChild($.firstChild)}});function ob(_e,$){if($){var et=_e.firstChild;if(et&&et===_e.lastChild&&et.nodeType===3){et.nodeValue=$;return}}_e.textContent=$}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function($){$=$+_e.charAt(0).toUpperCase()+_e.substring(1),pb[$]=pb[_e]})});function rb(_e,$,et){return $==null||typeof $=="boolean"||$===""?"":et||typeof $!="number"||$===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+$).trim():$+"px"}function sb(_e,$){_e=_e.style;for(var et in $)if($.hasOwnProperty(et)){var tt=et.indexOf("--")===0,nt=rb(et,$[et],tt);et==="float"&&(et="cssFloat"),tt?_e.setProperty(et,nt):_e[et]=nt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,$){if($){if(tb[_e]&&($.children!=null||$.dangerouslySetInnerHTML!=null))throw Error(p$1(137,_e));if($.dangerouslySetInnerHTML!=null){if($.children!=null)throw Error(p$1(60));if(typeof $.dangerouslySetInnerHTML!="object"||!("__html"in $.dangerouslySetInnerHTML))throw Error(p$1(61))}if($.style!=null&&typeof $.style!="object")throw Error(p$1(62))}}function vb(_e,$){if(_e.indexOf("-")===-1)return typeof $.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$1(280));var $=_e.stateNode;$&&($=Db($),yb(_e.stateNode,_e.type,$))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,$=Ab;if(Ab=zb=null,Bb(_e),$)for(_e=0;_e<$.length;_e++)Bb($[_e])}}function Gb(_e,$){return _e($)}function Hb(){}var Ib=!1;function Jb(_e,$,et){if(Ib)return _e($,et);Ib=!0;try{return Gb(_e,$,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,$){var et=_e.stateNode;if(et===null)return null;var tt=Db(et);if(tt===null)return null;et=tt[$];e:switch($){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(_e=_e.type,tt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!tt;break e;default:_e=!1}if(_e)return null;if(et&&typeof et!="function")throw Error(p$1(231,$,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,$,et,tt,nt,rt,it,ot,st){var at=Array.prototype.slice.call(arguments,3);try{$.apply(et,at)}catch(lt){this.onError(lt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,$,et,tt,nt,rt,it,ot,st){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,$,et,tt,nt,rt,it,ot,st){if(Tb.apply(this,arguments),Ob){if(Ob){var at=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=at)}}function Vb(_e){var $=_e,et=_e;if(_e.alternate)for(;$.return;)$=$.return;else{_e=$;do $=_e,$.flags&4098&&(et=$.return),_e=$.return;while(_e)}return $.tag===3?et:null}function Wb(_e){if(_e.tag===13){var $=_e.memoizedState;if($===null&&(_e=_e.alternate,_e!==null&&($=_e.memoizedState)),$!==null)return $.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$1(188))}function Yb(_e){var $=_e.alternate;if(!$){if($=Vb(_e),$===null)throw Error(p$1(188));return $!==_e?null:_e}for(var et=_e,tt=$;;){var nt=et.return;if(nt===null)break;var rt=nt.alternate;if(rt===null){if(tt=nt.return,tt!==null){et=tt;continue}break}if(nt.child===rt.child){for(rt=nt.child;rt;){if(rt===et)return Xb(nt),_e;if(rt===tt)return Xb(nt),$;rt=rt.sibling}throw Error(p$1(188))}if(et.return!==tt.return)et=nt,tt=rt;else{for(var it=!1,ot=nt.child;ot;){if(ot===et){it=!0,et=nt,tt=rt;break}if(ot===tt){it=!0,tt=nt,et=rt;break}ot=ot.sibling}if(!it){for(ot=rt.child;ot;){if(ot===et){it=!0,et=rt,tt=nt;break}if(ot===tt){it=!0,tt=rt,et=nt;break}ot=ot.sibling}if(!it)throw Error(p$1(189))}}if(et.alternate!==tt)throw Error(p$1(190))}if(et.tag!==3)throw Error(p$1(188));return et.stateNode.current===et?_e:$}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var $=$b(_e);if($!==null)return $;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,$){var et=_e.pendingLanes;if(et===0)return 0;var tt=0,nt=_e.suspendedLanes,rt=_e.pingedLanes,it=et&268435455;if(it!==0){var ot=it&~nt;ot!==0?tt=tc(ot):(rt&=it,rt!==0&&(tt=tc(rt)))}else it=et&~nt,it!==0?tt=tc(it):rt!==0&&(tt=tc(rt));if(tt===0)return 0;if($!==0&&$!==tt&&!($&nt)&&(nt=tt&-tt,rt=$&-$,nt>=rt||nt===16&&(rt&4194240)!==0))return $;if(tt&4&&(tt|=et&16),$=_e.entangledLanes,$!==0)for(_e=_e.entanglements,$&=tt;0<$;)et=31-oc($),nt=1<<et,tt|=_e[et],$&=~nt;return tt}function vc(_e,$){switch(_e){case 1:case 2:case 4:return $+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,$){for(var et=_e.suspendedLanes,tt=_e.pingedLanes,nt=_e.expirationTimes,rt=_e.pendingLanes;0<rt;){var it=31-oc(rt),ot=1<<it,st=nt[it];st===-1?(!(ot&et)||ot&tt)&&(nt[it]=vc(ot,$)):st<=$&&(_e.expiredLanes|=ot),rt&=~ot}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var $=[],et=0;31>et;et++)$.push(_e);return $}function Ac(_e,$,et){_e.pendingLanes|=$,$!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,$=31-oc($),_e[$]=et}function Bc(_e,$){var et=_e.pendingLanes&~$;_e.pendingLanes=$,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=$,_e.mutableReadLanes&=$,_e.entangledLanes&=$,$=_e.entanglements;var tt=_e.eventTimes;for(_e=_e.expirationTimes;0<et;){var nt=31-oc(et),rt=1<<nt;$[nt]=0,tt[nt]=-1,_e[nt]=-1,et&=~rt}}function Cc(_e,$){var et=_e.entangledLanes|=$;for(_e=_e.entanglements;et;){var tt=31-oc(et),nt=1<<tt;nt&$|_e[tt]&$&&(_e[tt]|=$),et&=~nt}}var C$1=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,$){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete($.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete($.pointerId)}}function Tc(_e,$,et,tt,nt,rt){return _e===null||_e.nativeEvent!==rt?(_e={blockedOn:$,domEventName:et,eventSystemFlags:tt,nativeEvent:rt,targetContainers:[nt]},$!==null&&($=Cb($),$!==null&&Fc($)),_e):(_e.eventSystemFlags|=tt,$=_e.targetContainers,nt!==null&&$.indexOf(nt)===-1&&$.push(nt),_e)}function Uc(_e,$,et,tt,nt){switch($){case"focusin":return Lc=Tc(Lc,_e,$,et,tt,nt),!0;case"dragenter":return Mc=Tc(Mc,_e,$,et,tt,nt),!0;case"mouseover":return Nc=Tc(Nc,_e,$,et,tt,nt),!0;case"pointerover":var rt=nt.pointerId;return Oc.set(rt,Tc(Oc.get(rt)||null,_e,$,et,tt,nt)),!0;case"gotpointercapture":return rt=nt.pointerId,Pc.set(rt,Tc(Pc.get(rt)||null,_e,$,et,tt,nt)),!0}return!1}function Vc(_e){var $=Wc(_e.target);if($!==null){var et=Vb($);if(et!==null){if($=et.tag,$===13){if($=Wb(et),$!==null){_e.blockedOn=$,Ic(_e.priority,function(){Gc(et)});return}}else if($===3&&et.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var $=_e.targetContainers;0<$.length;){var et=Yc(_e.domEventName,_e.eventSystemFlags,$[0],_e.nativeEvent);if(et===null){et=_e.nativeEvent;var tt=new et.constructor(et.type,et);wb=tt,et.target.dispatchEvent(tt),wb=null}else return $=Cb(et),$!==null&&Fc($),_e.blockedOn=et,!1;$.shift()}return!0}function Zc(_e,$,et){Xc(_e)&&et.delete($)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,$){_e.blockedOn===$&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function $(nt){return ad(nt,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var et=1;et<Kc.length;et++){var tt=Kc[et];tt.blockedOn===_e&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach($),Pc.forEach($),et=0;et<Qc.length;et++)tt=Qc[et],tt.blockedOn===_e&&(tt.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_e,$,et,tt){var nt=C$1,rt=cd.transition;cd.transition=null;try{C$1=1,fd(_e,$,et,tt)}finally{C$1=nt,cd.transition=rt}}function gd(_e,$,et,tt){var nt=C$1,rt=cd.transition;cd.transition=null;try{C$1=4,fd(_e,$,et,tt)}finally{C$1=nt,cd.transition=rt}}function fd(_e,$,et,tt){if(dd){var nt=Yc(_e,$,et,tt);if(nt===null)hd(_e,$,tt,id,et),Sc(_e,tt);else if(Uc(nt,_e,$,et,tt))tt.stopPropagation();else if(Sc(_e,tt),$&4&&-1<Rc.indexOf(_e)){for(;nt!==null;){var rt=Cb(nt);if(rt!==null&&Ec(rt),rt=Yc(_e,$,et,tt),rt===null&&hd(_e,$,tt,id,et),rt===nt)break;nt=rt}nt!==null&&tt.stopPropagation()}else hd(_e,$,tt,null,et)}}var id=null;function Yc(_e,$,et,tt){if(id=null,_e=xb(tt),_e=Wc(_e),_e!==null)if($=Vb(_e),$===null)_e=null;else if(et=$.tag,et===13){if(_e=Wb($),_e!==null)return _e;_e=null}else if(et===3){if($.stateNode.current.memoizedState.isDehydrated)return $.tag===3?$.stateNode.containerInfo:null;_e=null}else $!==_e&&(_e=null);return id=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,$=ld,et=$.length,tt,nt="value"in kd?kd.value:kd.textContent,rt=nt.length;for(_e=0;_e<et&&$[_e]===nt[_e];_e++);var it=et-_e;for(tt=1;tt<=it&&$[et-tt]===nt[rt-tt];tt++);return md=nt.slice(_e,1<tt?1-tt:void 0)}function od(_e){var $=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&$===13&&(_e=13)):_e=$,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function $(et,tt,nt,rt,it){this._reactName=et,this._targetInst=nt,this.type=tt,this.nativeEvent=rt,this.target=it,this.currentTarget=null;for(var ot in _e)_e.hasOwnProperty(ot)&&(et=_e[ot],this[ot]=et?et(rt):rt[ot]);return this.isDefaultPrevented=(rt.defaultPrevented!=null?rt.defaultPrevented:rt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1($.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),$}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var $=this.nativeEvent;return $.getModifierState?$.getModifierState(_e):(_e=Od[_e])?!!$[_e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_e){if(_e.key){var $=Md[_e.key]||_e.key;if($!=="Unidentified")return $}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae$1||be&&8<be&&11>=be),ee$1=" ",fe=!1;function ge(_e,$){switch(_e){case"keyup":return $d.indexOf($.keyCode)!==-1;case"keydown":return $.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,$){switch(_e){case"compositionend":return he($);case"keypress":return $.which!==32?null:(fe=!0,ee$1);case"textInput":return _e=$.data,_e===ee$1&&fe?null:_e;default:return null}}function ke(_e,$){if(ie)return _e==="compositionend"||!ae$1&&ge(_e,$)?(_e=nd(),md=ld=kd=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!($.ctrlKey||$.altKey||$.metaKey)||$.ctrlKey&&$.altKey){if($.char&&1<$.char.length)return $.char;if($.which)return String.fromCharCode($.which)}return null;case"compositionend":return de&&$.locale!=="ko"?null:$.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var $=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return $==="input"?!!le[_e.type]:$==="textarea"}function ne$1(_e,$,et,tt){Eb(tt),$=oe$1($,"onChange"),0<$.length&&(et=new td("onChange","change",null,et,tt),_e.push({event:et,listeners:$}))}var pe=null,qe=null;function re(_e){se$1(_e,0)}function te$1(_e){var $=ue(_e);if(Wa($))return _e}function ve(_e,$){if(_e==="change")return $}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_e){if(_e.propertyName==="value"&&te$1(qe)){var $=[];ne$1($,qe,_e,xb(_e)),Jb(re,$)}}function Ce(_e,$,et){_e==="focusin"?(Ae(),pe=$,qe=et,pe.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te$1(qe)}function Ee(_e,$){if(_e==="click")return te$1($)}function Fe(_e,$){if(_e==="input"||_e==="change")return te$1($)}function Ge(_e,$){return _e===$&&(_e!==0||1/_e===1/$)||_e!==_e&&$!==$}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,$){if(He(_e,$))return!0;if(typeof _e!="object"||_e===null||typeof $!="object"||$===null)return!1;var et=Object.keys(_e),tt=Object.keys($);if(et.length!==tt.length)return!1;for(tt=0;tt<et.length;tt++){var nt=et[tt];if(!ja.call($,nt)||!He(_e[nt],$[nt]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,$){var et=Je(_e);_e=0;for(var tt;et;){if(et.nodeType===3){if(tt=_e+et.textContent.length,_e<=$&&tt>=$)return{node:et,offset:$-_e};_e=tt}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le(_e,$){return _e&&$?_e===$?!0:_e&&_e.nodeType===3?!1:$&&$.nodeType===3?Le(_e,$.parentNode):"contains"in _e?_e.contains($):_e.compareDocumentPosition?!!(_e.compareDocumentPosition($)&16):!1:!1}function Me(){for(var _e=window,$=Xa();$ instanceof _e.HTMLIFrameElement;){try{var et=typeof $.contentWindow.location.href=="string"}catch{et=!1}if(et)_e=$.contentWindow;else break;$=Xa(_e.document)}return $}function Ne(_e){var $=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return $&&($==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||$==="textarea"||_e.contentEditable==="true")}function Oe(_e){var $=Me(),et=_e.focusedElem,tt=_e.selectionRange;if($!==et&&et&&et.ownerDocument&&Le(et.ownerDocument.documentElement,et)){if(tt!==null&&Ne(et)){if($=tt.start,_e=tt.end,_e===void 0&&(_e=$),"selectionStart"in et)et.selectionStart=$,et.selectionEnd=Math.min(_e,et.value.length);else if(_e=($=et.ownerDocument||document)&&$.defaultView||window,_e.getSelection){_e=_e.getSelection();var nt=et.textContent.length,rt=Math.min(tt.start,nt);tt=tt.end===void 0?rt:Math.min(tt.end,nt),!_e.extend&&rt>tt&&(nt=tt,tt=rt,rt=nt),nt=Ke(et,rt);var it=Ke(et,tt);nt&&it&&(_e.rangeCount!==1||_e.anchorNode!==nt.node||_e.anchorOffset!==nt.offset||_e.focusNode!==it.node||_e.focusOffset!==it.offset)&&($=$.createRange(),$.setStart(nt.node,nt.offset),_e.removeAllRanges(),rt>tt?(_e.addRange($),_e.extend(it.node,it.offset)):($.setEnd(it.node,it.offset),_e.addRange($)))}}for($=[],_e=et;_e=_e.parentNode;)_e.nodeType===1&&$.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<$.length;et++)_e=$[et],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te$1=!1;function Ue(_e,$,et){var tt=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te$1||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe$1(Re,"onSelect"),0<tt.length&&($=new td("onSelect","select",null,$,et),_e.push({event:$,listeners:tt}),$.target=Qe)))}function Ve(_e,$){var et={};return et[_e.toLowerCase()]=$.toLowerCase(),et["Webkit"+_e]="webkit"+$,et["Moz"+_e]="moz"+$,et}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var $=We[_e],et;for(et in $)if($.hasOwnProperty(et)&&et in Ye)return Xe[_e]=$[et];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,$){df.set(_e,$),fa($,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,$,et){var tt=_e.type||"unknown-event";_e.currentTarget=et,Ub(tt,$,void 0,_e),_e.currentTarget=null}function se$1(_e,$){$=($&4)!==0;for(var et=0;et<_e.length;et++){var tt=_e[et],nt=tt.event;tt=tt.listeners;e:{var rt=void 0;if($)for(var it=tt.length-1;0<=it;it--){var ot=tt[it],st=ot.instance,at=ot.currentTarget;if(ot=ot.listener,st!==rt&&nt.isPropagationStopped())break e;nf(nt,ot,at),rt=st}else for(it=0;it<tt.length;it++){if(ot=tt[it],st=ot.instance,at=ot.currentTarget,ot=ot.listener,st!==rt&&nt.isPropagationStopped())break e;nf(nt,ot,at),rt=st}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D$2(_e,$){var et=$[of];et===void 0&&(et=$[of]=new Set);var tt=_e+"__bubble";et.has(tt)||(pf($,_e,2,!1),et.add(tt))}function qf(_e,$,et){var tt=0;$&&(tt|=4),pf(et,_e,tt,$)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,_e),qf(et,!0,_e))});var $=_e.nodeType===9?_e:_e.ownerDocument;$===null||$[rf]||($[rf]=!0,qf("selectionchange",!1,$))}}function pf(_e,$,et,tt){switch(jd($)){case 1:var nt=ed;break;case 4:nt=gd;break;default:nt=fd}et=nt.bind(null,$,et,_e),nt=void 0,!Lb||$!=="touchstart"&&$!=="touchmove"&&$!=="wheel"||(nt=!0),tt?nt!==void 0?_e.addEventListener($,et,{capture:!0,passive:nt}):_e.addEventListener($,et,!0):nt!==void 0?_e.addEventListener($,et,{passive:nt}):_e.addEventListener($,et,!1)}function hd(_e,$,et,tt,nt){var rt=tt;if(!($&1)&&!($&2)&&tt!==null)e:for(;;){if(tt===null)return;var it=tt.tag;if(it===3||it===4){var ot=tt.stateNode.containerInfo;if(ot===nt||ot.nodeType===8&&ot.parentNode===nt)break;if(it===4)for(it=tt.return;it!==null;){var st=it.tag;if((st===3||st===4)&&(st=it.stateNode.containerInfo,st===nt||st.nodeType===8&&st.parentNode===nt))return;it=it.return}for(;ot!==null;){if(it=Wc(ot),it===null)return;if(st=it.tag,st===5||st===6){tt=rt=it;continue e}ot=ot.parentNode}}tt=tt.return}Jb(function(){var at=rt,lt=xb(et),dt=[];e:{var pt=df.get(_e);if(pt!==void 0){var ht=td,vt=_e;switch(_e){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":ht=Rd;break;case"focusin":vt="focus",ht=Fd;break;case"focusout":vt="blur",ht=Fd;break;case"beforeblur":case"afterblur":ht=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=Vd;break;case $e:case af:case bf:ht=Hd;break;case cf:ht=Xd;break;case"scroll":ht=vd;break;case"wheel":ht=Zd;break;case"copy":case"cut":case"paste":ht=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Td}var mt=($&4)!==0,kt=!mt&&_e==="scroll",bt=mt?pt!==null?pt+"Capture":null:pt;mt=[];for(var gt=at,St;gt!==null;){St=gt;var yt=St.stateNode;if(St.tag===5&&yt!==null&&(St=yt,bt!==null&&(yt=Kb(gt,bt),yt!=null&&mt.push(tf(gt,yt,St)))),kt)break;gt=gt.return}0<mt.length&&(pt=new ht(pt,vt,null,et,lt),dt.push({event:pt,listeners:mt}))}}if(!($&7)){e:{if(pt=_e==="mouseover"||_e==="pointerover",ht=_e==="mouseout"||_e==="pointerout",pt&&et!==wb&&(vt=et.relatedTarget||et.fromElement)&&(Wc(vt)||vt[uf]))break e;if((ht||pt)&&(pt=lt.window===lt?lt:(pt=lt.ownerDocument)?pt.defaultView||pt.parentWindow:window,ht?(vt=et.relatedTarget||et.toElement,ht=at,vt=vt?Wc(vt):null,vt!==null&&(kt=Vb(vt),vt!==kt||vt.tag!==5&&vt.tag!==6)&&(vt=null)):(ht=null,vt=at),ht!==vt)){if(mt=Bd,yt="onMouseLeave",bt="onMouseEnter",gt="mouse",(_e==="pointerout"||_e==="pointerover")&&(mt=Td,yt="onPointerLeave",bt="onPointerEnter",gt="pointer"),kt=ht==null?pt:ue(ht),St=vt==null?pt:ue(vt),pt=new mt(yt,gt+"leave",ht,et,lt),pt.target=kt,pt.relatedTarget=St,yt=null,Wc(lt)===at&&(mt=new mt(bt,gt+"enter",vt,et,lt),mt.target=St,mt.relatedTarget=kt,yt=mt),kt=yt,ht&&vt)t:{for(mt=ht,bt=vt,gt=0,St=mt;St;St=vf(St))gt++;for(St=0,yt=bt;yt;yt=vf(yt))St++;for(;0<gt-St;)mt=vf(mt),gt--;for(;0<St-gt;)bt=vf(bt),St--;for(;gt--;){if(mt===bt||bt!==null&&mt===bt.alternate)break t;mt=vf(mt),bt=vf(bt)}mt=null}else mt=null;ht!==null&&wf(dt,pt,ht,mt,!1),vt!==null&&kt!==null&&wf(dt,kt,vt,mt,!0)}}e:{if(pt=at?ue(at):window,ht=pt.nodeName&&pt.nodeName.toLowerCase(),ht==="select"||ht==="input"&&pt.type==="file")var Et=ve;else if(me(pt))if(we)Et=Fe;else{Et=De;var Tt=Ce}else(ht=pt.nodeName)&&ht.toLowerCase()==="input"&&(pt.type==="checkbox"||pt.type==="radio")&&(Et=Ee);if(Et&&(Et=Et(_e,at))){ne$1(dt,Et,et,lt);break e}Tt&&Tt(_e,pt,at),_e==="focusout"&&(Tt=pt._wrapperState)&&Tt.controlled&&pt.type==="number"&&cb(pt,"number",pt.value)}switch(Tt=at?ue(at):window,_e){case"focusin":(me(Tt)||Tt.contentEditable==="true")&&(Qe=Tt,Re=at,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(dt,et,lt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(dt,et,lt)}var wt;if(ae$1)e:{switch(_e){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else ie?ge(_e,et)&&(Rt="onCompositionEnd"):_e==="keydown"&&et.keyCode===229&&(Rt="onCompositionStart");Rt&&(de&&et.locale!=="ko"&&(ie||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&ie&&(wt=nd()):(kd=lt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Tt=oe$1(at,Rt),0<Tt.length&&(Rt=new Ld(Rt,_e,null,et,lt),dt.push({event:Rt,listeners:Tt}),wt?Rt.data=wt:(wt=he(et),wt!==null&&(Rt.data=wt)))),(wt=ce?je(_e,et):ke(_e,et))&&(at=oe$1(at,"onBeforeInput"),0<at.length&&(lt=new Ld("onBeforeInput","beforeinput",null,et,lt),dt.push({event:lt,listeners:at}),lt.data=wt))}se$1(dt,$)})}function tf(_e,$,et){return{instance:_e,listener:$,currentTarget:et}}function oe$1(_e,$){for(var et=$+"Capture",tt=[];_e!==null;){var nt=_e,rt=nt.stateNode;nt.tag===5&&rt!==null&&(nt=rt,rt=Kb(_e,et),rt!=null&&tt.unshift(tf(_e,rt,nt)),rt=Kb(_e,$),rt!=null&&tt.push(tf(_e,rt,nt))),_e=_e.return}return tt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,$,et,tt,nt){for(var rt=$._reactName,it=[];et!==null&&et!==tt;){var ot=et,st=ot.alternate,at=ot.stateNode;if(st!==null&&st===tt)break;ot.tag===5&&at!==null&&(ot=at,nt?(st=Kb(et,rt),st!=null&&it.unshift(tf(et,st,ot))):nt||(st=Kb(et,rt),st!=null&&it.push(tf(et,st,ot)))),et=et.return}it.length!==0&&_e.push({event:$,listeners:it})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,$,et){if($=zf($),zf(_e)!==$&&et)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,$){return _e==="textarea"||_e==="noscript"||typeof $.children=="string"||typeof $.children=="number"||typeof $.dangerouslySetInnerHTML=="object"&&$.dangerouslySetInnerHTML!==null&&$.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,$){var et=$,tt=0;do{var nt=et.nextSibling;if(_e.removeChild(et),nt&&nt.nodeType===8)if(et=nt.data,et==="/$"){if(tt===0){_e.removeChild(nt),bd($);return}tt--}else et!=="$"&&et!=="$?"&&et!=="$!"||tt++;et=nt}while(et);bd($)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var $=_e.nodeType;if($===1||$===3)break;if($===8){if($=_e.data,$==="$"||$==="$!"||$==="$?")break;if($==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var $=0;_e;){if(_e.nodeType===8){var et=_e.data;if(et==="$"||et==="$!"||et==="$?"){if($===0)return _e;$--}else et==="/$"&&$++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var $=_e[Of];if($)return $;for(var et=_e.parentNode;et;){if($=et[uf]||et[Of]){if(et=$.alternate,$.child!==null||et!==null&&et.child!==null)for(_e=Mf(_e);_e!==null;){if(et=_e[Of])return et;_e=Mf(_e)}return $}_e=et,et=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$1(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E$2(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(_e,$){Tf++,Sf[Tf]=_e.current,_e.current=$}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,$){var et=_e.type.contextTypes;if(!et)return Vf;var tt=_e.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===$)return tt.__reactInternalMemoizedMaskedChildContext;var nt={},rt;for(rt in et)nt[rt]=$[rt];return tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=$,_e.__reactInternalMemoizedMaskedChildContext=nt),nt}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E$2(Wf),E$2(H)}function ag(_e,$,et){if(H.current!==Vf)throw Error(p$1(168));G(H,$),G(Wf,et)}function bg(_e,$,et){var tt=_e.stateNode;if($=$.childContextTypes,typeof tt.getChildContext!="function")return et;tt=tt.getChildContext();for(var nt in tt)if(!(nt in $))throw Error(p$1(108,Ra(_e)||"Unknown",nt));return A$1({},et,tt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,_e),G(Wf,Wf.current),!0}function dg(_e,$,et){var tt=_e.stateNode;if(!tt)throw Error(p$1(169));et?(_e=bg(_e,$,Xf),tt.__reactInternalMemoizedMergedChildContext=_e,E$2(Wf),E$2(H),G(H,_e)):E$2(Wf),G(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,$=C$1;try{var et=eg;for(C$1=1;_e<et.length;_e++){var tt=et[_e];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(nt){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),nt}finally{C$1=$,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,$){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=$}function ug(_e,$,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var tt=rg;_e=sg;var nt=32-oc(tt)-1;tt&=~(1<<nt),et+=1;var rt=32-oc($)+nt;if(30<rt){var it=nt-nt%5;rt=(tt&(1<<it)-1).toString(32),tt>>=it,nt-=it,rg=1<<32-oc($)+nt|et<<nt|tt,sg=rt+_e}else rg=1<<rt|et<<nt|tt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(_e,$){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=$,et.return=_e,$=_e.deletions,$===null?(_e.deletions=[et],_e.flags|=16):$.push(et)}function Cg(_e,$){switch(_e.tag){case 5:var et=_e.type;return $=$.nodeType!==1||et.toLowerCase()!==$.nodeName.toLowerCase()?null:$,$!==null?(_e.stateNode=$,xg=_e,yg=Lf($.firstChild),!0):!1;case 6:return $=_e.pendingProps===""||$.nodeType!==3?null:$,$!==null?(_e.stateNode=$,xg=_e,yg=null,!0):!1;case 13:return $=$.nodeType!==8?null:$,$!==null?(et=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:$,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=$,et.return=_e,_e.child=et,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I$1){var $=yg;if($){var et=$;if(!Cg(_e,$)){if(Dg(_e))throw Error(p$1(418));$=Lf(et.nextSibling);var tt=xg;$&&Cg(_e,$)?Ag(tt,et):(_e.flags=_e.flags&-4097|2,I$1=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$1(418));_e.flags=_e.flags&-4097|2,I$1=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I$1)return Fg(_e),I$1=!0,!1;var $;if(($=_e.tag!==3)&&!($=_e.tag!==5)&&($=_e.type,$=$!=="head"&&$!=="body"&&!Ef(_e.type,_e.memoizedProps)),$&&($=yg)){if(Dg(_e))throw Hg(),Error(p$1(418));for(;$;)Ag(_e,$),$=Lf($.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$1(317));e:{for(_e=_e.nextSibling,$=0;_e;){if(_e.nodeType===8){var et=_e.data;if(et==="/$"){if($===0){yg=Lf(_e.nextSibling);break e}$--}else et!=="$"&&et!=="$!"&&et!=="$?"||$++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_e,$,et){if(_e=et.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$1(309));var tt=et.stateNode}if(!tt)throw Error(p$1(147,_e));var nt=tt,rt=""+_e;return $!==null&&$.ref!==null&&typeof $.ref=="function"&&$.ref._stringRef===rt?$.ref:($=function(it){var ot=nt.refs;it===null?delete ot[rt]:ot[rt]=it},$._stringRef=rt,$)}if(typeof _e!="string")throw Error(p$1(284));if(!et._owner)throw Error(p$1(290,_e))}return _e}function Mg(_e,$){throw _e=Object.prototype.toString.call($),Error(p$1(31,_e==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":_e))}function Ng(_e){var $=_e._init;return $(_e._payload)}function Og(_e){function $(bt,gt){if(_e){var St=bt.deletions;St===null?(bt.deletions=[gt],bt.flags|=16):St.push(gt)}}function et(bt,gt){if(!_e)return null;for(;gt!==null;)$(bt,gt),gt=gt.sibling;return null}function tt(bt,gt){for(bt=new Map;gt!==null;)gt.key!==null?bt.set(gt.key,gt):bt.set(gt.index,gt),gt=gt.sibling;return bt}function nt(bt,gt){return bt=Pg(bt,gt),bt.index=0,bt.sibling=null,bt}function rt(bt,gt,St){return bt.index=St,_e?(St=bt.alternate,St!==null?(St=St.index,St<gt?(bt.flags|=2,gt):St):(bt.flags|=2,gt)):(bt.flags|=1048576,gt)}function it(bt){return _e&&bt.alternate===null&&(bt.flags|=2),bt}function ot(bt,gt,St,yt){return gt===null||gt.tag!==6?(gt=Qg(St,bt.mode,yt),gt.return=bt,gt):(gt=nt(gt,St),gt.return=bt,gt)}function st(bt,gt,St,yt){var Et=St.type;return Et===ya?lt(bt,gt,St.props.children,yt,St.key):gt!==null&&(gt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===Ha&&Ng(Et)===gt.type)?(yt=nt(gt,St.props),yt.ref=Lg(bt,gt,St),yt.return=bt,yt):(yt=Rg(St.type,St.key,St.props,null,bt.mode,yt),yt.ref=Lg(bt,gt,St),yt.return=bt,yt)}function at(bt,gt,St,yt){return gt===null||gt.tag!==4||gt.stateNode.containerInfo!==St.containerInfo||gt.stateNode.implementation!==St.implementation?(gt=Sg(St,bt.mode,yt),gt.return=bt,gt):(gt=nt(gt,St.children||[]),gt.return=bt,gt)}function lt(bt,gt,St,yt,Et){return gt===null||gt.tag!==7?(gt=Tg(St,bt.mode,yt,Et),gt.return=bt,gt):(gt=nt(gt,St),gt.return=bt,gt)}function dt(bt,gt,St){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return gt=Qg(""+gt,bt.mode,St),gt.return=bt,gt;if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case va:return St=Rg(gt.type,gt.key,gt.props,null,bt.mode,St),St.ref=Lg(bt,null,gt),St.return=bt,St;case wa:return gt=Sg(gt,bt.mode,St),gt.return=bt,gt;case Ha:var yt=gt._init;return dt(bt,yt(gt._payload),St)}if(eb(gt)||Ka(gt))return gt=Tg(gt,bt.mode,St,null),gt.return=bt,gt;Mg(bt,gt)}return null}function pt(bt,gt,St,yt){var Et=gt!==null?gt.key:null;if(typeof St=="string"&&St!==""||typeof St=="number")return Et!==null?null:ot(bt,gt,""+St,yt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case va:return St.key===Et?st(bt,gt,St,yt):null;case wa:return St.key===Et?at(bt,gt,St,yt):null;case Ha:return Et=St._init,pt(bt,gt,Et(St._payload),yt)}if(eb(St)||Ka(St))return Et!==null?null:lt(bt,gt,St,yt,null);Mg(bt,St)}return null}function ht(bt,gt,St,yt,Et){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return bt=bt.get(St)||null,ot(gt,bt,""+yt,Et);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return bt=bt.get(yt.key===null?St:yt.key)||null,st(gt,bt,yt,Et);case wa:return bt=bt.get(yt.key===null?St:yt.key)||null,at(gt,bt,yt,Et);case Ha:var Tt=yt._init;return ht(bt,gt,St,Tt(yt._payload),Et)}if(eb(yt)||Ka(yt))return bt=bt.get(St)||null,lt(gt,bt,yt,Et,null);Mg(gt,yt)}return null}function vt(bt,gt,St,yt){for(var Et=null,Tt=null,wt=gt,Rt=gt=0,xt=null;wt!==null&&Rt<St.length;Rt++){wt.index>Rt?(xt=wt,wt=null):xt=wt.sibling;var Pt=pt(bt,wt,St[Rt],yt);if(Pt===null){wt===null&&(wt=xt);break}_e&&wt&&Pt.alternate===null&&$(bt,wt),gt=rt(Pt,gt,Rt),Tt===null?Et=Pt:Tt.sibling=Pt,Tt=Pt,wt=xt}if(Rt===St.length)return et(bt,wt),I$1&&tg(bt,Rt),Et;if(wt===null){for(;Rt<St.length;Rt++)wt=dt(bt,St[Rt],yt),wt!==null&&(gt=rt(wt,gt,Rt),Tt===null?Et=wt:Tt.sibling=wt,Tt=wt);return I$1&&tg(bt,Rt),Et}for(wt=tt(bt,wt);Rt<St.length;Rt++)xt=ht(wt,bt,Rt,St[Rt],yt),xt!==null&&(_e&&xt.alternate!==null&&wt.delete(xt.key===null?Rt:xt.key),gt=rt(xt,gt,Rt),Tt===null?Et=xt:Tt.sibling=xt,Tt=xt);return _e&&wt.forEach(function(At){return $(bt,At)}),I$1&&tg(bt,Rt),Et}function mt(bt,gt,St,yt){var Et=Ka(St);if(typeof Et!="function")throw Error(p$1(150));if(St=Et.call(St),St==null)throw Error(p$1(151));for(var Tt=Et=null,wt=gt,Rt=gt=0,xt=null,Pt=St.next();wt!==null&&!Pt.done;Rt++,Pt=St.next()){wt.index>Rt?(xt=wt,wt=null):xt=wt.sibling;var At=pt(bt,wt,Pt.value,yt);if(At===null){wt===null&&(wt=xt);break}_e&&wt&&At.alternate===null&&$(bt,wt),gt=rt(At,gt,Rt),Tt===null?Et=At:Tt.sibling=At,Tt=At,wt=xt}if(Pt.done)return et(bt,wt),I$1&&tg(bt,Rt),Et;if(wt===null){for(;!Pt.done;Rt++,Pt=St.next())Pt=dt(bt,Pt.value,yt),Pt!==null&&(gt=rt(Pt,gt,Rt),Tt===null?Et=Pt:Tt.sibling=Pt,Tt=Pt);return I$1&&tg(bt,Rt),Et}for(wt=tt(bt,wt);!Pt.done;Rt++,Pt=St.next())Pt=ht(wt,bt,Rt,Pt.value,yt),Pt!==null&&(_e&&Pt.alternate!==null&&wt.delete(Pt.key===null?Rt:Pt.key),gt=rt(Pt,gt,Rt),Tt===null?Et=Pt:Tt.sibling=Pt,Tt=Pt);return _e&&wt.forEach(function(Nt){return $(bt,Nt)}),I$1&&tg(bt,Rt),Et}function kt(bt,gt,St,yt){if(typeof St=="object"&&St!==null&&St.type===ya&&St.key===null&&(St=St.props.children),typeof St=="object"&&St!==null){switch(St.$$typeof){case va:e:{for(var Et=St.key,Tt=gt;Tt!==null;){if(Tt.key===Et){if(Et=St.type,Et===ya){if(Tt.tag===7){et(bt,Tt.sibling),gt=nt(Tt,St.props.children),gt.return=bt,bt=gt;break e}}else if(Tt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===Ha&&Ng(Et)===Tt.type){et(bt,Tt.sibling),gt=nt(Tt,St.props),gt.ref=Lg(bt,Tt,St),gt.return=bt,bt=gt;break e}et(bt,Tt);break}else $(bt,Tt);Tt=Tt.sibling}St.type===ya?(gt=Tg(St.props.children,bt.mode,yt,St.key),gt.return=bt,bt=gt):(yt=Rg(St.type,St.key,St.props,null,bt.mode,yt),yt.ref=Lg(bt,gt,St),yt.return=bt,bt=yt)}return it(bt);case wa:e:{for(Tt=St.key;gt!==null;){if(gt.key===Tt)if(gt.tag===4&&gt.stateNode.containerInfo===St.containerInfo&&gt.stateNode.implementation===St.implementation){et(bt,gt.sibling),gt=nt(gt,St.children||[]),gt.return=bt,bt=gt;break e}else{et(bt,gt);break}else $(bt,gt);gt=gt.sibling}gt=Sg(St,bt.mode,yt),gt.return=bt,bt=gt}return it(bt);case Ha:return Tt=St._init,kt(bt,gt,Tt(St._payload),yt)}if(eb(St))return vt(bt,gt,St,yt);if(Ka(St))return mt(bt,gt,St,yt);Mg(bt,St)}return typeof St=="string"&&St!==""||typeof St=="number"?(St=""+St,gt!==null&&gt.tag===6?(et(bt,gt.sibling),gt=nt(gt,St),gt.return=bt,bt=gt):(et(bt,gt),gt=Qg(St,bt.mode,yt),gt.return=bt,bt=gt),it(bt)):et(bt,gt)}return kt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_e){var $=Wg.current;E$2(Wg),_e._currentValue=$}function bh(_e,$,et){for(;_e!==null;){var tt=_e.alternate;if((_e.childLanes&$)!==$?(_e.childLanes|=$,tt!==null&&(tt.childLanes|=$)):tt!==null&&(tt.childLanes&$)!==$&&(tt.childLanes|=$),_e===et)break;_e=_e.return}}function ch(_e,$){Xg=_e,Zg=Yg=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&$&&(dh=!0),_e.firstContext=null)}function eh(_e){var $=_e._currentValue;if(Zg!==_e)if(_e={context:_e,memoizedValue:$,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=_e,Xg.dependencies={lanes:0,firstContext:_e}}else Yg=Yg.next=_e;return $}var fh=null;function gh(_e){fh===null?fh=[_e]:fh.push(_e)}function hh(_e,$,et,tt){var nt=$.interleaved;return nt===null?(et.next=et,gh($)):(et.next=nt.next,nt.next=et),$.interleaved=et,ih(_e,tt)}function ih(_e,$){_e.lanes|=$;var et=_e.alternate;for(et!==null&&(et.lanes|=$),et=_e,_e=_e.return;_e!==null;)_e.childLanes|=$,et=_e.alternate,et!==null&&(et.childLanes|=$),et=_e,_e=_e.return;return et.tag===3?et.stateNode:null}var jh=!1;function kh(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_e,$){_e=_e.updateQueue,$.updateQueue===_e&&($.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function mh(_e,$){return{eventTime:_e,lane:$,tag:0,payload:null,callback:null,next:null}}function nh(_e,$,et){var tt=_e.updateQueue;if(tt===null)return null;if(tt=tt.shared,K&2){var nt=tt.pending;return nt===null?$.next=$:($.next=nt.next,nt.next=$),tt.pending=$,ih(_e,et)}return nt=tt.interleaved,nt===null?($.next=$,gh(tt)):($.next=nt.next,nt.next=$),tt.interleaved=$,ih(_e,et)}function oh(_e,$,et){if($=$.updateQueue,$!==null&&($=$.shared,(et&4194240)!==0)){var tt=$.lanes;tt&=_e.pendingLanes,et|=tt,$.lanes=et,Cc(_e,et)}}function ph(_e,$){var et=_e.updateQueue,tt=_e.alternate;if(tt!==null&&(tt=tt.updateQueue,et===tt)){var nt=null,rt=null;if(et=et.firstBaseUpdate,et!==null){do{var it={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};rt===null?nt=rt=it:rt=rt.next=it,et=et.next}while(et!==null);rt===null?nt=rt=$:rt=rt.next=$}else nt=rt=$;et={baseState:tt.baseState,firstBaseUpdate:nt,lastBaseUpdate:rt,shared:tt.shared,effects:tt.effects},_e.updateQueue=et;return}_e=et.lastBaseUpdate,_e===null?et.firstBaseUpdate=$:_e.next=$,et.lastBaseUpdate=$}function qh(_e,$,et,tt){var nt=_e.updateQueue;jh=!1;var rt=nt.firstBaseUpdate,it=nt.lastBaseUpdate,ot=nt.shared.pending;if(ot!==null){nt.shared.pending=null;var st=ot,at=st.next;st.next=null,it===null?rt=at:it.next=at,it=st;var lt=_e.alternate;lt!==null&&(lt=lt.updateQueue,ot=lt.lastBaseUpdate,ot!==it&&(ot===null?lt.firstBaseUpdate=at:ot.next=at,lt.lastBaseUpdate=st))}if(rt!==null){var dt=nt.baseState;it=0,lt=at=st=null,ot=rt;do{var pt=ot.lane,ht=ot.eventTime;if((tt&pt)===pt){lt!==null&&(lt=lt.next={eventTime:ht,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var vt=_e,mt=ot;switch(pt=$,ht=et,mt.tag){case 1:if(vt=mt.payload,typeof vt=="function"){dt=vt.call(ht,dt,pt);break e}dt=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=mt.payload,pt=typeof vt=="function"?vt.call(ht,dt,pt):vt,pt==null)break e;dt=A$1({},dt,pt);break e;case 2:jh=!0}}ot.callback!==null&&ot.lane!==0&&(_e.flags|=64,pt=nt.effects,pt===null?nt.effects=[ot]:pt.push(ot))}else ht={eventTime:ht,lane:pt,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},lt===null?(at=lt=ht,st=dt):lt=lt.next=ht,it|=pt;if(ot=ot.next,ot===null){if(ot=nt.shared.pending,ot===null)break;pt=ot,ot=pt.next,pt.next=null,nt.lastBaseUpdate=pt,nt.shared.pending=null}}while(!0);if(lt===null&&(st=dt),nt.baseState=st,nt.firstBaseUpdate=at,nt.lastBaseUpdate=lt,$=nt.shared.interleaved,$!==null){nt=$;do it|=nt.lane,nt=nt.next;while(nt!==$)}else rt===null&&(nt.shared.lanes=0);rh|=it,_e.lanes=it,_e.memoizedState=dt}}function sh(_e,$,et){if(_e=$.effects,$.effects=null,_e!==null)for($=0;$<_e.length;$++){var tt=_e[$],nt=tt.callback;if(nt!==null){if(tt.callback=null,tt=et,typeof nt!="function")throw Error(p$1(191,nt));nt.call(tt)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(_e){if(_e===th)throw Error(p$1(174));return _e}function yh(_e,$){switch(G(wh,$),G(vh,_e),G(uh,th),_e=$.nodeType,_e){case 9:case 11:$=($=$.documentElement)?$.namespaceURI:lb(null,"");break;default:_e=_e===8?$.parentNode:$,$=_e.namespaceURI||null,_e=_e.tagName,$=lb($,_e)}E$2(uh),G(uh,$)}function zh(){E$2(uh),E$2(vh),E$2(wh)}function Ah(_e){xh(wh.current);var $=xh(uh.current),et=lb($,_e.type);$!==et&&(G(vh,_e),G(uh,et))}function Bh(_e){vh.current===_e&&(E$2(uh),E$2(vh))}var L$2=Uf(0);function Ch(_e){for(var $=_e;$!==null;){if($.tag===13){var et=$.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return $}else if($.tag===19&&$.memoizedProps.revealOrder!==void 0){if($.flags&128)return $}else if($.child!==null){$.child.return=$,$=$.child;continue}if($===_e)break;for(;$.sibling===null;){if($.return===null||$.return===_e)return null;$=$.return}$.sibling.return=$.return,$=$.sibling}return null}var Dh=[];function Eh(){for(var _e=0;_e<Dh.length;_e++)Dh[_e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$2(){throw Error(p$1(321))}function Mh(_e,$){if($===null)return!1;for(var et=0;et<$.length&&et<_e.length;et++)if(!He(_e[et],$[et]))return!1;return!0}function Nh(_e,$,et,tt,nt,rt){if(Hh=rt,M$1=$,$.memoizedState=null,$.updateQueue=null,$.lanes=0,Fh.current=_e===null||_e.memoizedState===null?Oh:Ph,_e=et(tt,nt),Jh){rt=0;do{if(Jh=!1,Kh=0,25<=rt)throw Error(p$1(301));rt+=1,O$1=N$1=null,$.updateQueue=null,Fh.current=Qh,_e=et(tt,nt)}while(Jh)}if(Fh.current=Rh,$=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$1=null,Ih=!1,$)throw Error(p$1(300));return _e}function Sh(){var _e=Kh!==0;return Kh=0,_e}function Th(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=_e:O$1=O$1.next=_e,O$1}function Uh(){if(N$1===null){var _e=M$1.alternate;_e=_e!==null?_e.memoizedState:null}else _e=N$1.next;var $=O$1===null?M$1.memoizedState:O$1.next;if($!==null)O$1=$,N$1=_e;else{if(_e===null)throw Error(p$1(310));N$1=_e,_e={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=_e:O$1=O$1.next=_e}return O$1}function Vh(_e,$){return typeof $=="function"?$(_e):$}function Wh(_e){var $=Uh(),et=$.queue;if(et===null)throw Error(p$1(311));et.lastRenderedReducer=_e;var tt=N$1,nt=tt.baseQueue,rt=et.pending;if(rt!==null){if(nt!==null){var it=nt.next;nt.next=rt.next,rt.next=it}tt.baseQueue=nt=rt,et.pending=null}if(nt!==null){rt=nt.next,tt=tt.baseState;var ot=it=null,st=null,at=rt;do{var lt=at.lane;if((Hh&lt)===lt)st!==null&&(st=st.next={lane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),tt=at.hasEagerState?at.eagerState:_e(tt,at.action);else{var dt={lane:lt,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};st===null?(ot=st=dt,it=tt):st=st.next=dt,M$1.lanes|=lt,rh|=lt}at=at.next}while(at!==null&&at!==rt);st===null?it=tt:st.next=ot,He(tt,$.memoizedState)||(dh=!0),$.memoizedState=tt,$.baseState=it,$.baseQueue=st,et.lastRenderedState=tt}if(_e=et.interleaved,_e!==null){nt=_e;do rt=nt.lane,M$1.lanes|=rt,rh|=rt,nt=nt.next;while(nt!==_e)}else nt===null&&(et.lanes=0);return[$.memoizedState,et.dispatch]}function Xh(_e){var $=Uh(),et=$.queue;if(et===null)throw Error(p$1(311));et.lastRenderedReducer=_e;var tt=et.dispatch,nt=et.pending,rt=$.memoizedState;if(nt!==null){et.pending=null;var it=nt=nt.next;do rt=_e(rt,it.action),it=it.next;while(it!==nt);He(rt,$.memoizedState)||(dh=!0),$.memoizedState=rt,$.baseQueue===null&&($.baseState=rt),et.lastRenderedState=rt}return[rt,tt]}function Yh(){}function Zh(_e,$){var et=M$1,tt=Uh(),nt=$(),rt=!He(tt.memoizedState,nt);if(rt&&(tt.memoizedState=nt,dh=!0),tt=tt.queue,$h(ai.bind(null,et,tt,_e),[_e]),tt.getSnapshot!==$||rt||O$1!==null&&O$1.memoizedState.tag&1){if(et.flags|=2048,bi(9,ci.bind(null,et,tt,nt,$),void 0,null),Q===null)throw Error(p$1(349));Hh&30||di(et,$,nt)}return nt}function di(_e,$,et){_e.flags|=16384,_e={getSnapshot:$,value:et},$=M$1.updateQueue,$===null?($={lastEffect:null,stores:null},M$1.updateQueue=$,$.stores=[_e]):(et=$.stores,et===null?$.stores=[_e]:et.push(_e))}function ci(_e,$,et,tt){$.value=et,$.getSnapshot=tt,ei($)&&fi(_e)}function ai(_e,$,et){return et(function(){ei($)&&fi(_e)})}function ei(_e){var $=_e.getSnapshot;_e=_e.value;try{var et=$();return!He(_e,et)}catch{return!0}}function fi(_e){var $=ih(_e,1);$!==null&&gi($,_e,1,-1)}function hi(_e){var $=Th();return typeof _e=="function"&&(_e=_e()),$.memoizedState=$.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_e},$.queue=_e,_e=_e.dispatch=ii.bind(null,M$1,_e),[$.memoizedState,_e]}function bi(_e,$,et,tt){return _e={tag:_e,create:$,destroy:et,deps:tt,next:null},$=M$1.updateQueue,$===null?($={lastEffect:null,stores:null},M$1.updateQueue=$,$.lastEffect=_e.next=_e):(et=$.lastEffect,et===null?$.lastEffect=_e.next=_e:(tt=et.next,et.next=_e,_e.next=tt,$.lastEffect=_e)),_e}function ji(){return Uh().memoizedState}function ki(_e,$,et,tt){var nt=Th();M$1.flags|=_e,nt.memoizedState=bi(1|$,et,void 0,tt===void 0?null:tt)}function li(_e,$,et,tt){var nt=Uh();tt=tt===void 0?null:tt;var rt=void 0;if(N$1!==null){var it=N$1.memoizedState;if(rt=it.destroy,tt!==null&&Mh(tt,it.deps)){nt.memoizedState=bi($,et,rt,tt);return}}M$1.flags|=_e,nt.memoizedState=bi(1|$,et,rt,tt)}function mi(_e,$){return ki(8390656,8,_e,$)}function $h(_e,$){return li(2048,8,_e,$)}function ni(_e,$){return li(4,2,_e,$)}function oi(_e,$){return li(4,4,_e,$)}function pi(_e,$){if(typeof $=="function")return _e=_e(),$(_e),function(){$(null)};if($!=null)return _e=_e(),$.current=_e,function(){$.current=null}}function qi(_e,$,et){return et=et!=null?et.concat([_e]):null,li(4,4,pi.bind(null,$,_e),et)}function ri(){}function si(_e,$){var et=Uh();$=$===void 0?null:$;var tt=et.memoizedState;return tt!==null&&$!==null&&Mh($,tt[1])?tt[0]:(et.memoizedState=[_e,$],_e)}function ti(_e,$){var et=Uh();$=$===void 0?null:$;var tt=et.memoizedState;return tt!==null&&$!==null&&Mh($,tt[1])?tt[0]:(_e=_e(),et.memoizedState=[_e,$],_e)}function ui(_e,$,et){return Hh&21?(He(et,$)||(et=yc(),M$1.lanes|=et,rh|=et,_e.baseState=!0),$):(_e.baseState&&(_e.baseState=!1,dh=!0),_e.memoizedState=et)}function vi(_e,$){var et=C$1;C$1=et!==0&&4>et?et:4,_e(!0);var tt=Gh.transition;Gh.transition={};try{_e(!1),$()}finally{C$1=et,Gh.transition=tt}}function wi(){return Uh().memoizedState}function xi(_e,$,et){var tt=yi(_e);if(et={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null},zi(_e))Ai($,et);else if(et=hh(_e,$,et,tt),et!==null){var nt=R$1();gi(et,_e,tt,nt),Bi(et,$,tt)}}function ii(_e,$,et){var tt=yi(_e),nt={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null};if(zi(_e))Ai($,nt);else{var rt=_e.alternate;if(_e.lanes===0&&(rt===null||rt.lanes===0)&&(rt=$.lastRenderedReducer,rt!==null))try{var it=$.lastRenderedState,ot=rt(it,et);if(nt.hasEagerState=!0,nt.eagerState=ot,He(ot,it)){var st=$.interleaved;st===null?(nt.next=nt,gh($)):(nt.next=st.next,st.next=nt),$.interleaved=nt;return}}catch{}finally{}et=hh(_e,$,nt,tt),et!==null&&(nt=R$1(),gi(et,_e,tt,nt),Bi(et,$,tt))}}function zi(_e){var $=_e.alternate;return _e===M$1||$!==null&&$===M$1}function Ai(_e,$){Jh=Ih=!0;var et=_e.pending;et===null?$.next=$:($.next=et.next,et.next=$),_e.pending=$}function Bi(_e,$,et){if(et&4194240){var tt=$.lanes;tt&=_e.pendingLanes,et|=tt,$.lanes=et,Cc(_e,et)}}var Rh={readContext:eh,useCallback:P$2,useContext:P$2,useEffect:P$2,useImperativeHandle:P$2,useInsertionEffect:P$2,useLayoutEffect:P$2,useMemo:P$2,useReducer:P$2,useRef:P$2,useState:P$2,useDebugValue:P$2,useDeferredValue:P$2,useTransition:P$2,useMutableSource:P$2,useSyncExternalStore:P$2,useId:P$2,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_e,$){return Th().memoizedState=[_e,$===void 0?null:$],_e},useContext:eh,useEffect:mi,useImperativeHandle:function(_e,$,et){return et=et!=null?et.concat([_e]):null,ki(4194308,4,pi.bind(null,$,_e),et)},useLayoutEffect:function(_e,$){return ki(4194308,4,_e,$)},useInsertionEffect:function(_e,$){return ki(4,2,_e,$)},useMemo:function(_e,$){var et=Th();return $=$===void 0?null:$,_e=_e(),et.memoizedState=[_e,$],_e},useReducer:function(_e,$,et){var tt=Th();return $=et!==void 0?et($):$,tt.memoizedState=tt.baseState=$,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:$},tt.queue=_e,_e=_e.dispatch=xi.bind(null,M$1,_e),[tt.memoizedState,_e]},useRef:function(_e){var $=Th();return _e={current:_e},$.memoizedState=_e},useState:hi,useDebugValue:ri,useDeferredValue:function(_e){return Th().memoizedState=_e},useTransition:function(){var _e=hi(!1),$=_e[0];return _e=vi.bind(null,_e[1]),Th().memoizedState=_e,[$,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,$,et){var tt=M$1,nt=Th();if(I$1){if(et===void 0)throw Error(p$1(407));et=et()}else{if(et=$(),Q===null)throw Error(p$1(349));Hh&30||di(tt,$,et)}nt.memoizedState=et;var rt={value:et,getSnapshot:$};return nt.queue=rt,mi(ai.bind(null,tt,rt,_e),[_e]),tt.flags|=2048,bi(9,ci.bind(null,tt,rt,et,$),void 0,null),et},useId:function(){var _e=Th(),$=Q.identifierPrefix;if(I$1){var et=sg,tt=rg;et=(tt&~(1<<32-oc(tt)-1)).toString(32)+et,$=":"+$+"R"+et,et=Kh++,0<et&&($+="H"+et.toString(32)),$+=":"}else et=Lh++,$=":"+$+"r"+et.toString(32)+":";return _e.memoizedState=$},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var $=Uh();return ui($,N$1.memoizedState,_e)},useTransition:function(){var _e=Wh(Vh)[0],$=Uh().memoizedState;return[_e,$]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var $=Uh();return N$1===null?$.memoizedState=_e:ui($,N$1.memoizedState,_e)},useTransition:function(){var _e=Xh(Vh)[0],$=Uh().memoizedState;return[_e,$]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_e,$){if(_e&&_e.defaultProps){$=A$1({},$),_e=_e.defaultProps;for(var et in _e)$[et]===void 0&&($[et]=_e[et]);return $}return $}function Di(_e,$,et,tt){$=_e.memoizedState,et=et(tt,$),et=et==null?$:A$1({},$,et),_e.memoizedState=et,_e.lanes===0&&(_e.updateQueue.baseState=et)}var Ei={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,$,et){_e=_e._reactInternals;var tt=R$1(),nt=yi(_e),rt=mh(tt,nt);rt.payload=$,et!=null&&(rt.callback=et),$=nh(_e,rt,nt),$!==null&&(gi($,_e,nt,tt),oh($,_e,nt))},enqueueReplaceState:function(_e,$,et){_e=_e._reactInternals;var tt=R$1(),nt=yi(_e),rt=mh(tt,nt);rt.tag=1,rt.payload=$,et!=null&&(rt.callback=et),$=nh(_e,rt,nt),$!==null&&(gi($,_e,nt,tt),oh($,_e,nt))},enqueueForceUpdate:function(_e,$){_e=_e._reactInternals;var et=R$1(),tt=yi(_e),nt=mh(et,tt);nt.tag=2,$!=null&&(nt.callback=$),$=nh(_e,nt,tt),$!==null&&(gi($,_e,tt,et),oh($,_e,tt))}};function Fi(_e,$,et,tt,nt,rt,it){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(tt,rt,it):$.prototype&&$.prototype.isPureReactComponent?!Ie(et,tt)||!Ie(nt,rt):!0}function Gi(_e,$,et){var tt=!1,nt=Vf,rt=$.contextType;return typeof rt=="object"&&rt!==null?rt=eh(rt):(nt=Zf($)?Xf:H.current,tt=$.contextTypes,rt=(tt=tt!=null)?Yf(_e,nt):Vf),$=new $(et,rt),_e.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=Ei,_e.stateNode=$,$._reactInternals=_e,tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=nt,_e.__reactInternalMemoizedMaskedChildContext=rt),$}function Hi(_e,$,et,tt){_e=$.state,typeof $.componentWillReceiveProps=="function"&&$.componentWillReceiveProps(et,tt),typeof $.UNSAFE_componentWillReceiveProps=="function"&&$.UNSAFE_componentWillReceiveProps(et,tt),$.state!==_e&&Ei.enqueueReplaceState($,$.state,null)}function Ii(_e,$,et,tt){var nt=_e.stateNode;nt.props=et,nt.state=_e.memoizedState,nt.refs={},kh(_e);var rt=$.contextType;typeof rt=="object"&&rt!==null?nt.context=eh(rt):(rt=Zf($)?Xf:H.current,nt.context=Yf(_e,rt)),nt.state=_e.memoizedState,rt=$.getDerivedStateFromProps,typeof rt=="function"&&(Di(_e,$,rt,et),nt.state=_e.memoizedState),typeof $.getDerivedStateFromProps=="function"||typeof nt.getSnapshotBeforeUpdate=="function"||typeof nt.UNSAFE_componentWillMount!="function"&&typeof nt.componentWillMount!="function"||($=nt.state,typeof nt.componentWillMount=="function"&&nt.componentWillMount(),typeof nt.UNSAFE_componentWillMount=="function"&&nt.UNSAFE_componentWillMount(),$!==nt.state&&Ei.enqueueReplaceState(nt,nt.state,null),qh(_e,et,nt,tt),nt.state=_e.memoizedState),typeof nt.componentDidMount=="function"&&(_e.flags|=4194308)}function Ji(_e,$){try{var et="",tt=$;do et+=Pa(tt),tt=tt.return;while(tt);var nt=et}catch(rt){nt=`
Error generating stack: `+rt.message+`
`+rt.stack}return{value:_e,source:$,stack:nt,digest:null}}function Ki(_e,$,et){return{value:_e,source:null,stack:et??null,digest:$??null}}function Li(_e,$){try{console.error($.value)}catch(et){setTimeout(function(){throw et})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_e,$,et){et=mh(-1,et),et.tag=3,et.payload={element:null};var tt=$.value;return et.callback=function(){Oi||(Oi=!0,Pi=tt),Li(_e,$)},et}function Qi(_e,$,et){et=mh(-1,et),et.tag=3;var tt=_e.type.getDerivedStateFromError;if(typeof tt=="function"){var nt=$.value;et.payload=function(){return tt(nt)},et.callback=function(){Li(_e,$)}}var rt=_e.stateNode;return rt!==null&&typeof rt.componentDidCatch=="function"&&(et.callback=function(){Li(_e,$),typeof tt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var it=$.stack;this.componentDidCatch($.value,{componentStack:it!==null?it:""})}),et}function Si(_e,$,et){var tt=_e.pingCache;if(tt===null){tt=_e.pingCache=new Mi;var nt=new Set;tt.set($,nt)}else nt=tt.get($),nt===void 0&&(nt=new Set,tt.set($,nt));nt.has(et)||(nt.add(et),_e=Ti.bind(null,_e,$,et),$.then(_e,_e))}function Ui(_e){do{var $;if(($=_e.tag===13)&&($=_e.memoizedState,$=$!==null?$.dehydrated!==null:!0),$)return _e;_e=_e.return}while(_e!==null);return null}function Vi(_e,$,et,tt,nt){return _e.mode&1?(_e.flags|=65536,_e.lanes=nt,_e):(_e===$?_e.flags|=65536:(_e.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:($=mh(-1,1),$.tag=2,nh(et,$,1))),et.lanes|=1),_e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(_e,$,et,tt){$.child=_e===null?Vg($,null,et,tt):Ug($,_e.child,et,tt)}function Yi(_e,$,et,tt,nt){et=et.render;var rt=$.ref;return ch($,nt),tt=Nh(_e,$,et,tt,rt,nt),et=Sh(),_e!==null&&!dh?($.updateQueue=_e.updateQueue,$.flags&=-2053,_e.lanes&=~nt,Zi(_e,$,nt)):(I$1&&et&&vg($),$.flags|=1,Xi(_e,$,tt,nt),$.child)}function $i(_e,$,et,tt,nt){if(_e===null){var rt=et.type;return typeof rt=="function"&&!aj(rt)&&rt.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?($.tag=15,$.type=rt,bj(_e,$,rt,tt,nt)):(_e=Rg(et.type,null,tt,$,$.mode,nt),_e.ref=$.ref,_e.return=$,$.child=_e)}if(rt=_e.child,!(_e.lanes&nt)){var it=rt.memoizedProps;if(et=et.compare,et=et!==null?et:Ie,et(it,tt)&&_e.ref===$.ref)return Zi(_e,$,nt)}return $.flags|=1,_e=Pg(rt,tt),_e.ref=$.ref,_e.return=$,$.child=_e}function bj(_e,$,et,tt,nt){if(_e!==null){var rt=_e.memoizedProps;if(Ie(rt,tt)&&_e.ref===$.ref)if(dh=!1,$.pendingProps=tt=rt,(_e.lanes&nt)!==0)_e.flags&131072&&(dh=!0);else return $.lanes=_e.lanes,Zi(_e,$,nt)}return cj(_e,$,et,tt,nt)}function dj(_e,$,et){var tt=$.pendingProps,nt=tt.children,rt=_e!==null?_e.memoizedState:null;if(tt.mode==="hidden")if(!($.mode&1))$.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=et;else{if(!(et&1073741824))return _e=rt!==null?rt.baseLanes|et:et,$.lanes=$.childLanes=1073741824,$.memoizedState={baseLanes:_e,cachePool:null,transitions:null},$.updateQueue=null,G(ej,fj),fj|=_e,null;$.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=rt!==null?rt.baseLanes:et,G(ej,fj),fj|=tt}else rt!==null?(tt=rt.baseLanes|et,$.memoizedState=null):tt=et,G(ej,fj),fj|=tt;return Xi(_e,$,nt,et),$.child}function gj(_e,$){var et=$.ref;(_e===null&&et!==null||_e!==null&&_e.ref!==et)&&($.flags|=512,$.flags|=2097152)}function cj(_e,$,et,tt,nt){var rt=Zf(et)?Xf:H.current;return rt=Yf($,rt),ch($,nt),et=Nh(_e,$,et,tt,rt,nt),tt=Sh(),_e!==null&&!dh?($.updateQueue=_e.updateQueue,$.flags&=-2053,_e.lanes&=~nt,Zi(_e,$,nt)):(I$1&&tt&&vg($),$.flags|=1,Xi(_e,$,et,nt),$.child)}function hj(_e,$,et,tt,nt){if(Zf(et)){var rt=!0;cg($)}else rt=!1;if(ch($,nt),$.stateNode===null)ij(_e,$),Gi($,et,tt),Ii($,et,tt,nt),tt=!0;else if(_e===null){var it=$.stateNode,ot=$.memoizedProps;it.props=ot;var st=it.context,at=et.contextType;typeof at=="object"&&at!==null?at=eh(at):(at=Zf(et)?Xf:H.current,at=Yf($,at));var lt=et.getDerivedStateFromProps,dt=typeof lt=="function"||typeof it.getSnapshotBeforeUpdate=="function";dt||typeof it.UNSAFE_componentWillReceiveProps!="function"&&typeof it.componentWillReceiveProps!="function"||(ot!==tt||st!==at)&&Hi($,it,tt,at),jh=!1;var pt=$.memoizedState;it.state=pt,qh($,tt,it,nt),st=$.memoizedState,ot!==tt||pt!==st||Wf.current||jh?(typeof lt=="function"&&(Di($,et,lt,tt),st=$.memoizedState),(ot=jh||Fi($,et,ot,tt,pt,st,at))?(dt||typeof it.UNSAFE_componentWillMount!="function"&&typeof it.componentWillMount!="function"||(typeof it.componentWillMount=="function"&&it.componentWillMount(),typeof it.UNSAFE_componentWillMount=="function"&&it.UNSAFE_componentWillMount()),typeof it.componentDidMount=="function"&&($.flags|=4194308)):(typeof it.componentDidMount=="function"&&($.flags|=4194308),$.memoizedProps=tt,$.memoizedState=st),it.props=tt,it.state=st,it.context=at,tt=ot):(typeof it.componentDidMount=="function"&&($.flags|=4194308),tt=!1)}else{it=$.stateNode,lh(_e,$),ot=$.memoizedProps,at=$.type===$.elementType?ot:Ci($.type,ot),it.props=at,dt=$.pendingProps,pt=it.context,st=et.contextType,typeof st=="object"&&st!==null?st=eh(st):(st=Zf(et)?Xf:H.current,st=Yf($,st));var ht=et.getDerivedStateFromProps;(lt=typeof ht=="function"||typeof it.getSnapshotBeforeUpdate=="function")||typeof it.UNSAFE_componentWillReceiveProps!="function"&&typeof it.componentWillReceiveProps!="function"||(ot!==dt||pt!==st)&&Hi($,it,tt,st),jh=!1,pt=$.memoizedState,it.state=pt,qh($,tt,it,nt);var vt=$.memoizedState;ot!==dt||pt!==vt||Wf.current||jh?(typeof ht=="function"&&(Di($,et,ht,tt),vt=$.memoizedState),(at=jh||Fi($,et,at,tt,pt,vt,st)||!1)?(lt||typeof it.UNSAFE_componentWillUpdate!="function"&&typeof it.componentWillUpdate!="function"||(typeof it.componentWillUpdate=="function"&&it.componentWillUpdate(tt,vt,st),typeof it.UNSAFE_componentWillUpdate=="function"&&it.UNSAFE_componentWillUpdate(tt,vt,st)),typeof it.componentDidUpdate=="function"&&($.flags|=4),typeof it.getSnapshotBeforeUpdate=="function"&&($.flags|=1024)):(typeof it.componentDidUpdate!="function"||ot===_e.memoizedProps&&pt===_e.memoizedState||($.flags|=4),typeof it.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&pt===_e.memoizedState||($.flags|=1024),$.memoizedProps=tt,$.memoizedState=vt),it.props=tt,it.state=vt,it.context=st,tt=at):(typeof it.componentDidUpdate!="function"||ot===_e.memoizedProps&&pt===_e.memoizedState||($.flags|=4),typeof it.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&pt===_e.memoizedState||($.flags|=1024),tt=!1)}return jj(_e,$,et,tt,rt,nt)}function jj(_e,$,et,tt,nt,rt){gj(_e,$);var it=($.flags&128)!==0;if(!tt&&!it)return nt&&dg($,et,!1),Zi(_e,$,rt);tt=$.stateNode,Wi.current=$;var ot=it&&typeof et.getDerivedStateFromError!="function"?null:tt.render();return $.flags|=1,_e!==null&&it?($.child=Ug($,_e.child,null,rt),$.child=Ug($,null,ot,rt)):Xi(_e,$,ot,rt),$.memoizedState=tt.state,nt&&dg($,et,!0),$.child}function kj(_e){var $=_e.stateNode;$.pendingContext?ag(_e,$.pendingContext,$.pendingContext!==$.context):$.context&&ag(_e,$.context,!1),yh(_e,$.containerInfo)}function lj(_e,$,et,tt,nt){return Ig(),Jg(nt),$.flags|=256,Xi(_e,$,et,tt),$.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function oj(_e,$,et){var tt=$.pendingProps,nt=L$2.current,rt=!1,it=($.flags&128)!==0,ot;if((ot=it)||(ot=_e!==null&&_e.memoizedState===null?!1:(nt&2)!==0),ot?(rt=!0,$.flags&=-129):(_e===null||_e.memoizedState!==null)&&(nt|=1),G(L$2,nt&1),_e===null)return Eg($),_e=$.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?($.mode&1?_e.data==="$!"?$.lanes=8:$.lanes=1073741824:$.lanes=1,null):(it=tt.children,_e=tt.fallback,rt?(tt=$.mode,rt=$.child,it={mode:"hidden",children:it},!(tt&1)&&rt!==null?(rt.childLanes=0,rt.pendingProps=it):rt=pj(it,tt,0,null),_e=Tg(_e,tt,et,null),rt.return=$,_e.return=$,rt.sibling=_e,$.child=rt,$.child.memoizedState=nj(et),$.memoizedState=mj,_e):qj($,it));if(nt=_e.memoizedState,nt!==null&&(ot=nt.dehydrated,ot!==null))return rj(_e,$,it,tt,ot,nt,et);if(rt){rt=tt.fallback,it=$.mode,nt=_e.child,ot=nt.sibling;var st={mode:"hidden",children:tt.children};return!(it&1)&&$.child!==nt?(tt=$.child,tt.childLanes=0,tt.pendingProps=st,$.deletions=null):(tt=Pg(nt,st),tt.subtreeFlags=nt.subtreeFlags&14680064),ot!==null?rt=Pg(ot,rt):(rt=Tg(rt,it,et,null),rt.flags|=2),rt.return=$,tt.return=$,tt.sibling=rt,$.child=tt,tt=rt,rt=$.child,it=_e.child.memoizedState,it=it===null?nj(et):{baseLanes:it.baseLanes|et,cachePool:null,transitions:it.transitions},rt.memoizedState=it,rt.childLanes=_e.childLanes&~et,$.memoizedState=mj,tt}return rt=_e.child,_e=rt.sibling,tt=Pg(rt,{mode:"visible",children:tt.children}),!($.mode&1)&&(tt.lanes=et),tt.return=$,tt.sibling=null,_e!==null&&(et=$.deletions,et===null?($.deletions=[_e],$.flags|=16):et.push(_e)),$.child=tt,$.memoizedState=null,tt}function qj(_e,$){return $=pj({mode:"visible",children:$},_e.mode,0,null),$.return=_e,_e.child=$}function sj(_e,$,et,tt){return tt!==null&&Jg(tt),Ug($,_e.child,null,et),_e=qj($,$.pendingProps.children),_e.flags|=2,$.memoizedState=null,_e}function rj(_e,$,et,tt,nt,rt,it){if(et)return $.flags&256?($.flags&=-257,tt=Ki(Error(p$1(422))),sj(_e,$,it,tt)):$.memoizedState!==null?($.child=_e.child,$.flags|=128,null):(rt=tt.fallback,nt=$.mode,tt=pj({mode:"visible",children:tt.children},nt,0,null),rt=Tg(rt,nt,it,null),rt.flags|=2,tt.return=$,rt.return=$,tt.sibling=rt,$.child=tt,$.mode&1&&Ug($,_e.child,null,it),$.child.memoizedState=nj(it),$.memoizedState=mj,rt);if(!($.mode&1))return sj(_e,$,it,null);if(nt.data==="$!"){if(tt=nt.nextSibling&&nt.nextSibling.dataset,tt)var ot=tt.dgst;return tt=ot,rt=Error(p$1(419)),tt=Ki(rt,tt,void 0),sj(_e,$,it,tt)}if(ot=(it&_e.childLanes)!==0,dh||ot){if(tt=Q,tt!==null){switch(it&-it){case 4:nt=2;break;case 16:nt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:nt=32;break;case 536870912:nt=268435456;break;default:nt=0}nt=nt&(tt.suspendedLanes|it)?0:nt,nt!==0&&nt!==rt.retryLane&&(rt.retryLane=nt,ih(_e,nt),gi(tt,_e,nt,-1))}return tj(),tt=Ki(Error(p$1(421))),sj(_e,$,it,tt)}return nt.data==="$?"?($.flags|=128,$.child=_e.child,$=uj.bind(null,_e),nt._reactRetry=$,null):(_e=rt.treeContext,yg=Lf(nt.nextSibling),xg=$,I$1=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=$),$=qj($,tt.children),$.flags|=4096,$)}function vj(_e,$,et){_e.lanes|=$;var tt=_e.alternate;tt!==null&&(tt.lanes|=$),bh(_e.return,$,et)}function wj(_e,$,et,tt,nt){var rt=_e.memoizedState;rt===null?_e.memoizedState={isBackwards:$,rendering:null,renderingStartTime:0,last:tt,tail:et,tailMode:nt}:(rt.isBackwards=$,rt.rendering=null,rt.renderingStartTime=0,rt.last=tt,rt.tail=et,rt.tailMode=nt)}function xj(_e,$,et){var tt=$.pendingProps,nt=tt.revealOrder,rt=tt.tail;if(Xi(_e,$,tt.children,et),tt=L$2.current,tt&2)tt=tt&1|2,$.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=$.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&vj(_e,et,$);else if(_e.tag===19)vj(_e,et,$);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===$)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}tt&=1}if(G(L$2,tt),!($.mode&1))$.memoizedState=null;else switch(nt){case"forwards":for(et=$.child,nt=null;et!==null;)_e=et.alternate,_e!==null&&Ch(_e)===null&&(nt=et),et=et.sibling;et=nt,et===null?(nt=$.child,$.child=null):(nt=et.sibling,et.sibling=null),wj($,!1,nt,et,rt);break;case"backwards":for(et=null,nt=$.child,$.child=null;nt!==null;){if(_e=nt.alternate,_e!==null&&Ch(_e)===null){$.child=nt;break}_e=nt.sibling,nt.sibling=et,et=nt,nt=_e}wj($,!0,et,null,rt);break;case"together":wj($,!1,null,null,void 0);break;default:$.memoizedState=null}return $.child}function ij(_e,$){!($.mode&1)&&_e!==null&&(_e.alternate=null,$.alternate=null,$.flags|=2)}function Zi(_e,$,et){if(_e!==null&&($.dependencies=_e.dependencies),rh|=$.lanes,!(et&$.childLanes))return null;if(_e!==null&&$.child!==_e.child)throw Error(p$1(153));if($.child!==null){for(_e=$.child,et=Pg(_e,_e.pendingProps),$.child=et,et.return=$;_e.sibling!==null;)_e=_e.sibling,et=et.sibling=Pg(_e,_e.pendingProps),et.return=$;et.sibling=null}return $.child}function yj(_e,$,et){switch($.tag){case 3:kj($),Ig();break;case 5:Ah($);break;case 1:Zf($.type)&&cg($);break;case 4:yh($,$.stateNode.containerInfo);break;case 10:var tt=$.type._context,nt=$.memoizedProps.value;G(Wg,tt._currentValue),tt._currentValue=nt;break;case 13:if(tt=$.memoizedState,tt!==null)return tt.dehydrated!==null?(G(L$2,L$2.current&1),$.flags|=128,null):et&$.child.childLanes?oj(_e,$,et):(G(L$2,L$2.current&1),_e=Zi(_e,$,et),_e!==null?_e.sibling:null);G(L$2,L$2.current&1);break;case 19:if(tt=(et&$.childLanes)!==0,_e.flags&128){if(tt)return xj(_e,$,et);$.flags|=128}if(nt=$.memoizedState,nt!==null&&(nt.rendering=null,nt.tail=null,nt.lastEffect=null),G(L$2,L$2.current),tt)break;return null;case 22:case 23:return $.lanes=0,dj(_e,$,et)}return Zi(_e,$,et)}var zj,Aj,Bj,Cj;zj=function(_e,$){for(var et=$.child;et!==null;){if(et.tag===5||et.tag===6)_e.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===$)break;for(;et.sibling===null;){if(et.return===null||et.return===$)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Aj=function(){};Bj=function(_e,$,et,tt){var nt=_e.memoizedProps;if(nt!==tt){_e=$.stateNode,xh(uh.current);var rt=null;switch(et){case"input":nt=Ya(_e,nt),tt=Ya(_e,tt),rt=[];break;case"select":nt=A$1({},nt,{value:void 0}),tt=A$1({},tt,{value:void 0}),rt=[];break;case"textarea":nt=gb(_e,nt),tt=gb(_e,tt),rt=[];break;default:typeof nt.onClick!="function"&&typeof tt.onClick=="function"&&(_e.onclick=Bf)}ub(et,tt);var it;et=null;for(at in nt)if(!tt.hasOwnProperty(at)&&nt.hasOwnProperty(at)&&nt[at]!=null)if(at==="style"){var ot=nt[at];for(it in ot)ot.hasOwnProperty(it)&&(et||(et={}),et[it]="")}else at!=="dangerouslySetInnerHTML"&&at!=="children"&&at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&at!=="autoFocus"&&(ea.hasOwnProperty(at)?rt||(rt=[]):(rt=rt||[]).push(at,null));for(at in tt){var st=tt[at];if(ot=nt!=null?nt[at]:void 0,tt.hasOwnProperty(at)&&st!==ot&&(st!=null||ot!=null))if(at==="style")if(ot){for(it in ot)!ot.hasOwnProperty(it)||st&&st.hasOwnProperty(it)||(et||(et={}),et[it]="");for(it in st)st.hasOwnProperty(it)&&ot[it]!==st[it]&&(et||(et={}),et[it]=st[it])}else et||(rt||(rt=[]),rt.push(at,et)),et=st;else at==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,ot=ot?ot.__html:void 0,st!=null&&ot!==st&&(rt=rt||[]).push(at,st)):at==="children"?typeof st!="string"&&typeof st!="number"||(rt=rt||[]).push(at,""+st):at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&(ea.hasOwnProperty(at)?(st!=null&&at==="onScroll"&&D$2("scroll",_e),rt||ot===st||(rt=[])):(rt=rt||[]).push(at,st))}et&&(rt=rt||[]).push("style",et);var at=rt;($.updateQueue=at)&&($.flags|=4)}};Cj=function(_e,$,et,tt){et!==tt&&($.flags|=4)};function Dj(_e,$){if(!I$1)switch(_e.tailMode){case"hidden":$=_e.tail;for(var et=null;$!==null;)$.alternate!==null&&(et=$),$=$.sibling;et===null?_e.tail=null:et.sibling=null;break;case"collapsed":et=_e.tail;for(var tt=null;et!==null;)et.alternate!==null&&(tt=et),et=et.sibling;tt===null?$||_e.tail===null?_e.tail=null:_e.tail.sibling=null:tt.sibling=null}}function S$1(_e){var $=_e.alternate!==null&&_e.alternate.child===_e.child,et=0,tt=0;if($)for(var nt=_e.child;nt!==null;)et|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags&14680064,tt|=nt.flags&14680064,nt.return=_e,nt=nt.sibling;else for(nt=_e.child;nt!==null;)et|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags,tt|=nt.flags,nt.return=_e,nt=nt.sibling;return _e.subtreeFlags|=tt,_e.childLanes=et,$}function Ej(_e,$,et){var tt=$.pendingProps;switch(wg($),$.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1($),null;case 1:return Zf($.type)&&$f(),S$1($),null;case 3:return tt=$.stateNode,zh(),E$2(Wf),E$2(H),Eh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(_e===null||_e.child===null)&&(Gg($)?$.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!($.flags&256)||($.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_e,$),S$1($),null;case 5:Bh($);var nt=xh(wh.current);if(et=$.type,_e!==null&&$.stateNode!=null)Bj(_e,$,et,tt,nt),_e.ref!==$.ref&&($.flags|=512,$.flags|=2097152);else{if(!tt){if($.stateNode===null)throw Error(p$1(166));return S$1($),null}if(_e=xh(uh.current),Gg($)){tt=$.stateNode,et=$.type;var rt=$.memoizedProps;switch(tt[Of]=$,tt[Pf]=rt,_e=($.mode&1)!==0,et){case"dialog":D$2("cancel",tt),D$2("close",tt);break;case"iframe":case"object":case"embed":D$2("load",tt);break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D$2(lf[nt],tt);break;case"source":D$2("error",tt);break;case"img":case"image":case"link":D$2("error",tt),D$2("load",tt);break;case"details":D$2("toggle",tt);break;case"input":Za(tt,rt),D$2("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!rt.multiple},D$2("invalid",tt);break;case"textarea":hb(tt,rt),D$2("invalid",tt)}ub(et,rt),nt=null;for(var it in rt)if(rt.hasOwnProperty(it)){var ot=rt[it];it==="children"?typeof ot=="string"?tt.textContent!==ot&&(rt.suppressHydrationWarning!==!0&&Af(tt.textContent,ot,_e),nt=["children",ot]):typeof ot=="number"&&tt.textContent!==""+ot&&(rt.suppressHydrationWarning!==!0&&Af(tt.textContent,ot,_e),nt=["children",""+ot]):ea.hasOwnProperty(it)&&ot!=null&&it==="onScroll"&&D$2("scroll",tt)}switch(et){case"input":Va(tt),db(tt,rt,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof rt.onClick=="function"&&(tt.onclick=Bf)}tt=nt,$.updateQueue=tt,tt!==null&&($.flags|=4)}else{it=nt.nodeType===9?nt:nt.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(et)),_e==="http://www.w3.org/1999/xhtml"?et==="script"?(_e=it.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof tt.is=="string"?_e=it.createElement(et,{is:tt.is}):(_e=it.createElement(et),et==="select"&&(it=_e,tt.multiple?it.multiple=!0:tt.size&&(it.size=tt.size))):_e=it.createElementNS(_e,et),_e[Of]=$,_e[Pf]=tt,zj(_e,$,!1,!1),$.stateNode=_e;e:{switch(it=vb(et,tt),et){case"dialog":D$2("cancel",_e),D$2("close",_e),nt=tt;break;case"iframe":case"object":case"embed":D$2("load",_e),nt=tt;break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D$2(lf[nt],_e);nt=tt;break;case"source":D$2("error",_e),nt=tt;break;case"img":case"image":case"link":D$2("error",_e),D$2("load",_e),nt=tt;break;case"details":D$2("toggle",_e),nt=tt;break;case"input":Za(_e,tt),nt=Ya(_e,tt),D$2("invalid",_e);break;case"option":nt=tt;break;case"select":_e._wrapperState={wasMultiple:!!tt.multiple},nt=A$1({},tt,{value:void 0}),D$2("invalid",_e);break;case"textarea":hb(_e,tt),nt=gb(_e,tt),D$2("invalid",_e);break;default:nt=tt}ub(et,nt),ot=nt;for(rt in ot)if(ot.hasOwnProperty(rt)){var st=ot[rt];rt==="style"?sb(_e,st):rt==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&nb(_e,st)):rt==="children"?typeof st=="string"?(et!=="textarea"||st!=="")&&ob(_e,st):typeof st=="number"&&ob(_e,""+st):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(ea.hasOwnProperty(rt)?st!=null&&rt==="onScroll"&&D$2("scroll",_e):st!=null&&ta(_e,rt,st,it))}switch(et){case"input":Va(_e),db(_e,tt,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":tt.value!=null&&_e.setAttribute("value",""+Sa(tt.value));break;case"select":_e.multiple=!!tt.multiple,rt=tt.value,rt!=null?fb(_e,!!tt.multiple,rt,!1):tt.defaultValue!=null&&fb(_e,!!tt.multiple,tt.defaultValue,!0);break;default:typeof nt.onClick=="function"&&(_e.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&($.flags|=4)}$.ref!==null&&($.flags|=512,$.flags|=2097152)}return S$1($),null;case 6:if(_e&&$.stateNode!=null)Cj(_e,$,_e.memoizedProps,tt);else{if(typeof tt!="string"&&$.stateNode===null)throw Error(p$1(166));if(et=xh(wh.current),xh(uh.current),Gg($)){if(tt=$.stateNode,et=$.memoizedProps,tt[Of]=$,(rt=tt.nodeValue!==et)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(tt.nodeValue,et,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,et,(_e.mode&1)!==0)}rt&&($.flags|=4)}else tt=(et.nodeType===9?et:et.ownerDocument).createTextNode(tt),tt[Of]=$,$.stateNode=tt}return S$1($),null;case 13:if(E$2(L$2),tt=$.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&$.mode&1&&!($.flags&128))Hg(),Ig(),$.flags|=98560,rt=!1;else if(rt=Gg($),tt!==null&&tt.dehydrated!==null){if(_e===null){if(!rt)throw Error(p$1(318));if(rt=$.memoizedState,rt=rt!==null?rt.dehydrated:null,!rt)throw Error(p$1(317));rt[Of]=$}else Ig(),!($.flags&128)&&($.memoizedState=null),$.flags|=4;S$1($),rt=!1}else zg!==null&&(Fj(zg),zg=null),rt=!0;if(!rt)return $.flags&65536?$:null}return $.flags&128?($.lanes=et,$):(tt=tt!==null,tt!==(_e!==null&&_e.memoizedState!==null)&&tt&&($.child.flags|=8192,$.mode&1&&(_e===null||L$2.current&1?T$1===0&&(T$1=3):tj())),$.updateQueue!==null&&($.flags|=4),S$1($),null);case 4:return zh(),Aj(_e,$),_e===null&&sf($.stateNode.containerInfo),S$1($),null;case 10:return ah($.type._context),S$1($),null;case 17:return Zf($.type)&&$f(),S$1($),null;case 19:if(E$2(L$2),rt=$.memoizedState,rt===null)return S$1($),null;if(tt=($.flags&128)!==0,it=rt.rendering,it===null)if(tt)Dj(rt,!1);else{if(T$1!==0||_e!==null&&_e.flags&128)for(_e=$.child;_e!==null;){if(it=Ch(_e),it!==null){for($.flags|=128,Dj(rt,!1),tt=it.updateQueue,tt!==null&&($.updateQueue=tt,$.flags|=4),$.subtreeFlags=0,tt=et,et=$.child;et!==null;)rt=et,_e=tt,rt.flags&=14680066,it=rt.alternate,it===null?(rt.childLanes=0,rt.lanes=_e,rt.child=null,rt.subtreeFlags=0,rt.memoizedProps=null,rt.memoizedState=null,rt.updateQueue=null,rt.dependencies=null,rt.stateNode=null):(rt.childLanes=it.childLanes,rt.lanes=it.lanes,rt.child=it.child,rt.subtreeFlags=0,rt.deletions=null,rt.memoizedProps=it.memoizedProps,rt.memoizedState=it.memoizedState,rt.updateQueue=it.updateQueue,rt.type=it.type,_e=it.dependencies,rt.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),et=et.sibling;return G(L$2,L$2.current&1|2),$.child}_e=_e.sibling}rt.tail!==null&&B()>Gj&&($.flags|=128,tt=!0,Dj(rt,!1),$.lanes=4194304)}else{if(!tt)if(_e=Ch(it),_e!==null){if($.flags|=128,tt=!0,et=_e.updateQueue,et!==null&&($.updateQueue=et,$.flags|=4),Dj(rt,!0),rt.tail===null&&rt.tailMode==="hidden"&&!it.alternate&&!I$1)return S$1($),null}else 2*B()-rt.renderingStartTime>Gj&&et!==1073741824&&($.flags|=128,tt=!0,Dj(rt,!1),$.lanes=4194304);rt.isBackwards?(it.sibling=$.child,$.child=it):(et=rt.last,et!==null?et.sibling=it:$.child=it,rt.last=it)}return rt.tail!==null?($=rt.tail,rt.rendering=$,rt.tail=$.sibling,rt.renderingStartTime=B(),$.sibling=null,et=L$2.current,G(L$2,tt?et&1|2:et&1),$):(S$1($),null);case 22:case 23:return Hj(),tt=$.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==tt&&($.flags|=8192),tt&&$.mode&1?fj&1073741824&&(S$1($),$.subtreeFlags&6&&($.flags|=8192)):S$1($),null;case 24:return null;case 25:return null}throw Error(p$1(156,$.tag))}function Ij(_e,$){switch(wg($),$.tag){case 1:return Zf($.type)&&$f(),_e=$.flags,_e&65536?($.flags=_e&-65537|128,$):null;case 3:return zh(),E$2(Wf),E$2(H),Eh(),_e=$.flags,_e&65536&&!(_e&128)?($.flags=_e&-65537|128,$):null;case 5:return Bh($),null;case 13:if(E$2(L$2),_e=$.memoizedState,_e!==null&&_e.dehydrated!==null){if($.alternate===null)throw Error(p$1(340));Ig()}return _e=$.flags,_e&65536?($.flags=_e&-65537|128,$):null;case 19:return E$2(L$2),null;case 4:return zh(),null;case 10:return ah($.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(_e,$){var et=_e.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(tt){W(_e,$,tt)}else et.current=null}function Mj(_e,$,et){try{et()}catch(tt){W(_e,$,tt)}}var Nj=!1;function Oj(_e,$){if(Cf=dd,_e=Me(),Ne(_e)){if("selectionStart"in _e)var et={start:_e.selectionStart,end:_e.selectionEnd};else e:{et=(et=_e.ownerDocument)&&et.defaultView||window;var tt=et.getSelection&&et.getSelection();if(tt&&tt.rangeCount!==0){et=tt.anchorNode;var nt=tt.anchorOffset,rt=tt.focusNode;tt=tt.focusOffset;try{et.nodeType,rt.nodeType}catch{et=null;break e}var it=0,ot=-1,st=-1,at=0,lt=0,dt=_e,pt=null;t:for(;;){for(var ht;dt!==et||nt!==0&&dt.nodeType!==3||(ot=it+nt),dt!==rt||tt!==0&&dt.nodeType!==3||(st=it+tt),dt.nodeType===3&&(it+=dt.nodeValue.length),(ht=dt.firstChild)!==null;)pt=dt,dt=ht;for(;;){if(dt===_e)break t;if(pt===et&&++at===nt&&(ot=it),pt===rt&&++lt===tt&&(st=it),(ht=dt.nextSibling)!==null)break;dt=pt,pt=dt.parentNode}dt=ht}et=ot===-1||st===-1?null:{start:ot,end:st}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:_e,selectionRange:et},dd=!1,V=$;V!==null;)if($=V,_e=$.child,($.subtreeFlags&1028)!==0&&_e!==null)_e.return=$,V=_e;else for(;V!==null;){$=V;try{var vt=$.alternate;if($.flags&1024)switch($.tag){case 0:case 11:case 15:break;case 1:if(vt!==null){var mt=vt.memoizedProps,kt=vt.memoizedState,bt=$.stateNode,gt=bt.getSnapshotBeforeUpdate($.elementType===$.type?mt:Ci($.type,mt),kt);bt.__reactInternalSnapshotBeforeUpdate=gt}break;case 3:var St=$.stateNode.containerInfo;St.nodeType===1?St.textContent="":St.nodeType===9&&St.documentElement&&St.removeChild(St.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(yt){W($,$.return,yt)}if(_e=$.sibling,_e!==null){_e.return=$.return,V=_e;break}V=$.return}return vt=Nj,Nj=!1,vt}function Pj(_e,$,et){var tt=$.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var nt=tt=tt.next;do{if((nt.tag&_e)===_e){var rt=nt.destroy;nt.destroy=void 0,rt!==void 0&&Mj($,et,rt)}nt=nt.next}while(nt!==tt)}}function Qj(_e,$){if($=$.updateQueue,$=$!==null?$.lastEffect:null,$!==null){var et=$=$.next;do{if((et.tag&_e)===_e){var tt=et.create;et.destroy=tt()}et=et.next}while(et!==$)}}function Rj(_e){var $=_e.ref;if($!==null){var et=_e.stateNode;switch(_e.tag){case 5:_e=et;break;default:_e=et}typeof $=="function"?$(_e):$.current=_e}}function Sj(_e){var $=_e.alternate;$!==null&&(_e.alternate=null,Sj($)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&($=_e.stateNode,$!==null&&(delete $[Of],delete $[Pf],delete $[of],delete $[Qf],delete $[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Tj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Uj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Tj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Vj(_e,$,et){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,$?et.nodeType===8?et.parentNode.insertBefore(_e,$):et.insertBefore(_e,$):(et.nodeType===8?($=et.parentNode,$.insertBefore(_e,et)):($=et,$.appendChild(_e)),et=et._reactRootContainer,et!=null||$.onclick!==null||($.onclick=Bf));else if(tt!==4&&(_e=_e.child,_e!==null))for(Vj(_e,$,et),_e=_e.sibling;_e!==null;)Vj(_e,$,et),_e=_e.sibling}function Wj(_e,$,et){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,$?et.insertBefore(_e,$):et.appendChild(_e);else if(tt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,$,et),_e=_e.sibling;_e!==null;)Wj(_e,$,et),_e=_e.sibling}var X$1=null,Xj=!1;function Yj(_e,$,et){for(et=et.child;et!==null;)Zj(_e,$,et),et=et.sibling}function Zj(_e,$,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U$1||Lj(et,$);case 6:var tt=X$1,nt=Xj;X$1=null,Yj(_e,$,et),X$1=tt,Xj=nt,X$1!==null&&(Xj?(_e=X$1,et=et.stateNode,_e.nodeType===8?_e.parentNode.removeChild(et):_e.removeChild(et)):X$1.removeChild(et.stateNode));break;case 18:X$1!==null&&(Xj?(_e=X$1,et=et.stateNode,_e.nodeType===8?Kf(_e.parentNode,et):_e.nodeType===1&&Kf(_e,et),bd(_e)):Kf(X$1,et.stateNode));break;case 4:tt=X$1,nt=Xj,X$1=et.stateNode.containerInfo,Xj=!0,Yj(_e,$,et),X$1=tt,Xj=nt;break;case 0:case 11:case 14:case 15:if(!U$1&&(tt=et.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){nt=tt=tt.next;do{var rt=nt,it=rt.destroy;rt=rt.tag,it!==void 0&&(rt&2||rt&4)&&Mj(et,$,it),nt=nt.next}while(nt!==tt)}Yj(_e,$,et);break;case 1:if(!U$1&&(Lj(et,$),tt=et.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=et.memoizedProps,tt.state=et.memoizedState,tt.componentWillUnmount()}catch(ot){W(et,$,ot)}Yj(_e,$,et);break;case 21:Yj(_e,$,et);break;case 22:et.mode&1?(U$1=(tt=U$1)||et.memoizedState!==null,Yj(_e,$,et),U$1=tt):Yj(_e,$,et);break;default:Yj(_e,$,et)}}function ak(_e){var $=_e.updateQueue;if($!==null){_e.updateQueue=null;var et=_e.stateNode;et===null&&(et=_e.stateNode=new Kj),$.forEach(function(tt){var nt=bk.bind(null,_e,tt);et.has(tt)||(et.add(tt),tt.then(nt,nt))})}}function ck(_e,$){var et=$.deletions;if(et!==null)for(var tt=0;tt<et.length;tt++){var nt=et[tt];try{var rt=_e,it=$,ot=it;e:for(;ot!==null;){switch(ot.tag){case 5:X$1=ot.stateNode,Xj=!1;break e;case 3:X$1=ot.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=ot.stateNode.containerInfo,Xj=!0;break e}ot=ot.return}if(X$1===null)throw Error(p$1(160));Zj(rt,it,nt),X$1=null,Xj=!1;var st=nt.alternate;st!==null&&(st.return=null),nt.return=null}catch(at){W(nt,$,at)}}if($.subtreeFlags&12854)for($=$.child;$!==null;)dk($,_e),$=$.sibling}function dk(_e,$){var et=_e.alternate,tt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(ck($,_e),ek(_e),tt&4){try{Pj(3,_e,_e.return),Qj(3,_e)}catch(mt){W(_e,_e.return,mt)}try{Pj(5,_e,_e.return)}catch(mt){W(_e,_e.return,mt)}}break;case 1:ck($,_e),ek(_e),tt&512&&et!==null&&Lj(et,et.return);break;case 5:if(ck($,_e),ek(_e),tt&512&&et!==null&&Lj(et,et.return),_e.flags&32){var nt=_e.stateNode;try{ob(nt,"")}catch(mt){W(_e,_e.return,mt)}}if(tt&4&&(nt=_e.stateNode,nt!=null)){var rt=_e.memoizedProps,it=et!==null?et.memoizedProps:rt,ot=_e.type,st=_e.updateQueue;if(_e.updateQueue=null,st!==null)try{ot==="input"&&rt.type==="radio"&&rt.name!=null&&ab(nt,rt),vb(ot,it);var at=vb(ot,rt);for(it=0;it<st.length;it+=2){var lt=st[it],dt=st[it+1];lt==="style"?sb(nt,dt):lt==="dangerouslySetInnerHTML"?nb(nt,dt):lt==="children"?ob(nt,dt):ta(nt,lt,dt,at)}switch(ot){case"input":bb(nt,rt);break;case"textarea":ib(nt,rt);break;case"select":var pt=nt._wrapperState.wasMultiple;nt._wrapperState.wasMultiple=!!rt.multiple;var ht=rt.value;ht!=null?fb(nt,!!rt.multiple,ht,!1):pt!==!!rt.multiple&&(rt.defaultValue!=null?fb(nt,!!rt.multiple,rt.defaultValue,!0):fb(nt,!!rt.multiple,rt.multiple?[]:"",!1))}nt[Pf]=rt}catch(mt){W(_e,_e.return,mt)}}break;case 6:if(ck($,_e),ek(_e),tt&4){if(_e.stateNode===null)throw Error(p$1(162));nt=_e.stateNode,rt=_e.memoizedProps;try{nt.nodeValue=rt}catch(mt){W(_e,_e.return,mt)}}break;case 3:if(ck($,_e),ek(_e),tt&4&&et!==null&&et.memoizedState.isDehydrated)try{bd($.containerInfo)}catch(mt){W(_e,_e.return,mt)}break;case 4:ck($,_e),ek(_e);break;case 13:ck($,_e),ek(_e),nt=_e.child,nt.flags&8192&&(rt=nt.memoizedState!==null,nt.stateNode.isHidden=rt,!rt||nt.alternate!==null&&nt.alternate.memoizedState!==null||(fk=B())),tt&4&&ak(_e);break;case 22:if(lt=et!==null&&et.memoizedState!==null,_e.mode&1?(U$1=(at=U$1)||lt,ck($,_e),U$1=at):ck($,_e),ek(_e),tt&8192){if(at=_e.memoizedState!==null,(_e.stateNode.isHidden=at)&&!lt&&_e.mode&1)for(V=_e,lt=_e.child;lt!==null;){for(dt=V=lt;V!==null;){switch(pt=V,ht=pt.child,pt.tag){case 0:case 11:case 14:case 15:Pj(4,pt,pt.return);break;case 1:Lj(pt,pt.return);var vt=pt.stateNode;if(typeof vt.componentWillUnmount=="function"){tt=pt,et=pt.return;try{$=tt,vt.props=$.memoizedProps,vt.state=$.memoizedState,vt.componentWillUnmount()}catch(mt){W(tt,et,mt)}}break;case 5:Lj(pt,pt.return);break;case 22:if(pt.memoizedState!==null){gk(dt);continue}}ht!==null?(ht.return=pt,V=ht):gk(dt)}lt=lt.sibling}e:for(lt=null,dt=_e;;){if(dt.tag===5){if(lt===null){lt=dt;try{nt=dt.stateNode,at?(rt=nt.style,typeof rt.setProperty=="function"?rt.setProperty("display","none","important"):rt.display="none"):(ot=dt.stateNode,st=dt.memoizedProps.style,it=st!=null&&st.hasOwnProperty("display")?st.display:null,ot.style.display=rb("display",it))}catch(mt){W(_e,_e.return,mt)}}}else if(dt.tag===6){if(lt===null)try{dt.stateNode.nodeValue=at?"":dt.memoizedProps}catch(mt){W(_e,_e.return,mt)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===_e)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===_e)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===_e)break e;lt===dt&&(lt=null),dt=dt.return}lt===dt&&(lt=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:ck($,_e),ek(_e),tt&4&&ak(_e);break;case 21:break;default:ck($,_e),ek(_e)}}function ek(_e){var $=_e.flags;if($&2){try{e:{for(var et=_e.return;et!==null;){if(Tj(et)){var tt=et;break e}et=et.return}throw Error(p$1(160))}switch(tt.tag){case 5:var nt=tt.stateNode;tt.flags&32&&(ob(nt,""),tt.flags&=-33);var rt=Uj(_e);Wj(_e,rt,nt);break;case 3:case 4:var it=tt.stateNode.containerInfo,ot=Uj(_e);Vj(_e,ot,it);break;default:throw Error(p$1(161))}}catch(st){W(_e,_e.return,st)}_e.flags&=-3}$&4096&&(_e.flags&=-4097)}function hk(_e,$,et){V=_e,ik(_e)}function ik(_e,$,et){for(var tt=(_e.mode&1)!==0;V!==null;){var nt=V,rt=nt.child;if(nt.tag===22&&tt){var it=nt.memoizedState!==null||Jj;if(!it){var ot=nt.alternate,st=ot!==null&&ot.memoizedState!==null||U$1;ot=Jj;var at=U$1;if(Jj=it,(U$1=st)&&!at)for(V=nt;V!==null;)it=V,st=it.child,it.tag===22&&it.memoizedState!==null?jk(nt):st!==null?(st.return=it,V=st):jk(nt);for(;rt!==null;)V=rt,ik(rt),rt=rt.sibling;V=nt,Jj=ot,U$1=at}kk(_e)}else nt.subtreeFlags&8772&&rt!==null?(rt.return=nt,V=rt):kk(_e)}}function kk(_e){for(;V!==null;){var $=V;if($.flags&8772){var et=$.alternate;try{if($.flags&8772)switch($.tag){case 0:case 11:case 15:U$1||Qj(5,$);break;case 1:var tt=$.stateNode;if($.flags&4&&!U$1)if(et===null)tt.componentDidMount();else{var nt=$.elementType===$.type?et.memoizedProps:Ci($.type,et.memoizedProps);tt.componentDidUpdate(nt,et.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var rt=$.updateQueue;rt!==null&&sh($,rt,tt);break;case 3:var it=$.updateQueue;if(it!==null){if(et=null,$.child!==null)switch($.child.tag){case 5:et=$.child.stateNode;break;case 1:et=$.child.stateNode}sh($,it,et)}break;case 5:var ot=$.stateNode;if(et===null&&$.flags&4){et=ot;var st=$.memoizedProps;switch($.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&et.focus();break;case"img":st.src&&(et.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if($.memoizedState===null){var at=$.alternate;if(at!==null){var lt=at.memoizedState;if(lt!==null){var dt=lt.dehydrated;dt!==null&&bd(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||$.flags&512&&Rj($)}catch(pt){W($,$.return,pt)}}if($===_e){V=null;break}if(et=$.sibling,et!==null){et.return=$.return,V=et;break}V=$.return}}function gk(_e){for(;V!==null;){var $=V;if($===_e){V=null;break}var et=$.sibling;if(et!==null){et.return=$.return,V=et;break}V=$.return}}function jk(_e){for(;V!==null;){var $=V;try{switch($.tag){case 0:case 11:case 15:var et=$.return;try{Qj(4,$)}catch(st){W($,et,st)}break;case 1:var tt=$.stateNode;if(typeof tt.componentDidMount=="function"){var nt=$.return;try{tt.componentDidMount()}catch(st){W($,nt,st)}}var rt=$.return;try{Rj($)}catch(st){W($,rt,st)}break;case 5:var it=$.return;try{Rj($)}catch(st){W($,it,st)}}}catch(st){W($,$.return,st)}if($===_e){V=null;break}var ot=$.sibling;if(ot!==null){ot.return=$.return,V=ot;break}V=$.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(_e){return _e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_e=C$1,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function gi(_e,$,et,tt){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(_e,et,tt),(!(K&2)||_e!==Q)&&(_e===Q&&(!(K&2)&&(qk|=et),T$1===4&&Ck(_e,Z)),Dk(_e,tt),et===1&&K===0&&!($.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(_e,$){var et=_e.callbackNode;wc(_e,$);var tt=uc(_e,_e===Q?Z:0);if(tt===0)et!==null&&bc(et),_e.callbackNode=null,_e.callbackPriority=0;else if($=tt&-tt,_e.callbackPriority!==$){if(et!=null&&bc(et),$===1)_e.tag===0?ig(Ek.bind(null,_e)):hg(Ek.bind(null,_e)),Jf(function(){!(K&6)&&jg()}),et=null;else{switch(Dc(tt)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Fk(et,Gk.bind(null,_e))}_e.callbackPriority=$,_e.callbackNode=et}}function Gk(_e,$){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var et=_e.callbackNode;if(Hk()&&_e.callbackNode!==et)return null;var tt=uc(_e,_e===Q?Z:0);if(tt===0)return null;if(tt&30||tt&_e.expiredLanes||$)$=Ik(_e,tt);else{$=tt;var nt=K;K|=2;var rt=Jk();(Q!==_e||Z!==$)&&(uk=null,Gj=B()+500,Kk(_e,$));do try{Lk();break}catch(ot){Mk(_e,ot)}while(!0);$g(),mk.current=rt,K=nt,Y!==null?$=0:(Q=null,Z=0,$=T$1)}if($!==0){if($===2&&(nt=xc(_e),nt!==0&&(tt=nt,$=Nk(_e,nt))),$===1)throw et=pk,Kk(_e,0),Ck(_e,tt),Dk(_e,B()),et;if($===6)Ck(_e,tt);else{if(nt=_e.current.alternate,!(tt&30)&&!Ok(nt)&&($=Ik(_e,tt),$===2&&(rt=xc(_e),rt!==0&&(tt=rt,$=Nk(_e,rt))),$===1))throw et=pk,Kk(_e,0),Ck(_e,tt),Dk(_e,B()),et;switch(_e.finishedWork=nt,_e.finishedLanes=tt,$){case 0:case 1:throw Error(p$1(345));case 2:Pk(_e,tk,uk);break;case 3:if(Ck(_e,tt),(tt&130023424)===tt&&($=fk+500-B(),10<$)){if(uc(_e,0)!==0)break;if(nt=_e.suspendedLanes,(nt&tt)!==tt){R$1(),_e.pingedLanes|=_e.suspendedLanes&nt;break}_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),$);break}Pk(_e,tk,uk);break;case 4:if(Ck(_e,tt),(tt&4194240)===tt)break;for($=_e.eventTimes,nt=-1;0<tt;){var it=31-oc(tt);rt=1<<it,it=$[it],it>nt&&(nt=it),tt&=~rt}if(tt=nt,tt=B()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*lk(tt/1960))-tt,10<tt){_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),tt);break}Pk(_e,tk,uk);break;case 5:Pk(_e,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(_e,B()),_e.callbackNode===et?Gk.bind(null,_e):null}function Nk(_e,$){var et=sk;return _e.current.memoizedState.isDehydrated&&(Kk(_e,$).flags|=256),_e=Ik(_e,$),_e!==2&&($=tk,tk=et,$!==null&&Fj($)),_e}function Fj(_e){tk===null?tk=_e:tk.push.apply(tk,_e)}function Ok(_e){for(var $=_e;;){if($.flags&16384){var et=$.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var tt=0;tt<et.length;tt++){var nt=et[tt],rt=nt.getSnapshot;nt=nt.value;try{if(!He(rt(),nt))return!1}catch{return!1}}}if(et=$.child,$.subtreeFlags&16384&&et!==null)et.return=$,$=et;else{if($===_e)break;for(;$.sibling===null;){if($.return===null||$.return===_e)return!0;$=$.return}$.sibling.return=$.return,$=$.sibling}}return!0}function Ck(_e,$){for($&=~rk,$&=~qk,_e.suspendedLanes|=$,_e.pingedLanes&=~$,_e=_e.expirationTimes;0<$;){var et=31-oc($),tt=1<<et;_e[et]=-1,$&=~tt}}function Ek(_e){if(K&6)throw Error(p$1(327));Hk();var $=uc(_e,0);if(!($&1))return Dk(_e,B()),null;var et=Ik(_e,$);if(_e.tag!==0&&et===2){var tt=xc(_e);tt!==0&&($=tt,et=Nk(_e,tt))}if(et===1)throw et=pk,Kk(_e,0),Ck(_e,$),Dk(_e,B()),et;if(et===6)throw Error(p$1(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=$,Pk(_e,tk,uk),Dk(_e,B()),null}function Qk(_e,$){var et=K;K|=1;try{return _e($)}finally{K=et,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(_e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var $=K;K|=1;var et=ok.transition,tt=C$1;try{if(ok.transition=null,C$1=1,_e)return _e()}finally{C$1=tt,ok.transition=et,K=$,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(_e,$){_e.finishedWork=null,_e.finishedLanes=0;var et=_e.timeoutHandle;if(et!==-1&&(_e.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var tt=et;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H),Eh();break;case 5:Bh(tt);break;case 4:zh();break;case 13:E$2(L$2);break;case 19:E$2(L$2);break;case 10:ah(tt.type._context);break;case 22:case 23:Hj()}et=et.return}if(Q=_e,Y=_e=Pg(_e.current,null),Z=fj=$,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for($=0;$<fh.length;$++)if(et=fh[$],tt=et.interleaved,tt!==null){et.interleaved=null;var nt=tt.next,rt=et.pending;if(rt!==null){var it=rt.next;rt.next=nt,tt.next=it}et.pending=tt}fh=null}return _e}function Mk(_e,$){do{var et=Y;try{if($g(),Fh.current=Rh,Ih){for(var tt=M$1.memoizedState;tt!==null;){var nt=tt.queue;nt!==null&&(nt.pending=null),tt=tt.next}Ih=!1}if(Hh=0,O$1=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,et===null||et.return===null){T$1=1,pk=$,Y=null;break}e:{var rt=_e,it=et.return,ot=et,st=$;if($=Z,ot.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var at=st,lt=ot,dt=lt.tag;if(!(lt.mode&1)&&(dt===0||dt===11||dt===15)){var pt=lt.alternate;pt?(lt.updateQueue=pt.updateQueue,lt.memoizedState=pt.memoizedState,lt.lanes=pt.lanes):(lt.updateQueue=null,lt.memoizedState=null)}var ht=Ui(it);if(ht!==null){ht.flags&=-257,Vi(ht,it,ot,rt,$),ht.mode&1&&Si(rt,at,$),$=ht,st=at;var vt=$.updateQueue;if(vt===null){var mt=new Set;mt.add(st),$.updateQueue=mt}else vt.add(st);break e}else{if(!($&1)){Si(rt,at,$),tj();break e}st=Error(p$1(426))}}else if(I$1&&ot.mode&1){var kt=Ui(it);if(kt!==null){!(kt.flags&65536)&&(kt.flags|=256),Vi(kt,it,ot,rt,$),Jg(Ji(st,ot));break e}}rt=st=Ji(st,ot),T$1!==4&&(T$1=2),sk===null?sk=[rt]:sk.push(rt),rt=it;do{switch(rt.tag){case 3:rt.flags|=65536,$&=-$,rt.lanes|=$;var bt=Ni(rt,st,$);ph(rt,bt);break e;case 1:ot=st;var gt=rt.type,St=rt.stateNode;if(!(rt.flags&128)&&(typeof gt.getDerivedStateFromError=="function"||St!==null&&typeof St.componentDidCatch=="function"&&(Ri===null||!Ri.has(St)))){rt.flags|=65536,$&=-$,rt.lanes|=$;var yt=Qi(rt,ot,$);ph(rt,yt);break e}}rt=rt.return}while(rt!==null)}Sk(et)}catch(Et){$=Et,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(!0)}function Jk(){var _e=mk.current;return mk.current=Rh,_e===null?Rh:_e}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(_e,$){var et=K;K|=2;var tt=Jk();(Q!==_e||Z!==$)&&(uk=null,Kk(_e,$));do try{Tk();break}catch(nt){Mk(_e,nt)}while(!0);if($g(),K=et,mk.current=tt,Y!==null)throw Error(p$1(261));return Q=null,Z=0,T$1}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(_e){var $=Vk(_e.alternate,_e,fj);_e.memoizedProps=_e.pendingProps,$===null?Sk(_e):Y=$,nk.current=null}function Sk(_e){var $=_e;do{var et=$.alternate;if(_e=$.return,$.flags&32768){if(et=Ij(et,$),et!==null){et.flags&=32767,Y=et;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T$1=6,Y=null;return}}else if(et=Ej(et,$,fj),et!==null){Y=et;return}if($=$.sibling,$!==null){Y=$;return}Y=$=_e}while($!==null);T$1===0&&(T$1=5)}function Pk(_e,$,et){var tt=C$1,nt=ok.transition;try{ok.transition=null,C$1=1,Wk(_e,$,et,tt)}finally{ok.transition=nt,C$1=tt}return null}function Wk(_e,$,et,tt){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));et=_e.finishedWork;var nt=_e.finishedLanes;if(et===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,et===_e.current)throw Error(p$1(177));_e.callbackNode=null,_e.callbackPriority=0;var rt=et.lanes|et.childLanes;if(Bc(_e,rt),_e===Q&&(Y=Q=null,Z=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),rt=(et.flags&15990)!==0,et.subtreeFlags&15990||rt){rt=ok.transition,ok.transition=null;var it=C$1;C$1=1;var ot=K;K|=4,nk.current=null,Oj(_e,et),dk(et,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=et,hk(et),dc(),K=ot,C$1=it,ok.transition=rt}else _e.current=et;if(vk&&(vk=!1,wk=_e,xk=nt),rt=_e.pendingLanes,rt===0&&(Ri=null),mc(et.stateNode),Dk(_e,B()),$!==null)for(tt=_e.onRecoverableError,et=0;et<$.length;et++)nt=$[et],tt(nt.value,{componentStack:nt.stack,digest:nt.digest});if(Oi)throw Oi=!1,_e=Pi,Pi=null,_e;return xk&1&&_e.tag!==0&&Hk(),rt=_e.pendingLanes,rt&1?_e===zk?yk++:(yk=0,zk=_e):yk=0,jg(),null}function Hk(){if(wk!==null){var _e=Dc(xk),$=ok.transition,et=C$1;try{if(ok.transition=null,C$1=16>_e?16:_e,wk===null)var tt=!1;else{if(_e=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var nt=K;for(K|=4,V=_e.current;V!==null;){var rt=V,it=rt.child;if(V.flags&16){var ot=rt.deletions;if(ot!==null){for(var st=0;st<ot.length;st++){var at=ot[st];for(V=at;V!==null;){var lt=V;switch(lt.tag){case 0:case 11:case 15:Pj(8,lt,rt)}var dt=lt.child;if(dt!==null)dt.return=lt,V=dt;else for(;V!==null;){lt=V;var pt=lt.sibling,ht=lt.return;if(Sj(lt),lt===at){V=null;break}if(pt!==null){pt.return=ht,V=pt;break}V=ht}}}var vt=rt.alternate;if(vt!==null){var mt=vt.child;if(mt!==null){vt.child=null;do{var kt=mt.sibling;mt.sibling=null,mt=kt}while(mt!==null)}}V=rt}}if(rt.subtreeFlags&2064&&it!==null)it.return=rt,V=it;else e:for(;V!==null;){if(rt=V,rt.flags&2048)switch(rt.tag){case 0:case 11:case 15:Pj(9,rt,rt.return)}var bt=rt.sibling;if(bt!==null){bt.return=rt.return,V=bt;break e}V=rt.return}}var gt=_e.current;for(V=gt;V!==null;){it=V;var St=it.child;if(it.subtreeFlags&2064&&St!==null)St.return=it,V=St;else e:for(it=gt;V!==null;){if(ot=V,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:Qj(9,ot)}}catch(Et){W(ot,ot.return,Et)}if(ot===it){V=null;break e}var yt=ot.sibling;if(yt!==null){yt.return=ot.return,V=yt;break e}V=ot.return}}if(K=nt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_e)}catch{}tt=!0}return tt}finally{C$1=et,ok.transition=$}}return!1}function Xk(_e,$,et){$=Ji(et,$),$=Ni(_e,$,1),_e=nh(_e,$,1),$=R$1(),_e!==null&&(Ac(_e,1,$),Dk(_e,$))}function W(_e,$,et){if(_e.tag===3)Xk(_e,_e,et);else for(;$!==null;){if($.tag===3){Xk($,_e,et);break}else if($.tag===1){var tt=$.stateNode;if(typeof $.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Ri===null||!Ri.has(tt))){_e=Ji(et,_e),_e=Qi($,_e,1),$=nh($,_e,1),_e=R$1(),$!==null&&(Ac($,1,_e),Dk($,_e));break}}$=$.return}}function Ti(_e,$,et){var tt=_e.pingCache;tt!==null&&tt.delete($),$=R$1(),_e.pingedLanes|=_e.suspendedLanes&et,Q===_e&&(Z&et)===et&&(T$1===4||T$1===3&&(Z&130023424)===Z&&500>B()-fk?Kk(_e,0):rk|=et),Dk(_e,$)}function Yk(_e,$){$===0&&(_e.mode&1?($=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):$=1);var et=R$1();_e=ih(_e,$),_e!==null&&(Ac(_e,$,et),Dk(_e,et))}function uj(_e){var $=_e.memoizedState,et=0;$!==null&&(et=$.retryLane),Yk(_e,et)}function bk(_e,$){var et=0;switch(_e.tag){case 13:var tt=_e.stateNode,nt=_e.memoizedState;nt!==null&&(et=nt.retryLane);break;case 19:tt=_e.stateNode;break;default:throw Error(p$1(314))}tt!==null&&tt.delete($),Yk(_e,et)}var Vk;Vk=function(_e,$,et){if(_e!==null)if(_e.memoizedProps!==$.pendingProps||Wf.current)dh=!0;else{if(!(_e.lanes&et)&&!($.flags&128))return dh=!1,yj(_e,$,et);dh=!!(_e.flags&131072)}else dh=!1,I$1&&$.flags&1048576&&ug($,ng,$.index);switch($.lanes=0,$.tag){case 2:var tt=$.type;ij(_e,$),_e=$.pendingProps;var nt=Yf($,H.current);ch($,et),nt=Nh(null,$,tt,_e,nt,et);var rt=Sh();return $.flags|=1,typeof nt=="object"&&nt!==null&&typeof nt.render=="function"&&nt.$$typeof===void 0?($.tag=1,$.memoizedState=null,$.updateQueue=null,Zf(tt)?(rt=!0,cg($)):rt=!1,$.memoizedState=nt.state!==null&&nt.state!==void 0?nt.state:null,kh($),nt.updater=Ei,$.stateNode=nt,nt._reactInternals=$,Ii($,tt,_e,et),$=jj(null,$,tt,!0,rt,et)):($.tag=0,I$1&&rt&&vg($),Xi(null,$,nt,et),$=$.child),$;case 16:tt=$.elementType;e:{switch(ij(_e,$),_e=$.pendingProps,nt=tt._init,tt=nt(tt._payload),$.type=tt,nt=$.tag=Zk(tt),_e=Ci(tt,_e),nt){case 0:$=cj(null,$,tt,_e,et);break e;case 1:$=hj(null,$,tt,_e,et);break e;case 11:$=Yi(null,$,tt,_e,et);break e;case 14:$=$i(null,$,tt,Ci(tt.type,_e),et);break e}throw Error(p$1(306,tt,""))}return $;case 0:return tt=$.type,nt=$.pendingProps,nt=$.elementType===tt?nt:Ci(tt,nt),cj(_e,$,tt,nt,et);case 1:return tt=$.type,nt=$.pendingProps,nt=$.elementType===tt?nt:Ci(tt,nt),hj(_e,$,tt,nt,et);case 3:e:{if(kj($),_e===null)throw Error(p$1(387));tt=$.pendingProps,rt=$.memoizedState,nt=rt.element,lh(_e,$),qh($,tt,null,et);var it=$.memoizedState;if(tt=it.element,rt.isDehydrated)if(rt={element:tt,isDehydrated:!1,cache:it.cache,pendingSuspenseBoundaries:it.pendingSuspenseBoundaries,transitions:it.transitions},$.updateQueue.baseState=rt,$.memoizedState=rt,$.flags&256){nt=Ji(Error(p$1(423)),$),$=lj(_e,$,tt,et,nt);break e}else if(tt!==nt){nt=Ji(Error(p$1(424)),$),$=lj(_e,$,tt,et,nt);break e}else for(yg=Lf($.stateNode.containerInfo.firstChild),xg=$,I$1=!0,zg=null,et=Vg($,null,tt,et),$.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),tt===nt){$=Zi(_e,$,et);break e}Xi(_e,$,tt,et)}$=$.child}return $;case 5:return Ah($),_e===null&&Eg($),tt=$.type,nt=$.pendingProps,rt=_e!==null?_e.memoizedProps:null,it=nt.children,Ef(tt,nt)?it=null:rt!==null&&Ef(tt,rt)&&($.flags|=32),gj(_e,$),Xi(_e,$,it,et),$.child;case 6:return _e===null&&Eg($),null;case 13:return oj(_e,$,et);case 4:return yh($,$.stateNode.containerInfo),tt=$.pendingProps,_e===null?$.child=Ug($,null,tt,et):Xi(_e,$,tt,et),$.child;case 11:return tt=$.type,nt=$.pendingProps,nt=$.elementType===tt?nt:Ci(tt,nt),Yi(_e,$,tt,nt,et);case 7:return Xi(_e,$,$.pendingProps,et),$.child;case 8:return Xi(_e,$,$.pendingProps.children,et),$.child;case 12:return Xi(_e,$,$.pendingProps.children,et),$.child;case 10:e:{if(tt=$.type._context,nt=$.pendingProps,rt=$.memoizedProps,it=nt.value,G(Wg,tt._currentValue),tt._currentValue=it,rt!==null)if(He(rt.value,it)){if(rt.children===nt.children&&!Wf.current){$=Zi(_e,$,et);break e}}else for(rt=$.child,rt!==null&&(rt.return=$);rt!==null;){var ot=rt.dependencies;if(ot!==null){it=rt.child;for(var st=ot.firstContext;st!==null;){if(st.context===tt){if(rt.tag===1){st=mh(-1,et&-et),st.tag=2;var at=rt.updateQueue;if(at!==null){at=at.shared;var lt=at.pending;lt===null?st.next=st:(st.next=lt.next,lt.next=st),at.pending=st}}rt.lanes|=et,st=rt.alternate,st!==null&&(st.lanes|=et),bh(rt.return,et,$),ot.lanes|=et;break}st=st.next}}else if(rt.tag===10)it=rt.type===$.type?null:rt.child;else if(rt.tag===18){if(it=rt.return,it===null)throw Error(p$1(341));it.lanes|=et,ot=it.alternate,ot!==null&&(ot.lanes|=et),bh(it,et,$),it=rt.sibling}else it=rt.child;if(it!==null)it.return=rt;else for(it=rt;it!==null;){if(it===$){it=null;break}if(rt=it.sibling,rt!==null){rt.return=it.return,it=rt;break}it=it.return}rt=it}Xi(_e,$,nt.children,et),$=$.child}return $;case 9:return nt=$.type,tt=$.pendingProps.children,ch($,et),nt=eh(nt),tt=tt(nt),$.flags|=1,Xi(_e,$,tt,et),$.child;case 14:return tt=$.type,nt=Ci(tt,$.pendingProps),nt=Ci(tt.type,nt),$i(_e,$,tt,nt,et);case 15:return bj(_e,$,$.type,$.pendingProps,et);case 17:return tt=$.type,nt=$.pendingProps,nt=$.elementType===tt?nt:Ci(tt,nt),ij(_e,$),$.tag=1,Zf(tt)?(_e=!0,cg($)):_e=!1,ch($,et),Gi($,tt,nt),Ii($,tt,nt,et),jj(null,$,tt,!0,_e,et);case 19:return xj(_e,$,et);case 22:return dj(_e,$,et)}throw Error(p$1(156,$.tag))};function Fk(_e,$){return ac(_e,$)}function $k(_e,$,et,tt){this.tag=_e,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,$,et,tt){return new $k(_e,$,et,tt)}function aj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Zk(_e){if(typeof _e=="function")return aj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function Pg(_e,$){var et=_e.alternate;return et===null?(et=Bg(_e.tag,$,_e.key,_e.mode),et.elementType=_e.elementType,et.type=_e.type,et.stateNode=_e.stateNode,et.alternate=_e,_e.alternate=et):(et.pendingProps=$,et.type=_e.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=_e.flags&14680064,et.childLanes=_e.childLanes,et.lanes=_e.lanes,et.child=_e.child,et.memoizedProps=_e.memoizedProps,et.memoizedState=_e.memoizedState,et.updateQueue=_e.updateQueue,$=_e.dependencies,et.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext},et.sibling=_e.sibling,et.index=_e.index,et.ref=_e.ref,et}function Rg(_e,$,et,tt,nt,rt){var it=2;if(tt=_e,typeof _e=="function")aj(_e)&&(it=1);else if(typeof _e=="string")it=5;else e:switch(_e){case ya:return Tg(et.children,nt,rt,$);case za:it=8,nt|=8;break;case Aa:return _e=Bg(12,et,$,nt|2),_e.elementType=Aa,_e.lanes=rt,_e;case Ea:return _e=Bg(13,et,$,nt),_e.elementType=Ea,_e.lanes=rt,_e;case Fa:return _e=Bg(19,et,$,nt),_e.elementType=Fa,_e.lanes=rt,_e;case Ia:return pj(et,nt,rt,$);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:it=10;break e;case Ca:it=9;break e;case Da:it=11;break e;case Ga:it=14;break e;case Ha:it=16,tt=null;break e}throw Error(p$1(130,_e==null?_e:typeof _e,""))}return $=Bg(it,et,$,nt),$.elementType=_e,$.type=tt,$.lanes=rt,$}function Tg(_e,$,et,tt){return _e=Bg(7,_e,tt,$),_e.lanes=et,_e}function pj(_e,$,et,tt){return _e=Bg(22,_e,tt,$),_e.elementType=Ia,_e.lanes=et,_e.stateNode={isHidden:!1},_e}function Qg(_e,$,et){return _e=Bg(6,_e,null,$),_e.lanes=et,_e}function Sg(_e,$,et){return $=Bg(4,_e.children!==null?_e.children:[],_e.key,$),$.lanes=et,$.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},$}function al(_e,$,et,tt,nt){this.tag=$,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=nt,this.mutableSourceEagerHydrationData=null}function bl(_e,$,et,tt,nt,rt,it,ot,st){return _e=new al(_e,$,et,ot,st),$===1?($=1,rt===!0&&($|=8)):$=0,rt=Bg(3,null,null,$),_e.current=rt,rt.stateNode=_e,rt.memoizedState={element:tt,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(rt),_e}function cl(_e,$,et){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:_e,containerInfo:$,implementation:et}}function dl(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$1(170));var $=_e;do{switch($.tag){case 3:$=$.stateNode.context;break e;case 1:if(Zf($.type)){$=$.stateNode.__reactInternalMemoizedMergedChildContext;break e}}$=$.return}while($!==null);throw Error(p$1(171))}if(_e.tag===1){var et=_e.type;if(Zf(et))return bg(_e,et,$)}return $}function el(_e,$,et,tt,nt,rt,it,ot,st){return _e=bl(et,tt,!0,_e,nt,rt,it,ot,st),_e.context=dl(null),et=_e.current,tt=R$1(),nt=yi(et),rt=mh(tt,nt),rt.callback=$??null,nh(et,rt,nt),_e.current.lanes=nt,Ac(_e,nt,tt),Dk(_e,tt),_e}function fl(_e,$,et,tt){var nt=$.current,rt=R$1(),it=yi(nt);return et=dl(et),$.context===null?$.context=et:$.pendingContext=et,$=mh(rt,it),$.payload={element:_e},tt=tt===void 0?null:tt,tt!==null&&($.callback=tt),_e=nh(nt,$,it),_e!==null&&(gi(_e,nt,it,rt),oh(_e,nt,it)),it}function gl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function hl(_e,$){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var et=_e.retryLane;_e.retryLane=et!==0&&et<$?et:$}}function il(_e,$){hl(_e,$),(_e=_e.alternate)&&hl(_e,$)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ll(_e){this._internalRoot=_e}ml.prototype.render=ll.prototype.render=function(_e){var $=this._internalRoot;if($===null)throw Error(p$1(409));fl(_e,$,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var $=_e.containerInfo;Rk(function(){fl(null,_e,null,null)}),$[uf]=null}};function ml(_e){this._internalRoot=_e}ml.prototype.unstable_scheduleHydration=function(_e){if(_e){var $=Hc();_e={blockedOn:null,target:_e,priority:$};for(var et=0;et<Qc.length&&$!==0&&$<Qc[et].priority;et++);Qc.splice(et,0,_e),et===0&&Vc(_e)}};function nl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_e,$,et,tt,nt){if(nt){if(typeof tt=="function"){var rt=tt;tt=function(){var at=gl(it);rt.call(at)}}var it=el($,tt,_e,0,null,!1,!1,"",pl);return _e._reactRootContainer=it,_e[uf]=it.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(),it}for(;nt=_e.lastChild;)_e.removeChild(nt);if(typeof tt=="function"){var ot=tt;tt=function(){var at=gl(st);ot.call(at)}}var st=bl(_e,0,!1,null,null,!1,!1,"",pl);return _e._reactRootContainer=st,_e[uf]=st.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(function(){fl($,st,et,tt)}),st}function rl(_e,$,et,tt,nt){var rt=et._reactRootContainer;if(rt){var it=rt;if(typeof nt=="function"){var ot=nt;nt=function(){var st=gl(it);ot.call(st)}}fl($,it,_e,nt)}else it=ql(et,$,_e,nt,tt);return gl(it)}Ec=function(_e){switch(_e.tag){case 3:var $=_e.stateNode;if($.current.memoizedState.isDehydrated){var et=tc($.pendingLanes);et!==0&&(Cc($,et|1),Dk($,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var tt=ih(_e,1);if(tt!==null){var nt=R$1();gi(tt,_e,1,nt)}}),il(_e,1)}};Fc=function(_e){if(_e.tag===13){var $=ih(_e,134217728);if($!==null){var et=R$1();gi($,_e,134217728,et)}il(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var $=yi(_e),et=ih(_e,$);if(et!==null){var tt=R$1();gi(et,_e,$,tt)}il(_e,$)}};Hc=function(){return C$1};Ic=function(_e,$){var et=C$1;try{return C$1=_e,$()}finally{C$1=et}};yb=function(_e,$,et){switch($){case"input":if(bb(_e,et),$=et.name,et.type==="radio"&&$!=null){for(et=_e;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+$)+'][type="radio"]'),$=0;$<et.length;$++){var tt=et[$];if(tt!==_e&&tt.form===_e.form){var nt=Db(tt);if(!nt)throw Error(p$1(90));Wa(tt),bb(tt,nt)}}}break;case"textarea":ib(_e,et);break;case"select":$=et.value,$!=null&&fb(_e,!!et.multiple,$,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_e,$){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl($))throw Error(p$1(200));return cl(_e,$,null,et)};reactDom_production_min.createRoot=function(_e,$){if(!nl(_e))throw Error(p$1(299));var et=!1,tt="",nt=kl;return $!=null&&($.unstable_strictMode===!0&&(et=!0),$.identifierPrefix!==void 0&&(tt=$.identifierPrefix),$.onRecoverableError!==void 0&&(nt=$.onRecoverableError)),$=bl(_e,1,!1,null,null,et,!1,tt,nt),_e[uf]=$.current,sf(_e.nodeType===8?_e.parentNode:_e),new ll($)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var $=_e._reactInternals;if($===void 0)throw typeof _e.render=="function"?Error(p$1(188)):(_e=Object.keys(_e).join(","),Error(p$1(268,_e)));return _e=Zb($),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Rk(_e)};reactDom_production_min.hydrate=function(_e,$,et){if(!ol($))throw Error(p$1(200));return rl(null,_e,$,!0,et)};reactDom_production_min.hydrateRoot=function(_e,$,et){if(!nl(_e))throw Error(p$1(405));var tt=et!=null&&et.hydratedSources||null,nt=!1,rt="",it=kl;if(et!=null&&(et.unstable_strictMode===!0&&(nt=!0),et.identifierPrefix!==void 0&&(rt=et.identifierPrefix),et.onRecoverableError!==void 0&&(it=et.onRecoverableError)),$=el($,null,_e,1,et??null,nt,!1,rt,it),_e[uf]=$.current,sf(_e),tt)for(_e=0;_e<tt.length;_e++)et=tt[_e],nt=et._getVersion,nt=nt(et._source),$.mutableSourceEagerHydrationData==null?$.mutableSourceEagerHydrationData=[et,nt]:$.mutableSourceEagerHydrationData.push(et,nt);return new ml($)};reactDom_production_min.render=function(_e,$,et){if(!ol($))throw Error(p$1(200));return rl(null,_e,$,!1,et)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!ol(_e))throw Error(p$1(40));return _e._reactRootContainer?(Rk(function(){rl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,$,et,tt){if(!ol(et))throw Error(p$1(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$1(38));return rl(_e,$,et,!1,tt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const Gt=getDefaultExportFromCjs$1(reactDomExports);var createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$1=0;function genId(){return count$1=(count$1+1)%Number.MAX_SAFE_INTEGER,count$1.toString()}const toastTimeouts=new Map,addToRemoveQueue=_e=>{if(toastTimeouts.has(_e))return;const $=setTimeout(()=>{toastTimeouts.delete(_e),dispatch({type:"REMOVE_TOAST",toastId:_e})},TOAST_REMOVE_DELAY);toastTimeouts.set(_e,$)},reducer=(_e,$)=>{switch($.type){case"ADD_TOAST":return{..._e,toasts:[$.toast,..._e.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{..._e,toasts:_e.toasts.map(et=>et.id===$.toast.id?{...et,...$.toast}:et)};case"DISMISS_TOAST":{const{toastId:et}=$;return et?addToRemoveQueue(et):_e.toasts.forEach(tt=>{addToRemoveQueue(tt.id)}),{..._e,toasts:_e.toasts.map(tt=>tt.id===et||et===void 0?{...tt,open:!1}:tt)}}case"REMOVE_TOAST":return $.toastId===void 0?{..._e,toasts:[]}:{..._e,toasts:_e.toasts.filter(et=>et.id!==$.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(_e){memoryState=reducer(memoryState,_e),listeners.forEach($=>{$(memoryState)})}function toast({..._e}){const $=genId(),et=nt=>dispatch({type:"UPDATE_TOAST",toast:{...nt,id:$}}),tt=()=>dispatch({type:"DISMISS_TOAST",toastId:$});return dispatch({type:"ADD_TOAST",toast:{..._e,id:$,open:!0,onOpenChange:nt=>{nt||tt()}}}),{id:$,dismiss:tt,update:et}}function useToast(){const[_e,$]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push($),()=>{const et=listeners.indexOf($);et>-1&&listeners.splice(et,1)}),[_e]),{..._e,toast,dismiss:et=>dispatch({type:"DISMISS_TOAST",toastId:et})}}function composeEventHandlers(_e,$,{checkForDefaultPrevented:et=!0}={}){return function(nt){if(_e==null||_e(nt),et===!1||!nt.defaultPrevented)return $==null?void 0:$(nt)}}function setRef(_e,$){typeof _e=="function"?_e($):_e!=null&&(_e.current=$)}function composeRefs(..._e){return $=>_e.forEach(et=>setRef(et,$))}function useComposedRefs(..._e){return reactExports.useCallback(composeRefs(..._e),_e)}function createContextScope$2(_e,$=[]){let et=[];function tt(rt,it){const ot=reactExports.createContext(it),st=et.length;et=[...et,it];function at(dt){const{scope:pt,children:ht,...vt}=dt,mt=(pt==null?void 0:pt[_e][st])||ot,kt=reactExports.useMemo(()=>vt,Object.values(vt));return jsxRuntimeExports.jsx(mt.Provider,{value:kt,children:ht})}function lt(dt,pt){const ht=(pt==null?void 0:pt[_e][st])||ot,vt=reactExports.useContext(ht);if(vt)return vt;if(it!==void 0)return it;throw new Error(`\`${dt}\` must be used within \`${rt}\``)}return at.displayName=rt+"Provider",[at,lt]}const nt=()=>{const rt=et.map(it=>reactExports.createContext(it));return function(ot){const st=(ot==null?void 0:ot[_e])||rt;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...ot,[_e]:st}}),[ot,st])}};return nt.scopeName=_e,[tt,composeContextScopes$2(nt,...$)]}function composeContextScopes$2(..._e){const $=_e[0];if(_e.length===1)return $;const et=()=>{const tt=_e.map(nt=>({useScope:nt(),scopeName:nt.scopeName}));return function(rt){const it=tt.reduce((ot,{useScope:st,scopeName:at})=>{const dt=st(rt)[`__scope${at}`];return{...ot,...dt}},{});return reactExports.useMemo(()=>({[`__scope${$.scopeName}`]:it}),[it])}};return et.scopeName=$.scopeName,et}var Slot=reactExports.forwardRef((_e,$)=>{const{children:et,...tt}=_e,nt=reactExports.Children.toArray(et),rt=nt.find(isSlottable);if(rt){const it=rt.props.children,ot=nt.map(st=>st===rt?reactExports.Children.count(it)>1?reactExports.Children.only(null):reactExports.isValidElement(it)?it.props.children:null:st);return jsxRuntimeExports.jsx(SlotClone,{...tt,ref:$,children:reactExports.isValidElement(it)?reactExports.cloneElement(it,void 0,ot):null})}return jsxRuntimeExports.jsx(SlotClone,{...tt,ref:$,children:et})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((_e,$)=>{const{children:et,...tt}=_e;if(reactExports.isValidElement(et)){const nt=getElementRef$1(et);return reactExports.cloneElement(et,{...mergeProps(tt,et.props),ref:$?composeRefs($,nt):nt})}return reactExports.Children.count(et)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:_e})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e});function isSlottable(_e){return reactExports.isValidElement(_e)&&_e.type===Slottable}function mergeProps(_e,$){const et={...$};for(const tt in $){const nt=_e[tt],rt=$[tt];/^on[A-Z]/.test(tt)?nt&&rt?et[tt]=(...ot)=>{rt(...ot),nt(...ot)}:nt&&(et[tt]=nt):tt==="style"?et[tt]={...nt,...rt}:tt==="className"&&(et[tt]=[nt,rt].filter(Boolean).join(" "))}return{..._e,...et}}function getElementRef$1(_e){var tt,nt;let $=(tt=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:tt.get,et=$&&"isReactWarning"in $&&$.isReactWarning;return et?_e.ref:($=(nt=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:nt.get,et=$&&"isReactWarning"in $&&$.isReactWarning,et?_e.props.ref:_e.props.ref||_e.ref)}function createCollection(_e){const $=_e+"CollectionProvider",[et,tt]=createContextScope$2($),[nt,rt]=et($,{collectionRef:{current:null},itemMap:new Map}),it=ht=>{const{scope:vt,children:mt}=ht,kt=e$2.useRef(null),bt=e$2.useRef(new Map).current;return jsxRuntimeExports.jsx(nt,{scope:vt,itemMap:bt,collectionRef:kt,children:mt})};it.displayName=$;const ot=_e+"CollectionSlot",st=e$2.forwardRef((ht,vt)=>{const{scope:mt,children:kt}=ht,bt=rt(ot,mt),gt=useComposedRefs(vt,bt.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:gt,children:kt})});st.displayName=ot;const at=_e+"CollectionItemSlot",lt="data-radix-collection-item",dt=e$2.forwardRef((ht,vt)=>{const{scope:mt,children:kt,...bt}=ht,gt=e$2.useRef(null),St=useComposedRefs(vt,gt),yt=rt(at,mt);return e$2.useEffect(()=>(yt.itemMap.set(gt,{ref:gt,...bt}),()=>void yt.itemMap.delete(gt))),jsxRuntimeExports.jsx(Slot,{[lt]:"",ref:St,children:kt})});dt.displayName=at;function pt(ht){const vt=rt(_e+"CollectionConsumer",ht);return e$2.useCallback(()=>{const kt=vt.collectionRef.current;if(!kt)return[];const bt=Array.from(kt.querySelectorAll(`[${lt}]`));return Array.from(vt.itemMap.values()).sort((yt,Et)=>bt.indexOf(yt.ref.current)-bt.indexOf(Et.ref.current))},[vt.collectionRef,vt.itemMap])}return[{Provider:it,Slot:st,ItemSlot:dt},pt,tt]}function createContextScope$1(_e,$=[]){let et=[];function tt(rt,it){const ot=reactExports.createContext(it),st=et.length;et=[...et,it];const at=dt=>{var bt;const{scope:pt,children:ht,...vt}=dt,mt=((bt=pt==null?void 0:pt[_e])==null?void 0:bt[st])||ot,kt=reactExports.useMemo(()=>vt,Object.values(vt));return jsxRuntimeExports.jsx(mt.Provider,{value:kt,children:ht})};at.displayName=rt+"Provider";function lt(dt,pt){var mt;const ht=((mt=pt==null?void 0:pt[_e])==null?void 0:mt[st])||ot,vt=reactExports.useContext(ht);if(vt)return vt;if(it!==void 0)return it;throw new Error(`\`${dt}\` must be used within \`${rt}\``)}return[at,lt]}const nt=()=>{const rt=et.map(it=>reactExports.createContext(it));return function(ot){const st=(ot==null?void 0:ot[_e])||rt;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...ot,[_e]:st}}),[ot,st])}};return nt.scopeName=_e,[tt,composeContextScopes$1(nt,...$)]}function composeContextScopes$1(..._e){const $=_e[0];if(_e.length===1)return $;const et=()=>{const tt=_e.map(nt=>({useScope:nt(),scopeName:nt.scopeName}));return function(rt){const it=tt.reduce((ot,{useScope:st,scopeName:at})=>{const dt=st(rt)[`__scope${at}`];return{...ot,...dt}},{});return reactExports.useMemo(()=>({[`__scope${$.scopeName}`]:it}),[it])}};return et.scopeName=$.scopeName,et}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((_e,$)=>{const et=reactExports.forwardRef((tt,nt)=>{const{asChild:rt,...it}=tt,ot=rt?Slot:$;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(ot,{...it,ref:nt})});return et.displayName=`Primitive.${$}`,{..._e,[$]:et}},{});function dispatchDiscreteCustomEvent(_e,$){_e&&reactDomExports.flushSync(()=>_e.dispatchEvent($))}function useCallbackRef(_e){const $=reactExports.useRef(_e);return reactExports.useEffect(()=>{$.current=_e}),reactExports.useMemo(()=>(...et)=>{var tt;return(tt=$.current)==null?void 0:tt.call($,...et)},[])}function useEscapeKeydown(_e,$=globalThis==null?void 0:globalThis.document){const et=useCallbackRef(_e);reactExports.useEffect(()=>{const tt=nt=>{nt.key==="Escape"&&et(nt)};return $.addEventListener("keydown",tt,{capture:!0}),()=>$.removeEventListener("keydown",tt,{capture:!0})},[et,$])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_e,$)=>{const{disableOutsidePointerEvents:et=!1,onEscapeKeyDown:tt,onPointerDownOutside:nt,onFocusOutside:rt,onInteractOutside:it,onDismiss:ot,...st}=_e,at=reactExports.useContext(DismissableLayerContext),[lt,dt]=reactExports.useState(null),pt=(lt==null?void 0:lt.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,ht]=reactExports.useState({}),vt=useComposedRefs($,wt=>dt(wt)),mt=Array.from(at.layers),[kt]=[...at.layersWithOutsidePointerEventsDisabled].slice(-1),bt=mt.indexOf(kt),gt=lt?mt.indexOf(lt):-1,St=at.layersWithOutsidePointerEventsDisabled.size>0,yt=gt>=bt,Et=usePointerDownOutside(wt=>{const Rt=wt.target,xt=[...at.branches].some(Pt=>Pt.contains(Rt));!yt||xt||(nt==null||nt(wt),it==null||it(wt),wt.defaultPrevented||ot==null||ot())},pt),Tt=useFocusOutside(wt=>{const Rt=wt.target;[...at.branches].some(Pt=>Pt.contains(Rt))||(rt==null||rt(wt),it==null||it(wt),wt.defaultPrevented||ot==null||ot())},pt);return useEscapeKeydown(wt=>{gt===at.layers.size-1&&(tt==null||tt(wt),!wt.defaultPrevented&&ot&&(wt.preventDefault(),ot()))},pt),reactExports.useEffect(()=>{if(lt)return et&&(at.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=pt.body.style.pointerEvents,pt.body.style.pointerEvents="none"),at.layersWithOutsidePointerEventsDisabled.add(lt)),at.layers.add(lt),dispatchUpdate(),()=>{et&&at.layersWithOutsidePointerEventsDisabled.size===1&&(pt.body.style.pointerEvents=originalBodyPointerEvents)}},[lt,pt,et,at]),reactExports.useEffect(()=>()=>{lt&&(at.layers.delete(lt),at.layersWithOutsidePointerEventsDisabled.delete(lt),dispatchUpdate())},[lt,at]),reactExports.useEffect(()=>{const wt=()=>ht({});return document.addEventListener(CONTEXT_UPDATE,wt),()=>document.removeEventListener(CONTEXT_UPDATE,wt)},[]),jsxRuntimeExports.jsx(Primitive.div,{...st,ref:vt,style:{pointerEvents:St?yt?"auto":"none":void 0,..._e.style},onFocusCapture:composeEventHandlers(_e.onFocusCapture,Tt.onFocusCapture),onBlurCapture:composeEventHandlers(_e.onBlurCapture,Tt.onBlurCapture),onPointerDownCapture:composeEventHandlers(_e.onPointerDownCapture,Et.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_e,$)=>{const et=reactExports.useContext(DismissableLayerContext),tt=reactExports.useRef(null),nt=useComposedRefs($,tt);return reactExports.useEffect(()=>{const rt=tt.current;if(rt)return et.branches.add(rt),()=>{et.branches.delete(rt)}},[et.branches]),jsxRuntimeExports.jsx(Primitive.div,{..._e,ref:nt})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_e,$=globalThis==null?void 0:globalThis.document){const et=useCallbackRef(_e),tt=reactExports.useRef(!1),nt=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const rt=ot=>{if(ot.target&&!tt.current){let st=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,et,at,{discrete:!0})};const at={originalEvent:ot};ot.pointerType==="touch"?($.removeEventListener("click",nt.current),nt.current=st,$.addEventListener("click",nt.current,{once:!0})):st()}else $.removeEventListener("click",nt.current);tt.current=!1},it=window.setTimeout(()=>{$.addEventListener("pointerdown",rt)},0);return()=>{window.clearTimeout(it),$.removeEventListener("pointerdown",rt),$.removeEventListener("click",nt.current)}},[$,et]),{onPointerDownCapture:()=>tt.current=!0}}function useFocusOutside(_e,$=globalThis==null?void 0:globalThis.document){const et=useCallbackRef(_e),tt=reactExports.useRef(!1);return reactExports.useEffect(()=>{const nt=rt=>{rt.target&&!tt.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,et,{originalEvent:rt},{discrete:!1})};return $.addEventListener("focusin",nt),()=>$.removeEventListener("focusin",nt)},[$,et]),{onFocusCapture:()=>tt.current=!0,onBlurCapture:()=>tt.current=!1}}function dispatchUpdate(){const _e=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_e)}function handleAndDispatchCustomEvent$1(_e,$,et,{discrete:tt}){const nt=et.originalEvent.target,rt=new CustomEvent(_e,{bubbles:!1,cancelable:!0,detail:et});$&&nt.addEventListener(_e,$,{once:!0}),tt?dispatchDiscreteCustomEvent(nt,rt):nt.dispatchEvent(rt)}var Root$4=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$1="Portal",Portal=reactExports.forwardRef((_e,$)=>{var ot;const{container:et,...tt}=_e,[nt,rt]=reactExports.useState(!1);useLayoutEffect2(()=>rt(!0),[]);const it=et||nt&&((ot=globalThis==null?void 0:globalThis.document)==null?void 0:ot.body);return it?Gt.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...tt,ref:$}),it):null});Portal.displayName=PORTAL_NAME$1;function useStateMachine$1(_e,$){return reactExports.useReducer((et,tt)=>$[et][tt]??et,_e)}var Presence=_e=>{const{present:$,children:et}=_e,tt=usePresence($),nt=typeof et=="function"?et({present:tt.isPresent}):reactExports.Children.only(et),rt=useComposedRefs(tt.ref,getElementRef(nt));return typeof et=="function"||tt.isPresent?reactExports.cloneElement(nt,{ref:rt}):null};Presence.displayName="Presence";function usePresence(_e){const[$,et]=reactExports.useState(),tt=reactExports.useRef({}),nt=reactExports.useRef(_e),rt=reactExports.useRef("none"),it=_e?"mounted":"unmounted",[ot,st]=useStateMachine$1(it,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const at=getAnimationName(tt.current);rt.current=ot==="mounted"?at:"none"},[ot]),useLayoutEffect2(()=>{const at=tt.current,lt=nt.current;if(lt!==_e){const pt=rt.current,ht=getAnimationName(at);_e?st("MOUNT"):ht==="none"||(at==null?void 0:at.display)==="none"?st("UNMOUNT"):st(lt&&pt!==ht?"ANIMATION_OUT":"UNMOUNT"),nt.current=_e}},[_e,st]),useLayoutEffect2(()=>{if($){let at;const lt=$.ownerDocument.defaultView??window,dt=ht=>{const mt=getAnimationName(tt.current).includes(ht.animationName);if(ht.target===$&&mt&&(st("ANIMATION_END"),!nt.current)){const kt=$.style.animationFillMode;$.style.animationFillMode="forwards",at=lt.setTimeout(()=>{$.style.animationFillMode==="forwards"&&($.style.animationFillMode=kt)})}},pt=ht=>{ht.target===$&&(rt.current=getAnimationName(tt.current))};return $.addEventListener("animationstart",pt),$.addEventListener("animationcancel",dt),$.addEventListener("animationend",dt),()=>{lt.clearTimeout(at),$.removeEventListener("animationstart",pt),$.removeEventListener("animationcancel",dt),$.removeEventListener("animationend",dt)}}else st("ANIMATION_END")},[$,st]),{isPresent:["mounted","unmountSuspended"].includes(ot),ref:reactExports.useCallback(at=>{at&&(tt.current=getComputedStyle(at)),et(at)},[])}}function getAnimationName(_e){return(_e==null?void 0:_e.animationName)||"none"}function getElementRef(_e){var tt,nt;let $=(tt=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:tt.get,et=$&&"isReactWarning"in $&&$.isReactWarning;return et?_e.ref:($=(nt=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:nt.get,et=$&&"isReactWarning"in $&&$.isReactWarning,et?_e.props.ref:_e.props.ref||_e.ref)}function useControllableState({prop:_e,defaultProp:$,onChange:et=()=>{}}){const[tt,nt]=useUncontrolledState({defaultProp:$,onChange:et}),rt=_e!==void 0,it=rt?_e:tt,ot=useCallbackRef(et),st=reactExports.useCallback(at=>{if(rt){const dt=typeof at=="function"?at(_e):at;dt!==_e&&ot(dt)}else nt(at)},[rt,_e,nt,ot]);return[it,st]}function useUncontrolledState({defaultProp:_e,onChange:$}){const et=reactExports.useState(_e),[tt]=et,nt=reactExports.useRef(tt),rt=useCallbackRef($);return reactExports.useEffect(()=>{nt.current!==tt&&(rt(tt),nt.current=tt)},[tt,nt,rt]),et}var NAME$1="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_e,$)=>jsxRuntimeExports.jsx(Primitive.span,{..._e,ref:$,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",..._e.style}}));VisuallyHidden.displayName=NAME$1;var Root$3=VisuallyHidden,PROVIDER_NAME$1="ToastProvider",[Collection,useCollection,createCollectionScope]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope$1("Toast",[createCollectionScope]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME$1),ToastProvider$1=_e=>{const{__scopeToast:$,label:et="Notification",duration:tt=5e3,swipeDirection:nt="right",swipeThreshold:rt=50,children:it}=_e,[ot,st]=reactExports.useState(null),[at,lt]=reactExports.useState(0),dt=reactExports.useRef(!1),pt=reactExports.useRef(!1);return et.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME$1}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection.Provider,{scope:$,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:$,label:et,duration:tt,swipeDirection:nt,swipeThreshold:rt,toastCount:at,viewport:ot,onViewportChange:st,onToastAdd:reactExports.useCallback(()=>lt(ht=>ht+1),[]),onToastRemove:reactExports.useCallback(()=>lt(ht=>ht-1),[]),isFocusedToastEscapeKeyDownRef:dt,isClosePausedRef:pt,children:it})})};ToastProvider$1.displayName=PROVIDER_NAME$1;var VIEWPORT_NAME$1="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((_e,$)=>{const{__scopeToast:et,hotkey:tt=VIEWPORT_DEFAULT_HOTKEY,label:nt="Notifications ({hotkey})",...rt}=_e,it=useToastProviderContext(VIEWPORT_NAME$1,et),ot=useCollection(et),st=reactExports.useRef(null),at=reactExports.useRef(null),lt=reactExports.useRef(null),dt=reactExports.useRef(null),pt=useComposedRefs($,dt,it.onViewportChange),ht=tt.join("+").replace(/Key/g,"").replace(/Digit/g,""),vt=it.toastCount>0;reactExports.useEffect(()=>{const kt=bt=>{var St;tt.length!==0&&tt.every(yt=>bt[yt]||bt.code===yt)&&((St=dt.current)==null||St.focus())};return document.addEventListener("keydown",kt),()=>document.removeEventListener("keydown",kt)},[tt]),reactExports.useEffect(()=>{const kt=st.current,bt=dt.current;if(vt&&kt&&bt){const gt=()=>{if(!it.isClosePausedRef.current){const Tt=new CustomEvent(VIEWPORT_PAUSE);bt.dispatchEvent(Tt),it.isClosePausedRef.current=!0}},St=()=>{if(it.isClosePausedRef.current){const Tt=new CustomEvent(VIEWPORT_RESUME);bt.dispatchEvent(Tt),it.isClosePausedRef.current=!1}},yt=Tt=>{!kt.contains(Tt.relatedTarget)&&St()},Et=()=>{kt.contains(document.activeElement)||St()};return kt.addEventListener("focusin",gt),kt.addEventListener("focusout",yt),kt.addEventListener("pointermove",gt),kt.addEventListener("pointerleave",Et),window.addEventListener("blur",gt),window.addEventListener("focus",St),()=>{kt.removeEventListener("focusin",gt),kt.removeEventListener("focusout",yt),kt.removeEventListener("pointermove",gt),kt.removeEventListener("pointerleave",Et),window.removeEventListener("blur",gt),window.removeEventListener("focus",St)}}},[vt,it.isClosePausedRef]);const mt=reactExports.useCallback(({tabbingDirection:kt})=>{const gt=ot().map(St=>{const yt=St.ref.current,Et=[yt,...getTabbableCandidates(yt)];return kt==="forwards"?Et:Et.reverse()});return(kt==="forwards"?gt.reverse():gt).flat()},[ot]);return reactExports.useEffect(()=>{const kt=dt.current;if(kt){const bt=gt=>{var Et,Tt,wt;const St=gt.altKey||gt.ctrlKey||gt.metaKey;if(gt.key==="Tab"&&!St){const Rt=document.activeElement,xt=gt.shiftKey;if(gt.target===kt&&xt){(Et=at.current)==null||Et.focus();return}const Nt=mt({tabbingDirection:xt?"backwards":"forwards"}),Bt=Nt.findIndex(Jt=>Jt===Rt);focusFirst(Nt.slice(Bt+1))?gt.preventDefault():xt?(Tt=at.current)==null||Tt.focus():(wt=lt.current)==null||wt.focus()}};return kt.addEventListener("keydown",bt),()=>kt.removeEventListener("keydown",bt)}},[ot,mt]),jsxRuntimeExports.jsxs(Branch,{ref:st,role:"region","aria-label":nt.replace("{hotkey}",ht),tabIndex:-1,style:{pointerEvents:vt?void 0:"none"},children:[vt&&jsxRuntimeExports.jsx(FocusProxy,{ref:at,onFocusFromOutsideViewport:()=>{const kt=mt({tabbingDirection:"forwards"});focusFirst(kt)}}),jsxRuntimeExports.jsx(Collection.Slot,{scope:et,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...rt,ref:pt})}),vt&&jsxRuntimeExports.jsx(FocusProxy,{ref:lt,onFocusFromOutsideViewport:()=>{const kt=mt({tabbingDirection:"backwards"});focusFirst(kt)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME$1;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((_e,$)=>{const{__scopeToast:et,onFocusFromOutsideViewport:tt,...nt}=_e,rt=useToastProviderContext(FOCUS_PROXY_NAME,et);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...nt,ref:$,style:{position:"fixed"},onFocus:it=>{var at;const ot=it.relatedTarget;!((at=rt.viewport)!=null&&at.contains(ot))&&tt()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((_e,$)=>{const{forceMount:et,open:tt,defaultOpen:nt,onOpenChange:rt,...it}=_e,[ot=!0,st]=useControllableState({prop:tt,defaultProp:nt,onChange:rt});return jsxRuntimeExports.jsx(Presence,{present:et||ot,children:jsxRuntimeExports.jsx(ToastImpl,{open:ot,...it,ref:$,onClose:()=>st(!1),onPause:useCallbackRef(_e.onPause),onResume:useCallbackRef(_e.onResume),onSwipeStart:composeEventHandlers(_e.onSwipeStart,at=>{at.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(_e.onSwipeMove,at=>{const{x:lt,y:dt}=at.detail.delta;at.currentTarget.setAttribute("data-swipe","move"),at.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${lt}px`),at.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${dt}px`)}),onSwipeCancel:composeEventHandlers(_e.onSwipeCancel,at=>{at.currentTarget.setAttribute("data-swipe","cancel"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),at.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),at.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(_e.onSwipeEnd,at=>{const{x:lt,y:dt}=at.detail.delta;at.currentTarget.setAttribute("data-swipe","end"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),at.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${lt}px`),at.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${dt}px`),st(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((_e,$)=>{const{__scopeToast:et,type:tt="foreground",duration:nt,open:rt,onClose:it,onEscapeKeyDown:ot,onPause:st,onResume:at,onSwipeStart:lt,onSwipeMove:dt,onSwipeCancel:pt,onSwipeEnd:ht,...vt}=_e,mt=useToastProviderContext(TOAST_NAME,et),[kt,bt]=reactExports.useState(null),gt=useComposedRefs($,Jt=>bt(Jt)),St=reactExports.useRef(null),yt=reactExports.useRef(null),Et=nt||mt.duration,Tt=reactExports.useRef(0),wt=reactExports.useRef(Et),Rt=reactExports.useRef(0),{onToastAdd:xt,onToastRemove:Pt}=mt,At=useCallbackRef(()=>{var ln;(kt==null?void 0:kt.contains(document.activeElement))&&((ln=mt.viewport)==null||ln.focus()),it()}),Nt=reactExports.useCallback(Jt=>{!Jt||Jt===1/0||(window.clearTimeout(Rt.current),Tt.current=new Date().getTime(),Rt.current=window.setTimeout(At,Jt))},[At]);reactExports.useEffect(()=>{const Jt=mt.viewport;if(Jt){const ln=()=>{Nt(wt.current),at==null||at()},on=()=>{const an=new Date().getTime()-Tt.current;wt.current=wt.current-an,window.clearTimeout(Rt.current),st==null||st()};return Jt.addEventListener(VIEWPORT_PAUSE,on),Jt.addEventListener(VIEWPORT_RESUME,ln),()=>{Jt.removeEventListener(VIEWPORT_PAUSE,on),Jt.removeEventListener(VIEWPORT_RESUME,ln)}}},[mt.viewport,Et,st,at,Nt]),reactExports.useEffect(()=>{rt&&!mt.isClosePausedRef.current&&Nt(Et)},[rt,Et,mt.isClosePausedRef,Nt]),reactExports.useEffect(()=>(xt(),()=>Pt()),[xt,Pt]);const Bt=reactExports.useMemo(()=>kt?getAnnounceTextContent(kt):null,[kt]);return mt.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Bt&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:et,role:"status","aria-live":tt==="foreground"?"assertive":"polite","aria-atomic":!0,children:Bt}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:et,onClose:At,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:et,children:jsxRuntimeExports.jsx(Root$4,{asChild:!0,onEscapeKeyDown:composeEventHandlers(ot,()=>{mt.isFocusedToastEscapeKeyDownRef.current||At(),mt.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":rt?"open":"closed","data-swipe-direction":mt.swipeDirection,...vt,ref:gt,style:{userSelect:"none",touchAction:"none",..._e.style},onKeyDown:composeEventHandlers(_e.onKeyDown,Jt=>{Jt.key==="Escape"&&(ot==null||ot(Jt.nativeEvent),Jt.nativeEvent.defaultPrevented||(mt.isFocusedToastEscapeKeyDownRef.current=!0,At()))}),onPointerDown:composeEventHandlers(_e.onPointerDown,Jt=>{Jt.button===0&&(St.current={x:Jt.clientX,y:Jt.clientY})}),onPointerMove:composeEventHandlers(_e.onPointerMove,Jt=>{if(!St.current)return;const ln=Jt.clientX-St.current.x,on=Jt.clientY-St.current.y,an=!!yt.current,Lt=["left","right"].includes(mt.swipeDirection),en=["left","up"].includes(mt.swipeDirection)?Math.min:Math.max,rn=Lt?en(0,ln):0,sn=Lt?0:en(0,on),hn=Jt.pointerType==="touch"?10:2,mn={x:rn,y:sn},wn={originalEvent:Jt,delta:mn};an?(yt.current=mn,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,dt,wn,{discrete:!1})):isDeltaInDirection(mn,mt.swipeDirection,hn)?(yt.current=mn,handleAndDispatchCustomEvent(TOAST_SWIPE_START,lt,wn,{discrete:!1}),Jt.target.setPointerCapture(Jt.pointerId)):(Math.abs(ln)>hn||Math.abs(on)>hn)&&(St.current=null)}),onPointerUp:composeEventHandlers(_e.onPointerUp,Jt=>{const ln=yt.current,on=Jt.target;if(on.hasPointerCapture(Jt.pointerId)&&on.releasePointerCapture(Jt.pointerId),yt.current=null,St.current=null,ln){const an=Jt.currentTarget,Lt={originalEvent:Jt,delta:ln};isDeltaInDirection(ln,mt.swipeDirection,mt.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,ht,Lt,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,pt,Lt,{discrete:!0}),an.addEventListener("click",en=>en.preventDefault(),{once:!0})}})})})}),mt.viewport)})]}):null}),ToastAnnounce=_e=>{const{__scopeToast:$,children:et,...tt}=_e,nt=useToastProviderContext(TOAST_NAME,$),[rt,it]=reactExports.useState(!1),[ot,st]=reactExports.useState(!1);return useNextFrame(()=>it(!0)),reactExports.useEffect(()=>{const at=window.setTimeout(()=>st(!0),1e3);return()=>window.clearTimeout(at)},[]),ot?null:jsxRuntimeExports.jsx(Portal,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...tt,children:rt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[nt.label," ",et]})})})},TITLE_NAME="ToastTitle",ToastTitle$1=reactExports.forwardRef((_e,$)=>{const{__scopeToast:et,...tt}=_e;return jsxRuntimeExports.jsx(Primitive.div,{...tt,ref:$})});ToastTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="ToastDescription",ToastDescription$1=reactExports.forwardRef((_e,$)=>{const{__scopeToast:et,...tt}=_e;return jsxRuntimeExports.jsx(Primitive.div,{...tt,ref:$})});ToastDescription$1.displayName=DESCRIPTION_NAME;var ACTION_NAME="ToastAction",ToastAction$1=reactExports.forwardRef((_e,$)=>{const{altText:et,...tt}=_e;return et.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:et,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...tt,ref:$})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME;var CLOSE_NAME="ToastClose",ToastClose$1=reactExports.forwardRef((_e,$)=>{const{__scopeToast:et,...tt}=_e,nt=useToastInteractiveContext(CLOSE_NAME,et);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...tt,ref:$,onClick:composeEventHandlers(_e.onClick,nt.onClose)})})});ToastClose$1.displayName=CLOSE_NAME;var ToastAnnounceExclude=reactExports.forwardRef((_e,$)=>{const{__scopeToast:et,altText:tt,...nt}=_e;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":tt||void 0,...nt,ref:$})});function getAnnounceTextContent(_e){const $=[];return Array.from(_e.childNodes).forEach(tt=>{if(tt.nodeType===tt.TEXT_NODE&&tt.textContent&&$.push(tt.textContent),isHTMLElement$1(tt)){const nt=tt.ariaHidden||tt.hidden||tt.style.display==="none",rt=tt.dataset.radixToastAnnounceExclude==="";if(!nt)if(rt){const it=tt.dataset.radixToastAnnounceAlt;it&&$.push(it)}else $.push(...getAnnounceTextContent(tt))}}),$}function handleAndDispatchCustomEvent(_e,$,et,{discrete:tt}){const nt=et.originalEvent.currentTarget,rt=new CustomEvent(_e,{bubbles:!0,cancelable:!0,detail:et});$&&nt.addEventListener(_e,$,{once:!0}),tt?dispatchDiscreteCustomEvent(nt,rt):nt.dispatchEvent(rt)}var isDeltaInDirection=(_e,$,et=0)=>{const tt=Math.abs(_e.x),nt=Math.abs(_e.y),rt=tt>nt;return $==="left"||$==="right"?rt&&tt>et:!rt&&nt>et};function useNextFrame(_e=()=>{}){const $=useCallbackRef(_e);useLayoutEffect2(()=>{let et=0,tt=0;return et=window.requestAnimationFrame(()=>tt=window.requestAnimationFrame($)),()=>{window.cancelAnimationFrame(et),window.cancelAnimationFrame(tt)}},[$])}function isHTMLElement$1(_e){return _e.nodeType===_e.ELEMENT_NODE}function getTabbableCandidates(_e){const $=[],et=document.createTreeWalker(_e,NodeFilter.SHOW_ELEMENT,{acceptNode:tt=>{const nt=tt.tagName==="INPUT"&&tt.type==="hidden";return tt.disabled||tt.hidden||nt?NodeFilter.FILTER_SKIP:tt.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;et.nextNode();)$.push(et.currentNode);return $}function focusFirst(_e){const $=document.activeElement;return _e.some(et=>et===$?!0:(et.focus(),document.activeElement!==$))}var Provider$1=ToastProvider$1,Viewport$1=ToastViewport$1,Root2$1=Toast$1,Title=ToastTitle$1,Description=ToastDescription$1,Action$1=ToastAction$1,Close=ToastClose$1;function r$2(_e){var $,et,tt="";if(typeof _e=="string"||typeof _e=="number")tt+=_e;else if(typeof _e=="object")if(Array.isArray(_e)){var nt=_e.length;for($=0;$<nt;$++)_e[$]&&(et=r$2(_e[$]))&&(tt&&(tt+=" "),tt+=et)}else for(et in _e)_e[et]&&(tt&&(tt+=" "),tt+=et);return tt}function clsx(){for(var _e,$,et=0,tt="",nt=arguments.length;et<nt;et++)(_e=arguments[et])&&($=r$2(_e))&&(tt&&(tt+=" "),tt+=$);return tt}const falsyToString=_e=>typeof _e=="boolean"?`${_e}`:_e===0?"0":_e,cx=clsx,cva=(_e,$)=>et=>{var tt;if(($==null?void 0:$.variants)==null)return cx(_e,et==null?void 0:et.class,et==null?void 0:et.className);const{variants:nt,defaultVariants:rt}=$,it=Object.keys(nt).map(at=>{const lt=et==null?void 0:et[at],dt=rt==null?void 0:rt[at];if(lt===null)return null;const pt=falsyToString(lt)||falsyToString(dt);return nt[at][pt]}),ot=et&&Object.entries(et).reduce((at,lt)=>{let[dt,pt]=lt;return pt===void 0||(at[dt]=pt),at},{}),st=$==null||(tt=$.compoundVariants)===null||tt===void 0?void 0:tt.reduce((at,lt)=>{let{class:dt,className:pt,...ht}=lt;return Object.entries(ht).every(vt=>{let[mt,kt]=vt;return Array.isArray(kt)?kt.includes({...rt,...ot}[mt]):{...rt,...ot}[mt]===kt})?[...at,dt,pt]:at},[]);return cx(_e,it,st,et==null?void 0:et.class,et==null?void 0:et.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=_e=>_e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(..._e)=>_e.filter(($,et,tt)=>!!$&&$.trim()!==""&&tt.indexOf($)===et).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:_e="currentColor",size:$=24,strokeWidth:et=2,absoluteStrokeWidth:tt,className:nt="",children:rt,iconNode:it,...ot},st)=>reactExports.createElement("svg",{ref:st,...defaultAttributes,width:$,height:$,stroke:_e,strokeWidth:tt?Number(et)*24/Number($):et,className:mergeClasses("lucide",nt),...ot},[...it.map(([at,lt])=>reactExports.createElement(at,lt)),...Array.isArray(rt)?rt:[rt]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(_e,$)=>{const et=reactExports.forwardRef(({className:tt,...nt},rt)=>reactExports.createElement(Icon,{ref:rt,iconNode:$,className:mergeClasses(`lucide-${toKebabCase(_e)}`,tt),...nt}));return et.displayName=`${_e}`,et};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageSquare=createLucideIcon("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MicOff=createLucideIcon("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mic=createLucideIcon("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phone=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Send=createLucideIcon("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VideoOff=createLucideIcon("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Video=createLucideIcon("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Volume2=createLucideIcon("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VolumeOff=createLucideIcon("VolumeOff",[["path",{d:"M16 9a5 5 0 0 1 .95 2.293",key:"1fgyg8"}],["path",{d:"M19.364 5.636a9 9 0 0 1 1.889 9.96",key:"l3zxae"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"m7 7-.587.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298V11",key:"1gbwow"}],["path",{d:"M9.828 4.172A.686.686 0 0 1 11 4.657v.686",key:"s2je0y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=_e=>{const $=createClassMap(_e),{conflictingClassGroups:et,conflictingClassGroupModifiers:tt}=_e;return{getClassGroupId:it=>{const ot=it.split(CLASS_PART_SEPARATOR);return ot[0]===""&&ot.length!==1&&ot.shift(),getGroupRecursive(ot,$)||getGroupIdForArbitraryProperty(it)},getConflictingClassGroupIds:(it,ot)=>{const st=et[it]||[];return ot&&tt[it]?[...st,...tt[it]]:st}}},getGroupRecursive=(_e,$)=>{var it;if(_e.length===0)return $.classGroupId;const et=_e[0],tt=$.nextPart.get(et),nt=tt?getGroupRecursive(_e.slice(1),tt):void 0;if(nt)return nt;if($.validators.length===0)return;const rt=_e.join(CLASS_PART_SEPARATOR);return(it=$.validators.find(({validator:ot})=>ot(rt)))==null?void 0:it.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=_e=>{if(arbitraryPropertyRegex.test(_e)){const $=arbitraryPropertyRegex.exec(_e)[1],et=$==null?void 0:$.substring(0,$.indexOf(":"));if(et)return"arbitrary.."+et}},createClassMap=_e=>{const{theme:$,prefix:et}=_e,tt={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(_e.classGroups),et).forEach(([rt,it])=>{processClassesRecursively(it,tt,rt,$)}),tt},processClassesRecursively=(_e,$,et,tt)=>{_e.forEach(nt=>{if(typeof nt=="string"){const rt=nt===""?$:getPart($,nt);rt.classGroupId=et;return}if(typeof nt=="function"){if(isThemeGetter(nt)){processClassesRecursively(nt(tt),$,et,tt);return}$.validators.push({validator:nt,classGroupId:et});return}Object.entries(nt).forEach(([rt,it])=>{processClassesRecursively(it,getPart($,rt),et,tt)})})},getPart=(_e,$)=>{let et=_e;return $.split(CLASS_PART_SEPARATOR).forEach(tt=>{et.nextPart.has(tt)||et.nextPart.set(tt,{nextPart:new Map,validators:[]}),et=et.nextPart.get(tt)}),et},isThemeGetter=_e=>_e.isThemeGetter,getPrefixedClassGroupEntries=(_e,$)=>$?_e.map(([et,tt])=>{const nt=tt.map(rt=>typeof rt=="string"?$+rt:typeof rt=="object"?Object.fromEntries(Object.entries(rt).map(([it,ot])=>[$+it,ot])):rt);return[et,nt]}):_e,createLruCache=_e=>{if(_e<1)return{get:()=>{},set:()=>{}};let $=0,et=new Map,tt=new Map;const nt=(rt,it)=>{et.set(rt,it),$++,$>_e&&($=0,tt=et,et=new Map)};return{get(rt){let it=et.get(rt);if(it!==void 0)return it;if((it=tt.get(rt))!==void 0)return nt(rt,it),it},set(rt,it){et.has(rt)?et.set(rt,it):nt(rt,it)}}},IMPORTANT_MODIFIER="!",createParseClassName=_e=>{const{separator:$,experimentalParseClassName:et}=_e,tt=$.length===1,nt=$[0],rt=$.length,it=ot=>{const st=[];let at=0,lt=0,dt;for(let kt=0;kt<ot.length;kt++){let bt=ot[kt];if(at===0){if(bt===nt&&(tt||ot.slice(kt,kt+rt)===$)){st.push(ot.slice(lt,kt)),lt=kt+rt;continue}if(bt==="/"){dt=kt;continue}}bt==="["?at++:bt==="]"&&at--}const pt=st.length===0?ot:ot.substring(lt),ht=pt.startsWith(IMPORTANT_MODIFIER),vt=ht?pt.substring(1):pt,mt=dt&&dt>lt?dt-lt:void 0;return{modifiers:st,hasImportantModifier:ht,baseClassName:vt,maybePostfixModifierPosition:mt}};return et?ot=>et({className:ot,parseClassName:it}):it},sortModifiers=_e=>{if(_e.length<=1)return _e;const $=[];let et=[];return _e.forEach(tt=>{tt[0]==="["?($.push(...et.sort(),tt),et=[]):et.push(tt)}),$.push(...et.sort()),$},createConfigUtils=_e=>({cache:createLruCache(_e.cacheSize),parseClassName:createParseClassName(_e),...createClassGroupUtils(_e)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(_e,$)=>{const{parseClassName:et,getClassGroupId:tt,getConflictingClassGroupIds:nt}=$,rt=[],it=_e.trim().split(SPLIT_CLASSES_REGEX);let ot="";for(let st=it.length-1;st>=0;st-=1){const at=it[st],{modifiers:lt,hasImportantModifier:dt,baseClassName:pt,maybePostfixModifierPosition:ht}=et(at);let vt=!!ht,mt=tt(vt?pt.substring(0,ht):pt);if(!mt){if(!vt){ot=at+(ot.length>0?" "+ot:ot);continue}if(mt=tt(pt),!mt){ot=at+(ot.length>0?" "+ot:ot);continue}vt=!1}const kt=sortModifiers(lt).join(":"),bt=dt?kt+IMPORTANT_MODIFIER:kt,gt=bt+mt;if(rt.includes(gt))continue;rt.push(gt);const St=nt(mt,vt);for(let yt=0;yt<St.length;++yt){const Et=St[yt];rt.push(bt+Et)}ot=at+(ot.length>0?" "+ot:ot)}return ot};function twJoin(){let _e=0,$,et,tt="";for(;_e<arguments.length;)($=arguments[_e++])&&(et=toValue($))&&(tt&&(tt+=" "),tt+=et);return tt}const toValue=_e=>{if(typeof _e=="string")return _e;let $,et="";for(let tt=0;tt<_e.length;tt++)_e[tt]&&($=toValue(_e[tt]))&&(et&&(et+=" "),et+=$);return et};function createTailwindMerge(_e,...$){let et,tt,nt,rt=it;function it(st){const at=$.reduce((lt,dt)=>dt(lt),_e());return et=createConfigUtils(at),tt=et.cache.get,nt=et.cache.set,rt=ot,ot(st)}function ot(st){const at=tt(st);if(at)return at;const lt=mergeClassList(st,et);return nt(st,lt),lt}return function(){return rt(twJoin.apply(null,arguments))}}const fromTheme=_e=>{const $=et=>et[_e]||[];return $.isThemeGetter=!0,$},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=_e=>isNumber(_e)||stringLengths.has(_e)||fractionRegex.test(_e),isArbitraryLength=_e=>getIsArbitraryValue(_e,"length",isLengthOnly),isNumber=_e=>!!_e&&!Number.isNaN(Number(_e)),isArbitraryNumber=_e=>getIsArbitraryValue(_e,"number",isNumber),isInteger=_e=>!!_e&&Number.isInteger(Number(_e)),isPercent=_e=>_e.endsWith("%")&&isNumber(_e.slice(0,-1)),isArbitraryValue=_e=>arbitraryValueRegex.test(_e),isTshirtSize=_e=>tshirtUnitRegex.test(_e),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=_e=>getIsArbitraryValue(_e,sizeLabels,isNever),isArbitraryPosition=_e=>getIsArbitraryValue(_e,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=_e=>getIsArbitraryValue(_e,imageLabels,isImage),isArbitraryShadow=_e=>getIsArbitraryValue(_e,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(_e,$,et)=>{const tt=arbitraryValueRegex.exec(_e);return tt?tt[1]?typeof $=="string"?tt[1]===$:$.has(tt[1]):et(tt[2]):!1},isLengthOnly=_e=>lengthUnitRegex.test(_e)&&!colorFunctionRegex.test(_e),isNever=()=>!1,isShadow=_e=>shadowRegex.test(_e),isImage=_e=>imageRegex.test(_e),getDefaultConfig=()=>{const _e=fromTheme("colors"),$=fromTheme("spacing"),et=fromTheme("blur"),tt=fromTheme("brightness"),nt=fromTheme("borderColor"),rt=fromTheme("borderRadius"),it=fromTheme("borderSpacing"),ot=fromTheme("borderWidth"),st=fromTheme("contrast"),at=fromTheme("grayscale"),lt=fromTheme("hueRotate"),dt=fromTheme("invert"),pt=fromTheme("gap"),ht=fromTheme("gradientColorStops"),vt=fromTheme("gradientColorStopPositions"),mt=fromTheme("inset"),kt=fromTheme("margin"),bt=fromTheme("opacity"),gt=fromTheme("padding"),St=fromTheme("saturate"),yt=fromTheme("scale"),Et=fromTheme("sepia"),Tt=fromTheme("skew"),wt=fromTheme("space"),Rt=fromTheme("translate"),xt=()=>["auto","contain","none"],Pt=()=>["auto","hidden","clip","visible","scroll"],At=()=>["auto",isArbitraryValue,$],Nt=()=>[isArbitraryValue,$],Bt=()=>["",isLength,isArbitraryLength],Jt=()=>["auto",isNumber,isArbitraryValue],ln=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],on=()=>["solid","dashed","dotted","double","none"],an=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Lt=()=>["start","end","center","between","around","evenly","stretch"],en=()=>["","0",isArbitraryValue],rn=()=>["auto","avoid","all","avoid-page","page","left","right","column"],sn=()=>[isNumber,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:sn(),borderColor:[_e],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:Nt(),borderWidth:Bt(),contrast:sn(),grayscale:en(),hueRotate:sn(),invert:en(),gap:Nt(),gradientColorStops:[_e],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:At(),margin:At(),opacity:sn(),padding:Nt(),saturate:sn(),scale:sn(),sepia:en(),skew:sn(),space:Nt(),translate:Nt()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":rn()}],"break-before":[{"break-before":rn()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ln(),isArbitraryValue]}],overflow:[{overflow:Pt()}],"overflow-x":[{"overflow-x":Pt()}],"overflow-y":[{"overflow-y":Pt()}],overscroll:[{overscroll:xt()}],"overscroll-x":[{"overscroll-x":xt()}],"overscroll-y":[{"overscroll-y":xt()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[mt]}],"inset-x":[{"inset-x":[mt]}],"inset-y":[{"inset-y":[mt]}],start:[{start:[mt]}],end:[{end:[mt]}],top:[{top:[mt]}],right:[{right:[mt]}],bottom:[{bottom:[mt]}],left:[{left:[mt]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:At()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:en()}],shrink:[{shrink:en()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":Jt()}],"col-end":[{"col-end":Jt()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":Jt()}],"row-end":[{"row-end":Jt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[pt]}],"gap-x":[{"gap-x":[pt]}],"gap-y":[{"gap-y":[pt]}],"justify-content":[{justify:["normal",...Lt()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Lt(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Lt(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[gt]}],px:[{px:[gt]}],py:[{py:[gt]}],ps:[{ps:[gt]}],pe:[{pe:[gt]}],pt:[{pt:[gt]}],pr:[{pr:[gt]}],pb:[{pb:[gt]}],pl:[{pl:[gt]}],m:[{m:[kt]}],mx:[{mx:[kt]}],my:[{my:[kt]}],ms:[{ms:[kt]}],me:[{me:[kt]}],mt:[{mt:[kt]}],mr:[{mr:[kt]}],mb:[{mb:[kt]}],ml:[{ml:[kt]}],"space-x":[{"space-x":[wt]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[wt]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,$]}],"min-w":[{"min-w":[isArbitraryValue,$,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,$,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,$,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,$,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,$,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,$,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[_e]}],"placeholder-opacity":[{"placeholder-opacity":[bt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[_e]}],"text-opacity":[{"text-opacity":[bt]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...on(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[_e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Nt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[bt]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ln(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[_e]}],"gradient-from-pos":[{from:[vt]}],"gradient-via-pos":[{via:[vt]}],"gradient-to-pos":[{to:[vt]}],"gradient-from":[{from:[ht]}],"gradient-via":[{via:[ht]}],"gradient-to":[{to:[ht]}],rounded:[{rounded:[rt]}],"rounded-s":[{"rounded-s":[rt]}],"rounded-e":[{"rounded-e":[rt]}],"rounded-t":[{"rounded-t":[rt]}],"rounded-r":[{"rounded-r":[rt]}],"rounded-b":[{"rounded-b":[rt]}],"rounded-l":[{"rounded-l":[rt]}],"rounded-ss":[{"rounded-ss":[rt]}],"rounded-se":[{"rounded-se":[rt]}],"rounded-ee":[{"rounded-ee":[rt]}],"rounded-es":[{"rounded-es":[rt]}],"rounded-tl":[{"rounded-tl":[rt]}],"rounded-tr":[{"rounded-tr":[rt]}],"rounded-br":[{"rounded-br":[rt]}],"rounded-bl":[{"rounded-bl":[rt]}],"border-w":[{border:[ot]}],"border-w-x":[{"border-x":[ot]}],"border-w-y":[{"border-y":[ot]}],"border-w-s":[{"border-s":[ot]}],"border-w-e":[{"border-e":[ot]}],"border-w-t":[{"border-t":[ot]}],"border-w-r":[{"border-r":[ot]}],"border-w-b":[{"border-b":[ot]}],"border-w-l":[{"border-l":[ot]}],"border-opacity":[{"border-opacity":[bt]}],"border-style":[{border:[...on(),"hidden"]}],"divide-x":[{"divide-x":[ot]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[ot]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[bt]}],"divide-style":[{divide:on()}],"border-color":[{border:[nt]}],"border-color-x":[{"border-x":[nt]}],"border-color-y":[{"border-y":[nt]}],"border-color-s":[{"border-s":[nt]}],"border-color-e":[{"border-e":[nt]}],"border-color-t":[{"border-t":[nt]}],"border-color-r":[{"border-r":[nt]}],"border-color-b":[{"border-b":[nt]}],"border-color-l":[{"border-l":[nt]}],"divide-color":[{divide:[nt]}],"outline-style":[{outline:["",...on()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[_e]}],"ring-w":[{ring:Bt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[_e]}],"ring-opacity":[{"ring-opacity":[bt]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[_e]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[bt]}],"mix-blend":[{"mix-blend":[...an(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":an()}],filter:[{filter:["","none"]}],blur:[{blur:[et]}],brightness:[{brightness:[tt]}],contrast:[{contrast:[st]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[at]}],"hue-rotate":[{"hue-rotate":[lt]}],invert:[{invert:[dt]}],saturate:[{saturate:[St]}],sepia:[{sepia:[Et]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[et]}],"backdrop-brightness":[{"backdrop-brightness":[tt]}],"backdrop-contrast":[{"backdrop-contrast":[st]}],"backdrop-grayscale":[{"backdrop-grayscale":[at]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[lt]}],"backdrop-invert":[{"backdrop-invert":[dt]}],"backdrop-opacity":[{"backdrop-opacity":[bt]}],"backdrop-saturate":[{"backdrop-saturate":[St]}],"backdrop-sepia":[{"backdrop-sepia":[Et]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[it]}],"border-spacing-x":[{"border-spacing-x":[it]}],"border-spacing-y":[{"border-spacing-y":[it]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:sn()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:sn()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[yt]}],"scale-x":[{"scale-x":[yt]}],"scale-y":[{"scale-y":[yt]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[Rt]}],"translate-y":[{"translate-y":[Rt]}],"skew-x":[{"skew-x":[Tt]}],"skew-y":[{"skew-y":[Tt]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",_e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[_e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Nt()}],"scroll-mx":[{"scroll-mx":Nt()}],"scroll-my":[{"scroll-my":Nt()}],"scroll-ms":[{"scroll-ms":Nt()}],"scroll-me":[{"scroll-me":Nt()}],"scroll-mt":[{"scroll-mt":Nt()}],"scroll-mr":[{"scroll-mr":Nt()}],"scroll-mb":[{"scroll-mb":Nt()}],"scroll-ml":[{"scroll-ml":Nt()}],"scroll-p":[{"scroll-p":Nt()}],"scroll-px":[{"scroll-px":Nt()}],"scroll-py":[{"scroll-py":Nt()}],"scroll-ps":[{"scroll-ps":Nt()}],"scroll-pe":[{"scroll-pe":Nt()}],"scroll-pt":[{"scroll-pt":Nt()}],"scroll-pr":[{"scroll-pr":Nt()}],"scroll-pb":[{"scroll-pb":Nt()}],"scroll-pl":[{"scroll-pl":Nt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[_e,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[_e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(..._e){return twMerge(clsx(_e))}const ToastProvider=Provider$1,ToastViewport=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx(Viewport$1,{ref:et,className:cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",_e),...$}));ToastViewport.displayName=Viewport$1.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:_e,variant:$,...et},tt)=>jsxRuntimeExports.jsx(Root2$1,{ref:tt,className:cn(toastVariants({variant:$}),_e),...et}));Toast.displayName=Root2$1.displayName;const ToastAction=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx(Action$1,{ref:et,className:cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",_e),...$}));ToastAction.displayName=Action$1.displayName;const ToastClose=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx(Close,{ref:et,className:cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",_e),"toast-close":"",...$,children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})}));ToastClose.displayName=Close.displayName;const ToastTitle=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx(Title,{ref:et,className:cn("text-sm font-semibold",_e),...$}));ToastTitle.displayName=Title.displayName;const ToastDescription=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx(Description,{ref:et,className:cn("text-sm opacity-90",_e),...$}));ToastDescription.displayName=Description.displayName;function Toaster$1(){const{toasts:_e}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[_e.map(function({id:$,title:et,description:tt,action:nt,...rt}){return jsxRuntimeExports.jsxs(Toast,{...rt,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[et&&jsxRuntimeExports.jsx(ToastTitle,{children:et}),tt&&jsxRuntimeExports.jsx(ToastDescription,{children:tt})]}),nt,jsxRuntimeExports.jsx(ToastClose,{})]},$)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}var P$1=["light","dark"],E$1="(prefers-color-scheme: dark)",L$1=reactExports.createContext(void 0),D$1={setTheme:_e=>{},themes:[]},j=()=>{var _e;return(_e=reactExports.useContext(L$1))!=null?_e:D$1};reactExports.memo(({forcedTheme:_e,storageKey:$,attribute:et,enableSystem:tt,enableColorScheme:nt,defaultTheme:rt,value:it,attrs:ot,nonce:st})=>{let at=rt==="system",lt=et==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${ot.map(vt=>`'${vt}'`).join(",")})`};`:`var d=document.documentElement,n='${et}',s='setAttribute';`,dt=nt?P$1.includes(rt)&&rt?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${rt}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",pt=(vt,mt=!1,kt=!0)=>{let bt=it?it[vt]:vt,gt=mt?vt+"|| ''":`'${bt}'`,St="";return nt&&kt&&!mt&&P$1.includes(vt)&&(St+=`d.style.colorScheme = '${vt}';`),et==="class"?mt||bt?St+=`c.add(${gt})`:St+="null":bt&&(St+=`d[s](n,${gt})`),St},ht=_e?`!function(){${lt}${pt(_e)}}()`:tt?`!function(){try{${lt}var e=localStorage.getItem('${$}');if('system'===e||(!e&&${at})){var t='${E$1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${pt("dark")}}else{${pt("light")}}}else if(e){${it?`var x=${JSON.stringify(it)};`:""}${pt(it?"x[e]":"e",!0)}}${at?"":"else{"+pt(rt,!1,!1)+"}"}${dt}}catch(e){}}()`:`!function(){try{${lt}var e=localStorage.getItem('${$}');if(e){${it?`var x=${JSON.stringify(it)};`:""}${pt(it?"x[e]":"e",!0)}}else{${pt(rt,!1,!1)};}${dt}}catch(t){}}();`;return reactExports.createElement("script",{nonce:st,dangerouslySetInnerHTML:{__html:ht}})});var Ct=_e=>{switch(_e){case"success":return $t;case"info":return _t;case"warning":return Wt;case"error":return Ut;default:return null}},Ft=Array(12).fill(0),It=({visible:_e})=>e$2.createElement("div",{className:"sonner-loading-wrapper","data-visible":_e},e$2.createElement("div",{className:"sonner-spinner"},Ft.map(($,et)=>e$2.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${et}`})))),$t=e$2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},e$2.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Wt=e$2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},e$2.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_t=e$2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},e$2.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ut=e$2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},e$2.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Dt=()=>{let[_e,$]=e$2.useState(document.hidden);return e$2.useEffect(()=>{let et=()=>{$(document.hidden)};return document.addEventListener("visibilitychange",et),()=>window.removeEventListener("visibilitychange",et)},[]),_e},ct=1,ut=class{constructor(){this.subscribe=_e=>(this.subscribers.push(_e),()=>{let $=this.subscribers.indexOf(_e);this.subscribers.splice($,1)}),this.publish=_e=>{this.subscribers.forEach($=>$(_e))},this.addToast=_e=>{this.publish(_e),this.toasts=[...this.toasts,_e]},this.create=_e=>{var $;let{message:et,...tt}=_e,nt=typeof(_e==null?void 0:_e.id)=="number"||(($=_e.id)==null?void 0:$.length)>0?_e.id:ct++,rt=this.toasts.find(ot=>ot.id===nt),it=_e.dismissible===void 0?!0:_e.dismissible;return rt?this.toasts=this.toasts.map(ot=>ot.id===nt?(this.publish({...ot,..._e,id:nt,title:et}),{...ot,..._e,id:nt,dismissible:it,title:et}):ot):this.addToast({title:et,...tt,dismissible:it,id:nt}),nt},this.dismiss=_e=>(_e||this.toasts.forEach($=>{this.subscribers.forEach(et=>et({id:$.id,dismiss:!0}))}),this.subscribers.forEach($=>$({id:_e,dismiss:!0})),_e),this.message=(_e,$)=>this.create({...$,message:_e}),this.error=(_e,$)=>this.create({...$,message:_e,type:"error"}),this.success=(_e,$)=>this.create({...$,type:"success",message:_e}),this.info=(_e,$)=>this.create({...$,type:"info",message:_e}),this.warning=(_e,$)=>this.create({...$,type:"warning",message:_e}),this.loading=(_e,$)=>this.create({...$,type:"loading",message:_e}),this.promise=(_e,$)=>{if(!$)return;let et;$.loading!==void 0&&(et=this.create({...$,promise:_e,type:"loading",message:$.loading,description:typeof $.description!="function"?$.description:void 0}));let tt=_e instanceof Promise?_e:_e(),nt=et!==void 0;return tt.then(async rt=>{if(Ot(rt)&&!rt.ok){nt=!1;let it=typeof $.error=="function"?await $.error(`HTTP error! status: ${rt.status}`):$.error,ot=typeof $.description=="function"?await $.description(`HTTP error! status: ${rt.status}`):$.description;this.create({id:et,type:"error",message:it,description:ot})}else if($.success!==void 0){nt=!1;let it=typeof $.success=="function"?await $.success(rt):$.success,ot=typeof $.description=="function"?await $.description(rt):$.description;this.create({id:et,type:"success",message:it,description:ot})}}).catch(async rt=>{if($.error!==void 0){nt=!1;let it=typeof $.error=="function"?await $.error(rt):$.error,ot=typeof $.description=="function"?await $.description(rt):$.description;this.create({id:et,type:"error",message:it,description:ot})}}).finally(()=>{var rt;nt&&(this.dismiss(et),et=void 0),(rt=$.finally)==null||rt.call($)}),et},this.custom=(_e,$)=>{let et=($==null?void 0:$.id)||ct++;return this.create({jsx:_e(et),id:et,...$}),et},this.subscribers=[],this.toasts=[]}},v$1=new ut,Vt=(_e,$)=>{let et=($==null?void 0:$.id)||ct++;return v$1.addToast({title:_e,...$,id:et}),et},Ot=_e=>_e&&typeof _e=="object"&&"ok"in _e&&typeof _e.ok=="boolean"&&"status"in _e&&typeof _e.status=="number",Kt=Vt,Xt=()=>v$1.toasts;Object.assign(Kt,{success:v$1.success,info:v$1.info,warning:v$1.warning,error:v$1.error,custom:v$1.custom,message:v$1.message,promise:v$1.promise,dismiss:v$1.dismiss,loading:v$1.loading},{getHistory:Xt});function ft(_e,{insertAt:$}={}){if(typeof document>"u")return;let et=document.head||document.getElementsByTagName("head")[0],tt=document.createElement("style");tt.type="text/css",$==="top"&&et.firstChild?et.insertBefore(tt,et.firstChild):et.appendChild(tt),tt.styleSheet?tt.styleSheet.cssText=_e:tt.appendChild(document.createTextNode(_e))}ft(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function U(_e){return _e.label!==void 0}var qt=3,Qt="32px",Zt=4e3,te=356,ee=14,oe=20,ae=200;function ne(..._e){return _e.filter(Boolean).join(" ")}var se=_e=>{var $,et,tt,nt,rt,it,ot,st,at,lt;let{invert:dt,toast:pt,unstyled:ht,interacting:vt,setHeights:mt,visibleToasts:kt,heights:bt,index:gt,toasts:St,expanded:yt,removeToast:Et,defaultRichColors:Tt,closeButton:wt,style:Rt,cancelButtonStyle:xt,actionButtonStyle:Pt,className:At="",descriptionClassName:Nt="",duration:Bt,position:Jt,gap:ln,loadingIcon:on,expandByDefault:an,classNames:Lt,icons:en,closeButtonAriaLabel:rn="Close toast",pauseWhenPageIsHidden:sn,cn:hn}=_e,[mn,wn]=e$2.useState(!1),[Cn,kn]=e$2.useState(!1),[yn,En]=e$2.useState(!1),[vn,nn]=e$2.useState(!1),[un,Mt]=e$2.useState(0),[jt,zt]=e$2.useState(0),dn=e$2.useRef(null),fn=e$2.useRef(null),tn=gt===0,pn=gt+1<=kt,gn=pt.type,Tn=pt.dismissible!==!1,In=pt.className||"",Nn=pt.descriptionClassName||"",Rn=e$2.useMemo(()=>bt.findIndex(xn=>xn.toastId===pt.id)||0,[bt,pt.id]),Qn=e$2.useMemo(()=>{var xn;return(xn=pt.closeButton)!=null?xn:wt},[pt.closeButton,wt]),$n=e$2.useMemo(()=>pt.duration||Bt||Zt,[pt.duration,Bt]),Xn=e$2.useRef(0),Dn=e$2.useRef(0),mr=e$2.useRef(0),Zn=e$2.useRef(null),[er,Yr]=Jt.split("-"),Gr=e$2.useMemo(()=>bt.reduce((xn,Pn,_n)=>_n>=Rn?xn:xn+Pn.height,0),[bt,Rn]),_r=Dt(),Zr=pt.invert||dt,Pr=gn==="loading";Dn.current=e$2.useMemo(()=>Rn*ln+Gr,[Rn,Gr]),e$2.useEffect(()=>{wn(!0)},[]),e$2.useLayoutEffect(()=>{if(!mn)return;let xn=fn.current,Pn=xn.style.height;xn.style.height="auto";let _n=xn.getBoundingClientRect().height;xn.style.height=Pn,zt(_n),mt(zn=>zn.find(Wn=>Wn.toastId===pt.id)?zn.map(Wn=>Wn.toastId===pt.id?{...Wn,height:_n}:Wn):[{toastId:pt.id,height:_n,position:pt.position},...zn])},[mn,pt.title,pt.description,mt,pt.id]);let Un=e$2.useCallback(()=>{kn(!0),Mt(Dn.current),mt(xn=>xn.filter(Pn=>Pn.toastId!==pt.id)),setTimeout(()=>{Et(pt)},ae)},[pt,Et,mt,Dn]);e$2.useEffect(()=>{if(pt.promise&&gn==="loading"||pt.duration===1/0||pt.type==="loading")return;let xn,Pn=$n;return yt||vt||sn&&_r?(()=>{if(mr.current<Xn.current){let _n=new Date().getTime()-Xn.current;Pn=Pn-_n}mr.current=new Date().getTime()})():Pn!==1/0&&(Xn.current=new Date().getTime(),xn=setTimeout(()=>{var _n;(_n=pt.onAutoClose)==null||_n.call(pt,pt),Un()},Pn)),()=>clearTimeout(xn)},[yt,vt,an,pt,$n,Un,pt.promise,gn,sn,_r]),e$2.useEffect(()=>{let xn=fn.current;if(xn){let Pn=xn.getBoundingClientRect().height;return zt(Pn),mt(_n=>[{toastId:pt.id,height:Pn,position:pt.position},..._n]),()=>mt(_n=>_n.filter(zn=>zn.toastId!==pt.id))}},[mt,pt.id]),e$2.useEffect(()=>{pt.delete&&Un()},[Un,pt.delete]);function cr(){return en!=null&&en.loading?e$2.createElement("div",{className:"sonner-loader","data-visible":gn==="loading"},en.loading):on?e$2.createElement("div",{className:"sonner-loader","data-visible":gn==="loading"},on):e$2.createElement(It,{visible:gn==="loading"})}return e$2.createElement("li",{"aria-live":pt.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:fn,className:hn(At,In,Lt==null?void 0:Lt.toast,($=pt==null?void 0:pt.classNames)==null?void 0:$.toast,Lt==null?void 0:Lt.default,Lt==null?void 0:Lt[gn],(et=pt==null?void 0:pt.classNames)==null?void 0:et[gn]),"data-sonner-toast":"","data-rich-colors":(tt=pt.richColors)!=null?tt:Tt,"data-styled":!(pt.jsx||pt.unstyled||ht),"data-mounted":mn,"data-promise":!!pt.promise,"data-removed":Cn,"data-visible":pn,"data-y-position":er,"data-x-position":Yr,"data-index":gt,"data-front":tn,"data-swiping":yn,"data-dismissible":Tn,"data-type":gn,"data-invert":Zr,"data-swipe-out":vn,"data-expanded":!!(yt||an&&mn),style:{"--index":gt,"--toasts-before":gt,"--z-index":St.length-gt,"--offset":`${Cn?un:Dn.current}px`,"--initial-height":an?"auto":`${jt}px`,...Rt,...pt.style},onPointerDown:xn=>{Pr||!Tn||(dn.current=new Date,Mt(Dn.current),xn.target.setPointerCapture(xn.pointerId),xn.target.tagName!=="BUTTON"&&(En(!0),Zn.current={x:xn.clientX,y:xn.clientY}))},onPointerUp:()=>{var xn,Pn,_n,zn;if(vn||!Tn)return;Zn.current=null;let Wn=Number(((xn=fn.current)==null?void 0:xn.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Qr=new Date().getTime()-((Pn=dn.current)==null?void 0:Pn.getTime()),lo=Math.abs(Wn)/Qr;if(Math.abs(Wn)>=oe||lo>.11){Mt(Dn.current),(_n=pt.onDismiss)==null||_n.call(pt,pt),Un(),nn(!0);return}(zn=fn.current)==null||zn.style.setProperty("--swipe-amount","0px"),En(!1)},onPointerMove:xn=>{var Pn;if(!Zn.current||!Tn)return;let _n=xn.clientY-Zn.current.y,zn=xn.clientX-Zn.current.x,Wn=(er==="top"?Math.min:Math.max)(0,_n),Qr=xn.pointerType==="touch"?10:2;Math.abs(Wn)>Qr?(Pn=fn.current)==null||Pn.style.setProperty("--swipe-amount",`${_n}px`):Math.abs(zn)>Qr&&(Zn.current=null)}},Qn&&!pt.jsx?e$2.createElement("button",{"aria-label":rn,"data-disabled":Pr,"data-close-button":!0,onClick:Pr||!Tn?()=>{}:()=>{var xn;Un(),(xn=pt.onDismiss)==null||xn.call(pt,pt)},className:hn(Lt==null?void 0:Lt.closeButton,(nt=pt==null?void 0:pt.classNames)==null?void 0:nt.closeButton)},e$2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},e$2.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e$2.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,pt.jsx||e$2.isValidElement(pt.title)?pt.jsx||pt.title:e$2.createElement(e$2.Fragment,null,gn||pt.icon||pt.promise?e$2.createElement("div",{"data-icon":"",className:hn(Lt==null?void 0:Lt.icon,(rt=pt==null?void 0:pt.classNames)==null?void 0:rt.icon)},pt.promise||pt.type==="loading"&&!pt.icon?pt.icon||cr():null,pt.type!=="loading"?pt.icon||(en==null?void 0:en[gn])||Ct(gn):null):null,e$2.createElement("div",{"data-content":"",className:hn(Lt==null?void 0:Lt.content,(it=pt==null?void 0:pt.classNames)==null?void 0:it.content)},e$2.createElement("div",{"data-title":"",className:hn(Lt==null?void 0:Lt.title,(ot=pt==null?void 0:pt.classNames)==null?void 0:ot.title)},pt.title),pt.description?e$2.createElement("div",{"data-description":"",className:hn(Nt,Nn,Lt==null?void 0:Lt.description,(st=pt==null?void 0:pt.classNames)==null?void 0:st.description)},pt.description):null),e$2.isValidElement(pt.cancel)?pt.cancel:pt.cancel&&U(pt.cancel)?e$2.createElement("button",{"data-button":!0,"data-cancel":!0,style:pt.cancelButtonStyle||xt,onClick:xn=>{var Pn,_n;U(pt.cancel)&&Tn&&((_n=(Pn=pt.cancel).onClick)==null||_n.call(Pn,xn),Un())},className:hn(Lt==null?void 0:Lt.cancelButton,(at=pt==null?void 0:pt.classNames)==null?void 0:at.cancelButton)},pt.cancel.label):null,e$2.isValidElement(pt.action)?pt.action:pt.action&&U(pt.action)?e$2.createElement("button",{"data-button":!0,"data-action":!0,style:pt.actionButtonStyle||Pt,onClick:xn=>{var Pn,_n;U(pt.action)&&(xn.defaultPrevented||((_n=(Pn=pt.action).onClick)==null||_n.call(Pn,xn),Un()))},className:hn(Lt==null?void 0:Lt.actionButton,(lt=pt==null?void 0:pt.classNames)==null?void 0:lt.actionButton)},pt.action.label):null))};function Ht(){if(typeof window>"u"||typeof document>"u")return"ltr";let _e=document.documentElement.getAttribute("dir");return _e==="auto"||!_e?window.getComputedStyle(document.documentElement).direction:_e}var Te=_e=>{let{invert:$,position:et="bottom-right",hotkey:tt=["altKey","KeyT"],expand:nt,closeButton:rt,className:it,offset:ot,theme:st="light",richColors:at,duration:lt,style:dt,visibleToasts:pt=qt,toastOptions:ht,dir:vt=Ht(),gap:mt=ee,loadingIcon:kt,icons:bt,containerAriaLabel:gt="Notifications",pauseWhenPageIsHidden:St,cn:yt=ne}=_e,[Et,Tt]=e$2.useState([]),wt=e$2.useMemo(()=>Array.from(new Set([et].concat(Et.filter(sn=>sn.position).map(sn=>sn.position)))),[Et,et]),[Rt,xt]=e$2.useState([]),[Pt,At]=e$2.useState(!1),[Nt,Bt]=e$2.useState(!1),[Jt,ln]=e$2.useState(st!=="system"?st:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),on=e$2.useRef(null),an=tt.join("+").replace(/Key/g,"").replace(/Digit/g,""),Lt=e$2.useRef(null),en=e$2.useRef(!1),rn=e$2.useCallback(sn=>{var hn;(hn=Et.find(mn=>mn.id===sn.id))!=null&&hn.delete||v$1.dismiss(sn.id),Tt(mn=>mn.filter(({id:wn})=>wn!==sn.id))},[Et]);return e$2.useEffect(()=>v$1.subscribe(sn=>{if(sn.dismiss){Tt(hn=>hn.map(mn=>mn.id===sn.id?{...mn,delete:!0}:mn));return}setTimeout(()=>{Gt.flushSync(()=>{Tt(hn=>{let mn=hn.findIndex(wn=>wn.id===sn.id);return mn!==-1?[...hn.slice(0,mn),{...hn[mn],...sn},...hn.slice(mn+1)]:[sn,...hn]})})})}),[]),e$2.useEffect(()=>{if(st!=="system"){ln(st);return}st==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ln("dark"):ln("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:sn})=>{ln(sn?"dark":"light")})},[st]),e$2.useEffect(()=>{Et.length<=1&&At(!1)},[Et]),e$2.useEffect(()=>{let sn=hn=>{var mn,wn;tt.every(Cn=>hn[Cn]||hn.code===Cn)&&(At(!0),(mn=on.current)==null||mn.focus()),hn.code==="Escape"&&(document.activeElement===on.current||(wn=on.current)!=null&&wn.contains(document.activeElement))&&At(!1)};return document.addEventListener("keydown",sn),()=>document.removeEventListener("keydown",sn)},[tt]),e$2.useEffect(()=>{if(on.current)return()=>{Lt.current&&(Lt.current.focus({preventScroll:!0}),Lt.current=null,en.current=!1)}},[on.current]),Et.length?e$2.createElement("section",{"aria-label":`${gt} ${an}`,tabIndex:-1},wt.map((sn,hn)=>{var mn;let[wn,Cn]=sn.split("-");return e$2.createElement("ol",{key:sn,dir:vt==="auto"?Ht():vt,tabIndex:-1,ref:on,className:it,"data-sonner-toaster":!0,"data-theme":Jt,"data-y-position":wn,"data-x-position":Cn,style:{"--front-toast-height":`${((mn=Rt[0])==null?void 0:mn.height)||0}px`,"--offset":typeof ot=="number"?`${ot}px`:ot||Qt,"--width":`${te}px`,"--gap":`${mt}px`,...dt},onBlur:kn=>{en.current&&!kn.currentTarget.contains(kn.relatedTarget)&&(en.current=!1,Lt.current&&(Lt.current.focus({preventScroll:!0}),Lt.current=null))},onFocus:kn=>{kn.target instanceof HTMLElement&&kn.target.dataset.dismissible==="false"||en.current||(en.current=!0,Lt.current=kn.relatedTarget)},onMouseEnter:()=>At(!0),onMouseMove:()=>At(!0),onMouseLeave:()=>{Nt||At(!1)},onPointerDown:kn=>{kn.target instanceof HTMLElement&&kn.target.dataset.dismissible==="false"||Bt(!0)},onPointerUp:()=>Bt(!1)},Et.filter(kn=>!kn.position&&hn===0||kn.position===sn).map((kn,yn)=>{var En,vn;return e$2.createElement(se,{key:kn.id,icons:bt,index:yn,toast:kn,defaultRichColors:at,duration:(En=ht==null?void 0:ht.duration)!=null?En:lt,className:ht==null?void 0:ht.className,descriptionClassName:ht==null?void 0:ht.descriptionClassName,invert:$,visibleToasts:pt,closeButton:(vn=ht==null?void 0:ht.closeButton)!=null?vn:rt,interacting:Nt,position:sn,style:ht==null?void 0:ht.style,unstyled:ht==null?void 0:ht.unstyled,classNames:ht==null?void 0:ht.classNames,cancelButtonStyle:ht==null?void 0:ht.cancelButtonStyle,actionButtonStyle:ht==null?void 0:ht.actionButtonStyle,removeToast:rn,toasts:Et.filter(nn=>nn.position==kn.position),heights:Rt.filter(nn=>nn.position==kn.position),setHeights:xt,expandByDefault:nt,gap:mt,loadingIcon:kt,expanded:Pt,pauseWhenPageIsHidden:St,cn:yt})}))})):null};const Toaster=({..._e})=>{const{theme:$="system"}=j();return jsxRuntimeExports.jsx(Te,{theme:$,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},..._e})};var useReactId=React.useId||(()=>{}),count=0;function useId(_e){const[$,et]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{et(tt=>tt??String(count++))},[_e]),$?`radix-${$}`:""}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=_e=>({x:_e,y:_e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(_e,$,et){return max(_e,min($,et))}function evaluate(_e,$){return typeof _e=="function"?_e($):_e}function getSide(_e){return _e.split("-")[0]}function getAlignment(_e){return _e.split("-")[1]}function getOppositeAxis(_e){return _e==="x"?"y":"x"}function getAxisLength(_e){return _e==="y"?"height":"width"}function getSideAxis(_e){return["top","bottom"].includes(getSide(_e))?"y":"x"}function getAlignmentAxis(_e){return getOppositeAxis(getSideAxis(_e))}function getAlignmentSides(_e,$,et){et===void 0&&(et=!1);const tt=getAlignment(_e),nt=getAlignmentAxis(_e),rt=getAxisLength(nt);let it=nt==="x"?tt===(et?"end":"start")?"right":"left":tt==="start"?"bottom":"top";return $.reference[rt]>$.floating[rt]&&(it=getOppositePlacement(it)),[it,getOppositePlacement(it)]}function getExpandedPlacements(_e){const $=getOppositePlacement(_e);return[getOppositeAlignmentPlacement(_e),$,getOppositeAlignmentPlacement($)]}function getOppositeAlignmentPlacement(_e){return _e.replace(/start|end/g,$=>oppositeAlignmentMap[$])}function getSideList(_e,$,et){const tt=["left","right"],nt=["right","left"],rt=["top","bottom"],it=["bottom","top"];switch(_e){case"top":case"bottom":return et?$?nt:tt:$?tt:nt;case"left":case"right":return $?rt:it;default:return[]}}function getOppositeAxisPlacements(_e,$,et,tt){const nt=getAlignment(_e);let rt=getSideList(getSide(_e),et==="start",tt);return nt&&(rt=rt.map(it=>it+"-"+nt),$&&(rt=rt.concat(rt.map(getOppositeAlignmentPlacement)))),rt}function getOppositePlacement(_e){return _e.replace(/left|right|bottom|top/g,$=>oppositeSideMap[$])}function expandPaddingObject(_e){return{top:0,right:0,bottom:0,left:0,..._e}}function getPaddingObject(_e){return typeof _e!="number"?expandPaddingObject(_e):{top:_e,right:_e,bottom:_e,left:_e}}function rectToClientRect(_e){const{x:$,y:et,width:tt,height:nt}=_e;return{width:tt,height:nt,top:et,left:$,right:$+tt,bottom:et+nt,x:$,y:et}}function computeCoordsFromPlacement(_e,$,et){let{reference:tt,floating:nt}=_e;const rt=getSideAxis($),it=getAlignmentAxis($),ot=getAxisLength(it),st=getSide($),at=rt==="y",lt=tt.x+tt.width/2-nt.width/2,dt=tt.y+tt.height/2-nt.height/2,pt=tt[ot]/2-nt[ot]/2;let ht;switch(st){case"top":ht={x:lt,y:tt.y-nt.height};break;case"bottom":ht={x:lt,y:tt.y+tt.height};break;case"right":ht={x:tt.x+tt.width,y:dt};break;case"left":ht={x:tt.x-nt.width,y:dt};break;default:ht={x:tt.x,y:tt.y}}switch(getAlignment($)){case"start":ht[it]-=pt*(et&&at?-1:1);break;case"end":ht[it]+=pt*(et&&at?-1:1);break}return ht}const computePosition$1=async(_e,$,et)=>{const{placement:tt="bottom",strategy:nt="absolute",middleware:rt=[],platform:it}=et,ot=rt.filter(Boolean),st=await(it.isRTL==null?void 0:it.isRTL($));let at=await it.getElementRects({reference:_e,floating:$,strategy:nt}),{x:lt,y:dt}=computeCoordsFromPlacement(at,tt,st),pt=tt,ht={},vt=0;for(let mt=0;mt<ot.length;mt++){const{name:kt,fn:bt}=ot[mt],{x:gt,y:St,data:yt,reset:Et}=await bt({x:lt,y:dt,initialPlacement:tt,placement:pt,strategy:nt,middlewareData:ht,rects:at,platform:it,elements:{reference:_e,floating:$}});lt=gt??lt,dt=St??dt,ht={...ht,[kt]:{...ht[kt],...yt}},Et&&vt<=50&&(vt++,typeof Et=="object"&&(Et.placement&&(pt=Et.placement),Et.rects&&(at=Et.rects===!0?await it.getElementRects({reference:_e,floating:$,strategy:nt}):Et.rects),{x:lt,y:dt}=computeCoordsFromPlacement(at,pt,st)),mt=-1)}return{x:lt,y:dt,placement:pt,strategy:nt,middlewareData:ht}};async function detectOverflow(_e,$){var et;$===void 0&&($={});const{x:tt,y:nt,platform:rt,rects:it,elements:ot,strategy:st}=_e,{boundary:at="clippingAncestors",rootBoundary:lt="viewport",elementContext:dt="floating",altBoundary:pt=!1,padding:ht=0}=evaluate($,_e),vt=getPaddingObject(ht),kt=ot[pt?dt==="floating"?"reference":"floating":dt],bt=rectToClientRect(await rt.getClippingRect({element:(et=await(rt.isElement==null?void 0:rt.isElement(kt)))==null||et?kt:kt.contextElement||await(rt.getDocumentElement==null?void 0:rt.getDocumentElement(ot.floating)),boundary:at,rootBoundary:lt,strategy:st})),gt=dt==="floating"?{x:tt,y:nt,width:it.floating.width,height:it.floating.height}:it.reference,St=await(rt.getOffsetParent==null?void 0:rt.getOffsetParent(ot.floating)),yt=await(rt.isElement==null?void 0:rt.isElement(St))?await(rt.getScale==null?void 0:rt.getScale(St))||{x:1,y:1}:{x:1,y:1},Et=rectToClientRect(rt.convertOffsetParentRelativeRectToViewportRelativeRect?await rt.convertOffsetParentRelativeRectToViewportRelativeRect({elements:ot,rect:gt,offsetParent:St,strategy:st}):gt);return{top:(bt.top-Et.top+vt.top)/yt.y,bottom:(Et.bottom-bt.bottom+vt.bottom)/yt.y,left:(bt.left-Et.left+vt.left)/yt.x,right:(Et.right-bt.right+vt.right)/yt.x}}const arrow$3=_e=>({name:"arrow",options:_e,async fn($){const{x:et,y:tt,placement:nt,rects:rt,platform:it,elements:ot,middlewareData:st}=$,{element:at,padding:lt=0}=evaluate(_e,$)||{};if(at==null)return{};const dt=getPaddingObject(lt),pt={x:et,y:tt},ht=getAlignmentAxis(nt),vt=getAxisLength(ht),mt=await it.getDimensions(at),kt=ht==="y",bt=kt?"top":"left",gt=kt?"bottom":"right",St=kt?"clientHeight":"clientWidth",yt=rt.reference[vt]+rt.reference[ht]-pt[ht]-rt.floating[vt],Et=pt[ht]-rt.reference[ht],Tt=await(it.getOffsetParent==null?void 0:it.getOffsetParent(at));let wt=Tt?Tt[St]:0;(!wt||!await(it.isElement==null?void 0:it.isElement(Tt)))&&(wt=ot.floating[St]||rt.floating[vt]);const Rt=yt/2-Et/2,xt=wt/2-mt[vt]/2-1,Pt=min(dt[bt],xt),At=min(dt[gt],xt),Nt=Pt,Bt=wt-mt[vt]-At,Jt=wt/2-mt[vt]/2+Rt,ln=clamp$1(Nt,Jt,Bt),on=!st.arrow&&getAlignment(nt)!=null&&Jt!==ln&&rt.reference[vt]/2-(Jt<Nt?Pt:At)-mt[vt]/2<0,an=on?Jt<Nt?Jt-Nt:Jt-Bt:0;return{[ht]:pt[ht]+an,data:{[ht]:ln,centerOffset:Jt-ln-an,...on&&{alignmentOffset:an}},reset:on}}}),flip$2=function(_e){return _e===void 0&&(_e={}),{name:"flip",options:_e,async fn($){var et,tt;const{placement:nt,middlewareData:rt,rects:it,initialPlacement:ot,platform:st,elements:at}=$,{mainAxis:lt=!0,crossAxis:dt=!0,fallbackPlacements:pt,fallbackStrategy:ht="bestFit",fallbackAxisSideDirection:vt="none",flipAlignment:mt=!0,...kt}=evaluate(_e,$);if((et=rt.arrow)!=null&&et.alignmentOffset)return{};const bt=getSide(nt),gt=getSideAxis(ot),St=getSide(ot)===ot,yt=await(st.isRTL==null?void 0:st.isRTL(at.floating)),Et=pt||(St||!mt?[getOppositePlacement(ot)]:getExpandedPlacements(ot)),Tt=vt!=="none";!pt&&Tt&&Et.push(...getOppositeAxisPlacements(ot,mt,vt,yt));const wt=[ot,...Et],Rt=await detectOverflow($,kt),xt=[];let Pt=((tt=rt.flip)==null?void 0:tt.overflows)||[];if(lt&&xt.push(Rt[bt]),dt){const Jt=getAlignmentSides(nt,it,yt);xt.push(Rt[Jt[0]],Rt[Jt[1]])}if(Pt=[...Pt,{placement:nt,overflows:xt}],!xt.every(Jt=>Jt<=0)){var At,Nt;const Jt=(((At=rt.flip)==null?void 0:At.index)||0)+1,ln=wt[Jt];if(ln)return{data:{index:Jt,overflows:Pt},reset:{placement:ln}};let on=(Nt=Pt.filter(an=>an.overflows[0]<=0).sort((an,Lt)=>an.overflows[1]-Lt.overflows[1])[0])==null?void 0:Nt.placement;if(!on)switch(ht){case"bestFit":{var Bt;const an=(Bt=Pt.filter(Lt=>{if(Tt){const en=getSideAxis(Lt.placement);return en===gt||en==="y"}return!0}).map(Lt=>[Lt.placement,Lt.overflows.filter(en=>en>0).reduce((en,rn)=>en+rn,0)]).sort((Lt,en)=>Lt[1]-en[1])[0])==null?void 0:Bt[0];an&&(on=an);break}case"initialPlacement":on=ot;break}if(nt!==on)return{reset:{placement:on}}}return{}}}};function getSideOffsets(_e,$){return{top:_e.top-$.height,right:_e.right-$.width,bottom:_e.bottom-$.height,left:_e.left-$.width}}function isAnySideFullyClipped(_e){return sides.some($=>_e[$]>=0)}const hide$2=function(_e){return _e===void 0&&(_e={}),{name:"hide",options:_e,async fn($){const{rects:et}=$,{strategy:tt="referenceHidden",...nt}=evaluate(_e,$);switch(tt){case"referenceHidden":{const rt=await detectOverflow($,{...nt,elementContext:"reference"}),it=getSideOffsets(rt,et.reference);return{data:{referenceHiddenOffsets:it,referenceHidden:isAnySideFullyClipped(it)}}}case"escaped":{const rt=await detectOverflow($,{...nt,altBoundary:!0}),it=getSideOffsets(rt,et.floating);return{data:{escapedOffsets:it,escaped:isAnySideFullyClipped(it)}}}default:return{}}}}};async function convertValueToCoords(_e,$){const{placement:et,platform:tt,elements:nt}=_e,rt=await(tt.isRTL==null?void 0:tt.isRTL(nt.floating)),it=getSide(et),ot=getAlignment(et),st=getSideAxis(et)==="y",at=["left","top"].includes(it)?-1:1,lt=rt&&st?-1:1,dt=evaluate($,_e);let{mainAxis:pt,crossAxis:ht,alignmentAxis:vt}=typeof dt=="number"?{mainAxis:dt,crossAxis:0,alignmentAxis:null}:{mainAxis:dt.mainAxis||0,crossAxis:dt.crossAxis||0,alignmentAxis:dt.alignmentAxis};return ot&&typeof vt=="number"&&(ht=ot==="end"?vt*-1:vt),st?{x:ht*lt,y:pt*at}:{x:pt*at,y:ht*lt}}const offset$2=function(_e){return _e===void 0&&(_e=0),{name:"offset",options:_e,async fn($){var et,tt;const{x:nt,y:rt,placement:it,middlewareData:ot}=$,st=await convertValueToCoords($,_e);return it===((et=ot.offset)==null?void 0:et.placement)&&(tt=ot.arrow)!=null&&tt.alignmentOffset?{}:{x:nt+st.x,y:rt+st.y,data:{...st,placement:it}}}}},shift$2=function(_e){return _e===void 0&&(_e={}),{name:"shift",options:_e,async fn($){const{x:et,y:tt,placement:nt}=$,{mainAxis:rt=!0,crossAxis:it=!1,limiter:ot={fn:kt=>{let{x:bt,y:gt}=kt;return{x:bt,y:gt}}},...st}=evaluate(_e,$),at={x:et,y:tt},lt=await detectOverflow($,st),dt=getSideAxis(getSide(nt)),pt=getOppositeAxis(dt);let ht=at[pt],vt=at[dt];if(rt){const kt=pt==="y"?"top":"left",bt=pt==="y"?"bottom":"right",gt=ht+lt[kt],St=ht-lt[bt];ht=clamp$1(gt,ht,St)}if(it){const kt=dt==="y"?"top":"left",bt=dt==="y"?"bottom":"right",gt=vt+lt[kt],St=vt-lt[bt];vt=clamp$1(gt,vt,St)}const mt=ot.fn({...$,[pt]:ht,[dt]:vt});return{...mt,data:{x:mt.x-et,y:mt.y-tt,enabled:{[pt]:rt,[dt]:it}}}}}},limitShift$2=function(_e){return _e===void 0&&(_e={}),{options:_e,fn($){const{x:et,y:tt,placement:nt,rects:rt,middlewareData:it}=$,{offset:ot=0,mainAxis:st=!0,crossAxis:at=!0}=evaluate(_e,$),lt={x:et,y:tt},dt=getSideAxis(nt),pt=getOppositeAxis(dt);let ht=lt[pt],vt=lt[dt];const mt=evaluate(ot,$),kt=typeof mt=="number"?{mainAxis:mt,crossAxis:0}:{mainAxis:0,crossAxis:0,...mt};if(st){const St=pt==="y"?"height":"width",yt=rt.reference[pt]-rt.floating[St]+kt.mainAxis,Et=rt.reference[pt]+rt.reference[St]-kt.mainAxis;ht<yt?ht=yt:ht>Et&&(ht=Et)}if(at){var bt,gt;const St=pt==="y"?"width":"height",yt=["top","left"].includes(getSide(nt)),Et=rt.reference[dt]-rt.floating[St]+(yt&&((bt=it.offset)==null?void 0:bt[dt])||0)+(yt?0:kt.crossAxis),Tt=rt.reference[dt]+rt.reference[St]+(yt?0:((gt=it.offset)==null?void 0:gt[dt])||0)-(yt?kt.crossAxis:0);vt<Et?vt=Et:vt>Tt&&(vt=Tt)}return{[pt]:ht,[dt]:vt}}}},size$2=function(_e){return _e===void 0&&(_e={}),{name:"size",options:_e,async fn($){var et,tt;const{placement:nt,rects:rt,platform:it,elements:ot}=$,{apply:st=()=>{},...at}=evaluate(_e,$),lt=await detectOverflow($,at),dt=getSide(nt),pt=getAlignment(nt),ht=getSideAxis(nt)==="y",{width:vt,height:mt}=rt.floating;let kt,bt;dt==="top"||dt==="bottom"?(kt=dt,bt=pt===(await(it.isRTL==null?void 0:it.isRTL(ot.floating))?"start":"end")?"left":"right"):(bt=dt,kt=pt==="end"?"top":"bottom");const gt=mt-lt.top-lt.bottom,St=vt-lt.left-lt.right,yt=min(mt-lt[kt],gt),Et=min(vt-lt[bt],St),Tt=!$.middlewareData.shift;let wt=yt,Rt=Et;if((et=$.middlewareData.shift)!=null&&et.enabled.x&&(Rt=St),(tt=$.middlewareData.shift)!=null&&tt.enabled.y&&(wt=gt),Tt&&!pt){const Pt=max(lt.left,0),At=max(lt.right,0),Nt=max(lt.top,0),Bt=max(lt.bottom,0);ht?Rt=vt-2*(Pt!==0||At!==0?Pt+At:max(lt.left,lt.right)):wt=mt-2*(Nt!==0||Bt!==0?Nt+Bt:max(lt.top,lt.bottom))}await st({...$,availableWidth:Rt,availableHeight:wt});const xt=await it.getDimensions(ot.floating);return vt!==xt.width||mt!==xt.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_e){return isNode(_e)?(_e.nodeName||"").toLowerCase():"#document"}function getWindow(_e){var $;return(_e==null||($=_e.ownerDocument)==null?void 0:$.defaultView)||window}function getDocumentElement(_e){var $;return($=(isNode(_e)?_e.ownerDocument:_e.document)||window.document)==null?void 0:$.documentElement}function isNode(_e){return hasWindow()?_e instanceof Node||_e instanceof getWindow(_e).Node:!1}function isElement(_e){return hasWindow()?_e instanceof Element||_e instanceof getWindow(_e).Element:!1}function isHTMLElement(_e){return hasWindow()?_e instanceof HTMLElement||_e instanceof getWindow(_e).HTMLElement:!1}function isShadowRoot(_e){return!hasWindow()||typeof ShadowRoot>"u"?!1:_e instanceof ShadowRoot||_e instanceof getWindow(_e).ShadowRoot}function isOverflowElement(_e){const{overflow:$,overflowX:et,overflowY:tt,display:nt}=getComputedStyle$1(_e);return/auto|scroll|overlay|hidden|clip/.test($+tt+et)&&!["inline","contents"].includes(nt)}function isTableElement(_e){return["table","td","th"].includes(getNodeName(_e))}function isTopLayer(_e){return[":popover-open",":modal"].some($=>{try{return _e.matches($)}catch{return!1}})}function isContainingBlock(_e){const $=isWebKit(),et=isElement(_e)?getComputedStyle$1(_e):_e;return et.transform!=="none"||et.perspective!=="none"||(et.containerType?et.containerType!=="normal":!1)||!$&&(et.backdropFilter?et.backdropFilter!=="none":!1)||!$&&(et.filter?et.filter!=="none":!1)||["transform","perspective","filter"].some(tt=>(et.willChange||"").includes(tt))||["paint","layout","strict","content"].some(tt=>(et.contain||"").includes(tt))}function getContainingBlock(_e){let $=getParentNode(_e);for(;isHTMLElement($)&&!isLastTraversableNode($);){if(isContainingBlock($))return $;if(isTopLayer($))return null;$=getParentNode($)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_e){return["html","body","#document"].includes(getNodeName(_e))}function getComputedStyle$1(_e){return getWindow(_e).getComputedStyle(_e)}function getNodeScroll(_e){return isElement(_e)?{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}:{scrollLeft:_e.scrollX,scrollTop:_e.scrollY}}function getParentNode(_e){if(getNodeName(_e)==="html")return _e;const $=_e.assignedSlot||_e.parentNode||isShadowRoot(_e)&&_e.host||getDocumentElement(_e);return isShadowRoot($)?$.host:$}function getNearestOverflowAncestor(_e){const $=getParentNode(_e);return isLastTraversableNode($)?_e.ownerDocument?_e.ownerDocument.body:_e.body:isHTMLElement($)&&isOverflowElement($)?$:getNearestOverflowAncestor($)}function getOverflowAncestors(_e,$,et){var tt;$===void 0&&($=[]),et===void 0&&(et=!0);const nt=getNearestOverflowAncestor(_e),rt=nt===((tt=_e.ownerDocument)==null?void 0:tt.body),it=getWindow(nt);if(rt){const ot=getFrameElement(it);return $.concat(it,it.visualViewport||[],isOverflowElement(nt)?nt:[],ot&&et?getOverflowAncestors(ot):[])}return $.concat(nt,getOverflowAncestors(nt,[],et))}function getFrameElement(_e){return _e.parent&&Object.getPrototypeOf(_e.parent)?_e.frameElement:null}function getCssDimensions(_e){const $=getComputedStyle$1(_e);let et=parseFloat($.width)||0,tt=parseFloat($.height)||0;const nt=isHTMLElement(_e),rt=nt?_e.offsetWidth:et,it=nt?_e.offsetHeight:tt,ot=round(et)!==rt||round(tt)!==it;return ot&&(et=rt,tt=it),{width:et,height:tt,$:ot}}function unwrapElement(_e){return isElement(_e)?_e:_e.contextElement}function getScale(_e){const $=unwrapElement(_e);if(!isHTMLElement($))return createCoords(1);const et=$.getBoundingClientRect(),{width:tt,height:nt,$:rt}=getCssDimensions($);let it=(rt?round(et.width):et.width)/tt,ot=(rt?round(et.height):et.height)/nt;return(!it||!Number.isFinite(it))&&(it=1),(!ot||!Number.isFinite(ot))&&(ot=1),{x:it,y:ot}}const noOffsets=createCoords(0);function getVisualOffsets(_e){const $=getWindow(_e);return!isWebKit()||!$.visualViewport?noOffsets:{x:$.visualViewport.offsetLeft,y:$.visualViewport.offsetTop}}function shouldAddVisualOffsets(_e,$,et){return $===void 0&&($=!1),!et||$&&et!==getWindow(_e)?!1:$}function getBoundingClientRect(_e,$,et,tt){$===void 0&&($=!1),et===void 0&&(et=!1);const nt=_e.getBoundingClientRect(),rt=unwrapElement(_e);let it=createCoords(1);$&&(tt?isElement(tt)&&(it=getScale(tt)):it=getScale(_e));const ot=shouldAddVisualOffsets(rt,et,tt)?getVisualOffsets(rt):createCoords(0);let st=(nt.left+ot.x)/it.x,at=(nt.top+ot.y)/it.y,lt=nt.width/it.x,dt=nt.height/it.y;if(rt){const pt=getWindow(rt),ht=tt&&isElement(tt)?getWindow(tt):tt;let vt=pt,mt=getFrameElement(vt);for(;mt&&tt&&ht!==vt;){const kt=getScale(mt),bt=mt.getBoundingClientRect(),gt=getComputedStyle$1(mt),St=bt.left+(mt.clientLeft+parseFloat(gt.paddingLeft))*kt.x,yt=bt.top+(mt.clientTop+parseFloat(gt.paddingTop))*kt.y;st*=kt.x,at*=kt.y,lt*=kt.x,dt*=kt.y,st+=St,at+=yt,vt=getWindow(mt),mt=getFrameElement(vt)}}return rectToClientRect({width:lt,height:dt,x:st,y:at})}function convertOffsetParentRelativeRectToViewportRelativeRect(_e){let{elements:$,rect:et,offsetParent:tt,strategy:nt}=_e;const rt=nt==="fixed",it=getDocumentElement(tt),ot=$?isTopLayer($.floating):!1;if(tt===it||ot&&rt)return et;let st={scrollLeft:0,scrollTop:0},at=createCoords(1);const lt=createCoords(0),dt=isHTMLElement(tt);if((dt||!dt&&!rt)&&((getNodeName(tt)!=="body"||isOverflowElement(it))&&(st=getNodeScroll(tt)),isHTMLElement(tt))){const pt=getBoundingClientRect(tt);at=getScale(tt),lt.x=pt.x+tt.clientLeft,lt.y=pt.y+tt.clientTop}return{width:et.width*at.x,height:et.height*at.y,x:et.x*at.x-st.scrollLeft*at.x+lt.x,y:et.y*at.y-st.scrollTop*at.y+lt.y}}function getClientRects(_e){return Array.from(_e.getClientRects())}function getWindowScrollBarX(_e,$){const et=getNodeScroll(_e).scrollLeft;return $?$.left+et:getBoundingClientRect(getDocumentElement(_e)).left+et}function getDocumentRect(_e){const $=getDocumentElement(_e),et=getNodeScroll(_e),tt=_e.ownerDocument.body,nt=max($.scrollWidth,$.clientWidth,tt.scrollWidth,tt.clientWidth),rt=max($.scrollHeight,$.clientHeight,tt.scrollHeight,tt.clientHeight);let it=-et.scrollLeft+getWindowScrollBarX(_e);const ot=-et.scrollTop;return getComputedStyle$1(tt).direction==="rtl"&&(it+=max($.clientWidth,tt.clientWidth)-nt),{width:nt,height:rt,x:it,y:ot}}function getViewportRect(_e,$){const et=getWindow(_e),tt=getDocumentElement(_e),nt=et.visualViewport;let rt=tt.clientWidth,it=tt.clientHeight,ot=0,st=0;if(nt){rt=nt.width,it=nt.height;const at=isWebKit();(!at||at&&$==="fixed")&&(ot=nt.offsetLeft,st=nt.offsetTop)}return{width:rt,height:it,x:ot,y:st}}function getInnerBoundingClientRect(_e,$){const et=getBoundingClientRect(_e,!0,$==="fixed"),tt=et.top+_e.clientTop,nt=et.left+_e.clientLeft,rt=isHTMLElement(_e)?getScale(_e):createCoords(1),it=_e.clientWidth*rt.x,ot=_e.clientHeight*rt.y,st=nt*rt.x,at=tt*rt.y;return{width:it,height:ot,x:st,y:at}}function getClientRectFromClippingAncestor(_e,$,et){let tt;if($==="viewport")tt=getViewportRect(_e,et);else if($==="document")tt=getDocumentRect(getDocumentElement(_e));else if(isElement($))tt=getInnerBoundingClientRect($,et);else{const nt=getVisualOffsets(_e);tt={...$,x:$.x-nt.x,y:$.y-nt.y}}return rectToClientRect(tt)}function hasFixedPositionAncestor(_e,$){const et=getParentNode(_e);return et===$||!isElement(et)||isLastTraversableNode(et)?!1:getComputedStyle$1(et).position==="fixed"||hasFixedPositionAncestor(et,$)}function getClippingElementAncestors(_e,$){const et=$.get(_e);if(et)return et;let tt=getOverflowAncestors(_e,[],!1).filter(ot=>isElement(ot)&&getNodeName(ot)!=="body"),nt=null;const rt=getComputedStyle$1(_e).position==="fixed";let it=rt?getParentNode(_e):_e;for(;isElement(it)&&!isLastTraversableNode(it);){const ot=getComputedStyle$1(it),st=isContainingBlock(it);!st&&ot.position==="fixed"&&(nt=null),(rt?!st&&!nt:!st&&ot.position==="static"&&!!nt&&["absolute","fixed"].includes(nt.position)||isOverflowElement(it)&&!st&&hasFixedPositionAncestor(_e,it))?tt=tt.filter(lt=>lt!==it):nt=ot,it=getParentNode(it)}return $.set(_e,tt),tt}function getClippingRect(_e){let{element:$,boundary:et,rootBoundary:tt,strategy:nt}=_e;const it=[...et==="clippingAncestors"?isTopLayer($)?[]:getClippingElementAncestors($,this._c):[].concat(et),tt],ot=it[0],st=it.reduce((at,lt)=>{const dt=getClientRectFromClippingAncestor($,lt,nt);return at.top=max(dt.top,at.top),at.right=min(dt.right,at.right),at.bottom=min(dt.bottom,at.bottom),at.left=max(dt.left,at.left),at},getClientRectFromClippingAncestor($,ot,nt));return{width:st.right-st.left,height:st.bottom-st.top,x:st.left,y:st.top}}function getDimensions(_e){const{width:$,height:et}=getCssDimensions(_e);return{width:$,height:et}}function getRectRelativeToOffsetParent(_e,$,et){const tt=isHTMLElement($),nt=getDocumentElement($),rt=et==="fixed",it=getBoundingClientRect(_e,!0,rt,$);let ot={scrollLeft:0,scrollTop:0};const st=createCoords(0);if(tt||!tt&&!rt)if((getNodeName($)!=="body"||isOverflowElement(nt))&&(ot=getNodeScroll($)),tt){const ht=getBoundingClientRect($,!0,rt,$);st.x=ht.x+$.clientLeft,st.y=ht.y+$.clientTop}else nt&&(st.x=getWindowScrollBarX(nt));let at=0,lt=0;if(nt&&!tt&&!rt){const ht=nt.getBoundingClientRect();lt=ht.top+ot.scrollTop,at=ht.left+ot.scrollLeft-getWindowScrollBarX(nt,ht)}const dt=it.left+ot.scrollLeft-st.x-at,pt=it.top+ot.scrollTop-st.y-lt;return{x:dt,y:pt,width:it.width,height:it.height}}function isStaticPositioned(_e){return getComputedStyle$1(_e).position==="static"}function getTrueOffsetParent(_e,$){if(!isHTMLElement(_e)||getComputedStyle$1(_e).position==="fixed")return null;if($)return $(_e);let et=_e.offsetParent;return getDocumentElement(_e)===et&&(et=et.ownerDocument.body),et}function getOffsetParent(_e,$){const et=getWindow(_e);if(isTopLayer(_e))return et;if(!isHTMLElement(_e)){let nt=getParentNode(_e);for(;nt&&!isLastTraversableNode(nt);){if(isElement(nt)&&!isStaticPositioned(nt))return nt;nt=getParentNode(nt)}return et}let tt=getTrueOffsetParent(_e,$);for(;tt&&isTableElement(tt)&&isStaticPositioned(tt);)tt=getTrueOffsetParent(tt,$);return tt&&isLastTraversableNode(tt)&&isStaticPositioned(tt)&&!isContainingBlock(tt)?et:tt||getContainingBlock(_e)||et}const getElementRects=async function(_e){const $=this.getOffsetParent||getOffsetParent,et=this.getDimensions,tt=await et(_e.floating);return{reference:getRectRelativeToOffsetParent(_e.reference,await $(_e.floating),_e.strategy),floating:{x:0,y:0,width:tt.width,height:tt.height}}};function isRTL(_e){return getComputedStyle$1(_e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(_e,$){let et=null,tt;const nt=getDocumentElement(_e);function rt(){var ot;clearTimeout(tt),(ot=et)==null||ot.disconnect(),et=null}function it(ot,st){ot===void 0&&(ot=!1),st===void 0&&(st=1),rt();const{left:at,top:lt,width:dt,height:pt}=_e.getBoundingClientRect();if(ot||$(),!dt||!pt)return;const ht=floor(lt),vt=floor(nt.clientWidth-(at+dt)),mt=floor(nt.clientHeight-(lt+pt)),kt=floor(at),gt={rootMargin:-ht+"px "+-vt+"px "+-mt+"px "+-kt+"px",threshold:max(0,min(1,st))||1};let St=!0;function yt(Et){const Tt=Et[0].intersectionRatio;if(Tt!==st){if(!St)return it();Tt?it(!1,Tt):tt=setTimeout(()=>{it(!1,1e-7)},1e3)}St=!1}try{et=new IntersectionObserver(yt,{...gt,root:nt.ownerDocument})}catch{et=new IntersectionObserver(yt,gt)}et.observe(_e)}return it(!0),rt}function autoUpdate(_e,$,et,tt){tt===void 0&&(tt={});const{ancestorScroll:nt=!0,ancestorResize:rt=!0,elementResize:it=typeof ResizeObserver=="function",layoutShift:ot=typeof IntersectionObserver=="function",animationFrame:st=!1}=tt,at=unwrapElement(_e),lt=nt||rt?[...at?getOverflowAncestors(at):[],...getOverflowAncestors($)]:[];lt.forEach(bt=>{nt&&bt.addEventListener("scroll",et,{passive:!0}),rt&&bt.addEventListener("resize",et)});const dt=at&&ot?observeMove(at,et):null;let pt=-1,ht=null;it&&(ht=new ResizeObserver(bt=>{let[gt]=bt;gt&&gt.target===at&&ht&&(ht.unobserve($),cancelAnimationFrame(pt),pt=requestAnimationFrame(()=>{var St;(St=ht)==null||St.observe($)})),et()}),at&&!st&&ht.observe(at),ht.observe($));let vt,mt=st?getBoundingClientRect(_e):null;st&&kt();function kt(){const bt=getBoundingClientRect(_e);mt&&(bt.x!==mt.x||bt.y!==mt.y||bt.width!==mt.width||bt.height!==mt.height)&&et(),mt=bt,vt=requestAnimationFrame(kt)}return et(),()=>{var bt;lt.forEach(gt=>{nt&&gt.removeEventListener("scroll",et),rt&&gt.removeEventListener("resize",et)}),dt==null||dt(),(bt=ht)==null||bt.disconnect(),ht=null,st&&cancelAnimationFrame(vt)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_e,$,et)=>{const tt=new Map,nt={platform,...et},rt={...nt.platform,_c:tt};return computePosition$1(_e,$,{...nt,platform:rt})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(_e,$){if(_e===$)return!0;if(typeof _e!=typeof $)return!1;if(typeof _e=="function"&&_e.toString()===$.toString())return!0;let et,tt,nt;if(_e&&$&&typeof _e=="object"){if(Array.isArray(_e)){if(et=_e.length,et!==$.length)return!1;for(tt=et;tt--!==0;)if(!deepEqual(_e[tt],$[tt]))return!1;return!0}if(nt=Object.keys(_e),et=nt.length,et!==Object.keys($).length)return!1;for(tt=et;tt--!==0;)if(!{}.hasOwnProperty.call($,nt[tt]))return!1;for(tt=et;tt--!==0;){const rt=nt[tt];if(!(rt==="_owner"&&_e.$$typeof)&&!deepEqual(_e[rt],$[rt]))return!1}return!0}return _e!==_e&&$!==$}function getDPR(_e){return typeof window>"u"?1:(_e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_e,$){const et=getDPR(_e);return Math.round($*et)/et}function useLatestRef(_e){const $=reactExports.useRef(_e);return index(()=>{$.current=_e}),$}function useFloating(_e){_e===void 0&&(_e={});const{placement:$="bottom",strategy:et="absolute",middleware:tt=[],platform:nt,elements:{reference:rt,floating:it}={},transform:ot=!0,whileElementsMounted:st,open:at}=_e,[lt,dt]=reactExports.useState({x:0,y:0,strategy:et,placement:$,middlewareData:{},isPositioned:!1}),[pt,ht]=reactExports.useState(tt);deepEqual(pt,tt)||ht(tt);const[vt,mt]=reactExports.useState(null),[kt,bt]=reactExports.useState(null),gt=reactExports.useCallback(Lt=>{Lt!==Tt.current&&(Tt.current=Lt,mt(Lt))},[]),St=reactExports.useCallback(Lt=>{Lt!==wt.current&&(wt.current=Lt,bt(Lt))},[]),yt=rt||vt,Et=it||kt,Tt=reactExports.useRef(null),wt=reactExports.useRef(null),Rt=reactExports.useRef(lt),xt=st!=null,Pt=useLatestRef(st),At=useLatestRef(nt),Nt=useLatestRef(at),Bt=reactExports.useCallback(()=>{if(!Tt.current||!wt.current)return;const Lt={placement:$,strategy:et,middleware:pt};At.current&&(Lt.platform=At.current),computePosition(Tt.current,wt.current,Lt).then(en=>{const rn={...en,isPositioned:Nt.current!==!1};Jt.current&&!deepEqual(Rt.current,rn)&&(Rt.current=rn,reactDomExports.flushSync(()=>{dt(rn)}))})},[pt,$,et,At,Nt]);index(()=>{at===!1&&Rt.current.isPositioned&&(Rt.current.isPositioned=!1,dt(Lt=>({...Lt,isPositioned:!1})))},[at]);const Jt=reactExports.useRef(!1);index(()=>(Jt.current=!0,()=>{Jt.current=!1}),[]),index(()=>{if(yt&&(Tt.current=yt),Et&&(wt.current=Et),yt&&Et){if(Pt.current)return Pt.current(yt,Et,Bt);Bt()}},[yt,Et,Bt,Pt,xt]);const ln=reactExports.useMemo(()=>({reference:Tt,floating:wt,setReference:gt,setFloating:St}),[gt,St]),on=reactExports.useMemo(()=>({reference:yt,floating:Et}),[yt,Et]),an=reactExports.useMemo(()=>{const Lt={position:et,left:0,top:0};if(!on.floating)return Lt;const en=roundByDPR(on.floating,lt.x),rn=roundByDPR(on.floating,lt.y);return ot?{...Lt,transform:"translate("+en+"px, "+rn+"px)",...getDPR(on.floating)>=1.5&&{willChange:"transform"}}:{position:et,left:en,top:rn}},[et,ot,on.floating,lt.x,lt.y]);return reactExports.useMemo(()=>({...lt,update:Bt,refs:ln,elements:on,floatingStyles:an}),[lt,Bt,ln,on,an])}const arrow$1=_e=>{function $(et){return{}.hasOwnProperty.call(et,"current")}return{name:"arrow",options:_e,fn(et){const{element:tt,padding:nt}=typeof _e=="function"?_e(et):_e;return tt&&$(tt)?tt.current!=null?arrow$2({element:tt.current,padding:nt}).fn(et):{}:tt?arrow$2({element:tt,padding:nt}).fn(et):{}}}},offset=(_e,$)=>({...offset$1(_e),options:[_e,$]}),shift=(_e,$)=>({...shift$1(_e),options:[_e,$]}),limitShift=(_e,$)=>({...limitShift$1(_e),options:[_e,$]}),flip=(_e,$)=>({...flip$1(_e),options:[_e,$]}),size=(_e,$)=>({...size$1(_e),options:[_e,$]}),hide=(_e,$)=>({...hide$1(_e),options:[_e,$]}),arrow=(_e,$)=>({...arrow$1(_e),options:[_e,$]});var NAME="Arrow",Arrow$1=reactExports.forwardRef((_e,$)=>{const{children:et,width:tt=10,height:nt=5,...rt}=_e;return jsxRuntimeExports.jsx(Primitive.svg,{...rt,ref:$,width:tt,height:nt,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_e.asChild?et:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME;var Root$2=Arrow$1;function createContextScope(_e,$=[]){let et=[];function tt(rt,it){const ot=reactExports.createContext(it),st=et.length;et=[...et,it];function at(dt){const{scope:pt,children:ht,...vt}=dt,mt=(pt==null?void 0:pt[_e][st])||ot,kt=reactExports.useMemo(()=>vt,Object.values(vt));return jsxRuntimeExports.jsx(mt.Provider,{value:kt,children:ht})}function lt(dt,pt){const ht=(pt==null?void 0:pt[_e][st])||ot,vt=reactExports.useContext(ht);if(vt)return vt;if(it!==void 0)return it;throw new Error(`\`${dt}\` must be used within \`${rt}\``)}return at.displayName=rt+"Provider",[at,lt]}const nt=()=>{const rt=et.map(it=>reactExports.createContext(it));return function(ot){const st=(ot==null?void 0:ot[_e])||rt;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...ot,[_e]:st}}),[ot,st])}};return nt.scopeName=_e,[tt,composeContextScopes(nt,...$)]}function composeContextScopes(..._e){const $=_e[0];if(_e.length===1)return $;const et=()=>{const tt=_e.map(nt=>({useScope:nt(),scopeName:nt.scopeName}));return function(rt){const it=tt.reduce((ot,{useScope:st,scopeName:at})=>{const dt=st(rt)[`__scope${at}`];return{...ot,...dt}},{});return reactExports.useMemo(()=>({[`__scope${$.scopeName}`]:it}),[it])}};return et.scopeName=$.scopeName,et}function useSize(_e){const[$,et]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_e){et({width:_e.offsetWidth,height:_e.offsetHeight});const tt=new ResizeObserver(nt=>{if(!Array.isArray(nt)||!nt.length)return;const rt=nt[0];let it,ot;if("borderBoxSize"in rt){const st=rt.borderBoxSize,at=Array.isArray(st)?st[0]:st;it=at.inlineSize,ot=at.blockSize}else it=_e.offsetWidth,ot=_e.offsetHeight;et({width:it,height:ot})});return tt.observe(_e,{box:"border-box"}),()=>tt.unobserve(_e)}else et(void 0)},[_e]),$}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_e=>{const{__scopePopper:$,children:et}=_e,[tt,nt]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:$,anchor:tt,onAnchorChange:nt,children:et})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((_e,$)=>{const{__scopePopper:et,virtualRef:tt,...nt}=_e,rt=usePopperContext(ANCHOR_NAME,et),it=reactExports.useRef(null),ot=useComposedRefs($,it);return reactExports.useEffect(()=>{rt.onAnchorChange((tt==null?void 0:tt.current)||it.current)}),tt?null:jsxRuntimeExports.jsx(Primitive.div,{...nt,ref:ot})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$1="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$1),PopperContent=reactExports.forwardRef((_e,$)=>{var yn,En,vn,nn,un,Mt;const{__scopePopper:et,side:tt="bottom",sideOffset:nt=0,align:rt="center",alignOffset:it=0,arrowPadding:ot=0,avoidCollisions:st=!0,collisionBoundary:at=[],collisionPadding:lt=0,sticky:dt="partial",hideWhenDetached:pt=!1,updatePositionStrategy:ht="optimized",onPlaced:vt,...mt}=_e,kt=usePopperContext(CONTENT_NAME$1,et),[bt,gt]=reactExports.useState(null),St=useComposedRefs($,jt=>gt(jt)),[yt,Et]=reactExports.useState(null),Tt=useSize(yt),wt=(Tt==null?void 0:Tt.width)??0,Rt=(Tt==null?void 0:Tt.height)??0,xt=tt+(rt!=="center"?"-"+rt:""),Pt=typeof lt=="number"?lt:{top:0,right:0,bottom:0,left:0,...lt},At=Array.isArray(at)?at:[at],Nt=At.length>0,Bt={padding:Pt,boundary:At.filter(isNotNull),altBoundary:Nt},{refs:Jt,floatingStyles:ln,placement:on,isPositioned:an,middlewareData:Lt}=useFloating({strategy:"fixed",placement:xt,whileElementsMounted:(...jt)=>autoUpdate(...jt,{animationFrame:ht==="always"}),elements:{reference:kt.anchor},middleware:[offset({mainAxis:nt+Rt,alignmentAxis:it}),st&&shift({mainAxis:!0,crossAxis:!1,limiter:dt==="partial"?limitShift():void 0,...Bt}),st&&flip({...Bt}),size({...Bt,apply:({elements:jt,rects:zt,availableWidth:dn,availableHeight:fn})=>{const{width:tn,height:pn}=zt.reference,gn=jt.floating.style;gn.setProperty("--radix-popper-available-width",`${dn}px`),gn.setProperty("--radix-popper-available-height",`${fn}px`),gn.setProperty("--radix-popper-anchor-width",`${tn}px`),gn.setProperty("--radix-popper-anchor-height",`${pn}px`)}}),yt&&arrow({element:yt,padding:ot}),transformOrigin({arrowWidth:wt,arrowHeight:Rt}),pt&&hide({strategy:"referenceHidden",...Bt})]}),[en,rn]=getSideAndAlignFromPlacement(on),sn=useCallbackRef(vt);useLayoutEffect2(()=>{an&&(sn==null||sn())},[an,sn]);const hn=(yn=Lt.arrow)==null?void 0:yn.x,mn=(En=Lt.arrow)==null?void 0:En.y,wn=((vn=Lt.arrow)==null?void 0:vn.centerOffset)!==0,[Cn,kn]=reactExports.useState();return useLayoutEffect2(()=>{bt&&kn(window.getComputedStyle(bt).zIndex)},[bt]),jsxRuntimeExports.jsx("div",{ref:Jt.setFloating,"data-radix-popper-content-wrapper":"",style:{...ln,transform:an?ln.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Cn,"--radix-popper-transform-origin":[(nn=Lt.transformOrigin)==null?void 0:nn.x,(un=Lt.transformOrigin)==null?void 0:un.y].join(" "),...((Mt=Lt.hide)==null?void 0:Mt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:_e.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:et,placedSide:en,onArrowChange:Et,arrowX:hn,arrowY:mn,shouldHideArrow:wn,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":en,"data-align":rn,...mt,ref:St,style:{...mt.style,animation:an?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$1;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function($,et){const{__scopePopper:tt,...nt}=$,rt=useContentContext(ARROW_NAME$1,tt),it=OPPOSITE_SIDE[rt.placedSide];return jsxRuntimeExports.jsx("span",{ref:rt.onArrowChange,style:{position:"absolute",left:rt.arrowX,top:rt.arrowY,[it]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[rt.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[rt.placedSide],visibility:rt.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$2,{...nt,ref:et,style:{...nt.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(_e){return _e!==null}var transformOrigin=_e=>({name:"transformOrigin",options:_e,fn($){var kt,bt,gt;const{placement:et,rects:tt,middlewareData:nt}=$,it=((kt=nt.arrow)==null?void 0:kt.centerOffset)!==0,ot=it?0:_e.arrowWidth,st=it?0:_e.arrowHeight,[at,lt]=getSideAndAlignFromPlacement(et),dt={start:"0%",center:"50%",end:"100%"}[lt],pt=(((bt=nt.arrow)==null?void 0:bt.x)??0)+ot/2,ht=(((gt=nt.arrow)==null?void 0:gt.y)??0)+st/2;let vt="",mt="";return at==="bottom"?(vt=it?dt:`${pt}px`,mt=`${-st}px`):at==="top"?(vt=it?dt:`${pt}px`,mt=`${tt.floating.height+st}px`):at==="right"?(vt=`${-st}px`,mt=it?dt:`${ht}px`):at==="left"&&(vt=`${tt.floating.width+st}px`,mt=it?dt:`${ht}px`),{data:{x:vt,y:mt}}}});function getSideAndAlignFromPlacement(_e){const[$,et="center"]=_e.split("-");return[$,et]}var Root2=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,[createTooltipContext,createTooltipScope]=createContextScope$1("Tooltip",[createPopperScope]),usePopperScope=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=_e=>{const{__scopeTooltip:$,delayDuration:et=DEFAULT_DELAY_DURATION,skipDelayDuration:tt=300,disableHoverableContent:nt=!1,children:rt}=_e,[it,ot]=reactExports.useState(!0),st=reactExports.useRef(!1),at=reactExports.useRef(0);return reactExports.useEffect(()=>{const lt=at.current;return()=>window.clearTimeout(lt)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:$,isOpenDelayed:it,delayDuration:et,onOpen:reactExports.useCallback(()=>{window.clearTimeout(at.current),ot(!1)},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(at.current),at.current=window.setTimeout(()=>ot(!0),tt)},[tt]),isPointerInTransitRef:st,onPointerInTransitChange:reactExports.useCallback(lt=>{st.current=lt},[]),disableHoverableContent:nt,children:rt})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip$1=_e=>{const{__scopeTooltip:$,children:et,open:tt,defaultOpen:nt=!1,onOpenChange:rt,disableHoverableContent:it,delayDuration:ot}=_e,st=useTooltipProviderContext(TOOLTIP_NAME,_e.__scopeTooltip),at=usePopperScope($),[lt,dt]=reactExports.useState(null),pt=useId(),ht=reactExports.useRef(0),vt=it??st.disableHoverableContent,mt=ot??st.delayDuration,kt=reactExports.useRef(!1),[bt=!1,gt]=useControllableState({prop:tt,defaultProp:nt,onChange:wt=>{wt?(st.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):st.onClose(),rt==null||rt(wt)}}),St=reactExports.useMemo(()=>bt?kt.current?"delayed-open":"instant-open":"closed",[bt]),yt=reactExports.useCallback(()=>{window.clearTimeout(ht.current),ht.current=0,kt.current=!1,gt(!0)},[gt]),Et=reactExports.useCallback(()=>{window.clearTimeout(ht.current),ht.current=0,gt(!1)},[gt]),Tt=reactExports.useCallback(()=>{window.clearTimeout(ht.current),ht.current=window.setTimeout(()=>{kt.current=!0,gt(!0),ht.current=0},mt)},[mt,gt]);return reactExports.useEffect(()=>()=>{ht.current&&(window.clearTimeout(ht.current),ht.current=0)},[]),jsxRuntimeExports.jsx(Root2,{...at,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:$,contentId:pt,open:bt,stateAttribute:St,trigger:lt,onTriggerChange:dt,onTriggerEnter:reactExports.useCallback(()=>{st.isOpenDelayed?Tt():yt()},[st.isOpenDelayed,Tt,yt]),onTriggerLeave:reactExports.useCallback(()=>{vt?Et():(window.clearTimeout(ht.current),ht.current=0)},[Et,vt]),onOpen:yt,onClose:Et,disableHoverableContent:vt,children:et})})};Tooltip$1.displayName=TOOLTIP_NAME;var TRIGGER_NAME="TooltipTrigger",TooltipTrigger$1=reactExports.forwardRef((_e,$)=>{const{__scopeTooltip:et,...tt}=_e,nt=useTooltipContext(TRIGGER_NAME,et),rt=useTooltipProviderContext(TRIGGER_NAME,et),it=usePopperScope(et),ot=reactExports.useRef(null),st=useComposedRefs($,ot,nt.onTriggerChange),at=reactExports.useRef(!1),lt=reactExports.useRef(!1),dt=reactExports.useCallback(()=>at.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",dt),[dt]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...it,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":nt.open?nt.contentId:void 0,"data-state":nt.stateAttribute,...tt,ref:st,onPointerMove:composeEventHandlers(_e.onPointerMove,pt=>{pt.pointerType!=="touch"&&!lt.current&&!rt.isPointerInTransitRef.current&&(nt.onTriggerEnter(),lt.current=!0)}),onPointerLeave:composeEventHandlers(_e.onPointerLeave,()=>{nt.onTriggerLeave(),lt.current=!1}),onPointerDown:composeEventHandlers(_e.onPointerDown,()=>{at.current=!0,document.addEventListener("pointerup",dt,{once:!0})}),onFocus:composeEventHandlers(_e.onFocus,()=>{at.current||nt.onOpen()}),onBlur:composeEventHandlers(_e.onBlur,nt.onClose),onClick:composeEventHandlers(_e.onClick,nt.onClose)})})});TooltipTrigger$1.displayName=TRIGGER_NAME;var PORTAL_NAME="TooltipPortal",[PortalProvider,usePortalContext]=createTooltipContext(PORTAL_NAME,{forceMount:void 0}),CONTENT_NAME="TooltipContent",TooltipContent$1=reactExports.forwardRef((_e,$)=>{const et=usePortalContext(CONTENT_NAME,_e.__scopeTooltip),{forceMount:tt=et.forceMount,side:nt="top",...rt}=_e,it=useTooltipContext(CONTENT_NAME,_e.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:tt||it.open,children:it.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:nt,...rt,ref:$}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:nt,...rt,ref:$})})}),TooltipContentHoverable=reactExports.forwardRef((_e,$)=>{const et=useTooltipContext(CONTENT_NAME,_e.__scopeTooltip),tt=useTooltipProviderContext(CONTENT_NAME,_e.__scopeTooltip),nt=reactExports.useRef(null),rt=useComposedRefs($,nt),[it,ot]=reactExports.useState(null),{trigger:st,onClose:at}=et,lt=nt.current,{onPointerInTransitChange:dt}=tt,pt=reactExports.useCallback(()=>{ot(null),dt(!1)},[dt]),ht=reactExports.useCallback((vt,mt)=>{const kt=vt.currentTarget,bt={x:vt.clientX,y:vt.clientY},gt=getExitSideFromRect(bt,kt.getBoundingClientRect()),St=getPaddedExitPoints(bt,gt),yt=getPointsFromRect(mt.getBoundingClientRect()),Et=getHull([...St,...yt]);ot(Et),dt(!0)},[dt]);return reactExports.useEffect(()=>()=>pt(),[pt]),reactExports.useEffect(()=>{if(st&&lt){const vt=kt=>ht(kt,lt),mt=kt=>ht(kt,st);return st.addEventListener("pointerleave",vt),lt.addEventListener("pointerleave",mt),()=>{st.removeEventListener("pointerleave",vt),lt.removeEventListener("pointerleave",mt)}}},[st,lt,ht,pt]),reactExports.useEffect(()=>{if(it){const vt=mt=>{const kt=mt.target,bt={x:mt.clientX,y:mt.clientY},gt=(st==null?void 0:st.contains(kt))||(lt==null?void 0:lt.contains(kt)),St=!isPointInPolygon(bt,it);gt?pt():St&&(pt(),at())};return document.addEventListener("pointermove",vt),()=>document.removeEventListener("pointermove",vt)}},[st,lt,it,at,pt]),jsxRuntimeExports.jsx(TooltipContentImpl,{..._e,ref:rt})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),TooltipContentImpl=reactExports.forwardRef((_e,$)=>{const{__scopeTooltip:et,children:tt,"aria-label":nt,onEscapeKeyDown:rt,onPointerDownOutside:it,...ot}=_e,st=useTooltipContext(CONTENT_NAME,et),at=usePopperScope(et),{onClose:lt}=st;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,lt),()=>document.removeEventListener(TOOLTIP_OPEN,lt)),[lt]),reactExports.useEffect(()=>{if(st.trigger){const dt=pt=>{const ht=pt.target;ht!=null&&ht.contains(st.trigger)&&lt()};return window.addEventListener("scroll",dt,{capture:!0}),()=>window.removeEventListener("scroll",dt,{capture:!0})}},[st.trigger,lt]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:rt,onPointerDownOutside:it,onFocusOutside:dt=>dt.preventDefault(),onDismiss:lt,children:jsxRuntimeExports.jsxs(Content,{"data-state":st.stateAttribute,...at,...ot,ref:$,style:{...ot.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:tt}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:et,isInside:!0,children:jsxRuntimeExports.jsx(Root$3,{id:st.contentId,role:"tooltip",children:nt||tt})})]})})});TooltipContent$1.displayName=CONTENT_NAME;var ARROW_NAME="TooltipArrow",TooltipArrow=reactExports.forwardRef((_e,$)=>{const{__scopeTooltip:et,...tt}=_e,nt=usePopperScope(et);return useVisuallyHiddenContentContext(ARROW_NAME,et).isInside?null:jsxRuntimeExports.jsx(Arrow,{...nt,...tt,ref:$})});TooltipArrow.displayName=ARROW_NAME;function getExitSideFromRect(_e,$){const et=Math.abs($.top-_e.y),tt=Math.abs($.bottom-_e.y),nt=Math.abs($.right-_e.x),rt=Math.abs($.left-_e.x);switch(Math.min(et,tt,nt,rt)){case rt:return"left";case nt:return"right";case et:return"top";case tt:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(_e,$,et=5){const tt=[];switch($){case"top":tt.push({x:_e.x-et,y:_e.y+et},{x:_e.x+et,y:_e.y+et});break;case"bottom":tt.push({x:_e.x-et,y:_e.y-et},{x:_e.x+et,y:_e.y-et});break;case"left":tt.push({x:_e.x+et,y:_e.y-et},{x:_e.x+et,y:_e.y+et});break;case"right":tt.push({x:_e.x-et,y:_e.y-et},{x:_e.x-et,y:_e.y+et});break}return tt}function getPointsFromRect(_e){const{top:$,right:et,bottom:tt,left:nt}=_e;return[{x:nt,y:$},{x:et,y:$},{x:et,y:tt},{x:nt,y:tt}]}function isPointInPolygon(_e,$){const{x:et,y:tt}=_e;let nt=!1;for(let rt=0,it=$.length-1;rt<$.length;it=rt++){const ot=$[rt].x,st=$[rt].y,at=$[it].x,lt=$[it].y;st>tt!=lt>tt&&et<(at-ot)*(tt-st)/(lt-st)+ot&&(nt=!nt)}return nt}function getHull(_e){const $=_e.slice();return $.sort((et,tt)=>et.x<tt.x?-1:et.x>tt.x?1:et.y<tt.y?-1:et.y>tt.y?1:0),getHullPresorted($)}function getHullPresorted(_e){if(_e.length<=1)return _e.slice();const $=[];for(let tt=0;tt<_e.length;tt++){const nt=_e[tt];for(;$.length>=2;){const rt=$[$.length-1],it=$[$.length-2];if((rt.x-it.x)*(nt.y-it.y)>=(rt.y-it.y)*(nt.x-it.x))$.pop();else break}$.push(nt)}$.pop();const et=[];for(let tt=_e.length-1;tt>=0;tt--){const nt=_e[tt];for(;et.length>=2;){const rt=et[et.length-1],it=et[et.length-2];if((rt.x-it.x)*(nt.y-it.y)>=(rt.y-it.y)*(nt.x-it.x))et.pop();else break}et.push(nt)}return et.pop(),$.length===1&&et.length===1&&$[0].x===et[0].x&&$[0].y===et[0].y?$:$.concat(et)}var Provider=TooltipProvider$1,Root3=Tooltip$1,Trigger=TooltipTrigger$1,Content2=TooltipContent$1;const TooltipProvider=Provider,Tooltip=Root3,TooltipTrigger=Trigger,TooltipContent=reactExports.forwardRef(({className:_e,sideOffset:$=4,...et},tt)=>jsxRuntimeExports.jsx(Content2,{ref:tt,sideOffset:$,className:cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_e),...et}));TooltipContent.displayName=Content2.displayName;var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(_e){return this.listeners.add(_e),this.onSubscribe(),()=>{this.listeners.delete(_e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$1(){}function functionalUpdate(_e,$){return typeof _e=="function"?_e($):_e}function isValidTimeout(_e){return typeof _e=="number"&&_e>=0&&_e!==1/0}function timeUntilStale(_e,$){return Math.max(_e+($||0)-Date.now(),0)}function resolveStaleTime(_e,$){return typeof _e=="function"?_e($):_e}function resolveEnabled(_e,$){return typeof _e=="function"?_e($):_e}function matchQuery(_e,$){const{type:et="all",exact:tt,fetchStatus:nt,predicate:rt,queryKey:it,stale:ot}=_e;if(it){if(tt){if($.queryHash!==hashQueryKeyByOptions(it,$.options))return!1}else if(!partialMatchKey($.queryKey,it))return!1}if(et!=="all"){const st=$.isActive();if(et==="active"&&!st||et==="inactive"&&st)return!1}return!(typeof ot=="boolean"&&$.isStale()!==ot||nt&&nt!==$.state.fetchStatus||rt&&!rt($))}function matchMutation(_e,$){const{exact:et,status:tt,predicate:nt,mutationKey:rt}=_e;if(rt){if(!$.options.mutationKey)return!1;if(et){if(hashKey($.options.mutationKey)!==hashKey(rt))return!1}else if(!partialMatchKey($.options.mutationKey,rt))return!1}return!(tt&&$.state.status!==tt||nt&&!nt($))}function hashQueryKeyByOptions(_e,$){return(($==null?void 0:$.queryKeyHashFn)||hashKey)(_e)}function hashKey(_e){return JSON.stringify(_e,($,et)=>isPlainObject(et)?Object.keys(et).sort().reduce((tt,nt)=>(tt[nt]=et[nt],tt),{}):et)}function partialMatchKey(_e,$){return _e===$?!0:typeof _e!=typeof $?!1:_e&&$&&typeof _e=="object"&&typeof $=="object"?!Object.keys($).some(et=>!partialMatchKey(_e[et],$[et])):!1}function replaceEqualDeep(_e,$){if(_e===$)return _e;const et=isPlainArray(_e)&&isPlainArray($);if(et||isPlainObject(_e)&&isPlainObject($)){const tt=et?_e:Object.keys(_e),nt=tt.length,rt=et?$:Object.keys($),it=rt.length,ot=et?[]:{};let st=0;for(let at=0;at<it;at++){const lt=et?at:rt[at];(!et&&tt.includes(lt)||et)&&_e[lt]===void 0&&$[lt]===void 0?(ot[lt]=void 0,st++):(ot[lt]=replaceEqualDeep(_e[lt],$[lt]),ot[lt]===_e[lt]&&_e[lt]!==void 0&&st++)}return nt===it&&st===nt?_e:ot}return $}function isPlainArray(_e){return Array.isArray(_e)&&_e.length===Object.keys(_e).length}function isPlainObject(_e){if(!hasObjectPrototype(_e))return!1;const $=_e.constructor;if($===void 0)return!0;const et=$.prototype;return!(!hasObjectPrototype(et)||!et.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(_e)!==Object.prototype)}function hasObjectPrototype(_e){return Object.prototype.toString.call(_e)==="[object Object]"}function sleep$2(_e){return new Promise($=>{setTimeout($,_e)})}function replaceData(_e,$,et){return typeof et.structuralSharing=="function"?et.structuralSharing(_e,$):et.structuralSharing!==!1?replaceEqualDeep(_e,$):$}function addToEnd(_e,$,et=0){const tt=[..._e,$];return et&&tt.length>et?tt.slice(1):tt}function addToStart(_e,$,et=0){const tt=[$,..._e];return et&&tt.length>et?tt.slice(0,-1):tt}var skipToken=Symbol();function ensureQueryFn(_e,$){return!_e.queryFn&&($!=null&&$.initialPromise)?()=>$.initialPromise:!_e.queryFn||_e.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${_e.queryHash}'`)):_e.queryFn}var lr,nr,vr,to,FocusManager=(to=class extends Subscribable{constructor(){super();Sn(this,lr);Sn(this,nr);Sn(this,vr);bn(this,vr,$=>{if(!isServer&&window.addEventListener){const et=()=>$();return window.addEventListener("visibilitychange",et,!1),()=>{window.removeEventListener("visibilitychange",et)}}})}onSubscribe(){Yt(this,nr)||this.setEventListener(Yt(this,vr))}onUnsubscribe(){var $;this.hasListeners()||(($=Yt(this,nr))==null||$.call(this),bn(this,nr,void 0))}setEventListener($){var et;bn(this,vr,$),(et=Yt(this,nr))==null||et.call(this),bn(this,nr,$(tt=>{typeof tt=="boolean"?this.setFocused(tt):this.onFocus()}))}setFocused($){Yt(this,lr)!==$&&(bn(this,lr,$),this.onFocus())}onFocus(){const $=this.isFocused();this.listeners.forEach(et=>{et($)})}isFocused(){var $;return typeof Yt(this,lr)=="boolean"?Yt(this,lr):(($=globalThis.document)==null?void 0:$.visibilityState)!=="hidden"}},lr=new WeakMap,nr=new WeakMap,vr=new WeakMap,to),focusManager=new FocusManager,yr,rr,br,no,OnlineManager=(no=class extends Subscribable{constructor(){super();Sn(this,yr,!0);Sn(this,rr);Sn(this,br);bn(this,br,$=>{if(!isServer&&window.addEventListener){const et=()=>$(!0),tt=()=>$(!1);return window.addEventListener("online",et,!1),window.addEventListener("offline",tt,!1),()=>{window.removeEventListener("online",et),window.removeEventListener("offline",tt)}}})}onSubscribe(){Yt(this,rr)||this.setEventListener(Yt(this,br))}onUnsubscribe(){var $;this.hasListeners()||(($=Yt(this,rr))==null||$.call(this),bn(this,rr,void 0))}setEventListener($){var et;bn(this,br,$),(et=Yt(this,rr))==null||et.call(this),bn(this,rr,$(this.setOnline.bind(this)))}setOnline($){Yt(this,yr)!==$&&(bn(this,yr,$),this.listeners.forEach(tt=>{tt($)}))}isOnline(){return Yt(this,yr)}},yr=new WeakMap,rr=new WeakMap,br=new WeakMap,no),onlineManager=new OnlineManager;function pendingThenable(){let _e,$;const et=new Promise((nt,rt)=>{_e=nt,$=rt});et.status="pending",et.catch(()=>{});function tt(nt){Object.assign(et,nt),delete et.resolve,delete et.reject}return et.resolve=nt=>{tt({status:"fulfilled",value:nt}),_e(nt)},et.reject=nt=>{tt({status:"rejected",reason:nt}),$(nt)},et}function defaultRetryDelay(_e){return Math.min(1e3*2**_e,3e4)}function canFetch(_e){return(_e??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(_e){super("CancelledError"),this.revert=_e==null?void 0:_e.revert,this.silent=_e==null?void 0:_e.silent}};function isCancelledError(_e){return _e instanceof CancelledError}function createRetryer(_e){let $=!1,et=0,tt=!1,nt;const rt=pendingThenable(),it=mt=>{var kt;tt||(pt(new CancelledError(mt)),(kt=_e.abort)==null||kt.call(_e))},ot=()=>{$=!0},st=()=>{$=!1},at=()=>focusManager.isFocused()&&(_e.networkMode==="always"||onlineManager.isOnline())&&_e.canRun(),lt=()=>canFetch(_e.networkMode)&&_e.canRun(),dt=mt=>{var kt;tt||(tt=!0,(kt=_e.onSuccess)==null||kt.call(_e,mt),nt==null||nt(),rt.resolve(mt))},pt=mt=>{var kt;tt||(tt=!0,(kt=_e.onError)==null||kt.call(_e,mt),nt==null||nt(),rt.reject(mt))},ht=()=>new Promise(mt=>{var kt;nt=bt=>{(tt||at())&&mt(bt)},(kt=_e.onPause)==null||kt.call(_e)}).then(()=>{var mt;nt=void 0,tt||(mt=_e.onContinue)==null||mt.call(_e)}),vt=()=>{if(tt)return;let mt;const kt=et===0?_e.initialPromise:void 0;try{mt=kt??_e.fn()}catch(bt){mt=Promise.reject(bt)}Promise.resolve(mt).then(dt).catch(bt=>{var Tt;if(tt)return;const gt=_e.retry??(isServer?0:3),St=_e.retryDelay??defaultRetryDelay,yt=typeof St=="function"?St(et,bt):St,Et=gt===!0||typeof gt=="number"&&et<gt||typeof gt=="function"&&gt(et,bt);if($||!Et){pt(bt);return}et++,(Tt=_e.onFail)==null||Tt.call(_e,et,bt),sleep$2(yt).then(()=>at()?void 0:ht()).then(()=>{$?pt(bt):vt()})})};return{promise:rt,cancel:it,continue:()=>(nt==null||nt(),rt),cancelRetry:ot,continueRetry:st,canStart:lt,start:()=>(lt()?vt():ht().then(vt),rt)}}function createNotifyManager(){let _e=[],$=0,et=ot=>{ot()},tt=ot=>{ot()},nt=ot=>setTimeout(ot,0);const rt=ot=>{$?_e.push(ot):nt(()=>{et(ot)})},it=()=>{const ot=_e;_e=[],ot.length&&nt(()=>{tt(()=>{ot.forEach(st=>{et(st)})})})};return{batch:ot=>{let st;$++;try{st=ot()}finally{$--,$||it()}return st},batchCalls:ot=>(...st)=>{rt(()=>{ot(...st)})},schedule:rt,setNotifyFunction:ot=>{et=ot},setBatchNotifyFunction:ot=>{tt=ot},setScheduler:ot=>{nt=ot}}}var notifyManager=createNotifyManager(),ur,ro,Removable=(ro=class{constructor(){Sn(this,ur)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&bn(this,ur,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(_e){this.gcTime=Math.max(this.gcTime||0,_e??(isServer?1/0:5*60*1e3))}clearGcTimeout(){Yt(this,ur)&&(clearTimeout(Yt(this,ur)),bn(this,ur,void 0))}},ur=new WeakMap,ro),Sr,Er,Bn,Ln,Or,dr,Vn,Jn,io,Query=(io=class extends Removable{constructor($){super();Sn(this,Vn);Sn(this,Sr);Sn(this,Er);Sn(this,Bn);Sn(this,Ln);Sn(this,Or);Sn(this,dr);bn(this,dr,!1),bn(this,Or,$.defaultOptions),this.setOptions($.options),this.observers=[],bn(this,Bn,$.cache),this.queryKey=$.queryKey,this.queryHash=$.queryHash,bn(this,Sr,getDefaultState$1(this.options)),this.state=$.state??Yt(this,Sr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var $;return($=Yt(this,Ln))==null?void 0:$.promise}setOptions($){this.options={...Yt(this,Or),...$},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Yt(this,Bn).remove(this)}setData($,et){const tt=replaceData(this.state.data,$,this.options);return Mn(this,Vn,Jn).call(this,{data:tt,type:"success",dataUpdatedAt:et==null?void 0:et.updatedAt,manual:et==null?void 0:et.manual}),tt}setState($,et){Mn(this,Vn,Jn).call(this,{type:"setState",state:$,setStateOptions:et})}cancel($){var tt,nt;const et=(tt=Yt(this,Ln))==null?void 0:tt.promise;return(nt=Yt(this,Ln))==null||nt.cancel($),et?et.then(noop$1).catch(noop$1):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Yt(this,Sr))}isActive(){return this.observers.some($=>resolveEnabled($.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some($=>$.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime($=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,$)}onFocus(){var et;const $=this.observers.find(tt=>tt.shouldFetchOnWindowFocus());$==null||$.refetch({cancelRefetch:!1}),(et=Yt(this,Ln))==null||et.continue()}onOnline(){var et;const $=this.observers.find(tt=>tt.shouldFetchOnReconnect());$==null||$.refetch({cancelRefetch:!1}),(et=Yt(this,Ln))==null||et.continue()}addObserver($){this.observers.includes($)||(this.observers.push($),this.clearGcTimeout(),Yt(this,Bn).notify({type:"observerAdded",query:this,observer:$}))}removeObserver($){this.observers.includes($)&&(this.observers=this.observers.filter(et=>et!==$),this.observers.length||(Yt(this,Ln)&&(Yt(this,dr)?Yt(this,Ln).cancel({revert:!0}):Yt(this,Ln).cancelRetry()),this.scheduleGc()),Yt(this,Bn).notify({type:"observerRemoved",query:this,observer:$}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mn(this,Vn,Jn).call(this,{type:"invalidate"})}fetch($,et){var st,at,lt;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(et!=null&&et.cancelRefetch))this.cancel({silent:!0});else if(Yt(this,Ln))return Yt(this,Ln).continueRetry(),Yt(this,Ln).promise}if($&&this.setOptions($),!this.options.queryFn){const dt=this.observers.find(pt=>pt.options.queryFn);dt&&this.setOptions(dt.options)}const tt=new AbortController,nt=dt=>{Object.defineProperty(dt,"signal",{enumerable:!0,get:()=>(bn(this,dr,!0),tt.signal)})},rt=()=>{const dt=ensureQueryFn(this.options,et),pt={queryKey:this.queryKey,meta:this.meta};return nt(pt),bn(this,dr,!1),this.options.persister?this.options.persister(dt,pt,this):dt(pt)},it={fetchOptions:et,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:rt};nt(it),(st=this.options.behavior)==null||st.onFetch(it,this),bn(this,Er,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((at=it.fetchOptions)==null?void 0:at.meta))&&Mn(this,Vn,Jn).call(this,{type:"fetch",meta:(lt=it.fetchOptions)==null?void 0:lt.meta});const ot=dt=>{var pt,ht,vt,mt;isCancelledError(dt)&&dt.silent||Mn(this,Vn,Jn).call(this,{type:"error",error:dt}),isCancelledError(dt)||((ht=(pt=Yt(this,Bn).config).onError)==null||ht.call(pt,dt,this),(mt=(vt=Yt(this,Bn).config).onSettled)==null||mt.call(vt,this.state.data,dt,this)),this.scheduleGc()};return bn(this,Ln,createRetryer({initialPromise:et==null?void 0:et.initialPromise,fn:it.fetchFn,abort:tt.abort.bind(tt),onSuccess:dt=>{var pt,ht,vt,mt;if(dt===void 0){ot(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(dt)}catch(kt){ot(kt);return}(ht=(pt=Yt(this,Bn).config).onSuccess)==null||ht.call(pt,dt,this),(mt=(vt=Yt(this,Bn).config).onSettled)==null||mt.call(vt,dt,this.state.error,this),this.scheduleGc()},onError:ot,onFail:(dt,pt)=>{Mn(this,Vn,Jn).call(this,{type:"failed",failureCount:dt,error:pt})},onPause:()=>{Mn(this,Vn,Jn).call(this,{type:"pause"})},onContinue:()=>{Mn(this,Vn,Jn).call(this,{type:"continue"})},retry:it.options.retry,retryDelay:it.options.retryDelay,networkMode:it.options.networkMode,canRun:()=>!0})),Yt(this,Ln).start()}},Sr=new WeakMap,Er=new WeakMap,Bn=new WeakMap,Ln=new WeakMap,Or=new WeakMap,dr=new WeakMap,Vn=new WeakSet,Jn=function($){const et=tt=>{switch($.type){case"failed":return{...tt,fetchFailureCount:$.failureCount,fetchFailureReason:$.error};case"pause":return{...tt,fetchStatus:"paused"};case"continue":return{...tt,fetchStatus:"fetching"};case"fetch":return{...tt,...fetchState(tt.data,this.options),fetchMeta:$.meta??null};case"success":return{...tt,data:$.data,dataUpdateCount:tt.dataUpdateCount+1,dataUpdatedAt:$.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!$.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const nt=$.error;return isCancelledError(nt)&&nt.revert&&Yt(this,Er)?{...Yt(this,Er),fetchStatus:"idle"}:{...tt,error:nt,errorUpdateCount:tt.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:tt.fetchFailureCount+1,fetchFailureReason:nt,fetchStatus:"idle",status:"error"};case"invalidate":return{...tt,isInvalidated:!0};case"setState":return{...tt,...$.state}}};this.state=et(this.state),notifyManager.batch(()=>{this.observers.forEach(tt=>{tt.onQueryUpdate()}),Yt(this,Bn).notify({query:this,type:"updated",action:$})})},io);function fetchState(_e,$){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch($.networkMode)?"fetching":"paused",..._e===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(_e){const $=typeof _e.initialData=="function"?_e.initialData():_e.initialData,et=$!==void 0,tt=et?typeof _e.initialDataUpdatedAt=="function"?_e.initialDataUpdatedAt():_e.initialDataUpdatedAt:0;return{data:$,dataUpdateCount:0,dataUpdatedAt:et?tt??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:et?"success":"pending",fetchStatus:"idle"}}var qn,oo,QueryCache=(oo=class extends Subscribable{constructor($={}){super();Sn(this,qn);this.config=$,bn(this,qn,new Map)}build($,et,tt){const nt=et.queryKey,rt=et.queryHash??hashQueryKeyByOptions(nt,et);let it=this.get(rt);return it||(it=new Query({cache:this,queryKey:nt,queryHash:rt,options:$.defaultQueryOptions(et),state:tt,defaultOptions:$.getQueryDefaults(nt)}),this.add(it)),it}add($){Yt(this,qn).has($.queryHash)||(Yt(this,qn).set($.queryHash,$),this.notify({type:"added",query:$}))}remove($){const et=Yt(this,qn).get($.queryHash);et&&($.destroy(),et===$&&Yt(this,qn).delete($.queryHash),this.notify({type:"removed",query:$}))}clear(){notifyManager.batch(()=>{this.getAll().forEach($=>{this.remove($)})})}get($){return Yt(this,qn).get($)}getAll(){return[...Yt(this,qn).values()]}find($){const et={exact:!0,...$};return this.getAll().find(tt=>matchQuery(et,tt))}findAll($={}){const et=this.getAll();return Object.keys($).length>0?et.filter(tt=>matchQuery($,tt)):et}notify($){notifyManager.batch(()=>{this.listeners.forEach(et=>{et($)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach($=>{$.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach($=>{$.onOnline()})})}},qn=new WeakMap,oo),Hn,jn,fr,Kn,tr,so,Mutation=(so=class extends Removable{constructor($){super();Sn(this,Kn);Sn(this,Hn);Sn(this,jn);Sn(this,fr);this.mutationId=$.mutationId,bn(this,jn,$.mutationCache),bn(this,Hn,[]),this.state=$.state||getDefaultState(),this.setOptions($.options),this.scheduleGc()}setOptions($){this.options=$,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver($){Yt(this,Hn).includes($)||(Yt(this,Hn).push($),this.clearGcTimeout(),Yt(this,jn).notify({type:"observerAdded",mutation:this,observer:$}))}removeObserver($){bn(this,Hn,Yt(this,Hn).filter(et=>et!==$)),this.scheduleGc(),Yt(this,jn).notify({type:"observerRemoved",mutation:this,observer:$})}optionalRemove(){Yt(this,Hn).length||(this.state.status==="pending"?this.scheduleGc():Yt(this,jn).remove(this))}continue(){var $;return(($=Yt(this,fr))==null?void 0:$.continue())??this.execute(this.state.variables)}async execute($){var nt,rt,it,ot,st,at,lt,dt,pt,ht,vt,mt,kt,bt,gt,St,yt,Et,Tt,wt;bn(this,fr,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn($):Promise.reject(new Error("No mutationFn found")),onFail:(Rt,xt)=>{Mn(this,Kn,tr).call(this,{type:"failed",failureCount:Rt,error:xt})},onPause:()=>{Mn(this,Kn,tr).call(this,{type:"pause"})},onContinue:()=>{Mn(this,Kn,tr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Yt(this,jn).canRun(this)}));const et=this.state.status==="pending",tt=!Yt(this,fr).canStart();try{if(!et){Mn(this,Kn,tr).call(this,{type:"pending",variables:$,isPaused:tt}),await((rt=(nt=Yt(this,jn).config).onMutate)==null?void 0:rt.call(nt,$,this));const xt=await((ot=(it=this.options).onMutate)==null?void 0:ot.call(it,$));xt!==this.state.context&&Mn(this,Kn,tr).call(this,{type:"pending",context:xt,variables:$,isPaused:tt})}const Rt=await Yt(this,fr).start();return await((at=(st=Yt(this,jn).config).onSuccess)==null?void 0:at.call(st,Rt,$,this.state.context,this)),await((dt=(lt=this.options).onSuccess)==null?void 0:dt.call(lt,Rt,$,this.state.context)),await((ht=(pt=Yt(this,jn).config).onSettled)==null?void 0:ht.call(pt,Rt,null,this.state.variables,this.state.context,this)),await((mt=(vt=this.options).onSettled)==null?void 0:mt.call(vt,Rt,null,$,this.state.context)),Mn(this,Kn,tr).call(this,{type:"success",data:Rt}),Rt}catch(Rt){try{throw await((bt=(kt=Yt(this,jn).config).onError)==null?void 0:bt.call(kt,Rt,$,this.state.context,this)),await((St=(gt=this.options).onError)==null?void 0:St.call(gt,Rt,$,this.state.context)),await((Et=(yt=Yt(this,jn).config).onSettled)==null?void 0:Et.call(yt,void 0,Rt,this.state.variables,this.state.context,this)),await((wt=(Tt=this.options).onSettled)==null?void 0:wt.call(Tt,void 0,Rt,$,this.state.context)),Rt}finally{Mn(this,Kn,tr).call(this,{type:"error",error:Rt})}}finally{Yt(this,jn).runNext(this)}}},Hn=new WeakMap,jn=new WeakMap,fr=new WeakMap,Kn=new WeakSet,tr=function($){const et=tt=>{switch($.type){case"failed":return{...tt,failureCount:$.failureCount,failureReason:$.error};case"pause":return{...tt,isPaused:!0};case"continue":return{...tt,isPaused:!1};case"pending":return{...tt,context:$.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:$.isPaused,status:"pending",variables:$.variables,submittedAt:Date.now()};case"success":return{...tt,data:$.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...tt,data:void 0,error:$.error,failureCount:tt.failureCount+1,failureReason:$.error,isPaused:!1,status:"error"}}};this.state=et(this.state),notifyManager.batch(()=>{Yt(this,Hn).forEach(tt=>{tt.onMutationUpdate($)}),Yt(this,jn).notify({mutation:this,type:"updated",action:$})})},so);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fn,Ar,ao,MutationCache=(ao=class extends Subscribable{constructor($={}){super();Sn(this,Fn);Sn(this,Ar);this.config=$,bn(this,Fn,new Map),bn(this,Ar,Date.now())}build($,et,tt){const nt=new Mutation({mutationCache:this,mutationId:++Xr(this,Ar)._,options:$.defaultMutationOptions(et),state:tt});return this.add(nt),nt}add($){const et=scopeFor($),tt=Yt(this,Fn).get(et)??[];tt.push($),Yt(this,Fn).set(et,tt),this.notify({type:"added",mutation:$})}remove($){var tt;const et=scopeFor($);if(Yt(this,Fn).has(et)){const nt=(tt=Yt(this,Fn).get(et))==null?void 0:tt.filter(rt=>rt!==$);nt&&(nt.length===0?Yt(this,Fn).delete(et):Yt(this,Fn).set(et,nt))}this.notify({type:"removed",mutation:$})}canRun($){var tt;const et=(tt=Yt(this,Fn).get(scopeFor($)))==null?void 0:tt.find(nt=>nt.state.status==="pending");return!et||et===$}runNext($){var tt;const et=(tt=Yt(this,Fn).get(scopeFor($)))==null?void 0:tt.find(nt=>nt!==$&&nt.state.isPaused);return(et==null?void 0:et.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach($=>{this.remove($)})})}getAll(){return[...Yt(this,Fn).values()].flat()}find($){const et={exact:!0,...$};return this.getAll().find(tt=>matchMutation(et,tt))}findAll($={}){return this.getAll().filter(et=>matchMutation($,et))}notify($){notifyManager.batch(()=>{this.listeners.forEach(et=>{et($)})})}resumePausedMutations(){const $=this.getAll().filter(et=>et.state.isPaused);return notifyManager.batch(()=>Promise.all($.map(et=>et.continue().catch(noop$1))))}},Fn=new WeakMap,Ar=new WeakMap,ao);function scopeFor(_e){var $;return(($=_e.options.scope)==null?void 0:$.id)??String(_e.mutationId)}function infiniteQueryBehavior(_e){return{onFetch:($,et)=>{var lt,dt,pt,ht,vt;const tt=$.options,nt=(pt=(dt=(lt=$.fetchOptions)==null?void 0:lt.meta)==null?void 0:dt.fetchMore)==null?void 0:pt.direction,rt=((ht=$.state.data)==null?void 0:ht.pages)||[],it=((vt=$.state.data)==null?void 0:vt.pageParams)||[];let ot={pages:[],pageParams:[]},st=0;const at=async()=>{let mt=!1;const kt=St=>{Object.defineProperty(St,"signal",{enumerable:!0,get:()=>($.signal.aborted?mt=!0:$.signal.addEventListener("abort",()=>{mt=!0}),$.signal)})},bt=ensureQueryFn($.options,$.fetchOptions),gt=async(St,yt,Et)=>{if(mt)return Promise.reject();if(yt==null&&St.pages.length)return Promise.resolve(St);const Tt={queryKey:$.queryKey,pageParam:yt,direction:Et?"backward":"forward",meta:$.options.meta};kt(Tt);const wt=await bt(Tt),{maxPages:Rt}=$.options,xt=Et?addToStart:addToEnd;return{pages:xt(St.pages,wt,Rt),pageParams:xt(St.pageParams,yt,Rt)}};if(nt&&rt.length){const St=nt==="backward",yt=St?getPreviousPageParam:getNextPageParam,Et={pages:rt,pageParams:it},Tt=yt(tt,Et);ot=await gt(Et,Tt,St)}else{const St=_e??rt.length;do{const yt=st===0?it[0]??tt.initialPageParam:getNextPageParam(tt,ot);if(st>0&&yt==null)break;ot=await gt(ot,yt),st++}while(st<St)}return ot};$.options.persister?$.fetchFn=()=>{var mt,kt;return(kt=(mt=$.options).persister)==null?void 0:kt.call(mt,at,{queryKey:$.queryKey,meta:$.options.meta,signal:$.signal},et)}:$.fetchFn=at}}}function getNextPageParam(_e,{pages:$,pageParams:et}){const tt=$.length-1;return $.length>0?_e.getNextPageParam($[tt],$,et[tt],et):void 0}function getPreviousPageParam(_e,{pages:$,pageParams:et}){var tt;return $.length>0?(tt=_e.getPreviousPageParam)==null?void 0:tt.call(_e,$[0],$,et[0],et):void 0}var On,ir,or,kr,Tr,sr,wr,xr,co,QueryClient=(co=class{constructor(_e={}){Sn(this,On);Sn(this,ir);Sn(this,or);Sn(this,kr);Sn(this,Tr);Sn(this,sr);Sn(this,wr);Sn(this,xr);bn(this,On,_e.queryCache||new QueryCache),bn(this,ir,_e.mutationCache||new MutationCache),bn(this,or,_e.defaultOptions||{}),bn(this,kr,new Map),bn(this,Tr,new Map),bn(this,sr,0)}mount(){Xr(this,sr)._++,Yt(this,sr)===1&&(bn(this,wr,focusManager.subscribe(async _e=>{_e&&(await this.resumePausedMutations(),Yt(this,On).onFocus())})),bn(this,xr,onlineManager.subscribe(async _e=>{_e&&(await this.resumePausedMutations(),Yt(this,On).onOnline())})))}unmount(){var _e,$;Xr(this,sr)._--,Yt(this,sr)===0&&((_e=Yt(this,wr))==null||_e.call(this),bn(this,wr,void 0),($=Yt(this,xr))==null||$.call(this),bn(this,xr,void 0))}isFetching(_e){return Yt(this,On).findAll({..._e,fetchStatus:"fetching"}).length}isMutating(_e){return Yt(this,ir).findAll({..._e,status:"pending"}).length}getQueryData(_e){var et;const $=this.defaultQueryOptions({queryKey:_e});return(et=Yt(this,On).get($.queryHash))==null?void 0:et.state.data}ensureQueryData(_e){const $=this.getQueryData(_e.queryKey);if($===void 0)return this.fetchQuery(_e);{const et=this.defaultQueryOptions(_e),tt=Yt(this,On).build(this,et);return _e.revalidateIfStale&&tt.isStaleByTime(resolveStaleTime(et.staleTime,tt))&&this.prefetchQuery(et),Promise.resolve($)}}getQueriesData(_e){return Yt(this,On).findAll(_e).map(({queryKey:$,state:et})=>{const tt=et.data;return[$,tt]})}setQueryData(_e,$,et){const tt=this.defaultQueryOptions({queryKey:_e}),nt=Yt(this,On).get(tt.queryHash),rt=nt==null?void 0:nt.state.data,it=functionalUpdate($,rt);if(it!==void 0)return Yt(this,On).build(this,tt).setData(it,{...et,manual:!0})}setQueriesData(_e,$,et){return notifyManager.batch(()=>Yt(this,On).findAll(_e).map(({queryKey:tt})=>[tt,this.setQueryData(tt,$,et)]))}getQueryState(_e){var et;const $=this.defaultQueryOptions({queryKey:_e});return(et=Yt(this,On).get($.queryHash))==null?void 0:et.state}removeQueries(_e){const $=Yt(this,On);notifyManager.batch(()=>{$.findAll(_e).forEach(et=>{$.remove(et)})})}resetQueries(_e,$){const et=Yt(this,On),tt={type:"active",..._e};return notifyManager.batch(()=>(et.findAll(_e).forEach(nt=>{nt.reset()}),this.refetchQueries(tt,$)))}cancelQueries(_e={},$={}){const et={revert:!0,...$},tt=notifyManager.batch(()=>Yt(this,On).findAll(_e).map(nt=>nt.cancel(et)));return Promise.all(tt).then(noop$1).catch(noop$1)}invalidateQueries(_e={},$={}){return notifyManager.batch(()=>{if(Yt(this,On).findAll(_e).forEach(tt=>{tt.invalidate()}),_e.refetchType==="none")return Promise.resolve();const et={..._e,type:_e.refetchType??_e.type??"active"};return this.refetchQueries(et,$)})}refetchQueries(_e={},$){const et={...$,cancelRefetch:($==null?void 0:$.cancelRefetch)??!0},tt=notifyManager.batch(()=>Yt(this,On).findAll(_e).filter(nt=>!nt.isDisabled()).map(nt=>{let rt=nt.fetch(void 0,et);return et.throwOnError||(rt=rt.catch(noop$1)),nt.state.fetchStatus==="paused"?Promise.resolve():rt}));return Promise.all(tt).then(noop$1)}fetchQuery(_e){const $=this.defaultQueryOptions(_e);$.retry===void 0&&($.retry=!1);const et=Yt(this,On).build(this,$);return et.isStaleByTime(resolveStaleTime($.staleTime,et))?et.fetch($):Promise.resolve(et.state.data)}prefetchQuery(_e){return this.fetchQuery(_e).then(noop$1).catch(noop$1)}fetchInfiniteQuery(_e){return _e.behavior=infiniteQueryBehavior(_e.pages),this.fetchQuery(_e)}prefetchInfiniteQuery(_e){return this.fetchInfiniteQuery(_e).then(noop$1).catch(noop$1)}ensureInfiniteQueryData(_e){return _e.behavior=infiniteQueryBehavior(_e.pages),this.ensureQueryData(_e)}resumePausedMutations(){return onlineManager.isOnline()?Yt(this,ir).resumePausedMutations():Promise.resolve()}getQueryCache(){return Yt(this,On)}getMutationCache(){return Yt(this,ir)}getDefaultOptions(){return Yt(this,or)}setDefaultOptions(_e){bn(this,or,_e)}setQueryDefaults(_e,$){Yt(this,kr).set(hashKey(_e),{queryKey:_e,defaultOptions:$})}getQueryDefaults(_e){const $=[...Yt(this,kr).values()];let et={};return $.forEach(tt=>{partialMatchKey(_e,tt.queryKey)&&(et={...et,...tt.defaultOptions})}),et}setMutationDefaults(_e,$){Yt(this,Tr).set(hashKey(_e),{mutationKey:_e,defaultOptions:$})}getMutationDefaults(_e){const $=[...Yt(this,Tr).values()];let et={};return $.forEach(tt=>{partialMatchKey(_e,tt.mutationKey)&&(et={...et,...tt.defaultOptions})}),et}defaultQueryOptions(_e){if(_e._defaulted)return _e;const $={...Yt(this,or).queries,...this.getQueryDefaults(_e.queryKey),..._e,_defaulted:!0};return $.queryHash||($.queryHash=hashQueryKeyByOptions($.queryKey,$)),$.refetchOnReconnect===void 0&&($.refetchOnReconnect=$.networkMode!=="always"),$.throwOnError===void 0&&($.throwOnError=!!$.suspense),!$.networkMode&&$.persister&&($.networkMode="offlineFirst"),$.enabled!==!0&&$.queryFn===skipToken&&($.enabled=!1),$}defaultMutationOptions(_e){return _e!=null&&_e._defaulted?_e:{...Yt(this,or).mutations,...(_e==null?void 0:_e.mutationKey)&&this.getMutationDefaults(_e.mutationKey),..._e,_defaulted:!0}}clear(){Yt(this,On).clear(),Yt(this,ir).clear()}},On=new WeakMap,ir=new WeakMap,or=new WeakMap,kr=new WeakMap,Tr=new WeakMap,sr=new WeakMap,wr=new WeakMap,xr=new WeakMap,co),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:_e,children:$})=>(reactExports.useEffect(()=>(_e.mount(),()=>{_e.unmount()}),[_e]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:_e,children:$}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_e){for(var $=1;$<arguments.length;$++){var et=arguments[$];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$1.apply(this,arguments)}var Action;(function(_e){_e.Pop="POP",_e.Push="PUSH",_e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(_e){_e===void 0&&(_e={});function $(tt,nt){let{pathname:rt,search:it,hash:ot}=tt.location;return createLocation("",{pathname:rt,search:it,hash:ot},nt.state&&nt.state.usr||null,nt.state&&nt.state.key||"default")}function et(tt,nt){return typeof nt=="string"?nt:createPath(nt)}return getUrlBasedHistory($,et,null,_e)}function invariant(_e,$){if(_e===!1||_e===null||typeof _e>"u")throw new Error($)}function warning(_e,$){if(!_e){typeof console<"u"&&console.warn($);try{throw new Error($)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_e,$){return{usr:_e.state,key:_e.key,idx:$}}function createLocation(_e,$,et,tt){return et===void 0&&(et=null),_extends$1({pathname:typeof _e=="string"?_e:_e.pathname,search:"",hash:""},typeof $=="string"?parsePath($):$,{state:et,key:$&&$.key||tt||createKey()})}function createPath(_e){let{pathname:$="/",search:et="",hash:tt=""}=_e;return et&&et!=="?"&&($+=et.charAt(0)==="?"?et:"?"+et),tt&&tt!=="#"&&($+=tt.charAt(0)==="#"?tt:"#"+tt),$}function parsePath(_e){let $={};if(_e){let et=_e.indexOf("#");et>=0&&($.hash=_e.substr(et),_e=_e.substr(0,et));let tt=_e.indexOf("?");tt>=0&&($.search=_e.substr(tt),_e=_e.substr(0,tt)),_e&&($.pathname=_e)}return $}function getUrlBasedHistory(_e,$,et,tt){tt===void 0&&(tt={});let{window:nt=document.defaultView,v5Compat:rt=!1}=tt,it=nt.history,ot=Action.Pop,st=null,at=lt();at==null&&(at=0,it.replaceState(_extends$1({},it.state,{idx:at}),""));function lt(){return(it.state||{idx:null}).idx}function dt(){ot=Action.Pop;let kt=lt(),bt=kt==null?null:kt-at;at=kt,st&&st({action:ot,location:mt.location,delta:bt})}function pt(kt,bt){ot=Action.Push;let gt=createLocation(mt.location,kt,bt);at=lt()+1;let St=getHistoryState(gt,at),yt=mt.createHref(gt);try{it.pushState(St,"",yt)}catch(Et){if(Et instanceof DOMException&&Et.name==="DataCloneError")throw Et;nt.location.assign(yt)}rt&&st&&st({action:ot,location:mt.location,delta:1})}function ht(kt,bt){ot=Action.Replace;let gt=createLocation(mt.location,kt,bt);at=lt();let St=getHistoryState(gt,at),yt=mt.createHref(gt);it.replaceState(St,"",yt),rt&&st&&st({action:ot,location:mt.location,delta:0})}function vt(kt){let bt=nt.location.origin!=="null"?nt.location.origin:nt.location.href,gt=typeof kt=="string"?kt:createPath(kt);return gt=gt.replace(/ $/,"%20"),invariant(bt,"No window.location.(origin|href) available to create URL for href: "+gt),new URL(gt,bt)}let mt={get action(){return ot},get location(){return _e(nt,it)},listen(kt){if(st)throw new Error("A history only accepts one active listener");return nt.addEventListener(PopStateEventType,dt),st=kt,()=>{nt.removeEventListener(PopStateEventType,dt),st=null}},createHref(kt){return $(nt,kt)},createURL:vt,encodeLocation(kt){let bt=vt(kt);return{pathname:bt.pathname,search:bt.search,hash:bt.hash}},push:pt,replace:ht,go(kt){return it.go(kt)}};return mt}var ResultType;(function(_e){_e.data="data",_e.deferred="deferred",_e.redirect="redirect",_e.error="error"})(ResultType||(ResultType={}));function matchRoutes(_e,$,et){return et===void 0&&(et="/"),matchRoutesImpl(_e,$,et,!1)}function matchRoutesImpl(_e,$,et,tt){let nt=typeof $=="string"?parsePath($):$,rt=stripBasename(nt.pathname||"/",et);if(rt==null)return null;let it=flattenRoutes(_e);rankRouteBranches(it);let ot=null;for(let st=0;ot==null&&st<it.length;++st){let at=decodePath(rt);ot=matchRouteBranch(it[st],at,tt)}return ot}function flattenRoutes(_e,$,et,tt){$===void 0&&($=[]),et===void 0&&(et=[]),tt===void 0&&(tt="");let nt=(rt,it,ot)=>{let st={relativePath:ot===void 0?rt.path||"":ot,caseSensitive:rt.caseSensitive===!0,childrenIndex:it,route:rt};st.relativePath.startsWith("/")&&(invariant(st.relativePath.startsWith(tt),'Absolute route path "'+st.relativePath+'" nested under path '+('"'+tt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),st.relativePath=st.relativePath.slice(tt.length));let at=joinPaths([tt,st.relativePath]),lt=et.concat(st);rt.children&&rt.children.length>0&&(invariant(rt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+at+'".')),flattenRoutes(rt.children,$,lt,at)),!(rt.path==null&&!rt.index)&&$.push({path:at,score:computeScore(at,rt.index),routesMeta:lt})};return _e.forEach((rt,it)=>{var ot;if(rt.path===""||!((ot=rt.path)!=null&&ot.includes("?")))nt(rt,it);else for(let st of explodeOptionalSegments(rt.path))nt(rt,it,st)}),$}function explodeOptionalSegments(_e){let $=_e.split("/");if($.length===0)return[];let[et,...tt]=$,nt=et.endsWith("?"),rt=et.replace(/\?$/,"");if(tt.length===0)return nt?[rt,""]:[rt];let it=explodeOptionalSegments(tt.join("/")),ot=[];return ot.push(...it.map(st=>st===""?rt:[rt,st].join("/"))),nt&&ot.push(...it),ot.map(st=>_e.startsWith("/")&&st===""?"/":st)}function rankRouteBranches(_e){_e.sort(($,et)=>$.score!==et.score?et.score-$.score:compareIndexes($.routesMeta.map(tt=>tt.childrenIndex),et.routesMeta.map(tt=>tt.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_e=>_e==="*";function computeScore(_e,$){let et=_e.split("/"),tt=et.length;return et.some(isSplat)&&(tt+=splatPenalty),$&&(tt+=indexRouteValue),et.filter(nt=>!isSplat(nt)).reduce((nt,rt)=>nt+(paramRe.test(rt)?dynamicSegmentValue:rt===""?emptySegmentValue:staticSegmentValue),tt)}function compareIndexes(_e,$){return _e.length===$.length&&_e.slice(0,-1).every((tt,nt)=>tt===$[nt])?_e[_e.length-1]-$[$.length-1]:0}function matchRouteBranch(_e,$,et){let{routesMeta:tt}=_e,nt={},rt="/",it=[];for(let ot=0;ot<tt.length;++ot){let st=tt[ot],at=ot===tt.length-1,lt=rt==="/"?$:$.slice(rt.length)||"/",dt=matchPath({path:st.relativePath,caseSensitive:st.caseSensitive,end:at},lt),pt=st.route;if(!dt&&at&&et&&!tt[tt.length-1].route.index&&(dt=matchPath({path:st.relativePath,caseSensitive:st.caseSensitive,end:!1},lt)),!dt)return null;Object.assign(nt,dt.params),it.push({params:nt,pathname:joinPaths([rt,dt.pathname]),pathnameBase:normalizePathname(joinPaths([rt,dt.pathnameBase])),route:pt}),dt.pathnameBase!=="/"&&(rt=joinPaths([rt,dt.pathnameBase]))}return it}function matchPath(_e,$){typeof _e=="string"&&(_e={path:_e,caseSensitive:!1,end:!0});let[et,tt]=compilePath(_e.path,_e.caseSensitive,_e.end),nt=$.match(et);if(!nt)return null;let rt=nt[0],it=rt.replace(/(.)\/+$/,"$1"),ot=nt.slice(1);return{params:tt.reduce((at,lt,dt)=>{let{paramName:pt,isOptional:ht}=lt;if(pt==="*"){let mt=ot[dt]||"";it=rt.slice(0,rt.length-mt.length).replace(/(.)\/+$/,"$1")}const vt=ot[dt];return ht&&!vt?at[pt]=void 0:at[pt]=(vt||"").replace(/%2F/g,"/"),at},{}),pathname:rt,pathnameBase:it,pattern:_e}}function compilePath(_e,$,et){$===void 0&&($=!1),et===void 0&&(et=!0),warning(_e==="*"||!_e.endsWith("*")||_e.endsWith("/*"),'Route path "'+_e+'" will be treated as if it were '+('"'+_e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_e.replace(/\*$/,"/*")+'".'));let tt=[],nt="^"+_e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(it,ot,st)=>(tt.push({paramName:ot,isOptional:st!=null}),st?"/?([^\\/]+)?":"/([^\\/]+)"));return _e.endsWith("*")?(tt.push({paramName:"*"}),nt+=_e==="*"||_e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):et?nt+="\\/*$":_e!==""&&_e!=="/"&&(nt+="(?:(?=\\/|$))"),[new RegExp(nt,$?void 0:"i"),tt]}function decodePath(_e){try{return _e.split("/").map($=>decodeURIComponent($).replace(/\//g,"%2F")).join("/")}catch($){return warning(!1,'The URL path "'+_e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+$+").")),_e}}function stripBasename(_e,$){if($==="/")return _e;if(!_e.toLowerCase().startsWith($.toLowerCase()))return null;let et=$.endsWith("/")?$.length-1:$.length,tt=_e.charAt(et);return tt&&tt!=="/"?null:_e.slice(et)||"/"}const joinPaths=_e=>_e.join("/").replace(/\/\/+/g,"/"),normalizePathname=_e=>_e.replace(/\/+$/,"").replace(/^\/*/,"/");function isRouteErrorResponse(_e){return _e!=null&&typeof _e.status=="number"&&typeof _e.statusText=="string"&&typeof _e.internal=="boolean"&&"data"in _e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(_e){for(var $=1;$<arguments.length;$++){var et=arguments[$];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useRoutes(_e,$){return useRoutesImpl(_e,$)}function useRoutesImpl(_e,$,et,tt){useInRouterContext()||invariant(!1);let{navigator:nt}=reactExports.useContext(NavigationContext),{matches:rt}=reactExports.useContext(RouteContext),it=rt[rt.length-1],ot=it?it.params:{};it&&it.pathname;let st=it?it.pathnameBase:"/";it&&it.route;let at=useLocation(),lt;if($){var dt;let kt=typeof $=="string"?parsePath($):$;st==="/"||(dt=kt.pathname)!=null&&dt.startsWith(st)||invariant(!1),lt=kt}else lt=at;let pt=lt.pathname||"/",ht=pt;if(st!=="/"){let kt=st.replace(/^\//,"").split("/");ht="/"+pt.replace(/^\//,"").split("/").slice(kt.length).join("/")}let vt=matchRoutes(_e,{pathname:ht}),mt=_renderMatches(vt&&vt.map(kt=>Object.assign({},kt,{params:Object.assign({},ot,kt.params),pathname:joinPaths([st,nt.encodeLocation?nt.encodeLocation(kt.pathname).pathname:kt.pathname]),pathnameBase:kt.pathnameBase==="/"?st:joinPaths([st,nt.encodeLocation?nt.encodeLocation(kt.pathnameBase).pathname:kt.pathnameBase])})),rt,et,tt);return $&&mt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends({pathname:"/",search:"",hash:"",state:null,key:"default"},lt),navigationType:Action.Pop}},mt):mt}function DefaultErrorComponent(){let _e=useRouteError(),$=isRouteErrorResponse(_e)?_e.status+" "+_e.statusText:_e instanceof Error?_e.message:JSON.stringify(_e),et=_e instanceof Error?_e.stack:null,nt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},$),et?reactExports.createElement("pre",{style:nt},et):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor($){super($),this.state={location:$.location,revalidation:$.revalidation,error:$.error}}static getDerivedStateFromError($){return{error:$}}static getDerivedStateFromProps($,et){return et.location!==$.location||et.revalidation!=="idle"&&$.revalidation==="idle"?{error:$.error,location:$.location,revalidation:$.revalidation}:{error:$.error!==void 0?$.error:et.error,location:et.location,revalidation:$.revalidation||et.revalidation}}componentDidCatch($,et){console.error("React Router caught the following error during render",$,et)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_e){let{routeContext:$,match:et,children:tt}=_e,nt=reactExports.useContext(DataRouterContext);return nt&&nt.static&&nt.staticContext&&(et.route.errorElement||et.route.ErrorBoundary)&&(nt.staticContext._deepestRenderedBoundaryId=et.route.id),reactExports.createElement(RouteContext.Provider,{value:$},tt)}function _renderMatches(_e,$,et,tt){var nt;if($===void 0&&($=[]),et===void 0&&(et=null),tt===void 0&&(tt=null),_e==null){var rt;if(!et)return null;if(et.errors)_e=et.matches;else if((rt=tt)!=null&&rt.v7_partialHydration&&$.length===0&&!et.initialized&&et.matches.length>0)_e=et.matches;else return null}let it=_e,ot=(nt=et)==null?void 0:nt.errors;if(ot!=null){let lt=it.findIndex(dt=>dt.route.id&&(ot==null?void 0:ot[dt.route.id])!==void 0);lt>=0||invariant(!1),it=it.slice(0,Math.min(it.length,lt+1))}let st=!1,at=-1;if(et&&tt&&tt.v7_partialHydration)for(let lt=0;lt<it.length;lt++){let dt=it[lt];if((dt.route.HydrateFallback||dt.route.hydrateFallbackElement)&&(at=lt),dt.route.id){let{loaderData:pt,errors:ht}=et,vt=dt.route.loader&&pt[dt.route.id]===void 0&&(!ht||ht[dt.route.id]===void 0);if(dt.route.lazy||vt){st=!0,at>=0?it=it.slice(0,at+1):it=[it[0]];break}}}return it.reduceRight((lt,dt,pt)=>{let ht,vt=!1,mt=null,kt=null;et&&(ht=ot&&dt.route.id?ot[dt.route.id]:void 0,mt=dt.route.errorElement||defaultErrorElement,st&&(at<0&&pt===0?(vt=!0,kt=null):at===pt&&(vt=!0,kt=dt.route.hydrateFallbackElement||null)));let bt=$.concat(it.slice(0,pt+1)),gt=()=>{let St;return ht?St=mt:vt?St=kt:dt.route.Component?St=reactExports.createElement(dt.route.Component,null):dt.route.element?St=dt.route.element:St=lt,reactExports.createElement(RenderedRoute,{match:dt,routeContext:{outlet:lt,matches:bt,isDataRoute:et!=null},children:St})};return et&&(dt.route.ErrorBoundary||dt.route.errorElement||pt===0)?reactExports.createElement(RenderErrorBoundary,{location:et.location,revalidation:et.revalidation,component:mt,error:ht,children:gt(),routeContext:{outlet:null,matches:bt,isDataRoute:!0}}):gt()},null)}var DataRouterStateHook$1=function(_e){return _e.UseBlocker="useBlocker",_e.UseLoaderData="useLoaderData",_e.UseActionData="useActionData",_e.UseRouteError="useRouteError",_e.UseNavigation="useNavigation",_e.UseRouteLoaderData="useRouteLoaderData",_e.UseMatches="useMatches",_e.UseRevalidator="useRevalidator",_e.UseNavigateStable="useNavigate",_e.UseRouteId="useRouteId",_e}(DataRouterStateHook$1||{});function useDataRouterState(_e){let $=reactExports.useContext(DataRouterStateContext);return $||invariant(!1),$}function useRouteContext(_e){let $=reactExports.useContext(RouteContext);return $||invariant(!1),$}function useCurrentRouteId(_e){let $=useRouteContext(),et=$.matches[$.matches.length-1];return et.route.id||invariant(!1),et.route.id}function useRouteError(){var _e;let $=reactExports.useContext(RouteErrorContext),et=useDataRouterState(DataRouterStateHook$1.UseRouteError),tt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return $!==void 0?$:(_e=et.errors)==null?void 0:_e[tt]}function Route(_e){invariant(!1)}function Router(_e){let{basename:$="/",children:et=null,location:tt,navigationType:nt=Action.Pop,navigator:rt,static:it=!1,future:ot}=_e;useInRouterContext()&&invariant(!1);let st=$.replace(/^\/*/,"/"),at=reactExports.useMemo(()=>({basename:st,navigator:rt,static:it,future:_extends({v7_relativeSplatPath:!1},ot)}),[st,ot,rt,it]);typeof tt=="string"&&(tt=parsePath(tt));let{pathname:lt="/",search:dt="",hash:pt="",state:ht=null,key:vt="default"}=tt,mt=reactExports.useMemo(()=>{let kt=stripBasename(lt,st);return kt==null?null:{location:{pathname:kt,search:dt,hash:pt,state:ht,key:vt},navigationType:nt}},[st,lt,dt,pt,ht,vt,nt]);return mt==null?null:reactExports.createElement(NavigationContext.Provider,{value:at},reactExports.createElement(LocationContext.Provider,{children:et,value:mt}))}function Routes(_e){let{children:$,location:et}=_e;return useRoutes(createRoutesFromChildren($),et)}new Promise(()=>{});function createRoutesFromChildren(_e,$){$===void 0&&($=[]);let et=[];return reactExports.Children.forEach(_e,(tt,nt)=>{if(!reactExports.isValidElement(tt))return;let rt=[...$,nt];if(tt.type===reactExports.Fragment){et.push.apply(et,createRoutesFromChildren(tt.props.children,rt));return}tt.type!==Route&&invariant(!1),!tt.props.index||!tt.props.children||invariant(!1);let it={id:tt.props.id||rt.join("-"),caseSensitive:tt.props.caseSensitive,element:tt.props.element,Component:tt.props.Component,index:tt.props.index,path:tt.props.path,loader:tt.props.loader,action:tt.props.action,errorElement:tt.props.errorElement,ErrorBoundary:tt.props.ErrorBoundary,hasErrorBoundary:tt.props.ErrorBoundary!=null||tt.props.errorElement!=null,shouldRevalidate:tt.props.shouldRevalidate,handle:tt.props.handle,lazy:tt.props.lazy};tt.props.children&&(it.children=createRoutesFromChildren(tt.props.children,rt)),et.push(it)}),et}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React[START_TRANSITION];function BrowserRouter(_e){let{basename:$,children:et,future:tt,window:nt}=_e,rt=reactExports.useRef();rt.current==null&&(rt.current=createBrowserHistory({window:nt,v5Compat:!0}));let it=rt.current,[ot,st]=reactExports.useState({action:it.action,location:it.location}),{v7_startTransition:at}=tt||{},lt=reactExports.useCallback(dt=>{at&&startTransitionImpl?startTransitionImpl(()=>st(dt)):st(dt)},[st,at]);return reactExports.useLayoutEffect(()=>it.listen(lt),[it,lt]),reactExports.createElement(Router,{basename:$,children:et,location:ot.location,navigationType:ot.action,navigator:it,future:tt})}var DataRouterHook;(function(_e){_e.UseScrollRestoration="useScrollRestoration",_e.UseSubmit="useSubmit",_e.UseSubmitFetcher="useSubmitFetcher",_e.UseFetcher="useFetcher",_e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_e){_e.UseFetcher="useFetcher",_e.UseFetchers="useFetchers",_e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));const buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:_e,variant:$,size:et,asChild:tt=!1,...nt},rt)=>{const it=tt?Slot:"button";return jsxRuntimeExports.jsx(it,{className:cn(buttonVariants({variant:$,size:et,className:_e})),ref:rt,...nt})});Button.displayName="Button";const Card=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx("div",{ref:et,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",_e),...$}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx("div",{ref:et,className:cn("flex flex-col space-y-1.5 p-6",_e),...$}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx("h3",{ref:et,className:cn("text-2xl font-semibold leading-none tracking-tight",_e),...$}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx("p",{ref:et,className:cn("text-sm text-muted-foreground",_e),...$}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx("div",{ref:et,className:cn("p-6 pt-0",_e),...$}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:_e,...$},et)=>jsxRuntimeExports.jsx("div",{ref:et,className:cn("flex items-center p-6 pt-0",_e),...$}));CardFooter.displayName="CardFooter";const Input=reactExports.forwardRef(({className:_e,type:$,...et},tt)=>jsxRuntimeExports.jsx("input",{type:$,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",_e),ref:tt,...et}));Input.displayName="Input";var DirectionContext=reactExports.createContext(void 0);function useDirection(_e){const $=reactExports.useContext(DirectionContext);return _e||$||"ltr"}function clamp(_e,[$,et]){return Math.min(et,Math.max($,_e))}function useStateMachine(_e,$){return reactExports.useReducer((et,tt)=>$[et][tt]??et,_e)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext,createScrollAreaScope]=createContextScope$1(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((_e,$)=>{const{__scopeScrollArea:et,type:tt="hover",dir:nt,scrollHideDelay:rt=600,...it}=_e,[ot,st]=reactExports.useState(null),[at,lt]=reactExports.useState(null),[dt,pt]=reactExports.useState(null),[ht,vt]=reactExports.useState(null),[mt,kt]=reactExports.useState(null),[bt,gt]=reactExports.useState(0),[St,yt]=reactExports.useState(0),[Et,Tt]=reactExports.useState(!1),[wt,Rt]=reactExports.useState(!1),xt=useComposedRefs($,At=>st(At)),Pt=useDirection(nt);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:et,type:tt,dir:Pt,scrollHideDelay:rt,scrollArea:ot,viewport:at,onViewportChange:lt,content:dt,onContentChange:pt,scrollbarX:ht,onScrollbarXChange:vt,scrollbarXEnabled:Et,onScrollbarXEnabledChange:Tt,scrollbarY:mt,onScrollbarYChange:kt,scrollbarYEnabled:wt,onScrollbarYEnabledChange:Rt,onCornerWidthChange:gt,onCornerHeightChange:yt,children:jsxRuntimeExports.jsx(Primitive.div,{dir:Pt,...it,ref:xt,style:{position:"relative","--radix-scroll-area-corner-width":bt+"px","--radix-scroll-area-corner-height":St+"px",..._e.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((_e,$)=>{const{__scopeScrollArea:et,children:tt,asChild:nt,nonce:rt,...it}=_e,ot=useScrollAreaContext(VIEWPORT_NAME,et),st=reactExports.useRef(null),at=useComposedRefs($,st,ot.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:rt}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",...it,asChild:nt,ref:at,style:{overflowX:ot.scrollbarXEnabled?"scroll":"hidden",overflowY:ot.scrollbarYEnabled?"scroll":"hidden",..._e.style},children:getSubtree({asChild:nt,children:tt},lt=>jsxRuntimeExports.jsx("div",{"data-radix-scroll-area-content":"",ref:ot.onContentChange,style:{minWidth:ot.scrollbarXEnabled?"fit-content":void 0},children:lt}))})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((_e,$)=>{const{forceMount:et,...tt}=_e,nt=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),{onScrollbarXEnabledChange:rt,onScrollbarYEnabledChange:it}=nt,ot=_e.orientation==="horizontal";return reactExports.useEffect(()=>(ot?rt(!0):it(!0),()=>{ot?rt(!1):it(!1)}),[ot,rt,it]),nt.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...tt,ref:$,forceMount:et}):nt.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...tt,ref:$,forceMount:et}):nt.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...tt,ref:$,forceMount:et}):nt.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...tt,ref:$}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((_e,$)=>{const{forceMount:et,...tt}=_e,nt=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),[rt,it]=reactExports.useState(!1);return reactExports.useEffect(()=>{const ot=nt.scrollArea;let st=0;if(ot){const at=()=>{window.clearTimeout(st),it(!0)},lt=()=>{st=window.setTimeout(()=>it(!1),nt.scrollHideDelay)};return ot.addEventListener("pointerenter",at),ot.addEventListener("pointerleave",lt),()=>{window.clearTimeout(st),ot.removeEventListener("pointerenter",at),ot.removeEventListener("pointerleave",lt)}}},[nt.scrollArea,nt.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:et||rt,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":rt?"visible":"hidden",...tt,ref:$})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((_e,$)=>{const{forceMount:et,...tt}=_e,nt=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),rt=_e.orientation==="horizontal",it=useDebounceCallback(()=>st("SCROLL_END"),100),[ot,st]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(ot==="idle"){const at=window.setTimeout(()=>st("HIDE"),nt.scrollHideDelay);return()=>window.clearTimeout(at)}},[ot,nt.scrollHideDelay,st]),reactExports.useEffect(()=>{const at=nt.viewport,lt=rt?"scrollLeft":"scrollTop";if(at){let dt=at[lt];const pt=()=>{const ht=at[lt];dt!==ht&&(st("SCROLL"),it()),dt=ht};return at.addEventListener("scroll",pt),()=>at.removeEventListener("scroll",pt)}},[nt.viewport,rt,st,it]),jsxRuntimeExports.jsx(Presence,{present:et||ot!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":ot==="hidden"?"hidden":"visible",...tt,ref:$,onPointerEnter:composeEventHandlers(_e.onPointerEnter,()=>st("POINTER_ENTER")),onPointerLeave:composeEventHandlers(_e.onPointerLeave,()=>st("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((_e,$)=>{const et=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),{forceMount:tt,...nt}=_e,[rt,it]=reactExports.useState(!1),ot=_e.orientation==="horizontal",st=useDebounceCallback(()=>{if(et.viewport){const at=et.viewport.offsetWidth<et.viewport.scrollWidth,lt=et.viewport.offsetHeight<et.viewport.scrollHeight;it(ot?at:lt)}},10);return useResizeObserver(et.viewport,st),useResizeObserver(et.content,st),jsxRuntimeExports.jsx(Presence,{present:tt||rt,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":rt?"visible":"hidden",...nt,ref:$})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((_e,$)=>{const{orientation:et="vertical",...tt}=_e,nt=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),rt=reactExports.useRef(null),it=reactExports.useRef(0),[ot,st]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),at=getThumbRatio(ot.viewport,ot.content),lt={...tt,sizes:ot,onSizesChange:st,hasThumb:at>0&&at<1,onThumbChange:pt=>rt.current=pt,onThumbPointerUp:()=>it.current=0,onThumbPointerDown:pt=>it.current=pt};function dt(pt,ht){return getScrollPositionFromPointer(pt,it.current,ot,ht)}return et==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...lt,ref:$,onThumbPositionChange:()=>{if(nt.viewport&&rt.current){const pt=nt.viewport.scrollLeft,ht=getThumbOffsetFromScroll(pt,ot,nt.dir);rt.current.style.transform=`translate3d(${ht}px, 0, 0)`}},onWheelScroll:pt=>{nt.viewport&&(nt.viewport.scrollLeft=pt)},onDragScroll:pt=>{nt.viewport&&(nt.viewport.scrollLeft=dt(pt,nt.dir))}}):et==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...lt,ref:$,onThumbPositionChange:()=>{if(nt.viewport&&rt.current){const pt=nt.viewport.scrollTop,ht=getThumbOffsetFromScroll(pt,ot);rt.current.style.transform=`translate3d(0, ${ht}px, 0)`}},onWheelScroll:pt=>{nt.viewport&&(nt.viewport.scrollTop=pt)},onDragScroll:pt=>{nt.viewport&&(nt.viewport.scrollTop=dt(pt))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((_e,$)=>{const{sizes:et,onSizesChange:tt,...nt}=_e,rt=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),[it,ot]=reactExports.useState(),st=reactExports.useRef(null),at=useComposedRefs($,st,rt.onScrollbarXChange);return reactExports.useEffect(()=>{st.current&&ot(getComputedStyle(st.current))},[st]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...nt,ref:at,sizes:et,style:{bottom:0,left:rt.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:rt.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(et)+"px",..._e.style},onThumbPointerDown:lt=>_e.onThumbPointerDown(lt.x),onDragScroll:lt=>_e.onDragScroll(lt.x),onWheelScroll:(lt,dt)=>{if(rt.viewport){const pt=rt.viewport.scrollLeft+lt.deltaX;_e.onWheelScroll(pt),isScrollingWithinScrollbarBounds(pt,dt)&&lt.preventDefault()}},onResize:()=>{st.current&&rt.viewport&&it&&tt({content:rt.viewport.scrollWidth,viewport:rt.viewport.offsetWidth,scrollbar:{size:st.current.clientWidth,paddingStart:toInt(it.paddingLeft),paddingEnd:toInt(it.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((_e,$)=>{const{sizes:et,onSizesChange:tt,...nt}=_e,rt=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),[it,ot]=reactExports.useState(),st=reactExports.useRef(null),at=useComposedRefs($,st,rt.onScrollbarYChange);return reactExports.useEffect(()=>{st.current&&ot(getComputedStyle(st.current))},[st]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...nt,ref:at,sizes:et,style:{top:0,right:rt.dir==="ltr"?0:void 0,left:rt.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(et)+"px",..._e.style},onThumbPointerDown:lt=>_e.onThumbPointerDown(lt.y),onDragScroll:lt=>_e.onDragScroll(lt.y),onWheelScroll:(lt,dt)=>{if(rt.viewport){const pt=rt.viewport.scrollTop+lt.deltaY;_e.onWheelScroll(pt),isScrollingWithinScrollbarBounds(pt,dt)&&lt.preventDefault()}},onResize:()=>{st.current&&rt.viewport&&it&&tt({content:rt.viewport.scrollHeight,viewport:rt.viewport.offsetHeight,scrollbar:{size:st.current.clientHeight,paddingStart:toInt(it.paddingTop),paddingEnd:toInt(it.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((_e,$)=>{const{__scopeScrollArea:et,sizes:tt,hasThumb:nt,onThumbChange:rt,onThumbPointerUp:it,onThumbPointerDown:ot,onThumbPositionChange:st,onDragScroll:at,onWheelScroll:lt,onResize:dt,...pt}=_e,ht=useScrollAreaContext(SCROLLBAR_NAME,et),[vt,mt]=reactExports.useState(null),kt=useComposedRefs($,xt=>mt(xt)),bt=reactExports.useRef(null),gt=reactExports.useRef(""),St=ht.viewport,yt=tt.content-tt.viewport,Et=useCallbackRef(lt),Tt=useCallbackRef(st),wt=useDebounceCallback(dt,10);function Rt(xt){if(bt.current){const Pt=xt.clientX-bt.current.left,At=xt.clientY-bt.current.top;at({x:Pt,y:At})}}return reactExports.useEffect(()=>{const xt=Pt=>{const At=Pt.target;(vt==null?void 0:vt.contains(At))&&Et(Pt,yt)};return document.addEventListener("wheel",xt,{passive:!1}),()=>document.removeEventListener("wheel",xt,{passive:!1})},[St,vt,yt,Et]),reactExports.useEffect(Tt,[tt,Tt]),useResizeObserver(vt,wt),useResizeObserver(ht.content,wt),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:et,scrollbar:vt,hasThumb:nt,onThumbChange:useCallbackRef(rt),onThumbPointerUp:useCallbackRef(it),onThumbPositionChange:Tt,onThumbPointerDown:useCallbackRef(ot),children:jsxRuntimeExports.jsx(Primitive.div,{...pt,ref:kt,style:{position:"absolute",...pt.style},onPointerDown:composeEventHandlers(_e.onPointerDown,xt=>{xt.button===0&&(xt.target.setPointerCapture(xt.pointerId),bt.current=vt.getBoundingClientRect(),gt.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",ht.viewport&&(ht.viewport.style.scrollBehavior="auto"),Rt(xt))}),onPointerMove:composeEventHandlers(_e.onPointerMove,Rt),onPointerUp:composeEventHandlers(_e.onPointerUp,xt=>{const Pt=xt.target;Pt.hasPointerCapture(xt.pointerId)&&Pt.releasePointerCapture(xt.pointerId),document.body.style.webkitUserSelect=gt.current,ht.viewport&&(ht.viewport.style.scrollBehavior=""),bt.current=null})})})}),THUMB_NAME="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((_e,$)=>{const{forceMount:et,...tt}=_e,nt=useScrollbarContext(THUMB_NAME,_e.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:et||nt.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:$,...tt})})}),ScrollAreaThumbImpl=reactExports.forwardRef((_e,$)=>{const{__scopeScrollArea:et,style:tt,...nt}=_e,rt=useScrollAreaContext(THUMB_NAME,et),it=useScrollbarContext(THUMB_NAME,et),{onThumbPositionChange:ot}=it,st=useComposedRefs($,dt=>it.onThumbChange(dt)),at=reactExports.useRef(),lt=useDebounceCallback(()=>{at.current&&(at.current(),at.current=void 0)},100);return reactExports.useEffect(()=>{const dt=rt.viewport;if(dt){const pt=()=>{if(lt(),!at.current){const ht=addUnlinkedScrollListener(dt,ot);at.current=ht,ot()}};return ot(),dt.addEventListener("scroll",pt),()=>dt.removeEventListener("scroll",pt)}},[rt.viewport,lt,ot]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":it.hasThumb?"visible":"hidden",...nt,ref:st,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...tt},onPointerDownCapture:composeEventHandlers(_e.onPointerDownCapture,dt=>{const ht=dt.target.getBoundingClientRect(),vt=dt.clientX-ht.left,mt=dt.clientY-ht.top;it.onThumbPointerDown({x:vt,y:mt})}),onPointerUp:composeEventHandlers(_e.onPointerUp,it.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((_e,$)=>{const et=useScrollAreaContext(CORNER_NAME,_e.__scopeScrollArea),tt=!!(et.scrollbarX&&et.scrollbarY);return et.type!=="scroll"&&tt?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{..._e,ref:$}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((_e,$)=>{const{__scopeScrollArea:et,...tt}=_e,nt=useScrollAreaContext(CORNER_NAME,et),[rt,it]=reactExports.useState(0),[ot,st]=reactExports.useState(0),at=!!(rt&&ot);return useResizeObserver(nt.scrollbarX,()=>{var dt;const lt=((dt=nt.scrollbarX)==null?void 0:dt.offsetHeight)||0;nt.onCornerHeightChange(lt),st(lt)}),useResizeObserver(nt.scrollbarY,()=>{var dt;const lt=((dt=nt.scrollbarY)==null?void 0:dt.offsetWidth)||0;nt.onCornerWidthChange(lt),it(lt)}),at?jsxRuntimeExports.jsx(Primitive.div,{...tt,ref:$,style:{width:rt,height:ot,position:"absolute",right:nt.dir==="ltr"?0:void 0,left:nt.dir==="rtl"?0:void 0,bottom:0,..._e.style}}):null});function toInt(_e){return _e?parseInt(_e,10):0}function getThumbRatio(_e,$){const et=_e/$;return isNaN(et)?0:et}function getThumbSize(_e){const $=getThumbRatio(_e.viewport,_e.content),et=_e.scrollbar.paddingStart+_e.scrollbar.paddingEnd,tt=(_e.scrollbar.size-et)*$;return Math.max(tt,18)}function getScrollPositionFromPointer(_e,$,et,tt="ltr"){const nt=getThumbSize(et),rt=nt/2,it=$||rt,ot=nt-it,st=et.scrollbar.paddingStart+it,at=et.scrollbar.size-et.scrollbar.paddingEnd-ot,lt=et.content-et.viewport,dt=tt==="ltr"?[0,lt]:[lt*-1,0];return linearScale([st,at],dt)(_e)}function getThumbOffsetFromScroll(_e,$,et="ltr"){const tt=getThumbSize($),nt=$.scrollbar.paddingStart+$.scrollbar.paddingEnd,rt=$.scrollbar.size-nt,it=$.content-$.viewport,ot=rt-tt,st=et==="ltr"?[0,it]:[it*-1,0],at=clamp(_e,st);return linearScale([0,it],[0,ot])(at)}function linearScale(_e,$){return et=>{if(_e[0]===_e[1]||$[0]===$[1])return $[0];const tt=($[1]-$[0])/(_e[1]-_e[0]);return $[0]+tt*(et-_e[0])}}function isScrollingWithinScrollbarBounds(_e,$){return _e>0&&_e<$}var addUnlinkedScrollListener=(_e,$=()=>{})=>{let et={left:_e.scrollLeft,top:_e.scrollTop},tt=0;return function nt(){const rt={left:_e.scrollLeft,top:_e.scrollTop},it=et.left!==rt.left,ot=et.top!==rt.top;(it||ot)&&$(),et=rt,tt=window.requestAnimationFrame(nt)}(),()=>window.cancelAnimationFrame(tt)};function useDebounceCallback(_e,$){const et=useCallbackRef(_e),tt=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(tt.current),[]),reactExports.useCallback(()=>{window.clearTimeout(tt.current),tt.current=window.setTimeout(et,$)},[et,$])}function useResizeObserver(_e,$){const et=useCallbackRef($);useLayoutEffect2(()=>{let tt=0;if(_e){const nt=new ResizeObserver(()=>{cancelAnimationFrame(tt),tt=window.requestAnimationFrame(et)});return nt.observe(_e),()=>{window.cancelAnimationFrame(tt),nt.unobserve(_e)}}},[_e,et])}function getSubtree(_e,$){const{asChild:et,children:tt}=_e;if(!et)return typeof $=="function"?$(tt):$;const nt=reactExports.Children.only(tt);return reactExports.cloneElement(nt,{children:typeof $=="function"?$(nt.props.children):$})}var Root$1=ScrollArea$1,Viewport=ScrollAreaViewport,Corner=ScrollAreaCorner;const ScrollArea=reactExports.forwardRef(({className:_e,children:$,...et},tt)=>jsxRuntimeExports.jsxs(Root$1,{ref:tt,className:cn("relative overflow-hidden",_e),...et,children:[jsxRuntimeExports.jsx(Viewport,{className:"h-full w-full rounded-[inherit]",children:$}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]}));ScrollArea.displayName=Root$1.displayName;const ScrollBar=reactExports.forwardRef(({className:_e,orientation:$="vertical",...et},tt)=>jsxRuntimeExports.jsx(ScrollAreaScrollbar,{ref:tt,orientation:$,className:cn("flex touch-none select-none transition-colors",$==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",$==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",_e),...et,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=ScrollAreaScrollbar.displayName;var define_process_env_default={};function _mergeNamespaces$1(_e,$){return $.forEach(function(et){et&&typeof et!="string"&&!Array.isArray(et)&&Object.keys(et).forEach(function(tt){if(tt!=="default"&&!(tt in _e)){var nt=Object.getOwnPropertyDescriptor(et,tt);Object.defineProperty(_e,tt,nt.get?nt:{enumerable:!0,get:function(){return et[tt]}})}})}),Object.freeze(_e)}var e$1=Object.defineProperty,h$1=(_e,$,et)=>$ in _e?e$1(_e,$,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[$]=et,o$1=(_e,$,et)=>h$1(_e,typeof $!="symbol"?$+"":$,et);let _$1=class{constructor(){o$1(this,"_locking"),o$1(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let $;const et=new Promise(nt=>$=()=>{this._locks-=1,nt()}),tt=this._locking.then(()=>$);return this._locking=this._locking.then(()=>et),tt}};function assert(_e,$){if(!_e)throw new Error($)}const FLOAT32_MAX=34028234663852886e22,FLOAT32_MIN=-34028234663852886e22,UINT32_MAX=4294967295,INT32_MAX=2147483647,INT32_MIN=-2147483648;function assertInt32(_e){if(typeof _e!="number")throw new Error("invalid int 32: "+typeof _e);if(!Number.isInteger(_e)||_e>INT32_MAX||_e<INT32_MIN)throw new Error("invalid int 32: "+_e)}function assertUInt32(_e){if(typeof _e!="number")throw new Error("invalid uint 32: "+typeof _e);if(!Number.isInteger(_e)||_e>UINT32_MAX||_e<0)throw new Error("invalid uint 32: "+_e)}function assertFloat32(_e){if(typeof _e!="number")throw new Error("invalid float 32: "+typeof _e);if(Number.isFinite(_e)&&(_e>FLOAT32_MAX||_e<FLOAT32_MIN))throw new Error("invalid float 32: "+_e)}const enumTypeSymbol=Symbol("@bufbuild/protobuf/enum-type");function getEnumType(_e){const $=_e[enumTypeSymbol];return assert($,"missing enum type on enum object"),$}function setEnumType(_e,$,et,tt){_e[enumTypeSymbol]=makeEnumType($,et.map(nt=>({no:nt.no,name:nt.name,localName:_e[nt.no]})))}function makeEnumType(_e,$,et){const tt=Object.create(null),nt=Object.create(null),rt=[];for(const it of $){const ot=normalizeEnumValue(it);rt.push(ot),tt[it.name]=ot,nt[it.no]=ot}return{typeName:_e,values:rt,findName(it){return tt[it]},findNumber(it){return nt[it]}}}function makeEnum(_e,$,et){const tt={};for(const nt of $){const rt=normalizeEnumValue(nt);tt[rt.localName]=rt.no,tt[rt.no]=rt.localName}return setEnumType(tt,_e,$),tt}function normalizeEnumValue(_e){return"localName"in _e?_e:Object.assign(Object.assign({},_e),{localName:_e.name})}let Message$1=class{equals($){return this.getType().runtime.util.equals(this.getType(),this,$)}clone(){return this.getType().runtime.util.clone(this)}fromBinary($,et){const tt=this.getType(),nt=tt.runtime.bin,rt=nt.makeReadOptions(et);return nt.readMessage(this,rt.readerFactory($),$.byteLength,rt),this}fromJson($,et){const tt=this.getType(),nt=tt.runtime.json,rt=nt.makeReadOptions(et);return nt.readMessage(tt,$,rt,this),this}fromJsonString($,et){let tt;try{tt=JSON.parse($)}catch(nt){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(nt instanceof Error?nt.message:String(nt)))}return this.fromJson(tt,et)}toBinary($){const et=this.getType(),tt=et.runtime.bin,nt=tt.makeWriteOptions($),rt=nt.writerFactory();return tt.writeMessage(this,rt,nt),rt.finish()}toJson($){const et=this.getType(),tt=et.runtime.json,nt=tt.makeWriteOptions($);return tt.writeMessage(this,nt)}toJsonString($){var et;const tt=this.toJson($);return JSON.stringify(tt,null,(et=$==null?void 0:$.prettySpaces)!==null&&et!==void 0?et:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function makeMessageType(_e,$,et,tt){var nt;const rt=(nt=tt==null?void 0:tt.localName)!==null&&nt!==void 0?nt:$.substring($.lastIndexOf(".")+1),it={[rt]:function(ot){_e.util.initFields(this),_e.util.initPartial(ot,this)}}[rt];return Object.setPrototypeOf(it.prototype,new Message$1),Object.assign(it,{runtime:_e,typeName:$,fields:_e.util.newFieldList(et),fromBinary(ot,st){return new it().fromBinary(ot,st)},fromJson(ot,st){return new it().fromJson(ot,st)},fromJsonString(ot,st){return new it().fromJsonString(ot,st)},equals(ot,st){return _e.util.equals(it,ot,st)}}),it}function varint64read(){let _e=0,$=0;for(let tt=0;tt<28;tt+=7){let nt=this.buf[this.pos++];if(_e|=(nt&127)<<tt,!(nt&128))return this.assertBounds(),[_e,$]}let et=this.buf[this.pos++];if(_e|=(et&15)<<28,$=(et&112)>>4,!(et&128))return this.assertBounds(),[_e,$];for(let tt=3;tt<=31;tt+=7){let nt=this.buf[this.pos++];if($|=(nt&127)<<tt,!(nt&128))return this.assertBounds(),[_e,$]}throw new Error("invalid varint")}function varint64write(_e,$,et){for(let rt=0;rt<28;rt=rt+7){const it=_e>>>rt,ot=!(!(it>>>7)&&$==0),st=(ot?it|128:it)&255;if(et.push(st),!ot)return}const tt=_e>>>28&15|($&7)<<4,nt=!!($>>3);if(et.push((nt?tt|128:tt)&255),!!nt){for(let rt=3;rt<31;rt=rt+7){const it=$>>>rt,ot=!!(it>>>7),st=(ot?it|128:it)&255;if(et.push(st),!ot)return}et.push($>>>31&1)}}const TWO_PWR_32_DBL=4294967296;function int64FromString(_e){const $=_e[0]==="-";$&&(_e=_e.slice(1));const et=1e6;let tt=0,nt=0;function rt(it,ot){const st=Number(_e.slice(it,ot));nt*=et,tt=tt*et+st,tt>=TWO_PWR_32_DBL&&(nt=nt+(tt/TWO_PWR_32_DBL|0),tt=tt%TWO_PWR_32_DBL)}return rt(-24,-18),rt(-18,-12),rt(-12,-6),rt(-6),$?negate(tt,nt):newBits(tt,nt)}function int64ToString(_e,$){let et=newBits(_e,$);const tt=et.hi&2147483648;tt&&(et=negate(et.lo,et.hi));const nt=uInt64ToString(et.lo,et.hi);return tt?"-"+nt:nt}function uInt64ToString(_e,$){if({lo:_e,hi:$}=toUnsigned(_e,$),$<=2097151)return String(TWO_PWR_32_DBL*$+_e);const et=_e&16777215,tt=(_e>>>24|$<<8)&16777215,nt=$>>16&65535;let rt=et+tt*6777216+nt*6710656,it=tt+nt*8147497,ot=nt*2;const st=1e7;return rt>=st&&(it+=Math.floor(rt/st),rt%=st),it>=st&&(ot+=Math.floor(it/st),it%=st),ot.toString()+decimalFrom1e7WithLeadingZeros(it)+decimalFrom1e7WithLeadingZeros(rt)}function toUnsigned(_e,$){return{lo:_e>>>0,hi:$>>>0}}function newBits(_e,$){return{lo:_e|0,hi:$|0}}function negate(_e,$){return $=~$,_e?_e=~_e+1:$+=1,newBits(_e,$)}const decimalFrom1e7WithLeadingZeros=_e=>{const $=String(_e);return"0000000".slice($.length)+$};function varint32write(_e,$){if(_e>=0){for(;_e>127;)$.push(_e&127|128),_e=_e>>>7;$.push(_e)}else{for(let et=0;et<9;et++)$.push(_e&127|128),_e=_e>>7;$.push(1)}}function varint32read(){let _e=this.buf[this.pos++],$=_e&127;if(!(_e&128))return this.assertBounds(),$;if(_e=this.buf[this.pos++],$|=(_e&127)<<7,!(_e&128))return this.assertBounds(),$;if(_e=this.buf[this.pos++],$|=(_e&127)<<14,!(_e&128))return this.assertBounds(),$;if(_e=this.buf[this.pos++],$|=(_e&127)<<21,!(_e&128))return this.assertBounds(),$;_e=this.buf[this.pos++],$|=(_e&15)<<28;for(let et=5;_e&128&&et<10;et++)_e=this.buf[this.pos++];if(_e&128)throw new Error("invalid varint");return this.assertBounds(),$>>>0}function makeInt64Support(){const _e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof _e.getBigInt64=="function"&&typeof _e.getBigUint64=="function"&&typeof _e.setBigInt64=="function"&&typeof _e.setBigUint64=="function"&&(typeof process!="object"||typeof define_process_env_default!="object"||define_process_env_default.BUF_BIGINT_DISABLE!=="1")){const nt=BigInt("-9223372036854775808"),rt=BigInt("9223372036854775807"),it=BigInt("0"),ot=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(st){const at=typeof st=="bigint"?st:BigInt(st);if(at>rt||at<nt)throw new Error("int64 invalid: ".concat(st));return at},uParse(st){const at=typeof st=="bigint"?st:BigInt(st);if(at>ot||at<it)throw new Error("uint64 invalid: ".concat(st));return at},enc(st){return _e.setBigInt64(0,this.parse(st),!0),{lo:_e.getInt32(0,!0),hi:_e.getInt32(4,!0)}},uEnc(st){return _e.setBigInt64(0,this.uParse(st),!0),{lo:_e.getInt32(0,!0),hi:_e.getInt32(4,!0)}},dec(st,at){return _e.setInt32(0,st,!0),_e.setInt32(4,at,!0),_e.getBigInt64(0,!0)},uDec(st,at){return _e.setInt32(0,st,!0),_e.setInt32(4,at,!0),_e.getBigUint64(0,!0)}}}const et=nt=>assert(/^-?[0-9]+$/.test(nt),"int64 invalid: ".concat(nt)),tt=nt=>assert(/^[0-9]+$/.test(nt),"uint64 invalid: ".concat(nt));return{zero:"0",supported:!1,parse(nt){return typeof nt!="string"&&(nt=nt.toString()),et(nt),nt},uParse(nt){return typeof nt!="string"&&(nt=nt.toString()),tt(nt),nt},enc(nt){return typeof nt!="string"&&(nt=nt.toString()),et(nt),int64FromString(nt)},uEnc(nt){return typeof nt!="string"&&(nt=nt.toString()),tt(nt),int64FromString(nt)},dec(nt,rt){return int64ToString(nt,rt)},uDec(nt,rt){return uInt64ToString(nt,rt)}}}const protoInt64=makeInt64Support();var ScalarType;(function(_e){_e[_e.DOUBLE=1]="DOUBLE",_e[_e.FLOAT=2]="FLOAT",_e[_e.INT64=3]="INT64",_e[_e.UINT64=4]="UINT64",_e[_e.INT32=5]="INT32",_e[_e.FIXED64=6]="FIXED64",_e[_e.FIXED32=7]="FIXED32",_e[_e.BOOL=8]="BOOL",_e[_e.STRING=9]="STRING",_e[_e.BYTES=12]="BYTES",_e[_e.UINT32=13]="UINT32",_e[_e.SFIXED32=15]="SFIXED32",_e[_e.SFIXED64=16]="SFIXED64",_e[_e.SINT32=17]="SINT32",_e[_e.SINT64=18]="SINT64"})(ScalarType||(ScalarType={}));var LongType;(function(_e){_e[_e.BIGINT=0]="BIGINT",_e[_e.STRING=1]="STRING"})(LongType||(LongType={}));function scalarEquals(_e,$,et){if($===et)return!0;if(_e==ScalarType.BYTES){if(!($ instanceof Uint8Array)||!(et instanceof Uint8Array)||$.length!==et.length)return!1;for(let tt=0;tt<$.length;tt++)if($[tt]!==et[tt])return!1;return!0}switch(_e){case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return $==et}return!1}function scalarZeroValue(_e,$){switch(_e){case ScalarType.BOOL:return!1;case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return $==0?protoInt64.zero:"0";case ScalarType.DOUBLE:case ScalarType.FLOAT:return 0;case ScalarType.BYTES:return new Uint8Array(0);case ScalarType.STRING:return"";default:return 0}}function isScalarZeroValue(_e,$){switch(_e){case ScalarType.BOOL:return $===!1;case ScalarType.STRING:return $==="";case ScalarType.BYTES:return $ instanceof Uint8Array&&!$.byteLength;default:return $==0}}var WireType;(function(_e){_e[_e.Varint=0]="Varint",_e[_e.Bit64=1]="Bit64",_e[_e.LengthDelimited=2]="LengthDelimited",_e[_e.StartGroup=3]="StartGroup",_e[_e.EndGroup=4]="EndGroup",_e[_e.Bit32=5]="Bit32"})(WireType||(WireType={}));class BinaryWriter{constructor($){this.stack=[],this.textEncoder=$??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let $=0;for(let nt=0;nt<this.chunks.length;nt++)$+=this.chunks[nt].length;let et=new Uint8Array($),tt=0;for(let nt=0;nt<this.chunks.length;nt++)et.set(this.chunks[nt],tt),tt+=this.chunks[nt].length;return this.chunks=[],et}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let $=this.finish(),et=this.stack.pop();if(!et)throw new Error("invalid state, fork stack empty");return this.chunks=et.chunks,this.buf=et.buf,this.uint32($.byteLength),this.raw($)}tag($,et){return this.uint32(($<<3|et)>>>0)}raw($){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push($),this}uint32($){for(assertUInt32($);$>127;)this.buf.push($&127|128),$=$>>>7;return this.buf.push($),this}int32($){return assertInt32($),varint32write($,this.buf),this}bool($){return this.buf.push($?1:0),this}bytes($){return this.uint32($.byteLength),this.raw($)}string($){let et=this.textEncoder.encode($);return this.uint32(et.byteLength),this.raw(et)}float($){assertFloat32($);let et=new Uint8Array(4);return new DataView(et.buffer).setFloat32(0,$,!0),this.raw(et)}double($){let et=new Uint8Array(8);return new DataView(et.buffer).setFloat64(0,$,!0),this.raw(et)}fixed32($){assertUInt32($);let et=new Uint8Array(4);return new DataView(et.buffer).setUint32(0,$,!0),this.raw(et)}sfixed32($){assertInt32($);let et=new Uint8Array(4);return new DataView(et.buffer).setInt32(0,$,!0),this.raw(et)}sint32($){return assertInt32($),$=($<<1^$>>31)>>>0,varint32write($,this.buf),this}sfixed64($){let et=new Uint8Array(8),tt=new DataView(et.buffer),nt=protoInt64.enc($);return tt.setInt32(0,nt.lo,!0),tt.setInt32(4,nt.hi,!0),this.raw(et)}fixed64($){let et=new Uint8Array(8),tt=new DataView(et.buffer),nt=protoInt64.uEnc($);return tt.setInt32(0,nt.lo,!0),tt.setInt32(4,nt.hi,!0),this.raw(et)}int64($){let et=protoInt64.enc($);return varint64write(et.lo,et.hi,this.buf),this}sint64($){let et=protoInt64.enc($),tt=et.hi>>31,nt=et.lo<<1^tt,rt=(et.hi<<1|et.lo>>>31)^tt;return varint64write(nt,rt,this.buf),this}uint64($){let et=protoInt64.uEnc($);return varint64write(et.lo,et.hi,this.buf),this}}class BinaryReader{constructor($,et){this.varint64=varint64read,this.uint32=varint32read,this.buf=$,this.len=$.length,this.pos=0,this.view=new DataView($.buffer,$.byteOffset,$.byteLength),this.textDecoder=et??new TextDecoder}tag(){let $=this.uint32(),et=$>>>3,tt=$&7;if(et<=0||tt<0||tt>5)throw new Error("illegal tag: field no "+et+" wire type "+tt);return[et,tt]}skip($,et){let tt=this.pos;switch($){case WireType.Varint:for(;this.buf[this.pos++]&128;);break;case WireType.Bit64:this.pos+=4;case WireType.Bit32:this.pos+=4;break;case WireType.LengthDelimited:let nt=this.uint32();this.pos+=nt;break;case WireType.StartGroup:for(;;){const[rt,it]=this.tag();if(it===WireType.EndGroup){if(et!==void 0&&rt!==et)throw new Error("invalid end group tag");break}this.skip(it,rt)}break;default:throw new Error("cant skip wire type "+$)}return this.assertBounds(),this.buf.subarray(tt,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let $=this.uint32();return $>>>1^-($&1)}int64(){return protoInt64.dec(...this.varint64())}uint64(){return protoInt64.uDec(...this.varint64())}sint64(){let[$,et]=this.varint64(),tt=-($&1);return $=($>>>1|(et&1)<<31)^tt,et=et>>>1^tt,protoInt64.dec($,et)}bool(){let[$,et]=this.varint64();return $!==0||et!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return protoInt64.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return protoInt64.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let $=this.uint32(),et=this.pos;return this.pos+=$,this.assertBounds(),this.buf.subarray(et,et+$)}string(){return this.textDecoder.decode(this.bytes())}}function makeExtension(_e,$,et,tt){let nt;return{typeName:$,extendee:et,get field(){if(!nt){const rt=typeof tt=="function"?tt():tt;rt.name=$.split(".").pop(),rt.jsonName="[".concat($,"]"),nt=_e.util.newFieldList([rt]).list()[0]}return nt},runtime:_e}}function createExtensionContainer(_e){const $=_e.field.localName,et=Object.create(null);return et[$]=initExtensionField(_e),[et,()=>et[$]]}function initExtensionField(_e){const $=_e.field;if($.repeated)return[];if($.default!==void 0)return $.default;switch($.kind){case"enum":return $.T.values[0].no;case"scalar":return scalarZeroValue($.T,$.L);case"message":const et=$.T,tt=new et;return et.fieldWrapper?et.fieldWrapper.unwrapField(tt):tt;case"map":throw"map fields are not allowed to be extensions"}}function filterUnknownFields(_e,$){if(!$.repeated&&($.kind=="enum"||$.kind=="scalar")){for(let et=_e.length-1;et>=0;--et)if(_e[et].no==$.no)return[_e[et]];return[]}return _e.filter(et=>et.no===$.no)}let encTable="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),decTable=[];for(let _e=0;_e<encTable.length;_e++)decTable[encTable[_e].charCodeAt(0)]=_e;decTable[45]=encTable.indexOf("+");decTable[95]=encTable.indexOf("/");const protoBase64={dec(_e){let $=_e.length*3/4;_e[_e.length-2]=="="?$-=2:_e[_e.length-1]=="="&&($-=1);let et=new Uint8Array($),tt=0,nt=0,rt,it=0;for(let ot=0;ot<_e.length;ot++){if(rt=decTable[_e.charCodeAt(ot)],rt===void 0)switch(_e[ot]){case"=":nt=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(nt){case 0:it=rt,nt=1;break;case 1:et[tt++]=it<<2|(rt&48)>>4,it=rt,nt=2;break;case 2:et[tt++]=(it&15)<<4|(rt&60)>>2,it=rt,nt=3;break;case 3:et[tt++]=(it&3)<<6|rt,nt=0;break}}if(nt==1)throw Error("invalid base64 string.");return et.subarray(0,tt)},enc(_e){let $="",et=0,tt,nt=0;for(let rt=0;rt<_e.length;rt++)switch(tt=_e[rt],et){case 0:$+=encTable[tt>>2],nt=(tt&3)<<4,et=1;break;case 1:$+=encTable[nt|tt>>4],nt=(tt&15)<<2,et=2;break;case 2:$+=encTable[nt|tt>>6],$+=encTable[tt&63],et=0;break}return et&&($+=encTable[nt],$+="=",et==1&&($+="=")),$}};function getExtension(_e,$,et){assertExtendee($,_e);const tt=$.runtime.bin.makeReadOptions(et),nt=filterUnknownFields(_e.getType().runtime.bin.listUnknownFields(_e),$.field),[rt,it]=createExtensionContainer($);for(const ot of nt)$.runtime.bin.readField(rt,tt.readerFactory(ot.data),$.field,ot.wireType,tt);return it()}function setExtension(_e,$,et,tt){assertExtendee($,_e);const nt=$.runtime.bin.makeReadOptions(tt),rt=$.runtime.bin.makeWriteOptions(tt);if(hasExtension(_e,$)){const at=_e.getType().runtime.bin.listUnknownFields(_e).filter(lt=>lt.no!=$.field.no);_e.getType().runtime.bin.discardUnknownFields(_e);for(const lt of at)_e.getType().runtime.bin.onUnknownField(_e,lt.no,lt.wireType,lt.data)}const it=rt.writerFactory();let ot=$.field;!ot.opt&&!ot.repeated&&(ot.kind=="enum"||ot.kind=="scalar")&&(ot=Object.assign(Object.assign({},$.field),{opt:!0})),$.runtime.bin.writeField(ot,et,it,rt);const st=nt.readerFactory(it.finish());for(;st.pos<st.len;){const[at,lt]=st.tag(),dt=st.skip(lt,at);_e.getType().runtime.bin.onUnknownField(_e,at,lt,dt)}}function hasExtension(_e,$){const et=_e.getType();return $.extendee.typeName===et.typeName&&!!et.runtime.bin.listUnknownFields(_e).find(tt=>tt.no==$.field.no)}function assertExtendee(_e,$){assert(_e.extendee.typeName==$.getType().typeName,"extension ".concat(_e.typeName," can only be applied to message ").concat(_e.extendee.typeName))}function isFieldSet(_e,$){const et=_e.localName;if(_e.repeated)return $[et].length>0;if(_e.oneof)return $[_e.oneof.localName].case===et;switch(_e.kind){case"enum":case"scalar":return _e.opt||_e.req?$[et]!==void 0:_e.kind=="enum"?$[et]!==_e.T.values[0].no:!isScalarZeroValue(_e.T,$[et]);case"message":return $[et]!==void 0;case"map":return Object.keys($[et]).length>0}}function clearField(_e,$){const et=_e.localName,tt=!_e.opt&&!_e.req;if(_e.repeated)$[et]=[];else if(_e.oneof)$[_e.oneof.localName]={case:void 0};else switch(_e.kind){case"map":$[et]={};break;case"enum":$[et]=tt?_e.T.values[0].no:void 0;break;case"scalar":$[et]=tt?scalarZeroValue(_e.T,_e.L):void 0;break;case"message":$[et]=void 0;break}}function isMessage(_e,$){if(_e===null||typeof _e!="object"||!Object.getOwnPropertyNames(Message$1.prototype).every(tt=>tt in _e&&typeof _e[tt]=="function"))return!1;const et=_e.getType();return et===null||typeof et!="function"||!("typeName"in et)||typeof et.typeName!="string"?!1:$===void 0?!0:et.typeName==$.typeName}function wrapField(_e,$){return isMessage($)||!_e.fieldWrapper?$:_e.fieldWrapper.wrapField($)}ScalarType.DOUBLE,ScalarType.FLOAT,ScalarType.INT64,ScalarType.UINT64,ScalarType.INT32,ScalarType.UINT32,ScalarType.BOOL,ScalarType.STRING,ScalarType.BYTES;const jsonReadDefaults={ignoreUnknownFields:!1},jsonWriteDefaults={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function makeReadOptions$1(_e){return _e?Object.assign(Object.assign({},jsonReadDefaults),_e):jsonReadDefaults}function makeWriteOptions$1(_e){return _e?Object.assign(Object.assign({},jsonWriteDefaults),_e):jsonWriteDefaults}const tokenNull=Symbol(),tokenIgnoredUnknownEnum=Symbol();function makeJsonFormat(){return{makeReadOptions:makeReadOptions$1,makeWriteOptions:makeWriteOptions$1,readMessage(_e,$,et,tt){if($==null||Array.isArray($)||typeof $!="object")throw new Error("cannot decode message ".concat(_e.typeName," from JSON: ").concat(debugJsonValue($)));tt=tt??new _e;const nt=new Map,rt=et.typeRegistry;for(const[it,ot]of Object.entries($)){const st=_e.fields.findJsonName(it);if(st){if(st.oneof){if(ot===null&&st.kind=="scalar")continue;const at=nt.get(st.oneof);if(at!==void 0)throw new Error("cannot decode message ".concat(_e.typeName,' from JSON: multiple keys for oneof "').concat(st.oneof.name,'" present: "').concat(at,'", "').concat(it,'"'));nt.set(st.oneof,it)}readField$1(tt,ot,st,et,_e)}else{let at=!1;if(rt!=null&&rt.findExtension&&it.startsWith("[")&&it.endsWith("]")){const lt=rt.findExtension(it.substring(1,it.length-1));if(lt&&lt.extendee.typeName==_e.typeName){at=!0;const[dt,pt]=createExtensionContainer(lt);readField$1(dt,ot,lt.field,et,lt),setExtension(tt,lt,pt(),et)}}if(!at&&!et.ignoreUnknownFields)throw new Error("cannot decode message ".concat(_e.typeName,' from JSON: key "').concat(it,'" is unknown'))}}return tt},writeMessage(_e,$){const et=_e.getType(),tt={};let nt;try{for(nt of et.fields.byNumber()){if(!isFieldSet(nt,_e)){if(nt.req)throw"required field not set";if(!$.emitDefaultValues||!canEmitFieldDefaultValue(nt))continue}const it=nt.oneof?_e[nt.oneof.localName].value:_e[nt.localName],ot=writeField$1(nt,it,$);ot!==void 0&&(tt[$.useProtoFieldName?nt.name:nt.jsonName]=ot)}const rt=$.typeRegistry;if(rt!=null&&rt.findExtensionFor)for(const it of et.runtime.bin.listUnknownFields(_e)){const ot=rt.findExtensionFor(et.typeName,it.no);if(ot&&hasExtension(_e,ot)){const st=getExtension(_e,ot,$),at=writeField$1(ot.field,st,$);at!==void 0&&(tt[ot.field.jsonName]=at)}}}catch(rt){const it=nt?"cannot encode field ".concat(et.typeName,".").concat(nt.name," to JSON"):"cannot encode message ".concat(et.typeName," to JSON"),ot=rt instanceof Error?rt.message:String(rt);throw new Error(it+(ot.length>0?": ".concat(ot):""))}return tt},readScalar(_e,$,et){return readScalar$1(_e,$,et??LongType.BIGINT,!0)},writeScalar(_e,$,et){if($!==void 0&&(et||isScalarZeroValue(_e,$)))return writeScalar$1(_e,$)},debug:debugJsonValue}}function debugJsonValue(_e){if(_e===null)return"null";switch(typeof _e){case"object":return Array.isArray(_e)?"array":"object";case"string":return _e.length>100?"string":'"'.concat(_e.split('"').join('\\"'),'"');default:return String(_e)}}function readField$1(_e,$,et,tt,nt){let rt=et.localName;if(et.repeated){if(assert(et.kind!="map"),$===null)return;if(!Array.isArray($))throw new Error("cannot decode field ".concat(nt.typeName,".").concat(et.name," from JSON: ").concat(debugJsonValue($)));const it=_e[rt];for(const ot of $){if(ot===null)throw new Error("cannot decode field ".concat(nt.typeName,".").concat(et.name," from JSON: ").concat(debugJsonValue(ot)));switch(et.kind){case"message":it.push(et.T.fromJson(ot,tt));break;case"enum":const st=readEnum(et.T,ot,tt.ignoreUnknownFields,!0);st!==tokenIgnoredUnknownEnum&&it.push(st);break;case"scalar":try{it.push(readScalar$1(et.T,ot,et.L,!0))}catch(at){let lt="cannot decode field ".concat(nt.typeName,".").concat(et.name," from JSON: ").concat(debugJsonValue(ot));throw at instanceof Error&&at.message.length>0&&(lt+=": ".concat(at.message)),new Error(lt)}break}}}else if(et.kind=="map"){if($===null)return;if(typeof $!="object"||Array.isArray($))throw new Error("cannot decode field ".concat(nt.typeName,".").concat(et.name," from JSON: ").concat(debugJsonValue($)));const it=_e[rt];for(const[ot,st]of Object.entries($)){if(st===null)throw new Error("cannot decode field ".concat(nt.typeName,".").concat(et.name," from JSON: map value null"));let at;try{at=readMapKey(et.K,ot)}catch(lt){let dt="cannot decode map key for field ".concat(nt.typeName,".").concat(et.name," from JSON: ").concat(debugJsonValue($));throw lt instanceof Error&&lt.message.length>0&&(dt+=": ".concat(lt.message)),new Error(dt)}switch(et.V.kind){case"message":it[at]=et.V.T.fromJson(st,tt);break;case"enum":const lt=readEnum(et.V.T,st,tt.ignoreUnknownFields,!0);lt!==tokenIgnoredUnknownEnum&&(it[at]=lt);break;case"scalar":try{it[at]=readScalar$1(et.V.T,st,LongType.BIGINT,!0)}catch(dt){let pt="cannot decode map value for field ".concat(nt.typeName,".").concat(et.name," from JSON: ").concat(debugJsonValue($));throw dt instanceof Error&&dt.message.length>0&&(pt+=": ".concat(dt.message)),new Error(pt)}break}}}else switch(et.oneof&&(_e=_e[et.oneof.localName]={case:rt},rt="value"),et.kind){case"message":const it=et.T;if($===null&&it.typeName!="google.protobuf.Value")return;let ot=_e[rt];isMessage(ot)?ot.fromJson($,tt):(_e[rt]=ot=it.fromJson($,tt),it.fieldWrapper&&!et.oneof&&(_e[rt]=it.fieldWrapper.unwrapField(ot)));break;case"enum":const st=readEnum(et.T,$,tt.ignoreUnknownFields,!1);switch(st){case tokenNull:clearField(et,_e);break;case tokenIgnoredUnknownEnum:break;default:_e[rt]=st;break}break;case"scalar":try{const at=readScalar$1(et.T,$,et.L,!1);switch(at){case tokenNull:clearField(et,_e);break;default:_e[rt]=at;break}}catch(at){let lt="cannot decode field ".concat(nt.typeName,".").concat(et.name," from JSON: ").concat(debugJsonValue($));throw at instanceof Error&&at.message.length>0&&(lt+=": ".concat(at.message)),new Error(lt)}break}}function readMapKey(_e,$){if(_e===ScalarType.BOOL)switch($){case"true":$=!0;break;case"false":$=!1;break}return readScalar$1(_e,$,LongType.BIGINT,!0).toString()}function readScalar$1(_e,$,et,tt){if($===null)return tt?scalarZeroValue(_e,et):tokenNull;switch(_e){case ScalarType.DOUBLE:case ScalarType.FLOAT:if($==="NaN")return Number.NaN;if($==="Infinity")return Number.POSITIVE_INFINITY;if($==="-Infinity")return Number.NEGATIVE_INFINITY;if($===""||typeof $=="string"&&$.trim().length!==$.length||typeof $!="string"&&typeof $!="number")break;const nt=Number($);if(Number.isNaN(nt)||!Number.isFinite(nt))break;return _e==ScalarType.FLOAT&&assertFloat32(nt),nt;case ScalarType.INT32:case ScalarType.FIXED32:case ScalarType.SFIXED32:case ScalarType.SINT32:case ScalarType.UINT32:let rt;if(typeof $=="number"?rt=$:typeof $=="string"&&$.length>0&&$.trim().length===$.length&&(rt=Number($)),rt===void 0)break;return _e==ScalarType.UINT32||_e==ScalarType.FIXED32?assertUInt32(rt):assertInt32(rt),rt;case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:if(typeof $!="number"&&typeof $!="string")break;const it=protoInt64.parse($);return et?it.toString():it;case ScalarType.FIXED64:case ScalarType.UINT64:if(typeof $!="number"&&typeof $!="string")break;const ot=protoInt64.uParse($);return et?ot.toString():ot;case ScalarType.BOOL:if(typeof $!="boolean")break;return $;case ScalarType.STRING:if(typeof $!="string")break;try{encodeURIComponent($)}catch{throw new Error("invalid UTF8")}return $;case ScalarType.BYTES:if($==="")return new Uint8Array(0);if(typeof $!="string")break;return protoBase64.dec($)}throw new Error}function readEnum(_e,$,et,tt){if($===null)return _e.typeName=="google.protobuf.NullValue"?0:tt?_e.values[0].no:tokenNull;switch(typeof $){case"number":if(Number.isInteger($))return $;break;case"string":const nt=_e.findName($);if(nt!==void 0)return nt.no;if(et)return tokenIgnoredUnknownEnum;break}throw new Error("cannot decode enum ".concat(_e.typeName," from JSON: ").concat(debugJsonValue($)))}function canEmitFieldDefaultValue(_e){return _e.repeated||_e.kind=="map"?!0:!(_e.oneof||_e.kind=="message"||_e.opt||_e.req)}function writeField$1(_e,$,et){if(_e.kind=="map"){assert(typeof $=="object"&&$!=null);const tt={},nt=Object.entries($);switch(_e.V.kind){case"scalar":for(const[it,ot]of nt)tt[it.toString()]=writeScalar$1(_e.V.T,ot);break;case"message":for(const[it,ot]of nt)tt[it.toString()]=ot.toJson(et);break;case"enum":const rt=_e.V.T;for(const[it,ot]of nt)tt[it.toString()]=writeEnum(rt,ot,et.enumAsInteger);break}return et.emitDefaultValues||nt.length>0?tt:void 0}if(_e.repeated){assert(Array.isArray($));const tt=[];switch(_e.kind){case"scalar":for(let nt=0;nt<$.length;nt++)tt.push(writeScalar$1(_e.T,$[nt]));break;case"enum":for(let nt=0;nt<$.length;nt++)tt.push(writeEnum(_e.T,$[nt],et.enumAsInteger));break;case"message":for(let nt=0;nt<$.length;nt++)tt.push($[nt].toJson(et));break}return et.emitDefaultValues||tt.length>0?tt:void 0}switch(_e.kind){case"scalar":return writeScalar$1(_e.T,$);case"enum":return writeEnum(_e.T,$,et.enumAsInteger);case"message":return wrapField(_e.T,$).toJson(et)}}function writeEnum(_e,$,et){var tt;if(assert(typeof $=="number"),_e.typeName=="google.protobuf.NullValue")return null;if(et)return $;const nt=_e.findNumber($);return(tt=nt==null?void 0:nt.name)!==null&&tt!==void 0?tt:$}function writeScalar$1(_e,$){switch(_e){case ScalarType.INT32:case ScalarType.SFIXED32:case ScalarType.SINT32:case ScalarType.FIXED32:case ScalarType.UINT32:return assert(typeof $=="number"),$;case ScalarType.FLOAT:case ScalarType.DOUBLE:return assert(typeof $=="number"),Number.isNaN($)?"NaN":$===Number.POSITIVE_INFINITY?"Infinity":$===Number.NEGATIVE_INFINITY?"-Infinity":$;case ScalarType.STRING:return assert(typeof $=="string"),$;case ScalarType.BOOL:return assert(typeof $=="boolean"),$;case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return assert(typeof $=="bigint"||typeof $=="string"||typeof $=="number"),$.toString();case ScalarType.BYTES:return assert($ instanceof Uint8Array),protoBase64.enc($)}}const unknownFieldsSymbol=Symbol("@bufbuild/protobuf/unknown-fields"),readDefaults={readUnknownFields:!0,readerFactory:_e=>new BinaryReader(_e)},writeDefaults={writeUnknownFields:!0,writerFactory:()=>new BinaryWriter};function makeReadOptions(_e){return _e?Object.assign(Object.assign({},readDefaults),_e):readDefaults}function makeWriteOptions(_e){return _e?Object.assign(Object.assign({},writeDefaults),_e):writeDefaults}function makeBinaryFormat(){return{makeReadOptions,makeWriteOptions,listUnknownFields(_e){var $;return($=_e[unknownFieldsSymbol])!==null&&$!==void 0?$:[]},discardUnknownFields(_e){delete _e[unknownFieldsSymbol]},writeUnknownFields(_e,$){const tt=_e[unknownFieldsSymbol];if(tt)for(const nt of tt)$.tag(nt.no,nt.wireType).raw(nt.data)},onUnknownField(_e,$,et,tt){const nt=_e;Array.isArray(nt[unknownFieldsSymbol])||(nt[unknownFieldsSymbol]=[]),nt[unknownFieldsSymbol].push({no:$,wireType:et,data:tt})},readMessage(_e,$,et,tt,nt){const rt=_e.getType(),it=nt?$.len:$.pos+et;let ot,st;for(;$.pos<it&&([ot,st]=$.tag(),!(nt===!0&&st==WireType.EndGroup));){const at=rt.fields.find(ot);if(!at){const lt=$.skip(st,ot);tt.readUnknownFields&&this.onUnknownField(_e,ot,st,lt);continue}readField(_e,$,at,st,tt)}if(nt&&(st!=WireType.EndGroup||ot!==et))throw new Error("invalid end group tag")},readField,writeMessage(_e,$,et){const tt=_e.getType();for(const nt of tt.fields.byNumber()){if(!isFieldSet(nt,_e)){if(nt.req)throw new Error("cannot encode field ".concat(tt.typeName,".").concat(nt.name," to binary: required field not set"));continue}const rt=nt.oneof?_e[nt.oneof.localName].value:_e[nt.localName];writeField(nt,rt,$,et)}return et.writeUnknownFields&&this.writeUnknownFields(_e,$),$},writeField(_e,$,et,tt){$!==void 0&&writeField(_e,$,et,tt)}}}function readField(_e,$,et,tt,nt){let{repeated:rt,localName:it}=et;switch(et.oneof&&(_e=_e[et.oneof.localName],_e.case!=it&&delete _e.value,_e.case=it,it="value"),et.kind){case"scalar":case"enum":const ot=et.kind=="enum"?ScalarType.INT32:et.T;let st=readScalar;if(et.kind=="scalar"&&et.L>0&&(st=readScalarLTString),rt){let pt=_e[it];if(tt==WireType.LengthDelimited&&ot!=ScalarType.STRING&&ot!=ScalarType.BYTES){let vt=$.uint32()+$.pos;for(;$.pos<vt;)pt.push(st($,ot))}else pt.push(st($,ot))}else _e[it]=st($,ot);break;case"message":const at=et.T;rt?_e[it].push(readMessageField($,new at,nt,et)):isMessage(_e[it])?readMessageField($,_e[it],nt,et):(_e[it]=readMessageField($,new at,nt,et),at.fieldWrapper&&!et.oneof&&!et.repeated&&(_e[it]=at.fieldWrapper.unwrapField(_e[it])));break;case"map":let[lt,dt]=readMapEntry(et,$,nt);_e[it][lt]=dt;break}}function readMessageField(_e,$,et,tt){const nt=$.getType().runtime.bin,rt=tt==null?void 0:tt.delimited;return nt.readMessage($,_e,rt?tt.no:_e.uint32(),et,rt),$}function readMapEntry(_e,$,et){const tt=$.uint32(),nt=$.pos+tt;let rt,it;for(;$.pos<nt;){const[ot]=$.tag();switch(ot){case 1:rt=readScalar($,_e.K);break;case 2:switch(_e.V.kind){case"scalar":it=readScalar($,_e.V.T);break;case"enum":it=$.int32();break;case"message":it=readMessageField($,new _e.V.T,et,void 0);break}break}}if(rt===void 0&&(rt=scalarZeroValue(_e.K,LongType.BIGINT)),typeof rt!="string"&&typeof rt!="number"&&(rt=rt.toString()),it===void 0)switch(_e.V.kind){case"scalar":it=scalarZeroValue(_e.V.T,LongType.BIGINT);break;case"enum":it=_e.V.T.values[0].no;break;case"message":it=new _e.V.T;break}return[rt,it]}function readScalarLTString(_e,$){const et=readScalar(_e,$);return typeof et=="bigint"?et.toString():et}function readScalar(_e,$){switch($){case ScalarType.STRING:return _e.string();case ScalarType.BOOL:return _e.bool();case ScalarType.DOUBLE:return _e.double();case ScalarType.FLOAT:return _e.float();case ScalarType.INT32:return _e.int32();case ScalarType.INT64:return _e.int64();case ScalarType.UINT64:return _e.uint64();case ScalarType.FIXED64:return _e.fixed64();case ScalarType.BYTES:return _e.bytes();case ScalarType.FIXED32:return _e.fixed32();case ScalarType.SFIXED32:return _e.sfixed32();case ScalarType.SFIXED64:return _e.sfixed64();case ScalarType.SINT64:return _e.sint64();case ScalarType.UINT32:return _e.uint32();case ScalarType.SINT32:return _e.sint32()}}function writeField(_e,$,et,tt){assert($!==void 0);const nt=_e.repeated;switch(_e.kind){case"scalar":case"enum":let rt=_e.kind=="enum"?ScalarType.INT32:_e.T;if(nt)if(assert(Array.isArray($)),_e.packed)writePacked(et,rt,_e.no,$);else for(const it of $)writeScalar(et,rt,_e.no,it);else writeScalar(et,rt,_e.no,$);break;case"message":if(nt){assert(Array.isArray($));for(const it of $)writeMessageField(et,tt,_e,it)}else writeMessageField(et,tt,_e,$);break;case"map":assert(typeof $=="object"&&$!=null);for(const[it,ot]of Object.entries($))writeMapEntry(et,tt,_e,it,ot);break}}function writeMapEntry(_e,$,et,tt,nt){_e.tag(et.no,WireType.LengthDelimited),_e.fork();let rt=tt;switch(et.K){case ScalarType.INT32:case ScalarType.FIXED32:case ScalarType.UINT32:case ScalarType.SFIXED32:case ScalarType.SINT32:rt=Number.parseInt(tt);break;case ScalarType.BOOL:assert(tt=="true"||tt=="false"),rt=tt=="true";break}switch(writeScalar(_e,et.K,1,rt),et.V.kind){case"scalar":writeScalar(_e,et.V.T,2,nt);break;case"enum":writeScalar(_e,ScalarType.INT32,2,nt);break;case"message":assert(nt!==void 0),_e.tag(2,WireType.LengthDelimited).bytes(nt.toBinary($));break}_e.join()}function writeMessageField(_e,$,et,tt){const nt=wrapField(et.T,tt);et.delimited?_e.tag(et.no,WireType.StartGroup).raw(nt.toBinary($)).tag(et.no,WireType.EndGroup):_e.tag(et.no,WireType.LengthDelimited).bytes(nt.toBinary($))}function writeScalar(_e,$,et,tt){assert(tt!==void 0);let[nt,rt]=scalarTypeInfo($);_e.tag(et,nt)[rt](tt)}function writePacked(_e,$,et,tt){if(!tt.length)return;_e.tag(et,WireType.LengthDelimited).fork();let[,nt]=scalarTypeInfo($);for(let rt=0;rt<tt.length;rt++)_e[nt](tt[rt]);_e.join()}function scalarTypeInfo(_e){let $=WireType.Varint;switch(_e){case ScalarType.BYTES:case ScalarType.STRING:$=WireType.LengthDelimited;break;case ScalarType.DOUBLE:case ScalarType.FIXED64:case ScalarType.SFIXED64:$=WireType.Bit64;break;case ScalarType.FIXED32:case ScalarType.SFIXED32:case ScalarType.FLOAT:$=WireType.Bit32;break}const et=ScalarType[_e].toLowerCase();return[$,et]}function makeUtilCommon(){return{setEnumType,initPartial(_e,$){if(_e===void 0)return;const et=$.getType();for(const tt of et.fields.byMember()){const nt=tt.localName,rt=$,it=_e;if(it[nt]!=null)switch(tt.kind){case"oneof":const ot=it[nt].case;if(ot===void 0)continue;const st=tt.findField(ot);let at=it[nt].value;st&&st.kind=="message"&&!isMessage(at,st.T)?at=new st.T(at):st&&st.kind==="scalar"&&st.T===ScalarType.BYTES&&(at=toU8Arr(at)),rt[nt]={case:ot,value:at};break;case"scalar":case"enum":let lt=it[nt];tt.T===ScalarType.BYTES&&(lt=tt.repeated?lt.map(toU8Arr):toU8Arr(lt)),rt[nt]=lt;break;case"map":switch(tt.V.kind){case"scalar":case"enum":if(tt.V.T===ScalarType.BYTES)for(const[ht,vt]of Object.entries(it[nt]))rt[nt][ht]=toU8Arr(vt);else Object.assign(rt[nt],it[nt]);break;case"message":const pt=tt.V.T;for(const ht of Object.keys(it[nt])){let vt=it[nt][ht];pt.fieldWrapper||(vt=new pt(vt)),rt[nt][ht]=vt}break}break;case"message":const dt=tt.T;if(tt.repeated)rt[nt]=it[nt].map(pt=>isMessage(pt,dt)?pt:new dt(pt));else{const pt=it[nt];dt.fieldWrapper?dt.typeName==="google.protobuf.BytesValue"?rt[nt]=toU8Arr(pt):rt[nt]=pt:rt[nt]=isMessage(pt,dt)?pt:new dt(pt)}break}}},equals(_e,$,et){return $===et?!0:!$||!et?!1:_e.fields.byMember().every(tt=>{const nt=$[tt.localName],rt=et[tt.localName];if(tt.repeated){if(nt.length!==rt.length)return!1;switch(tt.kind){case"message":return nt.every((it,ot)=>tt.T.equals(it,rt[ot]));case"scalar":return nt.every((it,ot)=>scalarEquals(tt.T,it,rt[ot]));case"enum":return nt.every((it,ot)=>scalarEquals(ScalarType.INT32,it,rt[ot]))}throw new Error("repeated cannot contain ".concat(tt.kind))}switch(tt.kind){case"message":let it=nt,ot=rt;return tt.T.fieldWrapper&&(it!==void 0&&!isMessage(it)&&(it=tt.T.fieldWrapper.wrapField(it)),ot!==void 0&&!isMessage(ot)&&(ot=tt.T.fieldWrapper.wrapField(ot))),tt.T.equals(it,ot);case"enum":return scalarEquals(ScalarType.INT32,nt,rt);case"scalar":return scalarEquals(tt.T,nt,rt);case"oneof":if(nt.case!==rt.case)return!1;const st=tt.findField(nt.case);if(st===void 0)return!0;switch(st.kind){case"message":return st.T.equals(nt.value,rt.value);case"enum":return scalarEquals(ScalarType.INT32,nt.value,rt.value);case"scalar":return scalarEquals(st.T,nt.value,rt.value)}throw new Error("oneof cannot contain ".concat(st.kind));case"map":const at=Object.keys(nt).concat(Object.keys(rt));switch(tt.V.kind){case"message":const lt=tt.V.T;return at.every(pt=>lt.equals(nt[pt],rt[pt]));case"enum":return at.every(pt=>scalarEquals(ScalarType.INT32,nt[pt],rt[pt]));case"scalar":const dt=tt.V.T;return at.every(pt=>scalarEquals(dt,nt[pt],rt[pt]))}break}})},clone(_e){const $=_e.getType(),et=new $,tt=et;for(const nt of $.fields.byMember()){const rt=_e[nt.localName];let it;if(nt.repeated)it=rt.map(cloneSingularField);else if(nt.kind=="map"){it=tt[nt.localName];for(const[ot,st]of Object.entries(rt))it[ot]=cloneSingularField(st)}else nt.kind=="oneof"?it=nt.findField(rt.case)?{case:rt.case,value:cloneSingularField(rt.value)}:{case:void 0}:it=cloneSingularField(rt);tt[nt.localName]=it}for(const nt of $.runtime.bin.listUnknownFields(_e))$.runtime.bin.onUnknownField(tt,nt.no,nt.wireType,nt.data);return et}}}function cloneSingularField(_e){if(_e===void 0)return _e;if(isMessage(_e))return _e.clone();if(_e instanceof Uint8Array){const $=new Uint8Array(_e.byteLength);return $.set(_e),$}return _e}function toU8Arr(_e){return _e instanceof Uint8Array?_e:new Uint8Array(_e)}function makeProtoRuntime(_e,$,et){return{syntax:_e,json:makeJsonFormat(),bin:makeBinaryFormat(),util:Object.assign(Object.assign({},makeUtilCommon()),{newFieldList:$,initFields:et}),makeMessageType(tt,nt,rt){return makeMessageType(this,tt,nt,rt)},makeEnum,makeEnumType,getEnumType,makeExtension(tt,nt,rt){return makeExtension(this,tt,nt,rt)}}}class InternalFieldList{constructor($,et){this._fields=$,this._normalizer=et}findJsonName($){if(!this.jsonNames){const et={};for(const tt of this.list())et[tt.jsonName]=et[tt.name]=tt;this.jsonNames=et}return this.jsonNames[$]}find($){if(!this.numbers){const et={};for(const tt of this.list())et[tt.no]=tt;this.numbers=et}return this.numbers[$]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(($,et)=>$.no-et.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const $=this.members;let et;for(const tt of this.list())tt.oneof?tt.oneof!==et&&(et=tt.oneof,$.push(et)):$.push(tt)}return this.members}}function localFieldName(_e,$){const et=protoCamelCase(_e);return $?et:safeObjectProperty(safeMessageProperty(et))}function localOneofName(_e){return localFieldName(_e,!1)}const fieldJsonName=protoCamelCase;function protoCamelCase(_e){let $=!1;const et=[];for(let tt=0;tt<_e.length;tt++){let nt=_e.charAt(tt);switch(nt){case"_":$=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":et.push(nt),$=!1;break;default:$&&($=!1,nt=nt.toUpperCase()),et.push(nt);break}}return et.join("")}const reservedObjectProperties=new Set(["constructor","toString","toJSON","valueOf"]),reservedMessageProperties=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),fallback=_e=>"".concat(_e,"$"),safeMessageProperty=_e=>reservedMessageProperties.has(_e)?fallback(_e):_e,safeObjectProperty=_e=>reservedObjectProperties.has(_e)?fallback(_e):_e;class InternalOneofInfo{constructor($){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=$,this.localName=localOneofName($)}addField($){assert($.oneof===this,"field ".concat($.name," not one of ").concat(this.name)),this.fields.push($)}findField($){if(!this._lookup){this._lookup=Object.create(null);for(let et=0;et<this.fields.length;et++)this._lookup[this.fields[et].localName]=this.fields[et]}return this._lookup[$]}}function normalizeFieldInfos(_e,$){var et,tt,nt,rt,it,ot;const st=[];let at;for(const lt of typeof _e=="function"?_e():_e){const dt=lt;if(dt.localName=localFieldName(lt.name,lt.oneof!==void 0),dt.jsonName=(et=lt.jsonName)!==null&&et!==void 0?et:fieldJsonName(lt.name),dt.repeated=(tt=lt.repeated)!==null&&tt!==void 0?tt:!1,lt.kind=="scalar"&&(dt.L=(nt=lt.L)!==null&&nt!==void 0?nt:LongType.BIGINT),dt.delimited=(rt=lt.delimited)!==null&&rt!==void 0?rt:!1,dt.req=(it=lt.req)!==null&&it!==void 0?it:!1,dt.opt=(ot=lt.opt)!==null&&ot!==void 0?ot:!1,lt.packed===void 0&&(dt.packed=lt.kind=="enum"||lt.kind=="scalar"&&lt.T!=ScalarType.BYTES&&lt.T!=ScalarType.STRING),lt.oneof!==void 0){const pt=typeof lt.oneof=="string"?lt.oneof:lt.oneof.name;(!at||at.name!=pt)&&(at=new InternalOneofInfo(pt)),dt.oneof=at,at.addField(dt)}st.push(dt)}return st}const proto3=makeProtoRuntime("proto3",_e=>new InternalFieldList(_e,$=>normalizeFieldInfos($)),_e=>{for(const $ of _e.getType().fields.byMember()){if($.opt)continue;const et=$.localName,tt=_e;if($.repeated){tt[et]=[];continue}switch($.kind){case"oneof":tt[et]={case:void 0};break;case"enum":tt[et]=0;break;case"map":tt[et]={};break;case"scalar":tt[et]=scalarZeroValue($.T,$.L);break}}});class Timestamp extends Message$1{constructor($){super(),this.seconds=protoInt64.zero,this.nanos=0,proto3.util.initPartial($,this)}fromJson($,et){if(typeof $!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(proto3.json.debug($)));const tt=$.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!tt)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const nt=Date.parse(tt[1]+"-"+tt[2]+"-"+tt[3]+"T"+tt[4]+":"+tt[5]+":"+tt[6]+(tt[8]?tt[8]:"Z"));if(Number.isNaN(nt))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(nt<Date.parse("0001-01-01T00:00:00Z")||nt>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=protoInt64.parse(nt/1e3),this.nanos=0,tt[7]&&(this.nanos=parseInt("1"+tt[7]+"0".repeat(9-tt[7].length))-1e9),this}toJson($){const et=Number(this.seconds)*1e3;if(et<Date.parse("0001-01-01T00:00:00Z")||et>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let tt="Z";if(this.nanos>0){const nt=(this.nanos+1e9).toString().substring(1);nt.substring(3)==="000000"?tt="."+nt.substring(0,3)+"Z":nt.substring(6)==="000"?tt="."+nt.substring(0,6)+"Z":tt="."+nt+"Z"}return new Date(et).toISOString().replace(".000Z",tt)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Timestamp.fromDate(new Date)}static fromDate($){const et=$.getTime();return new Timestamp({seconds:protoInt64.parse(Math.floor(et/1e3)),nanos:et%1e3*1e6})}static fromBinary($,et){return new Timestamp().fromBinary($,et)}static fromJson($,et){return new Timestamp().fromJson($,et)}static fromJsonString($,et){return new Timestamp().fromJsonString($,et)}static equals($,et){return proto3.util.equals(Timestamp,$,et)}}Timestamp.runtime=proto3;Timestamp.typeName="google.protobuf.Timestamp";Timestamp.fields=proto3.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const MetricsBatch=proto3.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Timestamp},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:TimeSeriesMetric,repeated:!0},{no:5,name:"events",kind:"message",T:EventMetric,repeated:!0}]),TimeSeriesMetric=proto3.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:MetricSample,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),MetricSample=proto3.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Timestamp},{no:3,name:"value",kind:"scalar",T:2}]),EventMetric=proto3.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:Timestamp},{no:7,name:"normalized_end_timestamp",kind:"message",T:Timestamp,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),BackupCodecPolicy$1=proto3.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),TrackType=proto3.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),TrackSource=proto3.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),VideoQuality$1=proto3.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),ConnectionQuality$1=proto3.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),ClientConfigSetting=proto3.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),DisconnectReason=proto3.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),ReconnectReason=proto3.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),SubscriptionError=proto3.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),AudioTrackFeature=proto3.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Room$1=proto3.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Codec,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:TimedVersion}]),Codec=proto3.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),ParticipantPermission=proto3.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:proto3.getEnumType(TrackSource),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),ParticipantInfo=proto3.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:proto3.getEnumType(ParticipantInfo_State)},{no:4,name:"tracks",kind:"message",T:TrackInfo,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:ParticipantPermission},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:proto3.getEnumType(ParticipantInfo_Kind)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:proto3.getEnumType(DisconnectReason)},{no:18,name:"kind_details",kind:"enum",T:proto3.getEnumType(ParticipantInfo_KindDetail),repeated:!0}]),ParticipantInfo_State=proto3.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),ParticipantInfo_Kind=proto3.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),ParticipantInfo_KindDetail=proto3.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Encryption_Type=proto3.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),SimulcastCodecInfo=proto3.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:VideoLayer,repeated:!0}]),TrackInfo=proto3.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:proto3.getEnumType(TrackType)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:proto3.getEnumType(TrackSource)},{no:10,name:"layers",kind:"message",T:VideoLayer,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:SimulcastCodecInfo,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:proto3.getEnumType(Encryption_Type)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:TimedVersion},{no:19,name:"audio_features",kind:"enum",T:proto3.getEnumType(AudioTrackFeature),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:proto3.getEnumType(BackupCodecPolicy$1)}]),VideoLayer=proto3.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:proto3.getEnumType(VideoQuality$1)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),DataPacket=proto3.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:proto3.getEnumType(DataPacket_Kind)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:UserPacket,oneof:"value"},{no:3,name:"speaker",kind:"message",T:ActiveSpeakerUpdate,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:SipDTMF,oneof:"value"},{no:7,name:"transcription",kind:"message",T:Transcription,oneof:"value"},{no:8,name:"metrics",kind:"message",T:MetricsBatch,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:ChatMessage,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:RpcRequest,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:RpcAck,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:RpcResponse,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:DataStream_Header,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:DataStream_Chunk,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:DataStream_Trailer,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),DataPacket_Kind=proto3.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),ActiveSpeakerUpdate=proto3.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:SpeakerInfo,repeated:!0}]),SpeakerInfo=proto3.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),UserPacket=proto3.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),SipDTMF=proto3.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),Transcription=proto3.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:TranscriptionSegment,repeated:!0}]),TranscriptionSegment=proto3.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),ChatMessage=proto3.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),RpcRequest=proto3.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),RpcAck=proto3.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),RpcResponse=proto3.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:RpcError$1,oneof:"value"}]),RpcError$1=proto3.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),ParticipantTracks=proto3.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),ServerInfo=proto3.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:proto3.getEnumType(ServerInfo_Edition)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),ServerInfo_Edition=proto3.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),ClientInfo=proto3.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:proto3.getEnumType(ClientInfo_SDK)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),ClientInfo_SDK=proto3.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),ClientConfiguration=proto3.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:VideoConfiguration},{no:2,name:"screen",kind:"message",T:VideoConfiguration},{no:3,name:"resume_connection",kind:"enum",T:proto3.getEnumType(ClientConfigSetting)},{no:4,name:"disabled_codecs",kind:"message",T:DisabledCodecs},{no:5,name:"force_relay",kind:"enum",T:proto3.getEnumType(ClientConfigSetting)}]),VideoConfiguration=proto3.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:proto3.getEnumType(ClientConfigSetting)}]),DisabledCodecs=proto3.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Codec,repeated:!0},{no:2,name:"publish",kind:"message",T:Codec,repeated:!0}]),TimedVersion=proto3.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),DataStream_OperationType=proto3.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),DataStream_TextHeader=proto3.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:proto3.getEnumType(DataStream_OperationType)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),DataStream_ByteHeader=proto3.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),DataStream_Header=proto3.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:proto3.getEnumType(Encryption_Type)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:DataStream_TextHeader,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:DataStream_ByteHeader,oneof:"content_header"}],{localName:"DataStream_Header"}),DataStream_Chunk=proto3.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),DataStream_Trailer=proto3.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),SignalTarget=proto3.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),StreamState=proto3.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),CandidateProtocol=proto3.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),SignalRequest=proto3.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:SessionDescription,oneof:"message"},{no:2,name:"answer",kind:"message",T:SessionDescription,oneof:"message"},{no:3,name:"trickle",kind:"message",T:TrickleRequest,oneof:"message"},{no:4,name:"add_track",kind:"message",T:AddTrackRequest,oneof:"message"},{no:5,name:"mute",kind:"message",T:MuteTrackRequest,oneof:"message"},{no:6,name:"subscription",kind:"message",T:UpdateSubscription,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:UpdateTrackSettings,oneof:"message"},{no:8,name:"leave",kind:"message",T:LeaveRequest,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:UpdateVideoLayers,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:SubscriptionPermission,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:SyncState,oneof:"message"},{no:13,name:"simulate",kind:"message",T:SimulateScenario,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:UpdateParticipantMetadata,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Ping,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:UpdateLocalAudioTrack,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:UpdateLocalVideoTrack,oneof:"message"}]),SignalResponse=proto3.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:JoinResponse,oneof:"message"},{no:2,name:"answer",kind:"message",T:SessionDescription,oneof:"message"},{no:3,name:"offer",kind:"message",T:SessionDescription,oneof:"message"},{no:4,name:"trickle",kind:"message",T:TrickleRequest,oneof:"message"},{no:5,name:"update",kind:"message",T:ParticipantUpdate,oneof:"message"},{no:6,name:"track_published",kind:"message",T:TrackPublishedResponse,oneof:"message"},{no:8,name:"leave",kind:"message",T:LeaveRequest,oneof:"message"},{no:9,name:"mute",kind:"message",T:MuteTrackRequest,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:SpeakersChanged,oneof:"message"},{no:11,name:"room_update",kind:"message",T:RoomUpdate,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:ConnectionQualityUpdate,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:StreamStateUpdate,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:SubscribedQualityUpdate,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:SubscriptionPermissionUpdate,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:TrackUnpublishedResponse,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:ReconnectResponse,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Pong,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:SubscriptionResponse,oneof:"message"},{no:22,name:"request_response",kind:"message",T:RequestResponse,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:TrackSubscribed,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:RoomMovedResponse,oneof:"message"}]),SimulcastCodec=proto3.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),AddTrackRequest=proto3.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:proto3.getEnumType(TrackType)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:proto3.getEnumType(TrackSource)},{no:9,name:"layers",kind:"message",T:VideoLayer,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:SimulcastCodec,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:proto3.getEnumType(Encryption_Type)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:proto3.getEnumType(BackupCodecPolicy$1)},{no:17,name:"audio_features",kind:"enum",T:proto3.getEnumType(AudioTrackFeature),repeated:!0}]),TrickleRequest=proto3.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:proto3.getEnumType(SignalTarget)},{no:3,name:"final",kind:"scalar",T:8}]),MuteTrackRequest=proto3.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),JoinResponse=proto3.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Room$1},{no:2,name:"participant",kind:"message",T:ParticipantInfo},{no:3,name:"other_participants",kind:"message",T:ParticipantInfo,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:ICEServer,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:ClientConfiguration},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:ServerInfo},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Codec,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),ReconnectResponse=proto3.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:ICEServer,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:ClientConfiguration},{no:3,name:"server_info",kind:"message",T:ServerInfo},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),TrackPublishedResponse=proto3.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:TrackInfo}]),TrackUnpublishedResponse=proto3.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),SessionDescription=proto3.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),ParticipantUpdate=proto3.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:ParticipantInfo,repeated:!0}]),UpdateSubscription=proto3.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:ParticipantTracks,repeated:!0}]),UpdateTrackSettings=proto3.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:proto3.getEnumType(VideoQuality$1)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),UpdateLocalAudioTrack=proto3.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:proto3.getEnumType(AudioTrackFeature),repeated:!0}]),UpdateLocalVideoTrack=proto3.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),LeaveRequest=proto3.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:proto3.getEnumType(DisconnectReason)},{no:3,name:"action",kind:"enum",T:proto3.getEnumType(LeaveRequest_Action)},{no:4,name:"regions",kind:"message",T:RegionSettings}]),LeaveRequest_Action=proto3.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),UpdateVideoLayers=proto3.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:VideoLayer,repeated:!0}]),UpdateParticipantMetadata=proto3.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),ICEServer=proto3.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),SpeakersChanged=proto3.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:SpeakerInfo,repeated:!0}]),RoomUpdate=proto3.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Room$1}]),ConnectionQualityInfo=proto3.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:proto3.getEnumType(ConnectionQuality$1)},{no:3,name:"score",kind:"scalar",T:2}]),ConnectionQualityUpdate=proto3.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:ConnectionQualityInfo,repeated:!0}]),StreamStateInfo=proto3.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:proto3.getEnumType(StreamState)}]),StreamStateUpdate=proto3.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:StreamStateInfo,repeated:!0}]),SubscribedQuality=proto3.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:proto3.getEnumType(VideoQuality$1)},{no:2,name:"enabled",kind:"scalar",T:8}]),SubscribedCodec=proto3.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:SubscribedQuality,repeated:!0}]),SubscribedQualityUpdate=proto3.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:SubscribedQuality,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:SubscribedCodec,repeated:!0}]),TrackPermission=proto3.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),SubscriptionPermission=proto3.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:TrackPermission,repeated:!0}]),SubscriptionPermissionUpdate=proto3.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),RoomMovedResponse=proto3.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Room$1},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:ParticipantInfo},{no:4,name:"other_participants",kind:"message",T:ParticipantInfo,repeated:!0}]),SyncState=proto3.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:SessionDescription},{no:2,name:"subscription",kind:"message",T:UpdateSubscription},{no:3,name:"publish_tracks",kind:"message",T:TrackPublishedResponse,repeated:!0},{no:4,name:"data_channels",kind:"message",T:DataChannelInfo,repeated:!0},{no:5,name:"offer",kind:"message",T:SessionDescription},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:DataChannelReceiveState,repeated:!0}]),DataChannelReceiveState=proto3.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),DataChannelInfo=proto3.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:proto3.getEnumType(SignalTarget)}]),SimulateScenario=proto3.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:proto3.getEnumType(CandidateProtocol),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),Ping=proto3.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),Pong=proto3.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),RegionSettings=proto3.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:RegionInfo,repeated:!0}]),RegionInfo=proto3.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),SubscriptionResponse=proto3.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:proto3.getEnumType(SubscriptionError)}]),RequestResponse=proto3.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:proto3.getEnumType(RequestResponse_Reason)},{no:3,name:"message",kind:"scalar",T:9}]),RequestResponse_Reason=proto3.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),TrackSubscribed=proto3.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}var loglevel$1={exports:{}},loglevel=loglevel$1.exports,hasRequiredLoglevel;function requireLoglevel(){return hasRequiredLoglevel||(hasRequiredLoglevel=1,function(_e){(function($,et){_e.exports?_e.exports=et():$.log=et()})(loglevel,function(){var $=function(){},et="undefined",tt=typeof window!==et&&typeof window.navigator!==et&&/Trident\/|MSIE /.test(window.navigator.userAgent),nt=["trace","debug","info","warn","error"],rt={},it=null;function ot(mt,kt){var bt=mt[kt];if(typeof bt.bind=="function")return bt.bind(mt);try{return Function.prototype.bind.call(bt,mt)}catch{return function(){return Function.prototype.apply.apply(bt,[mt,arguments])}}}function st(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function at(mt){return mt==="debug"&&(mt="log"),typeof console===et?!1:mt==="trace"&&tt?st:console[mt]!==void 0?ot(console,mt):console.log!==void 0?ot(console,"log"):$}function lt(){for(var mt=this.getLevel(),kt=0;kt<nt.length;kt++){var bt=nt[kt];this[bt]=kt<mt?$:this.methodFactory(bt,mt,this.name)}if(this.log=this.debug,typeof console===et&&mt<this.levels.SILENT)return"No console available for logging"}function dt(mt){return function(){typeof console!==et&&(lt.call(this),this[mt].apply(this,arguments))}}function pt(mt,kt,bt){return at(mt)||dt.apply(this,arguments)}function ht(mt,kt){var bt=this,gt,St,yt,Et="loglevel";typeof mt=="string"?Et+=":"+mt:typeof mt=="symbol"&&(Et=void 0);function Tt(At){var Nt=(nt[At]||"silent").toUpperCase();if(!(typeof window===et||!Et)){try{window.localStorage[Et]=Nt;return}catch{}try{window.document.cookie=encodeURIComponent(Et)+"="+Nt+";"}catch{}}}function wt(){var At;if(!(typeof window===et||!Et)){try{At=window.localStorage[Et]}catch{}if(typeof At===et)try{var Nt=window.document.cookie,Bt=encodeURIComponent(Et),Jt=Nt.indexOf(Bt+"=");Jt!==-1&&(At=/^([^;]+)/.exec(Nt.slice(Jt+Bt.length+1))[1])}catch{}return bt.levels[At]===void 0&&(At=void 0),At}}function Rt(){if(!(typeof window===et||!Et)){try{window.localStorage.removeItem(Et)}catch{}try{window.document.cookie=encodeURIComponent(Et)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function xt(At){var Nt=At;if(typeof Nt=="string"&&bt.levels[Nt.toUpperCase()]!==void 0&&(Nt=bt.levels[Nt.toUpperCase()]),typeof Nt=="number"&&Nt>=0&&Nt<=bt.levels.SILENT)return Nt;throw new TypeError("log.setLevel() called with invalid level: "+At)}bt.name=mt,bt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},bt.methodFactory=kt||pt,bt.getLevel=function(){return yt??St??gt},bt.setLevel=function(At,Nt){return yt=xt(At),Nt!==!1&&Tt(yt),lt.call(bt)},bt.setDefaultLevel=function(At){St=xt(At),wt()||bt.setLevel(At,!1)},bt.resetLevel=function(){yt=null,Rt(),lt.call(bt)},bt.enableAll=function(At){bt.setLevel(bt.levels.TRACE,At)},bt.disableAll=function(At){bt.setLevel(bt.levels.SILENT,At)},bt.rebuild=function(){if(it!==bt&&(gt=xt(it.getLevel())),lt.call(bt),it===bt)for(var At in rt)rt[At].rebuild()},gt=xt(it?it.getLevel():"WARN");var Pt=wt();Pt!=null&&(yt=xt(Pt)),lt.call(bt)}it=new ht,it.getLogger=function(kt){if(typeof kt!="symbol"&&typeof kt!="string"||kt==="")throw new TypeError("You must supply a name when creating a logger.");var bt=rt[kt];return bt||(bt=rt[kt]=new ht(kt,it.methodFactory)),bt};var vt=typeof window!==et?window.log:void 0;return it.noConflict=function(){return typeof window!==et&&window.log===it&&(window.log=vt),it},it.getLoggers=function(){return rt},it.default=it,it})}(loglevel$1)),loglevel$1.exports}var loglevelExports=requireLoglevel(),LogLevel;(function(_e){_e[_e.trace=0]="trace",_e[_e.debug=1]="debug",_e[_e.info=2]="info",_e[_e.warn=3]="warn",_e[_e.error=4]="error",_e[_e.silent=5]="silent"})(LogLevel||(LogLevel={}));var LoggerNames;(function(_e){_e.Default="livekit",_e.Room="livekit-room",_e.Participant="livekit-participant",_e.Track="livekit-track",_e.Publication="livekit-track-publication",_e.Engine="livekit-engine",_e.Signal="livekit-signal",_e.PCManager="livekit-pc-manager",_e.PCTransport="livekit-pc-transport",_e.E2EE="lk-e2ee"})(LoggerNames||(LoggerNames={}));let livekitLogger=loglevelExports.getLogger("livekit");Object.values(LoggerNames).map(_e=>loglevelExports.getLogger(_e));livekitLogger.setDefaultLevel(LogLevel.info);function getLogger(_e){const $=loglevelExports.getLogger(_e);return $.setDefaultLevel(livekitLogger.getLevel()),$}const workerLogger=loglevelExports.getLogger("lk-e2ee"),maxRetryDelay=7e3,DEFAULT_RETRY_DELAYS_IN_MS=[0,300,2*2*300,3*3*300,4*4*300,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay];class DefaultReconnectPolicy{constructor($){this._retryDelays=$!==void 0?[...$]:DEFAULT_RETRY_DELAYS_IN_MS}nextRetryDelayInMs($){if($.retryCount>=this._retryDelays.length)return null;const et=this._retryDelays[$.retryCount];return $.retryCount<=1?et:et+Math.random()*1e3}}function __rest(_e,$){var et={};for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&$.indexOf(tt)<0&&(et[tt]=_e[tt]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var nt=0,tt=Object.getOwnPropertySymbols(_e);nt<tt.length;nt++)$.indexOf(tt[nt])<0&&Object.prototype.propertyIsEnumerable.call(_e,tt[nt])&&(et[tt[nt]]=_e[tt[nt]]);return et}function __awaiter$1(_e,$,et,tt){function nt(rt){return rt instanceof et?rt:new et(function(it){it(rt)})}return new(et||(et=Promise))(function(rt,it){function ot(lt){try{at(tt.next(lt))}catch(dt){it(dt)}}function st(lt){try{at(tt.throw(lt))}catch(dt){it(dt)}}function at(lt){lt.done?rt(lt.value):nt(lt.value).then(ot,st)}at((tt=tt.apply(_e,$||[])).next())})}function __values(_e){var $=typeof Symbol=="function"&&Symbol.iterator,et=$&&_e[$],tt=0;if(et)return et.call(_e);if(_e&&typeof _e.length=="number")return{next:function(){return _e&&tt>=_e.length&&(_e=void 0),{value:_e&&_e[tt++],done:!_e}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}function __asyncValues(_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=_e[Symbol.asyncIterator],et;return $?$.call(_e):(_e=typeof __values=="function"?__values(_e):_e[Symbol.iterator](),et={},tt("next"),tt("throw"),tt("return"),et[Symbol.asyncIterator]=function(){return this},et);function tt(rt){et[rt]=_e[rt]&&function(it){return new Promise(function(ot,st){it=_e[rt](it),nt(ot,st,it.done,it.value)})}}function nt(rt,it,ot,st){Promise.resolve(st).then(function(at){rt({value:at,done:ot})},it)}}typeof SuppressedError=="function"&&SuppressedError;var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var _e=typeof Reflect=="object"?Reflect:null,$=_e&&typeof _e.apply=="function"?_e.apply:function(Et,Tt,wt){return Function.prototype.apply.call(Et,Tt,wt)},et;_e&&typeof _e.ownKeys=="function"?et=_e.ownKeys:Object.getOwnPropertySymbols?et=function(Et){return Object.getOwnPropertyNames(Et).concat(Object.getOwnPropertySymbols(Et))}:et=function(Et){return Object.getOwnPropertyNames(Et)};function tt(yt){console&&console.warn&&console.warn(yt)}var nt=Number.isNaN||function(Et){return Et!==Et};function rt(){rt.init.call(this)}events.exports=rt,events.exports.once=bt,rt.EventEmitter=rt,rt.prototype._events=void 0,rt.prototype._eventsCount=0,rt.prototype._maxListeners=void 0;var it=10;function ot(yt){if(typeof yt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof yt)}Object.defineProperty(rt,"defaultMaxListeners",{enumerable:!0,get:function(){return it},set:function(yt){if(typeof yt!="number"||yt<0||nt(yt))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+yt+".");it=yt}}),rt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},rt.prototype.setMaxListeners=function(Et){if(typeof Et!="number"||Et<0||nt(Et))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Et+".");return this._maxListeners=Et,this};function st(yt){return yt._maxListeners===void 0?rt.defaultMaxListeners:yt._maxListeners}rt.prototype.getMaxListeners=function(){return st(this)},rt.prototype.emit=function(Et){for(var Tt=[],wt=1;wt<arguments.length;wt++)Tt.push(arguments[wt]);var Rt=Et==="error",xt=this._events;if(xt!==void 0)Rt=Rt&&xt.error===void 0;else if(!Rt)return!1;if(Rt){var Pt;if(Tt.length>0&&(Pt=Tt[0]),Pt instanceof Error)throw Pt;var At=new Error("Unhandled error."+(Pt?" ("+Pt.message+")":""));throw At.context=Pt,At}var Nt=xt[Et];if(Nt===void 0)return!1;if(typeof Nt=="function")$(Nt,this,Tt);else for(var Bt=Nt.length,Jt=vt(Nt,Bt),wt=0;wt<Bt;++wt)$(Jt[wt],this,Tt);return!0};function at(yt,Et,Tt,wt){var Rt,xt,Pt;if(ot(Tt),xt=yt._events,xt===void 0?(xt=yt._events=Object.create(null),yt._eventsCount=0):(xt.newListener!==void 0&&(yt.emit("newListener",Et,Tt.listener?Tt.listener:Tt),xt=yt._events),Pt=xt[Et]),Pt===void 0)Pt=xt[Et]=Tt,++yt._eventsCount;else if(typeof Pt=="function"?Pt=xt[Et]=wt?[Tt,Pt]:[Pt,Tt]:wt?Pt.unshift(Tt):Pt.push(Tt),Rt=st(yt),Rt>0&&Pt.length>Rt&&!Pt.warned){Pt.warned=!0;var At=new Error("Possible EventEmitter memory leak detected. "+Pt.length+" "+String(Et)+" listeners added. Use emitter.setMaxListeners() to increase limit");At.name="MaxListenersExceededWarning",At.emitter=yt,At.type=Et,At.count=Pt.length,tt(At)}return yt}rt.prototype.addListener=function(Et,Tt){return at(this,Et,Tt,!1)},rt.prototype.on=rt.prototype.addListener,rt.prototype.prependListener=function(Et,Tt){return at(this,Et,Tt,!0)};function lt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function dt(yt,Et,Tt){var wt={fired:!1,wrapFn:void 0,target:yt,type:Et,listener:Tt},Rt=lt.bind(wt);return Rt.listener=Tt,wt.wrapFn=Rt,Rt}rt.prototype.once=function(Et,Tt){return ot(Tt),this.on(Et,dt(this,Et,Tt)),this},rt.prototype.prependOnceListener=function(Et,Tt){return ot(Tt),this.prependListener(Et,dt(this,Et,Tt)),this},rt.prototype.removeListener=function(Et,Tt){var wt,Rt,xt,Pt,At;if(ot(Tt),Rt=this._events,Rt===void 0)return this;if(wt=Rt[Et],wt===void 0)return this;if(wt===Tt||wt.listener===Tt)--this._eventsCount===0?this._events=Object.create(null):(delete Rt[Et],Rt.removeListener&&this.emit("removeListener",Et,wt.listener||Tt));else if(typeof wt!="function"){for(xt=-1,Pt=wt.length-1;Pt>=0;Pt--)if(wt[Pt]===Tt||wt[Pt].listener===Tt){At=wt[Pt].listener,xt=Pt;break}if(xt<0)return this;xt===0?wt.shift():mt(wt,xt),wt.length===1&&(Rt[Et]=wt[0]),Rt.removeListener!==void 0&&this.emit("removeListener",Et,At||Tt)}return this},rt.prototype.off=rt.prototype.removeListener,rt.prototype.removeAllListeners=function(Et){var Tt,wt,Rt;if(wt=this._events,wt===void 0)return this;if(wt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):wt[Et]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete wt[Et]),this;if(arguments.length===0){var xt=Object.keys(wt),Pt;for(Rt=0;Rt<xt.length;++Rt)Pt=xt[Rt],Pt!=="removeListener"&&this.removeAllListeners(Pt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Tt=wt[Et],typeof Tt=="function")this.removeListener(Et,Tt);else if(Tt!==void 0)for(Rt=Tt.length-1;Rt>=0;Rt--)this.removeListener(Et,Tt[Rt]);return this};function pt(yt,Et,Tt){var wt=yt._events;if(wt===void 0)return[];var Rt=wt[Et];return Rt===void 0?[]:typeof Rt=="function"?Tt?[Rt.listener||Rt]:[Rt]:Tt?kt(Rt):vt(Rt,Rt.length)}rt.prototype.listeners=function(Et){return pt(this,Et,!0)},rt.prototype.rawListeners=function(Et){return pt(this,Et,!1)},rt.listenerCount=function(yt,Et){return typeof yt.listenerCount=="function"?yt.listenerCount(Et):ht.call(yt,Et)},rt.prototype.listenerCount=ht;function ht(yt){var Et=this._events;if(Et!==void 0){var Tt=Et[yt];if(typeof Tt=="function")return 1;if(Tt!==void 0)return Tt.length}return 0}rt.prototype.eventNames=function(){return this._eventsCount>0?et(this._events):[]};function vt(yt,Et){for(var Tt=new Array(Et),wt=0;wt<Et;++wt)Tt[wt]=yt[wt];return Tt}function mt(yt,Et){for(;Et+1<yt.length;Et++)yt[Et]=yt[Et+1];yt.pop()}function kt(yt){for(var Et=new Array(yt.length),Tt=0;Tt<Et.length;++Tt)Et[Tt]=yt[Tt].listener||yt[Tt];return Et}function bt(yt,Et){return new Promise(function(Tt,wt){function Rt(Pt){yt.removeListener(Et,xt),wt(Pt)}function xt(){typeof yt.removeListener=="function"&&yt.removeListener("error",Rt),Tt([].slice.call(arguments))}St(yt,Et,xt,{once:!0}),Et!=="error"&&gt(yt,Rt,{once:!0})})}function gt(yt,Et,Tt){typeof yt.on=="function"&&St(yt,"error",Et,Tt)}function St(yt,Et,Tt,wt){if(typeof yt.on=="function")wt.once?yt.once(Et,Tt):yt.on(Et,Tt);else if(typeof yt.addEventListener=="function")yt.addEventListener(Et,function Rt(xt){wt.once&&yt.removeEventListener(Et,Rt),Tt(xt)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof yt)}return events.exports}var eventsExports=requireEvents();let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(_e,$,et){const tt=_e.match($);return tt&&tt.length>=et&&parseFloat(tt[et],10)}function wrapPeerConnectionEvent(_e,$,et){if(!_e.RTCPeerConnection)return;const tt=_e.RTCPeerConnection.prototype,nt=tt.addEventListener;tt.addEventListener=function(it,ot){if(it!==$)return nt.apply(this,arguments);const st=at=>{const lt=et(at);lt&&(ot.handleEvent?ot.handleEvent(lt):ot(lt))};return this._eventMap=this._eventMap||{},this._eventMap[$]||(this._eventMap[$]=new Map),this._eventMap[$].set(ot,st),nt.apply(this,[it,st])};const rt=tt.removeEventListener;tt.removeEventListener=function(it,ot){if(it!==$||!this._eventMap||!this._eventMap[$])return rt.apply(this,arguments);if(!this._eventMap[$].has(ot))return rt.apply(this,arguments);const st=this._eventMap[$].get(ot);return this._eventMap[$].delete(ot),this._eventMap[$].size===0&&delete this._eventMap[$],Object.keys(this._eventMap).length===0&&delete this._eventMap,rt.apply(this,[it,st])},Object.defineProperty(tt,"on"+$,{get(){return this["_on"+$]},set(it){this["_on"+$]&&(this.removeEventListener($,this["_on"+$]),delete this["_on"+$]),it&&this.addEventListener($,this["_on"+$]=it)},enumerable:!0,configurable:!0})}function disableLog(_e){return typeof _e!="boolean"?new Error("Argument type: "+typeof _e+". Please use a boolean."):(logDisabled_=_e,_e?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(_e){return typeof _e!="boolean"?new Error("Argument type: "+typeof _e+". Please use a boolean."):(deprecationWarnings_=!_e,"adapter.js deprecation warnings "+(_e?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(_e,$){deprecationWarnings_&&console.warn(_e+" is deprecated, please use "+$+" instead.")}function detectBrowser(_e){const $={browser:null,version:null};if(typeof _e>"u"||!_e.navigator||!_e.navigator.userAgent)return $.browser="Not a browser.",$;const{navigator:et}=_e;if(et.userAgentData&&et.userAgentData.brands){const tt=et.userAgentData.brands.find(nt=>nt.brand==="Chromium");if(tt)return{browser:"chrome",version:parseInt(tt.version,10)}}if(et.mozGetUserMedia)$.browser="firefox",$.version=parseInt(extractVersion(et.userAgent,/Firefox\/(\d+)\./,1));else if(et.webkitGetUserMedia||_e.isSecureContext===!1&&_e.webkitRTCPeerConnection)$.browser="chrome",$.version=parseInt(extractVersion(et.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(_e.RTCPeerConnection&&et.userAgent.match(/AppleWebKit\/(\d+)\./))$.browser="safari",$.version=parseInt(extractVersion(et.userAgent,/AppleWebKit\/(\d+)\./,1)),$.supportsUnifiedPlan=_e.RTCRtpTransceiver&&"currentDirection"in _e.RTCRtpTransceiver.prototype,$._safariVersion=extractVersion(et.userAgent,/Version\/(\d+(\.?\d+))/,1);else return $.browser="Not a supported browser.",$;return $}function isObject(_e){return Object.prototype.toString.call(_e)==="[object Object]"}function compactObject(_e){return isObject(_e)?Object.keys(_e).reduce(function($,et){const tt=isObject(_e[et]),nt=tt?compactObject(_e[et]):_e[et],rt=tt&&!Object.keys(nt).length;return nt===void 0||rt?$:Object.assign($,{[et]:nt})},{}):_e}function walkStats(_e,$,et){!$||et.has($.id)||(et.set($.id,$),Object.keys($).forEach(tt=>{tt.endsWith("Id")?walkStats(_e,_e.get($[tt]),et):tt.endsWith("Ids")&&$[tt].forEach(nt=>{walkStats(_e,_e.get(nt),et)})}))}function filterStats(_e,$,et){const tt=et?"outbound-rtp":"inbound-rtp",nt=new Map;if($===null)return nt;const rt=[];return _e.forEach(it=>{it.type==="track"&&it.trackIdentifier===$.id&&rt.push(it)}),rt.forEach(it=>{_e.forEach(ot=>{ot.type===tt&&ot.trackId===it.id&&walkStats(_e,ot,nt)})}),nt}const logging=log;function shimGetUserMedia$2(_e,$){const et=_e&&_e.navigator;if(!et.mediaDevices)return;const tt=function(ot){if(typeof ot!="object"||ot.mandatory||ot.optional)return ot;const st={};return Object.keys(ot).forEach(at=>{if(at==="require"||at==="advanced"||at==="mediaSource")return;const lt=typeof ot[at]=="object"?ot[at]:{ideal:ot[at]};lt.exact!==void 0&&typeof lt.exact=="number"&&(lt.min=lt.max=lt.exact);const dt=function(pt,ht){return pt?pt+ht.charAt(0).toUpperCase()+ht.slice(1):ht==="deviceId"?"sourceId":ht};if(lt.ideal!==void 0){st.optional=st.optional||[];let pt={};typeof lt.ideal=="number"?(pt[dt("min",at)]=lt.ideal,st.optional.push(pt),pt={},pt[dt("max",at)]=lt.ideal,st.optional.push(pt)):(pt[dt("",at)]=lt.ideal,st.optional.push(pt))}lt.exact!==void 0&&typeof lt.exact!="number"?(st.mandatory=st.mandatory||{},st.mandatory[dt("",at)]=lt.exact):["min","max"].forEach(pt=>{lt[pt]!==void 0&&(st.mandatory=st.mandatory||{},st.mandatory[dt(pt,at)]=lt[pt])})}),ot.advanced&&(st.optional=(st.optional||[]).concat(ot.advanced)),st},nt=function(ot,st){if($.version>=61)return st(ot);if(ot=JSON.parse(JSON.stringify(ot)),ot&&typeof ot.audio=="object"){const at=function(lt,dt,pt){dt in lt&&!(pt in lt)&&(lt[pt]=lt[dt],delete lt[dt])};ot=JSON.parse(JSON.stringify(ot)),at(ot.audio,"autoGainControl","googAutoGainControl"),at(ot.audio,"noiseSuppression","googNoiseSuppression"),ot.audio=tt(ot.audio)}if(ot&&typeof ot.video=="object"){let at=ot.video.facingMode;at=at&&(typeof at=="object"?at:{ideal:at});const lt=$.version<66;if(at&&(at.exact==="user"||at.exact==="environment"||at.ideal==="user"||at.ideal==="environment")&&!(et.mediaDevices.getSupportedConstraints&&et.mediaDevices.getSupportedConstraints().facingMode&&!lt)){delete ot.video.facingMode;let dt;if(at.exact==="environment"||at.ideal==="environment"?dt=["back","rear"]:(at.exact==="user"||at.ideal==="user")&&(dt=["front"]),dt)return et.mediaDevices.enumerateDevices().then(pt=>{pt=pt.filter(vt=>vt.kind==="videoinput");let ht=pt.find(vt=>dt.some(mt=>vt.label.toLowerCase().includes(mt)));return!ht&&pt.length&&dt.includes("back")&&(ht=pt[pt.length-1]),ht&&(ot.video.deviceId=at.exact?{exact:ht.deviceId}:{ideal:ht.deviceId}),ot.video=tt(ot.video),logging("chrome: "+JSON.stringify(ot)),st(ot)})}ot.video=tt(ot.video)}return logging("chrome: "+JSON.stringify(ot)),st(ot)},rt=function(ot){return $.version>=64?ot:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[ot.name]||ot.name,message:ot.message,constraint:ot.constraint||ot.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},it=function(ot,st,at){nt(ot,lt=>{et.webkitGetUserMedia(lt,st,dt=>{at&&at(rt(dt))})})};if(et.getUserMedia=it.bind(et),et.mediaDevices.getUserMedia){const ot=et.mediaDevices.getUserMedia.bind(et.mediaDevices);et.mediaDevices.getUserMedia=function(st){return nt(st,at=>ot(at).then(lt=>{if(at.audio&&!lt.getAudioTracks().length||at.video&&!lt.getVideoTracks().length)throw lt.getTracks().forEach(dt=>{dt.stop()}),new DOMException("","NotFoundError");return lt},lt=>Promise.reject(rt(lt))))}}}function shimMediaStream(_e){_e.MediaStream=_e.MediaStream||_e.webkitMediaStream}function shimOnTrack$1(_e){if(typeof _e=="object"&&_e.RTCPeerConnection&&!("ontrack"in _e.RTCPeerConnection.prototype)){Object.defineProperty(_e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(et){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=et)},enumerable:!0,configurable:!0});const $=_e.RTCPeerConnection.prototype.setRemoteDescription;_e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=tt=>{tt.stream.addEventListener("addtrack",nt=>{let rt;_e.RTCPeerConnection.prototype.getReceivers?rt=this.getReceivers().find(ot=>ot.track&&ot.track.id===nt.track.id):rt={track:nt.track};const it=new Event("track");it.track=nt.track,it.receiver=rt,it.transceiver={receiver:rt},it.streams=[tt.stream],this.dispatchEvent(it)}),tt.stream.getTracks().forEach(nt=>{let rt;_e.RTCPeerConnection.prototype.getReceivers?rt=this.getReceivers().find(ot=>ot.track&&ot.track.id===nt.id):rt={track:nt};const it=new Event("track");it.track=nt,it.receiver=rt,it.transceiver={receiver:rt},it.streams=[tt.stream],this.dispatchEvent(it)})},this.addEventListener("addstream",this._ontrackpoly)),$.apply(this,arguments)}}else wrapPeerConnectionEvent(_e,"track",$=>($.transceiver||Object.defineProperty($,"transceiver",{value:{receiver:$.receiver}}),$))}function shimGetSendersWithDtmf(_e){if(typeof _e=="object"&&_e.RTCPeerConnection&&!("getSenders"in _e.RTCPeerConnection.prototype)&&"createDTMFSender"in _e.RTCPeerConnection.prototype){const $=function(nt,rt){return{track:rt,get dtmf(){return this._dtmf===void 0&&(rt.kind==="audio"?this._dtmf=nt.createDTMFSender(rt):this._dtmf=null),this._dtmf},_pc:nt}};if(!_e.RTCPeerConnection.prototype.getSenders){_e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const nt=_e.RTCPeerConnection.prototype.addTrack;_e.RTCPeerConnection.prototype.addTrack=function(ot,st){let at=nt.apply(this,arguments);return at||(at=$(this,ot),this._senders.push(at)),at};const rt=_e.RTCPeerConnection.prototype.removeTrack;_e.RTCPeerConnection.prototype.removeTrack=function(ot){rt.apply(this,arguments);const st=this._senders.indexOf(ot);st!==-1&&this._senders.splice(st,1)}}const et=_e.RTCPeerConnection.prototype.addStream;_e.RTCPeerConnection.prototype.addStream=function(rt){this._senders=this._senders||[],et.apply(this,[rt]),rt.getTracks().forEach(it=>{this._senders.push($(this,it))})};const tt=_e.RTCPeerConnection.prototype.removeStream;_e.RTCPeerConnection.prototype.removeStream=function(rt){this._senders=this._senders||[],tt.apply(this,[rt]),rt.getTracks().forEach(it=>{const ot=this._senders.find(st=>st.track===it);ot&&this._senders.splice(this._senders.indexOf(ot),1)})}}else if(typeof _e=="object"&&_e.RTCPeerConnection&&"getSenders"in _e.RTCPeerConnection.prototype&&"createDTMFSender"in _e.RTCPeerConnection.prototype&&_e.RTCRtpSender&&!("dtmf"in _e.RTCRtpSender.prototype)){const $=_e.RTCPeerConnection.prototype.getSenders;_e.RTCPeerConnection.prototype.getSenders=function(){const tt=$.apply(this,[]);return tt.forEach(nt=>nt._pc=this),tt},Object.defineProperty(_e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimSenderReceiverGetStats(_e){if(!(typeof _e=="object"&&_e.RTCPeerConnection&&_e.RTCRtpSender&&_e.RTCRtpReceiver))return;if(!("getStats"in _e.RTCRtpSender.prototype)){const et=_e.RTCPeerConnection.prototype.getSenders;et&&(_e.RTCPeerConnection.prototype.getSenders=function(){const rt=et.apply(this,[]);return rt.forEach(it=>it._pc=this),rt});const tt=_e.RTCPeerConnection.prototype.addTrack;tt&&(_e.RTCPeerConnection.prototype.addTrack=function(){const rt=tt.apply(this,arguments);return rt._pc=this,rt}),_e.RTCRtpSender.prototype.getStats=function(){const rt=this;return this._pc.getStats().then(it=>filterStats(it,rt.track,!0))}}if(!("getStats"in _e.RTCRtpReceiver.prototype)){const et=_e.RTCPeerConnection.prototype.getReceivers;et&&(_e.RTCPeerConnection.prototype.getReceivers=function(){const nt=et.apply(this,[]);return nt.forEach(rt=>rt._pc=this),nt}),wrapPeerConnectionEvent(_e,"track",tt=>(tt.receiver._pc=tt.srcElement,tt)),_e.RTCRtpReceiver.prototype.getStats=function(){const nt=this;return this._pc.getStats().then(rt=>filterStats(rt,nt.track,!1))}}if(!("getStats"in _e.RTCRtpSender.prototype&&"getStats"in _e.RTCRtpReceiver.prototype))return;const $=_e.RTCPeerConnection.prototype.getStats;_e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof _e.MediaStreamTrack){const tt=arguments[0];let nt,rt,it;return this.getSenders().forEach(ot=>{ot.track===tt&&(nt?it=!0:nt=ot)}),this.getReceivers().forEach(ot=>(ot.track===tt&&(rt?it=!0:rt=ot),ot.track===tt)),it||nt&&rt?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):nt?nt.getStats():rt?rt.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return $.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(_e){_e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(it=>this._shimmedLocalStreams[it][0])};const $=_e.RTCPeerConnection.prototype.addTrack;_e.RTCPeerConnection.prototype.addTrack=function(it,ot){if(!ot)return $.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const st=$.apply(this,arguments);return this._shimmedLocalStreams[ot.id]?this._shimmedLocalStreams[ot.id].indexOf(st)===-1&&this._shimmedLocalStreams[ot.id].push(st):this._shimmedLocalStreams[ot.id]=[ot,st],st};const et=_e.RTCPeerConnection.prototype.addStream;_e.RTCPeerConnection.prototype.addStream=function(it){this._shimmedLocalStreams=this._shimmedLocalStreams||{},it.getTracks().forEach(at=>{if(this.getSenders().find(dt=>dt.track===at))throw new DOMException("Track already exists.","InvalidAccessError")});const ot=this.getSenders();et.apply(this,arguments);const st=this.getSenders().filter(at=>ot.indexOf(at)===-1);this._shimmedLocalStreams[it.id]=[it].concat(st)};const tt=_e.RTCPeerConnection.prototype.removeStream;_e.RTCPeerConnection.prototype.removeStream=function(it){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[it.id],tt.apply(this,arguments)};const nt=_e.RTCPeerConnection.prototype.removeTrack;_e.RTCPeerConnection.prototype.removeTrack=function(it){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},it&&Object.keys(this._shimmedLocalStreams).forEach(ot=>{const st=this._shimmedLocalStreams[ot].indexOf(it);st!==-1&&this._shimmedLocalStreams[ot].splice(st,1),this._shimmedLocalStreams[ot].length===1&&delete this._shimmedLocalStreams[ot]}),nt.apply(this,arguments)}}function shimAddTrackRemoveTrack(_e,$){if(!_e.RTCPeerConnection)return;if(_e.RTCPeerConnection.prototype.addTrack&&$.version>=65)return shimAddTrackRemoveTrackWithNative(_e);const et=_e.RTCPeerConnection.prototype.getLocalStreams;_e.RTCPeerConnection.prototype.getLocalStreams=function(){const lt=et.apply(this);return this._reverseStreams=this._reverseStreams||{},lt.map(dt=>this._reverseStreams[dt.id])};const tt=_e.RTCPeerConnection.prototype.addStream;_e.RTCPeerConnection.prototype.addStream=function(lt){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},lt.getTracks().forEach(dt=>{if(this.getSenders().find(ht=>ht.track===dt))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[lt.id]){const dt=new _e.MediaStream(lt.getTracks());this._streams[lt.id]=dt,this._reverseStreams[dt.id]=lt,lt=dt}tt.apply(this,[lt])};const nt=_e.RTCPeerConnection.prototype.removeStream;_e.RTCPeerConnection.prototype.removeStream=function(lt){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},nt.apply(this,[this._streams[lt.id]||lt]),delete this._reverseStreams[this._streams[lt.id]?this._streams[lt.id].id:lt.id],delete this._streams[lt.id]},_e.RTCPeerConnection.prototype.addTrack=function(lt,dt){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const pt=[].slice.call(arguments,1);if(pt.length!==1||!pt[0].getTracks().find(mt=>mt===lt))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(mt=>mt.track===lt))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const vt=this._streams[dt.id];if(vt)vt.addTrack(lt),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const mt=new _e.MediaStream([lt]);this._streams[dt.id]=mt,this._reverseStreams[mt.id]=dt,this.addStream(mt)}return this.getSenders().find(mt=>mt.track===lt)};function rt(at,lt){let dt=lt.sdp;return Object.keys(at._reverseStreams||[]).forEach(pt=>{const ht=at._reverseStreams[pt],vt=at._streams[ht.id];dt=dt.replace(new RegExp(vt.id,"g"),ht.id)}),new RTCSessionDescription({type:lt.type,sdp:dt})}function it(at,lt){let dt=lt.sdp;return Object.keys(at._reverseStreams||[]).forEach(pt=>{const ht=at._reverseStreams[pt],vt=at._streams[ht.id];dt=dt.replace(new RegExp(ht.id,"g"),vt.id)}),new RTCSessionDescription({type:lt.type,sdp:dt})}["createOffer","createAnswer"].forEach(function(at){const lt=_e.RTCPeerConnection.prototype[at],dt={[at](){const pt=arguments;return arguments.length&&typeof arguments[0]=="function"?lt.apply(this,[vt=>{const mt=rt(this,vt);pt[0].apply(null,[mt])},vt=>{pt[1]&&pt[1].apply(null,vt)},arguments[2]]):lt.apply(this,arguments).then(vt=>rt(this,vt))}};_e.RTCPeerConnection.prototype[at]=dt[at]});const ot=_e.RTCPeerConnection.prototype.setLocalDescription;_e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?ot.apply(this,arguments):(arguments[0]=it(this,arguments[0]),ot.apply(this,arguments))};const st=Object.getOwnPropertyDescriptor(_e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(_e.RTCPeerConnection.prototype,"localDescription",{get(){const at=st.get.apply(this);return at.type===""?at:rt(this,at)}}),_e.RTCPeerConnection.prototype.removeTrack=function(lt){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!lt._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(lt._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let pt;Object.keys(this._streams).forEach(ht=>{this._streams[ht].getTracks().find(mt=>lt.track===mt)&&(pt=this._streams[ht])}),pt&&(pt.getTracks().length===1?this.removeStream(this._reverseStreams[pt.id]):pt.removeTrack(lt.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(_e,$){!_e.RTCPeerConnection&&_e.webkitRTCPeerConnection&&(_e.RTCPeerConnection=_e.webkitRTCPeerConnection),_e.RTCPeerConnection&&$.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(et){const tt=_e.RTCPeerConnection.prototype[et],nt={[et](){return arguments[0]=new(et==="addIceCandidate"?_e.RTCIceCandidate:_e.RTCSessionDescription)(arguments[0]),tt.apply(this,arguments)}};_e.RTCPeerConnection.prototype[et]=nt[et]})}function fixNegotiationNeeded(_e,$){wrapPeerConnectionEvent(_e,"negotiationneeded",et=>{const tt=et.target;if(!(($.version<72||tt.getConfiguration&&tt.getConfiguration().sdpSemantics==="plan-b")&&tt.signalingState!=="stable"))return et})}var chromeShim=Object.freeze({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetSendersWithDtmf,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats});function shimGetUserMedia$1(_e,$){const et=_e&&_e.navigator,tt=_e&&_e.MediaStreamTrack;if(et.getUserMedia=function(nt,rt,it){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),et.mediaDevices.getUserMedia(nt).then(rt,it)},!($.version>55&&"autoGainControl"in et.mediaDevices.getSupportedConstraints())){const nt=function(it,ot,st){ot in it&&!(st in it)&&(it[st]=it[ot],delete it[ot])},rt=et.mediaDevices.getUserMedia.bind(et.mediaDevices);if(et.mediaDevices.getUserMedia=function(it){return typeof it=="object"&&typeof it.audio=="object"&&(it=JSON.parse(JSON.stringify(it)),nt(it.audio,"autoGainControl","mozAutoGainControl"),nt(it.audio,"noiseSuppression","mozNoiseSuppression")),rt(it)},tt&&tt.prototype.getSettings){const it=tt.prototype.getSettings;tt.prototype.getSettings=function(){const ot=it.apply(this,arguments);return nt(ot,"mozAutoGainControl","autoGainControl"),nt(ot,"mozNoiseSuppression","noiseSuppression"),ot}}if(tt&&tt.prototype.applyConstraints){const it=tt.prototype.applyConstraints;tt.prototype.applyConstraints=function(ot){return this.kind==="audio"&&typeof ot=="object"&&(ot=JSON.parse(JSON.stringify(ot)),nt(ot,"autoGainControl","mozAutoGainControl"),nt(ot,"noiseSuppression","mozNoiseSuppression")),it.apply(this,[ot])}}}}function shimGetDisplayMedia(_e,$){_e.navigator.mediaDevices&&"getDisplayMedia"in _e.navigator.mediaDevices||_e.navigator.mediaDevices&&(_e.navigator.mediaDevices.getDisplayMedia=function(tt){if(!(tt&&tt.video)){const nt=new DOMException("getDisplayMedia without video constraints is undefined");return nt.name="NotFoundError",nt.code=8,Promise.reject(nt)}return tt.video===!0?tt.video={mediaSource:$}:tt.video.mediaSource=$,_e.navigator.mediaDevices.getUserMedia(tt)})}function shimOnTrack(_e){typeof _e=="object"&&_e.RTCTrackEvent&&"receiver"in _e.RTCTrackEvent.prototype&&!("transceiver"in _e.RTCTrackEvent.prototype)&&Object.defineProperty(_e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(_e,$){if(typeof _e!="object"||!(_e.RTCPeerConnection||_e.mozRTCPeerConnection))return;!_e.RTCPeerConnection&&_e.mozRTCPeerConnection&&(_e.RTCPeerConnection=_e.mozRTCPeerConnection),$.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(nt){const rt=_e.RTCPeerConnection.prototype[nt],it={[nt](){return arguments[0]=new(nt==="addIceCandidate"?_e.RTCIceCandidate:_e.RTCSessionDescription)(arguments[0]),rt.apply(this,arguments)}};_e.RTCPeerConnection.prototype[nt]=it[nt]});const et={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},tt=_e.RTCPeerConnection.prototype.getStats;_e.RTCPeerConnection.prototype.getStats=function(){const[rt,it,ot]=arguments;return tt.apply(this,[rt||null]).then(st=>{if($.version<53&&!it)try{st.forEach(at=>{at.type=et[at.type]||at.type})}catch(at){if(at.name!=="TypeError")throw at;st.forEach((lt,dt)=>{st.set(dt,Object.assign({},lt,{type:et[lt.type]||lt.type}))})}return st}).then(it,ot)}}function shimSenderGetStats(_e){if(!(typeof _e=="object"&&_e.RTCPeerConnection&&_e.RTCRtpSender)||_e.RTCRtpSender&&"getStats"in _e.RTCRtpSender.prototype)return;const $=_e.RTCPeerConnection.prototype.getSenders;$&&(_e.RTCPeerConnection.prototype.getSenders=function(){const nt=$.apply(this,[]);return nt.forEach(rt=>rt._pc=this),nt});const et=_e.RTCPeerConnection.prototype.addTrack;et&&(_e.RTCPeerConnection.prototype.addTrack=function(){const nt=et.apply(this,arguments);return nt._pc=this,nt}),_e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(_e){if(!(typeof _e=="object"&&_e.RTCPeerConnection&&_e.RTCRtpSender)||_e.RTCRtpSender&&"getStats"in _e.RTCRtpReceiver.prototype)return;const $=_e.RTCPeerConnection.prototype.getReceivers;$&&(_e.RTCPeerConnection.prototype.getReceivers=function(){const tt=$.apply(this,[]);return tt.forEach(nt=>nt._pc=this),tt}),wrapPeerConnectionEvent(_e,"track",et=>(et.receiver._pc=et.srcElement,et)),_e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(_e){!_e.RTCPeerConnection||"removeStream"in _e.RTCPeerConnection.prototype||(_e.RTCPeerConnection.prototype.removeStream=function(et){deprecated("removeStream","removeTrack"),this.getSenders().forEach(tt=>{tt.track&&et.getTracks().includes(tt.track)&&this.removeTrack(tt)})})}function shimRTCDataChannel(_e){_e.DataChannel&&!_e.RTCDataChannel&&(_e.RTCDataChannel=_e.DataChannel)}function shimAddTransceiver(_e){if(!(typeof _e=="object"&&_e.RTCPeerConnection))return;const $=_e.RTCPeerConnection.prototype.addTransceiver;$&&(_e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let tt=arguments[1]&&arguments[1].sendEncodings;tt===void 0&&(tt=[]),tt=[...tt];const nt=tt.length>0;nt&&tt.forEach(it=>{if("rid"in it&&!/^[a-z0-9]{0,16}$/i.test(it.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in it&&!(parseFloat(it.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in it&&!(parseFloat(it.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const rt=$.apply(this,arguments);if(nt){const{sender:it}=rt,ot=it.getParameters();(!("encodings"in ot)||ot.encodings.length===1&&Object.keys(ot.encodings[0]).length===0)&&(ot.encodings=tt,it.sendEncodings=tt,this.setParametersPromises.push(it.setParameters(ot).then(()=>{delete it.sendEncodings}).catch(()=>{delete it.sendEncodings})))}return rt})}function shimGetParameters(_e){if(!(typeof _e=="object"&&_e.RTCRtpSender))return;const $=_e.RTCRtpSender.prototype.getParameters;$&&(_e.RTCRtpSender.prototype.getParameters=function(){const tt=$.apply(this,arguments);return"encodings"in tt||(tt.encodings=[].concat(this.sendEncodings||[{}])),tt})}function shimCreateOffer(_e){if(!(typeof _e=="object"&&_e.RTCPeerConnection))return;const $=_e.RTCPeerConnection.prototype.createOffer;_e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>$.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):$.apply(this,arguments)}}function shimCreateAnswer(_e){if(!(typeof _e=="object"&&_e.RTCPeerConnection))return;const $=_e.RTCPeerConnection.prototype.createAnswer;_e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>$.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):$.apply(this,arguments)}}var firefoxShim=Object.freeze({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats});function shimLocalStreamsAPI(_e){if(!(typeof _e!="object"||!_e.RTCPeerConnection)){if("getLocalStreams"in _e.RTCPeerConnection.prototype||(_e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in _e.RTCPeerConnection.prototype)){const $=_e.RTCPeerConnection.prototype.addTrack;_e.RTCPeerConnection.prototype.addStream=function(tt){this._localStreams||(this._localStreams=[]),this._localStreams.includes(tt)||this._localStreams.push(tt),tt.getAudioTracks().forEach(nt=>$.call(this,nt,tt)),tt.getVideoTracks().forEach(nt=>$.call(this,nt,tt))},_e.RTCPeerConnection.prototype.addTrack=function(tt){for(var nt=arguments.length,rt=new Array(nt>1?nt-1:0),it=1;it<nt;it++)rt[it-1]=arguments[it];return rt&&rt.forEach(ot=>{this._localStreams?this._localStreams.includes(ot)||this._localStreams.push(ot):this._localStreams=[ot]}),$.apply(this,arguments)}}"removeStream"in _e.RTCPeerConnection.prototype||(_e.RTCPeerConnection.prototype.removeStream=function(et){this._localStreams||(this._localStreams=[]);const tt=this._localStreams.indexOf(et);if(tt===-1)return;this._localStreams.splice(tt,1);const nt=et.getTracks();this.getSenders().forEach(rt=>{nt.includes(rt.track)&&this.removeTrack(rt)})})}}function shimRemoteStreamsAPI(_e){if(!(typeof _e!="object"||!_e.RTCPeerConnection)&&("getRemoteStreams"in _e.RTCPeerConnection.prototype||(_e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in _e.RTCPeerConnection.prototype))){Object.defineProperty(_e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(et){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=et),this.addEventListener("track",this._onaddstreampoly=tt=>{tt.streams.forEach(nt=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(nt))return;this._remoteStreams.push(nt);const rt=new Event("addstream");rt.stream=nt,this.dispatchEvent(rt)})})}});const $=_e.RTCPeerConnection.prototype.setRemoteDescription;_e.RTCPeerConnection.prototype.setRemoteDescription=function(){const tt=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(nt){nt.streams.forEach(rt=>{if(tt._remoteStreams||(tt._remoteStreams=[]),tt._remoteStreams.indexOf(rt)>=0)return;tt._remoteStreams.push(rt);const it=new Event("addstream");it.stream=rt,tt.dispatchEvent(it)})}),$.apply(tt,arguments)}}}function shimCallbacksAPI(_e){if(typeof _e!="object"||!_e.RTCPeerConnection)return;const $=_e.RTCPeerConnection.prototype,et=$.createOffer,tt=$.createAnswer,nt=$.setLocalDescription,rt=$.setRemoteDescription,it=$.addIceCandidate;$.createOffer=function(at,lt){const dt=arguments.length>=2?arguments[2]:arguments[0],pt=et.apply(this,[dt]);return lt?(pt.then(at,lt),Promise.resolve()):pt},$.createAnswer=function(at,lt){const dt=arguments.length>=2?arguments[2]:arguments[0],pt=tt.apply(this,[dt]);return lt?(pt.then(at,lt),Promise.resolve()):pt};let ot=function(st,at,lt){const dt=nt.apply(this,[st]);return lt?(dt.then(at,lt),Promise.resolve()):dt};$.setLocalDescription=ot,ot=function(st,at,lt){const dt=rt.apply(this,[st]);return lt?(dt.then(at,lt),Promise.resolve()):dt},$.setRemoteDescription=ot,ot=function(st,at,lt){const dt=it.apply(this,[st]);return lt?(dt.then(at,lt),Promise.resolve()):dt},$.addIceCandidate=ot}function shimGetUserMedia(_e){const $=_e&&_e.navigator;if($.mediaDevices&&$.mediaDevices.getUserMedia){const et=$.mediaDevices,tt=et.getUserMedia.bind(et);$.mediaDevices.getUserMedia=nt=>tt(shimConstraints(nt))}!$.getUserMedia&&$.mediaDevices&&$.mediaDevices.getUserMedia&&($.getUserMedia=(function(tt,nt,rt){$.mediaDevices.getUserMedia(tt).then(nt,rt)}).bind($))}function shimConstraints(_e){return _e&&_e.video!==void 0?Object.assign({},_e,{video:compactObject(_e.video)}):_e}function shimRTCIceServerUrls(_e){if(!_e.RTCPeerConnection)return;const $=_e.RTCPeerConnection;_e.RTCPeerConnection=function(tt,nt){if(tt&&tt.iceServers){const rt=[];for(let it=0;it<tt.iceServers.length;it++){let ot=tt.iceServers[it];ot.urls===void 0&&ot.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),ot=JSON.parse(JSON.stringify(ot)),ot.urls=ot.url,delete ot.url,rt.push(ot)):rt.push(tt.iceServers[it])}tt.iceServers=rt}return new $(tt,nt)},_e.RTCPeerConnection.prototype=$.prototype,"generateCertificate"in $&&Object.defineProperty(_e.RTCPeerConnection,"generateCertificate",{get(){return $.generateCertificate}})}function shimTrackEventTransceiver(_e){typeof _e=="object"&&_e.RTCTrackEvent&&"receiver"in _e.RTCTrackEvent.prototype&&!("transceiver"in _e.RTCTrackEvent.prototype)&&Object.defineProperty(_e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(_e){const $=_e.RTCPeerConnection.prototype.createOffer;_e.RTCPeerConnection.prototype.createOffer=function(tt){if(tt){typeof tt.offerToReceiveAudio<"u"&&(tt.offerToReceiveAudio=!!tt.offerToReceiveAudio);const nt=this.getTransceivers().find(it=>it.receiver.track.kind==="audio");tt.offerToReceiveAudio===!1&&nt?nt.direction==="sendrecv"?nt.setDirection?nt.setDirection("sendonly"):nt.direction="sendonly":nt.direction==="recvonly"&&(nt.setDirection?nt.setDirection("inactive"):nt.direction="inactive"):tt.offerToReceiveAudio===!0&&!nt&&this.addTransceiver("audio",{direction:"recvonly"}),typeof tt.offerToReceiveVideo<"u"&&(tt.offerToReceiveVideo=!!tt.offerToReceiveVideo);const rt=this.getTransceivers().find(it=>it.receiver.track.kind==="video");tt.offerToReceiveVideo===!1&&rt?rt.direction==="sendrecv"?rt.setDirection?rt.setDirection("sendonly"):rt.direction="sendonly":rt.direction==="recvonly"&&(rt.setDirection?rt.setDirection("inactive"):rt.direction="inactive"):tt.offerToReceiveVideo===!0&&!rt&&this.addTransceiver("video",{direction:"recvonly"})}return $.apply(this,arguments)}}function shimAudioContext(_e){typeof _e!="object"||_e.AudioContext||(_e.AudioContext=_e.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver}),sdp$1={exports:{}},hasRequiredSdp;function requireSdp(){return hasRequiredSdp||(hasRequiredSdp=1,function(_e){const $={};$.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},$.localCName=$.generateIdentifier(),$.splitLines=function(et){return et.trim().split(`
`).map(tt=>tt.trim())},$.splitSections=function(et){return et.split(`
m=`).map((nt,rt)=>(rt>0?"m="+nt:nt).trim()+`\r
`)},$.getDescription=function(et){const tt=$.splitSections(et);return tt&&tt[0]},$.getMediaSections=function(et){const tt=$.splitSections(et);return tt.shift(),tt},$.matchPrefix=function(et,tt){return $.splitLines(et).filter(nt=>nt.indexOf(tt)===0)},$.parseCandidate=function(et){let tt;et.indexOf("a=candidate:")===0?tt=et.substring(12).split(" "):tt=et.substring(10).split(" ");const nt={foundation:tt[0],component:{1:"rtp",2:"rtcp"}[tt[1]]||tt[1],protocol:tt[2].toLowerCase(),priority:parseInt(tt[3],10),ip:tt[4],address:tt[4],port:parseInt(tt[5],10),type:tt[7]};for(let rt=8;rt<tt.length;rt+=2)switch(tt[rt]){case"raddr":nt.relatedAddress=tt[rt+1];break;case"rport":nt.relatedPort=parseInt(tt[rt+1],10);break;case"tcptype":nt.tcpType=tt[rt+1];break;case"ufrag":nt.ufrag=tt[rt+1],nt.usernameFragment=tt[rt+1];break;default:nt[tt[rt]]===void 0&&(nt[tt[rt]]=tt[rt+1]);break}return nt},$.writeCandidate=function(et){const tt=[];tt.push(et.foundation);const nt=et.component;nt==="rtp"?tt.push(1):nt==="rtcp"?tt.push(2):tt.push(nt),tt.push(et.protocol.toUpperCase()),tt.push(et.priority),tt.push(et.address||et.ip),tt.push(et.port);const rt=et.type;return tt.push("typ"),tt.push(rt),rt!=="host"&&et.relatedAddress&&et.relatedPort&&(tt.push("raddr"),tt.push(et.relatedAddress),tt.push("rport"),tt.push(et.relatedPort)),et.tcpType&&et.protocol.toLowerCase()==="tcp"&&(tt.push("tcptype"),tt.push(et.tcpType)),(et.usernameFragment||et.ufrag)&&(tt.push("ufrag"),tt.push(et.usernameFragment||et.ufrag)),"candidate:"+tt.join(" ")},$.parseIceOptions=function(et){return et.substring(14).split(" ")},$.parseRtpMap=function(et){let tt=et.substring(9).split(" ");const nt={payloadType:parseInt(tt.shift(),10)};return tt=tt[0].split("/"),nt.name=tt[0],nt.clockRate=parseInt(tt[1],10),nt.channels=tt.length===3?parseInt(tt[2],10):1,nt.numChannels=nt.channels,nt},$.writeRtpMap=function(et){let tt=et.payloadType;et.preferredPayloadType!==void 0&&(tt=et.preferredPayloadType);const nt=et.channels||et.numChannels||1;return"a=rtpmap:"+tt+" "+et.name+"/"+et.clockRate+(nt!==1?"/"+nt:"")+`\r
`},$.parseExtmap=function(et){const tt=et.substring(9).split(" ");return{id:parseInt(tt[0],10),direction:tt[0].indexOf("/")>0?tt[0].split("/")[1]:"sendrecv",uri:tt[1],attributes:tt.slice(2).join(" ")}},$.writeExtmap=function(et){return"a=extmap:"+(et.id||et.preferredId)+(et.direction&&et.direction!=="sendrecv"?"/"+et.direction:"")+" "+et.uri+(et.attributes?" "+et.attributes:"")+`\r
`},$.parseFmtp=function(et){const tt={};let nt;const rt=et.substring(et.indexOf(" ")+1).split(";");for(let it=0;it<rt.length;it++)nt=rt[it].trim().split("="),tt[nt[0].trim()]=nt[1];return tt},$.writeFmtp=function(et){let tt="",nt=et.payloadType;if(et.preferredPayloadType!==void 0&&(nt=et.preferredPayloadType),et.parameters&&Object.keys(et.parameters).length){const rt=[];Object.keys(et.parameters).forEach(it=>{et.parameters[it]!==void 0?rt.push(it+"="+et.parameters[it]):rt.push(it)}),tt+="a=fmtp:"+nt+" "+rt.join(";")+`\r
`}return tt},$.parseRtcpFb=function(et){const tt=et.substring(et.indexOf(" ")+1).split(" ");return{type:tt.shift(),parameter:tt.join(" ")}},$.writeRtcpFb=function(et){let tt="",nt=et.payloadType;return et.preferredPayloadType!==void 0&&(nt=et.preferredPayloadType),et.rtcpFeedback&&et.rtcpFeedback.length&&et.rtcpFeedback.forEach(rt=>{tt+="a=rtcp-fb:"+nt+" "+rt.type+(rt.parameter&&rt.parameter.length?" "+rt.parameter:"")+`\r
`}),tt},$.parseSsrcMedia=function(et){const tt=et.indexOf(" "),nt={ssrc:parseInt(et.substring(7,tt),10)},rt=et.indexOf(":",tt);return rt>-1?(nt.attribute=et.substring(tt+1,rt),nt.value=et.substring(rt+1)):nt.attribute=et.substring(tt+1),nt},$.parseSsrcGroup=function(et){const tt=et.substring(13).split(" ");return{semantics:tt.shift(),ssrcs:tt.map(nt=>parseInt(nt,10))}},$.getMid=function(et){const tt=$.matchPrefix(et,"a=mid:")[0];if(tt)return tt.substring(6)},$.parseFingerprint=function(et){const tt=et.substring(14).split(" ");return{algorithm:tt[0].toLowerCase(),value:tt[1].toUpperCase()}},$.getDtlsParameters=function(et,tt){return{role:"auto",fingerprints:$.matchPrefix(et+tt,"a=fingerprint:").map($.parseFingerprint)}},$.writeDtlsParameters=function(et,tt){let nt="a=setup:"+tt+`\r
`;return et.fingerprints.forEach(rt=>{nt+="a=fingerprint:"+rt.algorithm+" "+rt.value+`\r
`}),nt},$.parseCryptoLine=function(et){const tt=et.substring(9).split(" ");return{tag:parseInt(tt[0],10),cryptoSuite:tt[1],keyParams:tt[2],sessionParams:tt.slice(3)}},$.writeCryptoLine=function(et){return"a=crypto:"+et.tag+" "+et.cryptoSuite+" "+(typeof et.keyParams=="object"?$.writeCryptoKeyParams(et.keyParams):et.keyParams)+(et.sessionParams?" "+et.sessionParams.join(" "):"")+`\r
`},$.parseCryptoKeyParams=function(et){if(et.indexOf("inline:")!==0)return null;const tt=et.substring(7).split("|");return{keyMethod:"inline",keySalt:tt[0],lifeTime:tt[1],mkiValue:tt[2]?tt[2].split(":")[0]:void 0,mkiLength:tt[2]?tt[2].split(":")[1]:void 0}},$.writeCryptoKeyParams=function(et){return et.keyMethod+":"+et.keySalt+(et.lifeTime?"|"+et.lifeTime:"")+(et.mkiValue&&et.mkiLength?"|"+et.mkiValue+":"+et.mkiLength:"")},$.getCryptoParameters=function(et,tt){return $.matchPrefix(et+tt,"a=crypto:").map($.parseCryptoLine)},$.getIceParameters=function(et,tt){const nt=$.matchPrefix(et+tt,"a=ice-ufrag:")[0],rt=$.matchPrefix(et+tt,"a=ice-pwd:")[0];return nt&&rt?{usernameFragment:nt.substring(12),password:rt.substring(10)}:null},$.writeIceParameters=function(et){let tt="a=ice-ufrag:"+et.usernameFragment+`\r
a=ice-pwd:`+et.password+`\r
`;return et.iceLite&&(tt+=`a=ice-lite\r
`),tt},$.parseRtpParameters=function(et){const tt={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},rt=$.splitLines(et)[0].split(" ");tt.profile=rt[2];for(let ot=3;ot<rt.length;ot++){const st=rt[ot],at=$.matchPrefix(et,"a=rtpmap:"+st+" ")[0];if(at){const lt=$.parseRtpMap(at),dt=$.matchPrefix(et,"a=fmtp:"+st+" ");switch(lt.parameters=dt.length?$.parseFmtp(dt[0]):{},lt.rtcpFeedback=$.matchPrefix(et,"a=rtcp-fb:"+st+" ").map($.parseRtcpFb),tt.codecs.push(lt),lt.name.toUpperCase()){case"RED":case"ULPFEC":tt.fecMechanisms.push(lt.name.toUpperCase());break}}}$.matchPrefix(et,"a=extmap:").forEach(ot=>{tt.headerExtensions.push($.parseExtmap(ot))});const it=$.matchPrefix(et,"a=rtcp-fb:* ").map($.parseRtcpFb);return tt.codecs.forEach(ot=>{it.forEach(st=>{ot.rtcpFeedback.find(lt=>lt.type===st.type&&lt.parameter===st.parameter)||ot.rtcpFeedback.push(st)})}),tt},$.writeRtpDescription=function(et,tt){let nt="";nt+="m="+et+" ",nt+=tt.codecs.length>0?"9":"0",nt+=" "+(tt.profile||"UDP/TLS/RTP/SAVPF")+" ",nt+=tt.codecs.map(it=>it.preferredPayloadType!==void 0?it.preferredPayloadType:it.payloadType).join(" ")+`\r
`,nt+=`c=IN IP4 0.0.0.0\r
`,nt+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,tt.codecs.forEach(it=>{nt+=$.writeRtpMap(it),nt+=$.writeFmtp(it),nt+=$.writeRtcpFb(it)});let rt=0;return tt.codecs.forEach(it=>{it.maxptime>rt&&(rt=it.maxptime)}),rt>0&&(nt+="a=maxptime:"+rt+`\r
`),tt.headerExtensions&&tt.headerExtensions.forEach(it=>{nt+=$.writeExtmap(it)}),nt},$.parseRtpEncodingParameters=function(et){const tt=[],nt=$.parseRtpParameters(et),rt=nt.fecMechanisms.indexOf("RED")!==-1,it=nt.fecMechanisms.indexOf("ULPFEC")!==-1,ot=$.matchPrefix(et,"a=ssrc:").map(pt=>$.parseSsrcMedia(pt)).filter(pt=>pt.attribute==="cname"),st=ot.length>0&&ot[0].ssrc;let at;const lt=$.matchPrefix(et,"a=ssrc-group:FID").map(pt=>pt.substring(17).split(" ").map(vt=>parseInt(vt,10)));lt.length>0&&lt[0].length>1&&lt[0][0]===st&&(at=lt[0][1]),nt.codecs.forEach(pt=>{if(pt.name.toUpperCase()==="RTX"&&pt.parameters.apt){let ht={ssrc:st,codecPayloadType:parseInt(pt.parameters.apt,10)};st&&at&&(ht.rtx={ssrc:at}),tt.push(ht),rt&&(ht=JSON.parse(JSON.stringify(ht)),ht.fec={ssrc:st,mechanism:it?"red+ulpfec":"red"},tt.push(ht))}}),tt.length===0&&st&&tt.push({ssrc:st});let dt=$.matchPrefix(et,"b=");return dt.length&&(dt[0].indexOf("b=TIAS:")===0?dt=parseInt(dt[0].substring(7),10):dt[0].indexOf("b=AS:")===0?dt=parseInt(dt[0].substring(5),10)*1e3*.95-50*40*8:dt=void 0,tt.forEach(pt=>{pt.maxBitrate=dt})),tt},$.parseRtcpParameters=function(et){const tt={},nt=$.matchPrefix(et,"a=ssrc:").map(ot=>$.parseSsrcMedia(ot)).filter(ot=>ot.attribute==="cname")[0];nt&&(tt.cname=nt.value,tt.ssrc=nt.ssrc);const rt=$.matchPrefix(et,"a=rtcp-rsize");tt.reducedSize=rt.length>0,tt.compound=rt.length===0;const it=$.matchPrefix(et,"a=rtcp-mux");return tt.mux=it.length>0,tt},$.writeRtcpParameters=function(et){let tt="";return et.reducedSize&&(tt+=`a=rtcp-rsize\r
`),et.mux&&(tt+=`a=rtcp-mux\r
`),et.ssrc!==void 0&&et.cname&&(tt+="a=ssrc:"+et.ssrc+" cname:"+et.cname+`\r
`),tt},$.parseMsid=function(et){let tt;const nt=$.matchPrefix(et,"a=msid:");if(nt.length===1)return tt=nt[0].substring(7).split(" "),{stream:tt[0],track:tt[1]};const rt=$.matchPrefix(et,"a=ssrc:").map(it=>$.parseSsrcMedia(it)).filter(it=>it.attribute==="msid");if(rt.length>0)return tt=rt[0].value.split(" "),{stream:tt[0],track:tt[1]}},$.parseSctpDescription=function(et){const tt=$.parseMLine(et),nt=$.matchPrefix(et,"a=max-message-size:");let rt;nt.length>0&&(rt=parseInt(nt[0].substring(19),10)),isNaN(rt)&&(rt=65536);const it=$.matchPrefix(et,"a=sctp-port:");if(it.length>0)return{port:parseInt(it[0].substring(12),10),protocol:tt.fmt,maxMessageSize:rt};const ot=$.matchPrefix(et,"a=sctpmap:");if(ot.length>0){const st=ot[0].substring(10).split(" ");return{port:parseInt(st[0],10),protocol:st[1],maxMessageSize:rt}}},$.writeSctpDescription=function(et,tt){let nt=[];return et.protocol!=="DTLS/SCTP"?nt=["m="+et.kind+" 9 "+et.protocol+" "+tt.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+tt.port+`\r
`]:nt=["m="+et.kind+" 9 "+et.protocol+" "+tt.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+tt.port+" "+tt.protocol+` 65535\r
`],tt.maxMessageSize!==void 0&&nt.push("a=max-message-size:"+tt.maxMessageSize+`\r
`),nt.join("")},$.generateSessionId=function(){return Math.random().toString().substr(2,22)},$.writeSessionBoilerplate=function(et,tt,nt){let rt;const it=tt!==void 0?tt:2;return et?rt=et:rt=$.generateSessionId(),`v=0\r
o=`+(nt||"thisisadapterortc")+" "+rt+" "+it+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},$.getDirection=function(et,tt){const nt=$.splitLines(et);for(let rt=0;rt<nt.length;rt++)switch(nt[rt]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return nt[rt].substring(2)}return tt?$.getDirection(tt):"sendrecv"},$.getKind=function(et){return $.splitLines(et)[0].split(" ")[0].substring(2)},$.isRejected=function(et){return et.split(" ",2)[1]==="0"},$.parseMLine=function(et){const nt=$.splitLines(et)[0].substring(2).split(" ");return{kind:nt[0],port:parseInt(nt[1],10),protocol:nt[2],fmt:nt.slice(3).join(" ")}},$.parseOLine=function(et){const nt=$.matchPrefix(et,"o=")[0].substring(2).split(" ");return{username:nt[0],sessionId:nt[1],sessionVersion:parseInt(nt[2],10),netType:nt[3],addressType:nt[4],address:nt[5]}},$.isValidSDP=function(et){if(typeof et!="string"||et.length===0)return!1;const tt=$.splitLines(et);for(let nt=0;nt<tt.length;nt++)if(tt[nt].length<2||tt[nt].charAt(1)!=="=")return!1;return!0},_e.exports=$}(sdp$1)),sdp$1.exports}var sdpExports=requireSdp(),SDPUtils=getDefaultExportFromCjs(sdpExports),sdp=_mergeNamespaces$1({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(_e){if(!_e.RTCIceCandidate||_e.RTCIceCandidate&&"foundation"in _e.RTCIceCandidate.prototype)return;const $=_e.RTCIceCandidate;_e.RTCIceCandidate=function(tt){if(typeof tt=="object"&&tt.candidate&&tt.candidate.indexOf("a=")===0&&(tt=JSON.parse(JSON.stringify(tt)),tt.candidate=tt.candidate.substring(2)),tt.candidate&&tt.candidate.length){const nt=new $(tt),rt=SDPUtils.parseCandidate(tt.candidate);for(const it in rt)it in nt||Object.defineProperty(nt,it,{value:rt[it]});return nt.toJSON=function(){return{candidate:nt.candidate,sdpMid:nt.sdpMid,sdpMLineIndex:nt.sdpMLineIndex,usernameFragment:nt.usernameFragment}},nt}return new $(tt)},_e.RTCIceCandidate.prototype=$.prototype,wrapPeerConnectionEvent(_e,"icecandidate",et=>(et.candidate&&Object.defineProperty(et,"candidate",{value:new _e.RTCIceCandidate(et.candidate),writable:"false"}),et))}function shimRTCIceCandidateRelayProtocol(_e){!_e.RTCIceCandidate||_e.RTCIceCandidate&&"relayProtocol"in _e.RTCIceCandidate.prototype||wrapPeerConnectionEvent(_e,"icecandidate",$=>{if($.candidate){const et=SDPUtils.parseCandidate($.candidate.candidate);et.type==="relay"&&($.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[et.priority>>24])}return $})}function shimMaxMessageSize(_e,$){if(!_e.RTCPeerConnection)return;"sctp"in _e.RTCPeerConnection.prototype||Object.defineProperty(_e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const et=function(ot){if(!ot||!ot.sdp)return!1;const st=SDPUtils.splitSections(ot.sdp);return st.shift(),st.some(at=>{const lt=SDPUtils.parseMLine(at);return lt&&lt.kind==="application"&&lt.protocol.indexOf("SCTP")!==-1})},tt=function(ot){const st=ot.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(st===null||st.length<2)return-1;const at=parseInt(st[1],10);return at!==at?-1:at},nt=function(ot){let st=65536;return $.browser==="firefox"&&($.version<57?ot===-1?st=16384:st=2147483637:$.version<60?st=$.version===57?65535:65536:st=2147483637),st},rt=function(ot,st){let at=65536;$.browser==="firefox"&&$.version===57&&(at=65535);const lt=SDPUtils.matchPrefix(ot.sdp,"a=max-message-size:");return lt.length>0?at=parseInt(lt[0].substring(19),10):$.browser==="firefox"&&st!==-1&&(at=2147483637),at},it=_e.RTCPeerConnection.prototype.setRemoteDescription;_e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,$.browser==="chrome"&&$.version>=76){const{sdpSemantics:st}=this.getConfiguration();st==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(et(arguments[0])){const st=tt(arguments[0]),at=nt(st),lt=rt(arguments[0],st);let dt;at===0&&lt===0?dt=Number.POSITIVE_INFINITY:at===0||lt===0?dt=Math.max(at,lt):dt=Math.min(at,lt);const pt={};Object.defineProperty(pt,"maxMessageSize",{get(){return dt}}),this._sctp=pt}return it.apply(this,arguments)}}function shimSendThrowTypeError(_e){if(!(_e.RTCPeerConnection&&"createDataChannel"in _e.RTCPeerConnection.prototype))return;function $(tt,nt){const rt=tt.send;tt.send=function(){const ot=arguments[0],st=ot.length||ot.size||ot.byteLength;if(tt.readyState==="open"&&nt.sctp&&st>nt.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+nt.sctp.maxMessageSize+" bytes)");return rt.apply(tt,arguments)}}const et=_e.RTCPeerConnection.prototype.createDataChannel;_e.RTCPeerConnection.prototype.createDataChannel=function(){const nt=et.apply(this,arguments);return $(nt,this),nt},wrapPeerConnectionEvent(_e,"datachannel",tt=>($(tt.channel,tt.target),tt))}function shimConnectionState(_e){if(!_e.RTCPeerConnection||"connectionState"in _e.RTCPeerConnection.prototype)return;const $=_e.RTCPeerConnection.prototype;Object.defineProperty($,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty($,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(et){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),et&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=et)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(et=>{const tt=$[et];$[et]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=nt=>{const rt=nt.target;if(rt._lastConnectionState!==rt.connectionState){rt._lastConnectionState=rt.connectionState;const it=new Event("connectionstatechange",nt);rt.dispatchEvent(it)}return nt},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),tt.apply(this,arguments)}})}function removeExtmapAllowMixed(_e,$){if(!_e.RTCPeerConnection||$.browser==="chrome"&&$.version>=71||$.browser==="safari"&&$._safariVersion>=13.1)return;const et=_e.RTCPeerConnection.prototype.setRemoteDescription;_e.RTCPeerConnection.prototype.setRemoteDescription=function(nt){if(nt&&nt.sdp&&nt.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const rt=nt.sdp.split(`
`).filter(it=>it.trim()!=="a=extmap-allow-mixed").join(`
`);_e.RTCSessionDescription&&nt instanceof _e.RTCSessionDescription?arguments[0]=new _e.RTCSessionDescription({type:nt.type,sdp:rt}):nt.sdp=rt}return et.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(_e,$){if(!(_e.RTCPeerConnection&&_e.RTCPeerConnection.prototype))return;const et=_e.RTCPeerConnection.prototype.addIceCandidate;!et||et.length===0||(_e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?($.browser==="chrome"&&$.version<78||$.browser==="firefox"&&$.version<68||$.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():et.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(_e,$){if(!(_e.RTCPeerConnection&&_e.RTCPeerConnection.prototype))return;const et=_e.RTCPeerConnection.prototype.setLocalDescription;!et||et.length===0||(_e.RTCPeerConnection.prototype.setLocalDescription=function(){let nt=arguments[0]||{};if(typeof nt!="object"||nt.type&&nt.sdp)return et.apply(this,arguments);if(nt={type:nt.type,sdp:nt.sdp},!nt.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":nt.type="offer";break;default:nt.type="answer";break}return nt.sdp||nt.type!=="offer"&&nt.type!=="answer"?et.apply(this,[nt]):(nt.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(it=>et.apply(this,[it]))})}var commonShim=Object.freeze({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError});function adapterFactory(){let{window:_e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const et=log,tt=detectBrowser(_e),nt={browserDetails:tt,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(tt.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!$.shimChrome)return et("Chrome shim is not included in this adapter release."),nt;if(tt.version===null)return et("Chrome shim can not determine version, not shimming."),nt;et("adapter.js shimming chrome."),nt.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(_e,tt),shimParameterlessSetLocalDescription(_e),shimGetUserMedia$2(_e,tt),shimMediaStream(_e),shimPeerConnection$1(_e,tt),shimOnTrack$1(_e),shimAddTrackRemoveTrack(_e,tt),shimGetSendersWithDtmf(_e),shimSenderReceiverGetStats(_e),fixNegotiationNeeded(_e,tt),shimRTCIceCandidate(_e),shimRTCIceCandidateRelayProtocol(_e),shimConnectionState(_e),shimMaxMessageSize(_e,tt),shimSendThrowTypeError(_e),removeExtmapAllowMixed(_e,tt);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!$.shimFirefox)return et("Firefox shim is not included in this adapter release."),nt;et("adapter.js shimming firefox."),nt.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(_e,tt),shimParameterlessSetLocalDescription(_e),shimGetUserMedia$1(_e,tt),shimPeerConnection(_e,tt),shimOnTrack(_e),shimRemoveStream(_e),shimSenderGetStats(_e),shimReceiverGetStats(_e),shimRTCDataChannel(_e),shimAddTransceiver(_e),shimGetParameters(_e),shimCreateOffer(_e),shimCreateAnswer(_e),shimRTCIceCandidate(_e),shimConnectionState(_e),shimMaxMessageSize(_e,tt),shimSendThrowTypeError(_e);break;case"safari":if(!safariShim||!$.shimSafari)return et("Safari shim is not included in this adapter release."),nt;et("adapter.js shimming safari."),nt.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(_e,tt),shimParameterlessSetLocalDescription(_e),shimRTCIceServerUrls(_e),shimCreateOfferLegacy(_e),shimCallbacksAPI(_e),shimLocalStreamsAPI(_e),shimRemoteStreamsAPI(_e),shimTrackEventTransceiver(_e),shimGetUserMedia(_e),shimAudioContext(_e),shimRTCIceCandidate(_e),shimRTCIceCandidateRelayProtocol(_e),shimMaxMessageSize(_e,tt),shimSendThrowTypeError(_e),removeExtmapAllowMixed(_e,tt);break;default:et("Unsupported browser!");break}return nt}adapterFactory({window:typeof window>"u"?void 0:window});const DECRYPTION_FAILURE_TOLERANCE=10,E2EE_FLAG="lk_e2ee",SALT="LKFrameEncryptionKey",KEY_PROVIDER_DEFAULTS={sharedKey:!1,ratchetSalt:SALT,ratchetWindowSize:8,failureTolerance:DECRYPTION_FAILURE_TOLERANCE,keyringSize:16};var KeyProviderEvent;(function(_e){_e.SetKey="setKey",_e.RatchetRequest="ratchetRequest",_e.KeyRatcheted="keyRatcheted"})(KeyProviderEvent||(KeyProviderEvent={}));var KeyHandlerEvent;(function(_e){_e.KeyRatcheted="keyRatcheted"})(KeyHandlerEvent||(KeyHandlerEvent={}));var EncryptionEvent;(function(_e){_e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",_e.EncryptionError="encryptionError"})(EncryptionEvent||(EncryptionEvent={}));var CryptorEvent;(function(_e){_e.Error="cryptorError"})(CryptorEvent||(CryptorEvent={}));function isE2EESupported(){return isInsertableStreamSupported()||isScriptTransformSupported()}function isScriptTransformSupported(){return typeof window.RTCRtpScriptTransform<"u"}function isInsertableStreamSupported(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class BaseKeyProvider extends eventsExports.EventEmitter{constructor(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(et,tt,nt)=>{livekitLogger.debug("key ratcheted event received",{ratchetResult:et,participantId:tt,keyIndex:nt})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},KEY_PROVIDER_DEFAULTS),$),this.on(KeyProviderEvent.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey($,et,tt){const nt={key:$,participantIdentity:et,keyIndex:tt};if(!this.options.sharedKey&&!et)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(et??"shared","-").concat(tt??0),nt),this.emit(KeyProviderEvent.SetKey,nt)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey($,et){this.emit(KeyProviderEvent.RatchetRequest,$,et)}}class LivekitError extends Error{constructor($,et){super(et||"an error has occured"),this.name="LiveKitError",this.code=$}}var ConnectionErrorReason;(function(_e){_e[_e.NotAllowed=0]="NotAllowed",_e[_e.ServerUnreachable=1]="ServerUnreachable",_e[_e.InternalError=2]="InternalError",_e[_e.Cancelled=3]="Cancelled",_e[_e.LeaveRequest=4]="LeaveRequest",_e[_e.Timeout=5]="Timeout"})(ConnectionErrorReason||(ConnectionErrorReason={}));class ConnectionError extends LivekitError{constructor($,et,tt,nt){super(1,$),this.name="ConnectionError",this.status=tt,this.reason=et,this.context=nt,this.reasonName=ConnectionErrorReason[et]}}class DeviceUnsupportedError extends LivekitError{constructor($){super(21,$??"device is unsupported"),this.name="DeviceUnsupportedError"}}class TrackInvalidError extends LivekitError{constructor($){super(20,$??"track is invalid"),this.name="TrackInvalidError"}}class UnsupportedServer extends LivekitError{constructor($){super(10,$??"unsupported server"),this.name="UnsupportedServer"}}class UnexpectedConnectionState extends LivekitError{constructor($){super(12,$??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class NegotiationError extends LivekitError{constructor($){super(13,$??"unable to negotiate"),this.name="NegotiationError"}}class PublishTrackError extends LivekitError{constructor($,et){super(15,$),this.name="PublishTrackError",this.status=et}}class SignalRequestError extends LivekitError{constructor($,et){super(15,$),this.reason=et,this.reasonName=typeof et=="string"?et:RequestResponse_Reason[et]}}var MediaDeviceFailure;(function(_e){_e.PermissionDenied="PermissionDenied",_e.NotFound="NotFound",_e.DeviceInUse="DeviceInUse",_e.Other="Other"})(MediaDeviceFailure||(MediaDeviceFailure={}));(function(_e){function $(et){if(et&&"name"in et)return et.name==="NotFoundError"||et.name==="DevicesNotFoundError"?_e.NotFound:et.name==="NotAllowedError"||et.name==="PermissionDeniedError"?_e.PermissionDenied:et.name==="NotReadableError"||et.name==="TrackStartError"?_e.DeviceInUse:_e.Other}_e.getFailure=$})(MediaDeviceFailure||(MediaDeviceFailure={}));var CryptorErrorReason;(function(_e){_e[_e.InvalidKey=0]="InvalidKey",_e[_e.MissingKey=1]="MissingKey",_e[_e.InternalError=2]="InternalError"})(CryptorErrorReason||(CryptorErrorReason={}));var RoomEvent;(function(_e){_e.Connected="connected",_e.Reconnecting="reconnecting",_e.SignalReconnecting="signalReconnecting",_e.Reconnected="reconnected",_e.Disconnected="disconnected",_e.ConnectionStateChanged="connectionStateChanged",_e.Moved="moved",_e.MediaDevicesChanged="mediaDevicesChanged",_e.ParticipantConnected="participantConnected",_e.ParticipantDisconnected="participantDisconnected",_e.TrackPublished="trackPublished",_e.TrackSubscribed="trackSubscribed",_e.TrackSubscriptionFailed="trackSubscriptionFailed",_e.TrackUnpublished="trackUnpublished",_e.TrackUnsubscribed="trackUnsubscribed",_e.TrackMuted="trackMuted",_e.TrackUnmuted="trackUnmuted",_e.LocalTrackPublished="localTrackPublished",_e.LocalTrackUnpublished="localTrackUnpublished",_e.LocalAudioSilenceDetected="localAudioSilenceDetected",_e.ActiveSpeakersChanged="activeSpeakersChanged",_e.ParticipantMetadataChanged="participantMetadataChanged",_e.ParticipantNameChanged="participantNameChanged",_e.ParticipantAttributesChanged="participantAttributesChanged",_e.ParticipantActive="participantActive",_e.RoomMetadataChanged="roomMetadataChanged",_e.DataReceived="dataReceived",_e.SipDTMFReceived="sipDTMFReceived",_e.TranscriptionReceived="transcriptionReceived",_e.ConnectionQualityChanged="connectionQualityChanged",_e.TrackStreamStateChanged="trackStreamStateChanged",_e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",_e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",_e.AudioPlaybackStatusChanged="audioPlaybackChanged",_e.VideoPlaybackStatusChanged="videoPlaybackChanged",_e.MediaDevicesError="mediaDevicesError",_e.ParticipantPermissionsChanged="participantPermissionsChanged",_e.SignalConnected="signalConnected",_e.RecordingStatusChanged="recordingStatusChanged",_e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",_e.EncryptionError="encryptionError",_e.DCBufferStatusChanged="dcBufferStatusChanged",_e.ActiveDeviceChanged="activeDeviceChanged",_e.ChatMessage="chatMessage",_e.LocalTrackSubscribed="localTrackSubscribed",_e.MetricsReceived="metricsReceived"})(RoomEvent||(RoomEvent={}));var ParticipantEvent;(function(_e){_e.TrackPublished="trackPublished",_e.TrackSubscribed="trackSubscribed",_e.TrackSubscriptionFailed="trackSubscriptionFailed",_e.TrackUnpublished="trackUnpublished",_e.TrackUnsubscribed="trackUnsubscribed",_e.TrackMuted="trackMuted",_e.TrackUnmuted="trackUnmuted",_e.LocalTrackPublished="localTrackPublished",_e.LocalTrackUnpublished="localTrackUnpublished",_e.LocalTrackCpuConstrained="localTrackCpuConstrained",_e.LocalSenderCreated="localSenderCreated",_e.ParticipantMetadataChanged="participantMetadataChanged",_e.ParticipantNameChanged="participantNameChanged",_e.DataReceived="dataReceived",_e.SipDTMFReceived="sipDTMFReceived",_e.TranscriptionReceived="transcriptionReceived",_e.IsSpeakingChanged="isSpeakingChanged",_e.ConnectionQualityChanged="connectionQualityChanged",_e.TrackStreamStateChanged="trackStreamStateChanged",_e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",_e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",_e.TrackCpuConstrained="trackCpuConstrained",_e.MediaDevicesError="mediaDevicesError",_e.AudioStreamAcquired="audioStreamAcquired",_e.ParticipantPermissionsChanged="participantPermissionsChanged",_e.PCTrackAdded="pcTrackAdded",_e.AttributesChanged="attributesChanged",_e.LocalTrackSubscribed="localTrackSubscribed",_e.ChatMessage="chatMessage",_e.Active="active"})(ParticipantEvent||(ParticipantEvent={}));var EngineEvent;(function(_e){_e.TransportsCreated="transportsCreated",_e.Connected="connected",_e.Disconnected="disconnected",_e.Resuming="resuming",_e.Resumed="resumed",_e.Restarting="restarting",_e.Restarted="restarted",_e.SignalResumed="signalResumed",_e.SignalRestarted="signalRestarted",_e.Closing="closing",_e.MediaTrackAdded="mediaTrackAdded",_e.ActiveSpeakersUpdate="activeSpeakersUpdate",_e.DataPacketReceived="dataPacketReceived",_e.RTPVideoMapUpdate="rtpVideoMapUpdate",_e.DCBufferStatusChanged="dcBufferStatusChanged",_e.ParticipantUpdate="participantUpdate",_e.RoomUpdate="roomUpdate",_e.SpeakersChanged="speakersChanged",_e.StreamStateChanged="streamStateChanged",_e.ConnectionQualityUpdate="connectionQualityUpdate",_e.SubscriptionError="subscriptionError",_e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",_e.RemoteMute="remoteMute",_e.SubscribedQualityUpdate="subscribedQualityUpdate",_e.LocalTrackUnpublished="localTrackUnpublished",_e.LocalTrackSubscribed="localTrackSubscribed",_e.Offline="offline",_e.SignalRequestResponse="signalRequestResponse",_e.SignalConnected="signalConnected",_e.RoomMoved="roomMoved"})(EngineEvent||(EngineEvent={}));var TrackEvent;(function(_e){_e.Message="message",_e.Muted="muted",_e.Unmuted="unmuted",_e.Restarted="restarted",_e.Ended="ended",_e.Subscribed="subscribed",_e.Unsubscribed="unsubscribed",_e.CpuConstrained="cpuConstrained",_e.UpdateSettings="updateSettings",_e.UpdateSubscription="updateSubscription",_e.AudioPlaybackStarted="audioPlaybackStarted",_e.AudioPlaybackFailed="audioPlaybackFailed",_e.AudioSilenceDetected="audioSilenceDetected",_e.VisibilityChanged="visibilityChanged",_e.VideoDimensionsChanged="videoDimensionsChanged",_e.VideoPlaybackStarted="videoPlaybackStarted",_e.VideoPlaybackFailed="videoPlaybackFailed",_e.ElementAttached="elementAttached",_e.ElementDetached="elementDetached",_e.UpstreamPaused="upstreamPaused",_e.UpstreamResumed="upstreamResumed",_e.SubscriptionPermissionChanged="subscriptionPermissionChanged",_e.SubscriptionStatusChanged="subscriptionStatusChanged",_e.SubscriptionFailed="subscriptionFailed",_e.TrackProcessorUpdate="trackProcessorUpdate",_e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",_e.TranscriptionReceived="transcriptionReceived",_e.TimeSyncUpdate="timeSyncUpdate",_e.PreConnectBufferFlushed="preConnectBufferFlushed"})(TrackEvent||(TrackEvent={}));function cloneDeep(_e){return typeof _e>"u"?_e:typeof structuredClone=="function"?typeof _e=="object"&&_e!==null?structuredClone(Object.assign({},_e)):structuredClone(_e):JSON.parse(JSON.stringify(_e))}const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i;let browserDetails;function getBrowser(_e){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const et=navigator.userAgent.toLowerCase();if(browserDetails===void 0||$){const tt=browsersList.find(nt=>{let{test:rt}=nt;return rt.test(et)});browserDetails=tt==null?void 0:tt.describe(et)}return browserDetails}const browsersList=[{test:/firefox|iceweasel|fxios/i,describe(_e){return{name:"Firefox",version:getMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,_e),os:_e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:getOSVersion(_e)}}},{test:/chrom|crios|crmo/i,describe(_e){return{name:"Chrome",version:getMatch(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,_e),os:_e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:getOSVersion(_e)}}},{test:/safari|applewebkit/i,describe(_e){return{name:"Safari",version:getMatch(commonVersionIdentifier,_e),os:_e.includes("mobile/")?"iOS":"macOS",osVersion:getOSVersion(_e)}}}];function getMatch(_e,$){let et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const tt=$.match(_e);return tt&&tt.length>=et&&tt[et]||""}function getOSVersion(_e){return _e.includes("mac os")?getMatch(/\(.+?(\d+_\d+(:?_\d+)?)/,_e,1).replace(/_/g,"."):void 0}var version$1="2.15.4";const version=version$1,protocolVersion=16;class CriticalTimers{}CriticalTimers.setTimeout=function(){return setTimeout(...arguments)};CriticalTimers.setInterval=function(){return setInterval(...arguments)};CriticalTimers.clearTimeout=function(){return clearTimeout(...arguments)};CriticalTimers.clearInterval=function(){return clearInterval(...arguments)};const BACKGROUND_REACTION_DELAY=5e3,recycledElements=[];var VideoQuality;(function(_e){_e[_e.LOW=0]="LOW",_e[_e.MEDIUM=1]="MEDIUM",_e[_e.HIGH=2]="HIGH"})(VideoQuality||(VideoQuality={}));class Track extends eventsExports.EventEmitter{constructor($,et){let tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var nt;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Track.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=livekitLogger,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),BACKGROUND_REACTION_DELAY):this.handleAppVisibilityChanged()},this.log=getLogger((nt=tt.loggerName)!==null&&nt!==void 0?nt:LoggerNames.Track),this.loggerContextCb=tt.loggerContextCb,this.setMaxListeners(100),this.kind=et,this._mediaStreamTrack=$,this._mediaStreamID=$.id,this.source=Track.Source.Unknown}get logContext(){var $;return Object.assign(Object.assign({},($=this.loggerContextCb)===null||$===void 0?void 0:$.call(this)),getLogContextFromTrack(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach($){let et="audio";this.kind===Track.Kind.Video&&(et="video"),this.attachedElements.length===0&&this.kind===Track.Kind.Video&&this.addAppVisibilityListener(),$||(et==="audio"&&(recycledElements.forEach(rt=>{rt.parentElement===null&&!$&&($=rt)}),$&&recycledElements.splice(recycledElements.indexOf($),1)),$||($=document.createElement(et))),this.attachedElements.includes($)||this.attachedElements.push($),attachToElement(this.mediaStreamTrack,$);const tt=$.srcObject.getTracks(),nt=tt.some(rt=>rt.kind==="audio");return $.play().then(()=>{this.emit(nt?TrackEvent.AudioPlaybackStarted:TrackEvent.VideoPlaybackStarted)}).catch(rt=>{rt.name==="NotAllowedError"?this.emit(nt?TrackEvent.AudioPlaybackFailed:TrackEvent.VideoPlaybackFailed,rt):rt.name==="AbortError"?livekitLogger.debug("".concat(nt?"audio":"video"," playback aborted, likely due to new play request")):livekitLogger.warn("could not playback ".concat(nt?"audio":"video"),rt),nt&&$&&tt.some(it=>it.kind==="video")&&rt.name==="NotAllowedError"&&($.muted=!0,$.play().catch(()=>{}))}),this.emit(TrackEvent.ElementAttached,$),$}detach($){try{if($){detachTrack(this.mediaStreamTrack,$);const tt=this.attachedElements.indexOf($);return tt>=0&&(this.attachedElements.splice(tt,1),this.recycleElement($),this.emit(TrackEvent.ElementDetached,$)),$}const et=[];return this.attachedElements.forEach(tt=>{detachTrack(this.mediaStreamTrack,tt),et.push(tt),this.recycleElement(tt),this.emit(TrackEvent.ElementDetached,tt)}),this.attachedElements=[],et}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions($){$.loggerName&&(this.log=getLogger($.loggerName)),$.loggerContextCb&&(this.loggerContextCb=$.loggerContextCb)}recycleElement($){if($ instanceof HTMLAudioElement){let et=!0;$.pause(),recycledElements.forEach(tt=>{tt.parentElement||(et=!1)}),et&&recycledElements.push($)}}handleAppVisibilityChanged(){return __awaiter$1(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===Track.Kind.Video&&setTimeout(()=>this.attachedElements.forEach($=>$.play().catch(()=>{})),0)})}addAppVisibilityListener(){isWeb()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){isWeb()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function attachToElement(_e,$){let et;$.srcObject instanceof MediaStream?et=$.srcObject:et=new MediaStream;let tt;_e.kind==="audio"?tt=et.getAudioTracks():tt=et.getVideoTracks(),tt.includes(_e)||(tt.forEach(nt=>{et.removeTrack(nt)}),et.addTrack(_e)),(!isSafari()||!($ instanceof HTMLVideoElement))&&($.autoplay=!0),$.muted=et.getAudioTracks().length===0,$ instanceof HTMLVideoElement&&($.playsInline=!0),$.srcObject!==et&&($.srcObject=et,(isSafari()||isFireFox())&&$ instanceof HTMLVideoElement&&setTimeout(()=>{$.srcObject=et,$.play().catch(()=>{})},0))}function detachTrack(_e,$){if($.srcObject instanceof MediaStream){const et=$.srcObject;et.removeTrack(_e),et.getTracks().length>0?$.srcObject=et:$.srcObject=null}}(function(_e){let $;(function(at){at.Audio="audio",at.Video="video",at.Unknown="unknown"})($=_e.Kind||(_e.Kind={}));let et;(function(at){at.Camera="camera",at.Microphone="microphone",at.ScreenShare="screen_share",at.ScreenShareAudio="screen_share_audio",at.Unknown="unknown"})(et=_e.Source||(_e.Source={}));let tt;(function(at){at.Active="active",at.Paused="paused",at.Unknown="unknown"})(tt=_e.StreamState||(_e.StreamState={}));function nt(at){switch(at){case $.Audio:return TrackType.AUDIO;case $.Video:return TrackType.VIDEO;default:return TrackType.DATA}}_e.kindToProto=nt;function rt(at){switch(at){case TrackType.AUDIO:return $.Audio;case TrackType.VIDEO:return $.Video;default:return $.Unknown}}_e.kindFromProto=rt;function it(at){switch(at){case et.Camera:return TrackSource.CAMERA;case et.Microphone:return TrackSource.MICROPHONE;case et.ScreenShare:return TrackSource.SCREEN_SHARE;case et.ScreenShareAudio:return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNKNOWN}}_e.sourceToProto=it;function ot(at){switch(at){case TrackSource.CAMERA:return et.Camera;case TrackSource.MICROPHONE:return et.Microphone;case TrackSource.SCREEN_SHARE:return et.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return et.ScreenShareAudio;default:return et.Unknown}}_e.sourceFromProto=ot;function st(at){switch(at){case StreamState.ACTIVE:return tt.Active;case StreamState.PAUSED:return tt.Paused;default:return tt.Unknown}}_e.streamStateFromProto=st})(Track||(Track={}));class VideoPreset{constructor($,et,tt,nt,rt){if(typeof $=="object")this.width=$.width,this.height=$.height,this.aspectRatio=$.aspectRatio,this.encoding={maxBitrate:$.maxBitrate,maxFramerate:$.maxFramerate,priority:$.priority};else if(et!==void 0&&tt!==void 0)this.width=$,this.height=et,this.aspectRatio=$/et,this.encoding={maxBitrate:tt,maxFramerate:nt,priority:rt};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const backupCodecs=["vp8","h264"],videoCodecs=["vp8","h264","vp9","av1","h265"];function isBackupCodec(_e){return!!backupCodecs.find($=>$===_e)}var BackupCodecPolicy;(function(_e){_e[_e.PREFER_REGRESSION=0]="PREFER_REGRESSION",_e[_e.SIMULCAST=1]="SIMULCAST",_e[_e.REGRESSION=2]="REGRESSION"})(BackupCodecPolicy||(BackupCodecPolicy={}));var AudioPresets;(function(_e){_e.telephone={maxBitrate:12e3},_e.speech={maxBitrate:24e3},_e.music={maxBitrate:48e3},_e.musicStereo={maxBitrate:64e3},_e.musicHighQuality={maxBitrate:96e3},_e.musicHighQualityStereo={maxBitrate:128e3}})(AudioPresets||(AudioPresets={}));const VideoPresets={h90:new VideoPreset(160,90,9e4,20),h180:new VideoPreset(320,180,16e4,20),h216:new VideoPreset(384,216,18e4,20),h360:new VideoPreset(640,360,45e4,20),h540:new VideoPreset(960,540,8e5,25),h720:new VideoPreset(1280,720,17e5,30),h1080:new VideoPreset(1920,1080,3e6,30),h1440:new VideoPreset(2560,1440,5e6,30),h2160:new VideoPreset(3840,2160,8e6,30)},VideoPresets43={h120:new VideoPreset(160,120,7e4,20),h180:new VideoPreset(240,180,125e3,20),h240:new VideoPreset(320,240,14e4,20),h360:new VideoPreset(480,360,33e4,20),h480:new VideoPreset(640,480,5e5,20),h540:new VideoPreset(720,540,6e5,25),h720:new VideoPreset(960,720,13e5,30),h1080:new VideoPreset(1440,1080,23e5,30),h1440:new VideoPreset(1920,1440,38e5,30)},ScreenSharePresets={h360fps3:new VideoPreset(640,360,2e5,3,"medium"),h360fps15:new VideoPreset(640,360,4e5,15,"medium"),h720fps5:new VideoPreset(1280,720,8e5,5,"medium"),h720fps15:new VideoPreset(1280,720,15e5,15,"medium"),h720fps30:new VideoPreset(1280,720,2e6,30,"medium"),h1080fps15:new VideoPreset(1920,1080,25e5,15,"medium"),h1080fps30:new VideoPreset(1920,1080,5e6,30,"medium"),original:new VideoPreset(0,0,7e6,30,"medium")},separator="|",ddExtensionURI="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function unpackStreamId(_e){const $=_e.split(separator);return $.length>1?[$[0],_e.substr($[0].length+1)]:[_e,""]}function sleep$1(_e){return __awaiter$1(this,void 0,void 0,function*(){return new Promise($=>CriticalTimers.setTimeout($,_e))})}function supportsTransceiver(){return"addTransceiver"in RTCPeerConnection.prototype}function supportsAddTrack(){return"addTrack"in RTCPeerConnection.prototype}function supportsAV1(){if(!("getCapabilities"in RTCRtpSender)||isSafari())return!1;const _e=RTCRtpSender.getCapabilities("video");let $=!1;if(_e){for(const et of _e.codecs)if(et.mimeType==="video/AV1"){$=!0;break}}return $}function supportsVP9(){if(!("getCapabilities"in RTCRtpSender)||isFireFox())return!1;if(isSafari()){const et=getBrowser();if(et!=null&&et.version&&compareVersions(et.version,"16")<0||(et==null?void 0:et.os)==="iOS"&&(et!=null&&et.osVersion)&&compareVersions(et.osVersion,"16")<0)return!1}const _e=RTCRtpSender.getCapabilities("video");let $=!1;if(_e){for(const et of _e.codecs)if(et.mimeType==="video/VP9"){$=!0;break}}return $}function isSVCCodec(_e){return _e==="av1"||_e==="vp9"}function supportsSetSinkId(_e){return!document||isSafariBased()?!1:(_e||(_e=document.createElement("audio")),"setSinkId"in _e)}function isBrowserSupported(){return typeof RTCPeerConnection>"u"?!1:supportsTransceiver()||supportsAddTrack()}function isFireFox(){var _e;return((_e=getBrowser())===null||_e===void 0?void 0:_e.name)==="Firefox"}function isSafari(){var _e;return((_e=getBrowser())===null||_e===void 0?void 0:_e.name)==="Safari"}function isSafariBased(){const _e=getBrowser();return(_e==null?void 0:_e.name)==="Safari"||(_e==null?void 0:_e.os)==="iOS"}function isSafari17Based(){const _e=getBrowser();return(_e==null?void 0:_e.name)==="Safari"&&_e.version.startsWith("17.")||(_e==null?void 0:_e.os)==="iOS"&&!!(_e!=null&&_e.osVersion)&&compareVersions(_e.osVersion,"17")>=0}function isSafariSvcApi(_e){return _e||(_e=getBrowser()),(_e==null?void 0:_e.name)==="Safari"&&compareVersions(_e.version,"18.3")>0||(_e==null?void 0:_e.os)==="iOS"&&!!(_e!=null&&_e.osVersion)&&compareVersions(_e.osVersion,"18.3")>0}function isMobile(){var _e,$;return isWeb()?($=(_e=navigator.userAgentData)===null||_e===void 0?void 0:_e.mobile)!==null&&$!==void 0?$:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function isE2EESimulcastSupported(){const _e=getBrowser(),$="17.2";if(_e)return _e.name!=="Safari"&&_e.os!=="iOS"||_e.os==="iOS"&&_e.osVersion&&compareVersions($,_e.osVersion)>=0?!0:_e.name==="Safari"&&compareVersions($,_e.version)>=0}function isWeb(){return typeof document<"u"}function isReactNative(){return navigator.product=="ReactNative"}function isCloud(_e){return _e.hostname.endsWith(".livekit.cloud")||_e.hostname.endsWith(".livekit.run")}function getLKReactNativeInfo(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function getReactNativeOs(){if(!isReactNative())return;let _e=getLKReactNativeInfo();if(_e)return _e.platform}function getDevicePixelRatio(){if(isWeb())return window.devicePixelRatio;if(isReactNative()){let _e=getLKReactNativeInfo();if(_e)return _e.devicePixelRatio}return 1}function compareVersions(_e,$){const et=_e.split("."),tt=$.split("."),nt=Math.min(et.length,tt.length);for(let rt=0;rt<nt;++rt){const it=parseInt(et[rt],10),ot=parseInt(tt[rt],10);if(it>ot)return 1;if(it<ot)return-1;if(rt===nt-1&&it===ot)return 0}return _e===""&&$!==""?-1:$===""?1:et.length==tt.length?0:et.length<tt.length?-1:1}function roDispatchCallback(_e){for(const $ of _e)$.target.handleResize($)}function ioDispatchCallback(_e){for(const $ of _e)$.target.handleVisibilityChanged($)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback,{root:null,rootMargin:"0px"})),intersectionObserver);function getClientInfo(){var _e;const $=new ClientInfo({sdk:ClientInfo_SDK.JS,protocol:protocolVersion,version});return isReactNative()&&($.os=(_e=getReactNativeOs())!==null&&_e!==void 0?_e:""),$}function createDummyVideoStreamTrack(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const nt=document.createElement("canvas");nt.width=_e,nt.height=$;const rt=nt.getContext("2d");rt==null||rt.fillRect(0,0,nt.width,nt.height),tt&&rt&&(rt.beginPath(),rt.arc(_e/2,$/2,50,0,Math.PI*2,!0),rt.closePath(),rt.fillStyle="grey",rt.fill());const it=nt.captureStream(),[ot]=it.getTracks();if(!ot)throw Error("Could not get empty media stream video track");return ot.enabled=et,ot}let emptyAudioStreamTrack;function getEmptyAudioStreamTrack(){if(!emptyAudioStreamTrack){const _e=new AudioContext,$=_e.createOscillator(),et=_e.createGain();et.gain.setValueAtTime(0,0);const tt=_e.createMediaStreamDestination();if($.connect(et),et.connect(tt),$.start(),[emptyAudioStreamTrack]=tt.stream.getAudioTracks(),!emptyAudioStreamTrack)throw Error("Could not get empty media stream audio track");emptyAudioStreamTrack.enabled=!1}return emptyAudioStreamTrack.clone()}class Future{get isResolved(){return this._isResolved}constructor($,et){this._isResolved=!1,this.onFinally=et,this.promise=new Promise((tt,nt)=>__awaiter$1(this,void 0,void 0,function*(){this.resolve=tt,this.reject=nt,$&&(yield $(tt,nt))})).finally(()=>{var tt;this._isResolved=!0,(tt=this.onFinally)===null||tt===void 0||tt.call(this)})}}function isVideoCodec(_e){return videoCodecs.includes(_e)}function unwrapConstraint(_e){if(typeof _e=="string"||typeof _e=="number")return _e;if(Array.isArray(_e))return _e[0];if(_e.exact)return Array.isArray(_e.exact)?_e.exact[0]:_e.exact;if(_e.ideal)return Array.isArray(_e.ideal)?_e.ideal[0]:_e.ideal;throw Error("could not unwrap constraint")}function toWebsocketUrl(_e){return _e.startsWith("http")?_e.replace(/^(http)/,"ws"):_e}function toHttpUrl(_e){return _e.startsWith("ws")?_e.replace(/^(ws)/,"http"):_e}function extractTranscriptionSegments(_e,$){return _e.segments.map(et=>{let{id:tt,text:nt,language:rt,startTime:it,endTime:ot,final:st}=et;var at;const lt=(at=$.get(tt))!==null&&at!==void 0?at:Date.now(),dt=Date.now();return st?$.delete(tt):$.set(tt,lt),{id:tt,text:nt,startTime:Number.parseInt(it.toString()),endTime:Number.parseInt(ot.toString()),final:st,language:rt,firstReceivedTime:lt,lastReceivedTime:dt}})}function extractChatMessage(_e){const{id:$,timestamp:et,message:tt,editTimestamp:nt}=_e;return{id:$,timestamp:Number.parseInt(et.toString()),editTimestamp:nt?Number.parseInt(nt.toString()):void 0,message:tt}}function getDisconnectReasonFromConnectionError(_e){switch(_e.reason){case ConnectionErrorReason.LeaveRequest:return _e.context;case ConnectionErrorReason.Cancelled:return DisconnectReason.CLIENT_INITIATED;case ConnectionErrorReason.NotAllowed:return DisconnectReason.USER_REJECTED;case ConnectionErrorReason.ServerUnreachable:return DisconnectReason.JOIN_FAILURE;default:return DisconnectReason.UNKNOWN_REASON}}function bigIntToNumber(_e){return _e!==void 0?Number(_e):void 0}function numberToBigInt(_e){return _e!==void 0?BigInt(_e):void 0}function isLocalTrack(_e){return!!_e&&!(_e instanceof MediaStreamTrack)&&_e.isLocal}function isAudioTrack(_e){return!!_e&&_e.kind==Track.Kind.Audio}function isVideoTrack(_e){return!!_e&&_e.kind==Track.Kind.Video}function isLocalVideoTrack(_e){return isLocalTrack(_e)&&isVideoTrack(_e)}function isLocalAudioTrack(_e){return isLocalTrack(_e)&&isAudioTrack(_e)}function isRemoteTrack(_e){return!!_e&&!_e.isLocal}function isRemotePub(_e){return!!_e&&!_e.isLocal}function isRemoteVideoTrack(_e){return isRemoteTrack(_e)&&isVideoTrack(_e)}function isLocalParticipant(_e){return _e.isLocal}function splitUtf8(_e,$){const et=[];let tt=new TextEncoder().encode(_e);for(;tt.length>$;){let nt=$;for(;nt>0;){const rt=tt[nt];if(rt!==void 0&&(rt&192)!==128)break;nt--}et.push(tt.slice(0,nt)),tt=tt.slice(nt)}return tt.length>0&&et.push(tt),et}function mergeDefaultOptions(_e,$,et){var tt,nt,rt,it;const{optionsWithoutProcessor:ot,audioProcessor:st,videoProcessor:at}=extractProcessorsFromOptions(_e??{}),lt=$==null?void 0:$.processor,dt=et==null?void 0:et.processor,pt=ot??{};return pt.audio===!0&&(pt.audio={}),pt.video===!0&&(pt.video={}),pt.audio&&(mergeObjectWithoutOverwriting(pt.audio,$),(tt=(rt=pt.audio).deviceId)!==null&&tt!==void 0||(rt.deviceId={ideal:"default"}),(st||lt)&&(pt.audio.processor=st??lt)),pt.video&&(mergeObjectWithoutOverwriting(pt.video,et),(nt=(it=pt.video).deviceId)!==null&&nt!==void 0||(it.deviceId={ideal:"default"}),(at||dt)&&(pt.video.processor=at??dt)),pt}function mergeObjectWithoutOverwriting(_e,$){return Object.keys($).forEach(et=>{_e[et]===void 0&&(_e[et]=$[et])}),_e}function constraintsForOptions(_e){var $,et,tt,nt;const rt={};if(_e.video)if(typeof _e.video=="object"){const it={},ot=it,st=_e.video;Object.keys(st).forEach(at=>{switch(at){case"resolution":mergeObjectWithoutOverwriting(ot,st.resolution);break;default:ot[at]=st[at]}}),rt.video=it,($=(tt=rt.video).deviceId)!==null&&$!==void 0||(tt.deviceId={ideal:"default"})}else rt.video=_e.video?{deviceId:{ideal:"default"}}:!1;else rt.video=!1;return _e.audio?typeof _e.audio=="object"?(rt.audio=_e.audio,(et=(nt=rt.audio).deviceId)!==null&&et!==void 0||(nt.deviceId={ideal:"default"})):rt.audio={deviceId:{ideal:"default"}}:rt.audio=!1,rt}function detectSilence(_e){return __awaiter$1(this,arguments,void 0,function($){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const tt=getNewAudioContext();if(tt){const nt=tt.createAnalyser();nt.fftSize=2048;const rt=nt.frequencyBinCount,it=new Uint8Array(rt);tt.createMediaStreamSource(new MediaStream([$.mediaStreamTrack])).connect(nt),yield sleep$1(et),nt.getByteTimeDomainData(it);const st=it.some(at=>at!==128&&at!==0);return tt.close(),!st}return!1}()})}function getNewAudioContext(){var _e;const $=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if($){const et=new $({latencyHint:"interactive"});if(et.state==="suspended"&&typeof window<"u"&&(!((_e=window.document)===null||_e===void 0)&&_e.body)){const tt=()=>__awaiter$1(this,void 0,void 0,function*(){var nt;try{et.state==="suspended"&&(yield et.resume())}catch(rt){console.warn("Error trying to auto-resume audio context",rt)}(nt=window.document.body)===null||nt===void 0||nt.removeEventListener("click",tt)});window.document.body.addEventListener("click",tt)}return et}}function kindToSource(_e){return _e==="audioinput"?Track.Source.Microphone:_e==="videoinput"?Track.Source.Camera:Track.Source.Unknown}function sourceToKind(_e){return _e===Track.Source.Microphone?"audioinput":_e===Track.Source.Camera?"videoinput":void 0}function screenCaptureToDisplayMediaStreamOptions(_e){var $,et;let tt=($=_e.video)!==null&&$!==void 0?$:!0;return _e.resolution&&_e.resolution.width>0&&_e.resolution.height>0&&(tt=typeof tt=="boolean"?{}:tt,isSafari()?tt=Object.assign(Object.assign({},tt),{width:{max:_e.resolution.width},height:{max:_e.resolution.height},frameRate:_e.resolution.frameRate}):tt=Object.assign(Object.assign({},tt),{width:{ideal:_e.resolution.width},height:{ideal:_e.resolution.height},frameRate:_e.resolution.frameRate})),{audio:(et=_e.audio)!==null&&et!==void 0?et:!1,video:tt,controller:_e.controller,selfBrowserSurface:_e.selfBrowserSurface,surfaceSwitching:_e.surfaceSwitching,systemAudio:_e.systemAudio,preferCurrentTab:_e.preferCurrentTab}}function mimeTypeToVideoCodecString(_e){return _e.split("/")[1].toLowerCase()}function getTrackPublicationInfo(_e){const $=[];return _e.forEach(et=>{et.track!==void 0&&$.push(new TrackPublishedResponse({cid:et.track.mediaStreamID,track:et.trackInfo}))}),$}function getLogContextFromTrack(_e){return"mediaStreamTrack"in _e?{trackID:_e.sid,source:_e.source,muted:_e.isMuted,enabled:_e.mediaStreamTrack.enabled,kind:_e.kind,streamID:_e.mediaStreamID,streamTrackID:_e.mediaStreamTrack.id}:{trackID:_e.trackSid,enabled:_e.isEnabled,muted:_e.isMuted,trackInfo:Object.assign({mimeType:_e.mimeType,name:_e.trackName,encrypted:_e.isEncrypted,kind:_e.kind,source:_e.source},_e.track?getLogContextFromTrack(_e.track):{})}}function supportsSynchronizationSources(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function diffAttributes(_e,$){var et;_e===void 0&&(_e={}),$===void 0&&($={});const tt=[...Object.keys($),...Object.keys(_e)],nt={};for(const rt of tt)_e[rt]!==$[rt]&&(nt[rt]=(et=$[rt])!==null&&et!==void 0?et:"");return nt}function extractProcessorsFromOptions(_e){const $=Object.assign({},_e);let et,tt;return typeof $.audio=="object"&&$.audio.processor&&(et=$.audio.processor,$.audio=Object.assign(Object.assign({},$.audio),{processor:void 0})),typeof $.video=="object"&&$.video.processor&&(tt=$.video.processor,$.video=Object.assign(Object.assign({},$.video),{processor:void 0})),{audioProcessor:et,videoProcessor:tt,optionsWithoutProcessor:cloneDeep($)}}function getTrackSourceFromProto(_e){switch(_e){case TrackSource.CAMERA:return Track.Source.Camera;case TrackSource.MICROPHONE:return Track.Source.Microphone;case TrackSource.SCREEN_SHARE:return Track.Source.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return Track.Source.ScreenShareAudio;default:return Track.Source.Unknown}}function areDimensionsSmaller(_e,$){return _e.width*_e.height<$.width*$.height}function layerDimensionsFor(_e,$){var et;return(et=_e.layers)===null||et===void 0?void 0:et.find(tt=>tt.quality===$)}class E2EEManager extends eventsExports.EventEmitter{constructor($){super(),this.onWorkerMessage=et=>{var tt,nt;const{kind:rt,data:it}=et.data;switch(rt){case"error":livekitLogger.error(it.error.message),this.emit(EncryptionEvent.EncryptionError,it.error);break;case"initAck":it.enabled&&this.keyProvider.getKeys().forEach(ot=>{this.postKey(ot)});break;case"enable":if(it.enabled&&this.keyProvider.getKeys().forEach(ot=>{this.postKey(ot)}),this.encryptionEnabled!==it.enabled&&it.participantIdentity===((tt=this.room)===null||tt===void 0?void 0:tt.localParticipant.identity))this.emit(EncryptionEvent.ParticipantEncryptionStatusChanged,it.enabled,this.room.localParticipant),this.encryptionEnabled=it.enabled;else if(it.participantIdentity){const ot=(nt=this.room)===null||nt===void 0?void 0:nt.getParticipantByIdentity(it.participantIdentity);if(!ot)throw TypeError("couldn't set encryption status, participant not found".concat(it.participantIdentity));this.emit(EncryptionEvent.ParticipantEncryptionStatusChanged,it.enabled,ot)}break;case"ratchetKey":this.keyProvider.emit(KeyProviderEvent.KeyRatcheted,it.ratchetResult,it.participantIdentity,it.keyIndex);break}},this.onWorkerError=et=>{livekitLogger.error("e2ee worker encountered an error:",{error:et.error}),this.emit(EncryptionEvent.EncryptionError,et.error)},this.keyProvider=$.keyProvider,this.worker=$.worker,this.encryptionEnabled=!1}setup($){if(!isE2EESupported())throw new DeviceUnsupportedError("tried to setup end-to-end encryption on an unsupported browser");if(livekitLogger.info("setting up e2ee"),$!==this.room){this.room=$,this.setupEventListeners($,this.keyProvider);const et={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:workerLogger.getLevel()}};this.worker&&(livekitLogger.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(et))}}setParticipantCryptorEnabled($,et){livekitLogger.debug("set e2ee to ".concat($," for participant ").concat(et)),this.postEnable($,et)}setSifTrailer($){!$||$.length===0?livekitLogger.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer($)}setupEngine($){$.on(EngineEvent.RTPVideoMapUpdate,et=>{this.postRTPMap(et)})}setupEventListeners($,et){$.on(RoomEvent.TrackPublished,(tt,nt)=>this.setParticipantCryptorEnabled(tt.trackInfo.encryption!==Encryption_Type.NONE,nt.identity)),$.on(RoomEvent.ConnectionStateChanged,tt=>{tt===ConnectionState.Connected&&$.remoteParticipants.forEach(nt=>{nt.trackPublications.forEach(rt=>{this.setParticipantCryptorEnabled(rt.trackInfo.encryption!==Encryption_Type.NONE,nt.identity)})})}).on(RoomEvent.TrackUnsubscribed,(tt,nt,rt)=>{var it;const ot={kind:"removeTransform",data:{participantIdentity:rt.identity,trackId:tt.mediaStreamID}};(it=this.worker)===null||it===void 0||it.postMessage(ot)}).on(RoomEvent.TrackSubscribed,(tt,nt,rt)=>{this.setupE2EEReceiver(tt,rt.identity,nt.trackInfo)}).on(RoomEvent.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");et.getKeys().forEach(tt=>{this.postKey(tt)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),$.localParticipant.on(ParticipantEvent.LocalSenderCreated,(tt,nt)=>__awaiter$1(this,void 0,void 0,function*(){this.setupE2EESender(nt,tt)})),et.on(KeyProviderEvent.SetKey,tt=>this.postKey(tt)).on(KeyProviderEvent.RatchetRequest,(tt,nt)=>this.postRatchetRequest(tt,nt))}postRatchetRequest($,et){if(!this.worker)throw Error("could not ratchet key, worker is missing");const tt={kind:"ratchetRequest",data:{participantIdentity:$,keyIndex:et}};this.worker.postMessage(tt)}postKey($){let{key:et,participantIdentity:tt,keyIndex:nt}=$;var rt;if(!this.worker)throw Error("could not set key, worker is missing");const it={kind:"setKey",data:{participantIdentity:tt,isPublisher:tt===((rt=this.room)===null||rt===void 0?void 0:rt.localParticipant.identity),key:et,keyIndex:nt}};this.worker.postMessage(it)}postEnable($,et){if(this.worker){const tt={kind:"enable",data:{enabled:$,participantIdentity:et}};this.worker.postMessage(tt)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap($){var et;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((et=this.room)===null||et===void 0)&&et.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const tt={kind:"setRTPMap",data:{map:$,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(tt)}postSifTrailer($){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const et={kind:"setSifTrailer",data:{trailer:$}};this.worker.postMessage(et)}setupE2EEReceiver($,et,tt){if($.receiver){if(!(tt!=null&&tt.mimeType)||tt.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver($.receiver,$.mediaStreamID,et,$.kind==="video"?mimeTypeToVideoCodecString(tt.mimeType):void 0)}}setupE2EESender($,et){if(!isLocalTrack($)||!et){et||livekitLogger.warn("early return because sender is not ready");return}this.handleSender(et,$.mediaStreamID,void 0)}handleReceiver($,et,tt,nt){return __awaiter$1(this,void 0,void 0,function*(){if(this.worker){if(isScriptTransformSupported()){const rt={kind:"decode",participantIdentity:tt,trackId:et,codec:nt};$.transform=new RTCRtpScriptTransform(this.worker,rt)}else{if(E2EE_FLAG in $&&nt){const st={kind:"updateCodec",data:{trackId:et,codec:nt,participantIdentity:tt}};this.worker.postMessage(st);return}let rt=$.writableStream,it=$.readableStream;if(!rt||!it){const st=$.createEncodedStreams();$.writableStream=st.writable,rt=st.writable,$.readableStream=st.readable,it=st.readable}const ot={kind:"decode",data:{readableStream:it,writableStream:rt,trackId:et,codec:nt,participantIdentity:tt,isReuse:E2EE_FLAG in $}};this.worker.postMessage(ot,[it,rt])}$[E2EE_FLAG]=!0}})}handleSender($,et,tt){var nt;if(!(E2EE_FLAG in $||!this.worker)){if(!(!((nt=this.room)===null||nt===void 0)&&nt.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(isScriptTransformSupported()){livekitLogger.info("initialize script transform");const rt={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:et,codec:tt};$.transform=new RTCRtpScriptTransform(this.worker,rt)}else{livekitLogger.info("initialize encoded streams");const rt=$.createEncodedStreams(),it={kind:"encode",data:{readableStream:rt.readable,writableStream:rt.writable,codec:tt,trackId:et,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(it,[rt.readable,rt.writable])}$[E2EE_FLAG]=!0}}}const defaultId="default";class DeviceManager{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}get previousDevices(){return this._previousDevices}getDevices($){return __awaiter$1(this,arguments,void 0,function(et){var tt=this;let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var rt;if(((rt=DeviceManager.userMediaPromiseMap)===null||rt===void 0?void 0:rt.size)>0){livekitLogger.debug("awaiting getUserMedia promise");try{et?yield DeviceManager.userMediaPromiseMap.get(et):yield Promise.all(DeviceManager.userMediaPromiseMap.values())}catch{livekitLogger.warn("error waiting for media permissons")}}let it=yield navigator.mediaDevices.enumerateDevices();if(nt&&!(isSafari()&&tt.hasDeviceInUse(et))&&(it.filter(st=>st.kind===et).length===0||it.some(st=>{const at=st.label==="",lt=et?st.kind===et:!0;return at&&lt}))){const st={video:et!=="audioinput"&&et!=="audiooutput",audio:et!=="videoinput"&&{deviceId:{ideal:"default"}}},at=yield navigator.mediaDevices.getUserMedia(st);it=yield navigator.mediaDevices.enumerateDevices(),at.getTracks().forEach(lt=>{lt.stop()})}return tt._previousDevices=it,et&&(it=it.filter(ot=>ot.kind===et)),it}()})}normalizeDeviceId($,et,tt){return __awaiter$1(this,void 0,void 0,function*(){if(et!==defaultId)return et;const nt=yield this.getDevices($),rt=nt.find(ot=>ot.deviceId===defaultId);if(!rt){livekitLogger.warn("could not reliably determine default device");return}const it=nt.find(ot=>ot.deviceId!==defaultId&&ot.groupId===(tt??rt.groupId));if(!it){livekitLogger.warn("could not reliably determine default device");return}return it==null?void 0:it.deviceId})}hasDeviceInUse($){return $?DeviceManager.userMediaPromiseMap.has($):DeviceManager.userMediaPromiseMap.size>0}}DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];DeviceManager.userMediaPromiseMap=new Map;var QueueTaskStatus;(function(_e){_e[_e.WAITING=0]="WAITING",_e[_e.RUNNING=1]="RUNNING",_e[_e.COMPLETED=2]="COMPLETED"})(QueueTaskStatus||(QueueTaskStatus={}));class AsyncQueue{constructor(){this.pendingTasks=new Map,this.taskMutex=new _$1,this.nextTaskIndex=0}run($){return __awaiter$1(this,void 0,void 0,function*(){const et={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:QueueTaskStatus.WAITING};this.pendingTasks.set(et.id,et);const tt=yield this.taskMutex.lock();try{return et.executedAt=Date.now(),et.status=QueueTaskStatus.RUNNING,yield $()}finally{et.status=QueueTaskStatus.COMPLETED,this.pendingTasks.delete(et.id),tt()}})}flush(){return __awaiter$1(this,void 0,void 0,function*(){return this.run(()=>__awaiter$1(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function createRtcUrl(_e,$){const et=new URL(toWebsocketUrl(_e));return $.forEach((tt,nt)=>{et.searchParams.set(nt,tt)}),appendUrlPath(et,"rtc")}function createValidateUrl(_e){const $=new URL(toHttpUrl(_e));return appendUrlPath($,"validate")}function ensureTrailingSlash(_e){return _e.endsWith("/")?_e:"".concat(_e,"/")}function appendUrlPath(_e,$){return _e.pathname="".concat(ensureTrailingSlash(_e.pathname)).concat($),_e.toString()}const passThroughQueueSignals=["syncState","trickle","offer","answer","simulate","leave"];function canPassThroughQueue(_e){const $=passThroughQueueSignals.indexOf(_e.case)>=0;return livekitLogger.trace("request allowed to bypass queue:",{canPass:$,req:_e}),$}var SignalConnectionState;(function(_e){_e[_e.CONNECTING=0]="CONNECTING",_e[_e.CONNECTED=1]="CONNECTED",_e[_e.RECONNECTING=2]="RECONNECTING",_e[_e.DISCONNECTING=3]="DISCONNECTING",_e[_e.DISCONNECTED=4]="DISCONNECTED"})(SignalConnectionState||(SignalConnectionState={}));class SignalClient{get currentState(){return this.state}get isDisconnected(){return this.state===SignalConnectionState.DISCONNECTING||this.state===SignalConnectionState.DISCONNECTED}get isEstablishingConnection(){return this.state===SignalConnectionState.CONNECTING||this.state===SignalConnectionState.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var tt;this.rtt=0,this.state=SignalConnectionState.DISCONNECTED,this.log=livekitLogger,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=getLogger((tt=et.loggerName)!==null&&tt!==void 0?tt:LoggerNames.Signal),this.loggerContextCb=et.loggerContextCb,this.useJSON=$,this.requestQueue=new AsyncQueue,this.queuedRequests=[],this.closingLock=new _$1,this.connectionLock=new _$1,this.state=SignalConnectionState.DISCONNECTED}get logContext(){var $,et;return(et=($=this.loggerContextCb)===null||$===void 0?void 0:$.call(this))!==null&&et!==void 0?et:{}}join($,et,tt,nt){return __awaiter$1(this,void 0,void 0,function*(){return this.state=SignalConnectionState.CONNECTING,this.options=tt,yield this.connect($,et,tt,nt)})}reconnect($,et,tt,nt){return __awaiter$1(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=SignalConnectionState.RECONNECTING,this.clearPingInterval(),yield this.connect($,et,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:tt,reconnectReason:nt}))})}connect($,et,tt,nt){this.connectOptions=tt;const rt=getClientInfo(),it=createConnectionParams(et,rt,tt),ot=createRtcUrl($,it),st=createValidateUrl(ot);return new Promise((at,lt)=>__awaiter$1(this,void 0,void 0,function*(){const dt=yield this.connectionLock.lock();try{const pt=()=>__awaiter$1(this,void 0,void 0,function*(){this.close(),clearTimeout(ht),lt(new ConnectionError("room connection has been cancelled (signal)",ConnectionErrorReason.Cancelled))}),ht=setTimeout(()=>{this.close(),lt(new ConnectionError("room connection has timed out (signal)",ConnectionErrorReason.ServerUnreachable))},tt.websocketTimeout);nt!=null&&nt.aborted&&pt(),nt==null||nt.addEventListener("abort",pt);const vt=new URL(ot);vt.searchParams.has("access_token")&&vt.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(vt),Object.assign({reconnect:tt.reconnect,reconnectReason:tt.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(ot),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(ht)},this.ws.onerror=mt=>__awaiter$1(this,void 0,void 0,function*(){if(this.state!==SignalConnectionState.CONNECTED){this.state=SignalConnectionState.DISCONNECTED,clearTimeout(ht);try{const kt=yield fetch(st);if(kt.status.toFixed(0).startsWith("4")){const bt=yield kt.text();lt(new ConnectionError(bt,ConnectionErrorReason.NotAllowed,kt.status))}else lt(new ConnectionError("Encountered unknown websocket error during connection: ".concat(mt.toString()),ConnectionErrorReason.InternalError,kt.status))}catch(kt){lt(new ConnectionError(kt instanceof Error?kt.message:"server was not reachable",ConnectionErrorReason.ServerUnreachable))}return}this.handleWSError(mt)}),this.ws.onmessage=mt=>__awaiter$1(this,void 0,void 0,function*(){var kt,bt,gt;let St;if(typeof mt.data=="string"){const yt=JSON.parse(mt.data);St=SignalResponse.fromJson(yt,{ignoreUnknownFields:!0})}else if(mt.data instanceof ArrayBuffer)St=SignalResponse.fromBinary(new Uint8Array(mt.data));else{this.log.error("could not decode websocket message: ".concat(typeof mt.data),this.logContext);return}if(this.state!==SignalConnectionState.CONNECTED){let yt=!1;if(((kt=St.message)===null||kt===void 0?void 0:kt.case)==="join"?(this.state=SignalConnectionState.CONNECTED,nt==null||nt.removeEventListener("abort",pt),this.pingTimeoutDuration=St.message.value.pingTimeout,this.pingIntervalDuration=St.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),at(St.message.value)):this.state===SignalConnectionState.RECONNECTING&&St.message.case!=="leave"?(this.state=SignalConnectionState.CONNECTED,nt==null||nt.removeEventListener("abort",pt),this.startPingInterval(),((bt=St.message)===null||bt===void 0?void 0:bt.case)==="reconnect"?at(St.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),at(void 0),yt=!0)):this.isEstablishingConnection&&St.message.case==="leave"?lt(new ConnectionError("Received leave request while trying to (re)connect",ConnectionErrorReason.LeaveRequest,void 0,St.message.value.reason)):tt.reconnect||lt(new ConnectionError("did not receive join response, got ".concat((gt=St.message)===null||gt===void 0?void 0:gt.case," instead"),ConnectionErrorReason.InternalError)),!yt)return}this.signalLatency&&(yield sleep$1(this.signalLatency)),this.handleSignalResponse(St)}),this.ws.onclose=mt=>{this.isEstablishingConnection&&lt(new ConnectionError("Websocket got closed during a (re)connection attempt",ConnectionErrorReason.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:mt.reason,code:mt.code,wasClean:mt.wasClean,state:this.state})),this.handleOnClose(mt.reason)}}finally{dt()}}))}close(){return __awaiter$1(this,arguments,void 0,function(){var $=this;let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const tt=yield $.closingLock.lock();try{if($.clearPingInterval(),et&&($.state=SignalConnectionState.DISCONNECTING),$.ws){$.ws.onmessage=null,$.ws.onopen=null,$.ws.onclose=null;const nt=new Promise(rt=>{$.ws?$.ws.onclose=()=>{rt()}:rt()});$.ws.readyState<$.ws.CLOSING&&($.ws.close(),yield Promise.race([nt,sleep$1(250)])),$.ws=void 0}}finally{et&&($.state=SignalConnectionState.DISCONNECTED),tt()}}()})}sendOffer($,et){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:$.sdp})),this.sendRequest({case:"offer",value:toProtoSessionDescription($,et)})}sendAnswer($,et){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:$.sdp})),this.sendRequest({case:"answer",value:toProtoSessionDescription($,et)})}sendIceCandidate($,et){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:$})),this.sendRequest({case:"trickle",value:new TrickleRequest({candidateInit:JSON.stringify($),target:et})})}sendMuteTrack($,et){return this.sendRequest({case:"mute",value:new MuteTrackRequest({sid:$,muted:et})})}sendAddTrack($){return this.sendRequest({case:"addTrack",value:$})}sendUpdateLocalMetadata($,et){return __awaiter$1(this,arguments,void 0,function(tt,nt){var rt=this;let it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const ot=rt.getNextRequestId();return yield rt.sendRequest({case:"updateMetadata",value:new UpdateParticipantMetadata({requestId:ot,metadata:tt,name:nt,attributes:it})}),ot}()})}sendUpdateTrackSettings($){this.sendRequest({case:"trackSetting",value:$})}sendUpdateSubscription($){return this.sendRequest({case:"subscription",value:$})}sendSyncState($){return this.sendRequest({case:"syncState",value:$})}sendUpdateVideoLayers($,et){return this.sendRequest({case:"updateLayers",value:new UpdateVideoLayers({trackSid:$,layers:et})})}sendUpdateSubscriptionPermissions($,et){return this.sendRequest({case:"subscriptionPermission",value:new SubscriptionPermission({allParticipants:$,trackPermissions:et})})}sendSimulateScenario($){return this.sendRequest({case:"simulate",value:$})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:protoInt64.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Ping({timestamp:protoInt64.parse(Date.now()),rtt:protoInt64.parse(this.rtt)})})])}sendUpdateLocalAudioTrack($,et){return this.sendRequest({case:"updateAudioTrack",value:new UpdateLocalAudioTrack({trackSid:$,features:et})})}sendLeave(){return this.sendRequest({case:"leave",value:new LeaveRequest({reason:DisconnectReason.CLIENT_INITIATED,action:LeaveRequest_Action.DISCONNECT})})}sendRequest($){return __awaiter$1(this,arguments,void 0,function(et){var tt=this;let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!nt&&!canPassThroughQueue(et)&&tt.state===SignalConnectionState.RECONNECTING){tt.queuedRequests.push(()=>__awaiter$1(tt,void 0,void 0,function*(){yield this.sendRequest(et,!0)}));return}if(nt||(yield tt.requestQueue.flush()),tt.signalLatency&&(yield sleep$1(tt.signalLatency)),tt.isDisconnected){tt.log.debug("skipping signal request (type: ".concat(et.case,") - SignalClient disconnected"));return}if(!tt.ws||tt.ws.readyState!==tt.ws.OPEN){tt.log.error("cannot send signal request before connected, type: ".concat(et==null?void 0:et.case),tt.logContext);return}const it=new SignalRequest({message:et});try{tt.useJSON?tt.ws.send(it.toJsonString()):tt.ws.send(it.toBinary())}catch(ot){tt.log.error("error sending signal message",Object.assign(Object.assign({},tt.logContext),{error:ot}))}}()})}handleSignalResponse($){var et,tt;const nt=$.message;if(nt==null){this.log.debug("received unsupported message",this.logContext);return}let rt=!1;if(nt.case==="answer"){const it=fromProtoSessionDescription(nt.value);this.onAnswer&&this.onAnswer(it,nt.value.id)}else if(nt.case==="offer"){const it=fromProtoSessionDescription(nt.value);this.onOffer&&this.onOffer(it,nt.value.id)}else if(nt.case==="trickle"){const it=JSON.parse(nt.value.candidateInit);this.onTrickle&&this.onTrickle(it,nt.value.target)}else nt.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((et=nt.value.participants)!==null&&et!==void 0?et:[]):nt.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(nt.value):nt.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((tt=nt.value.speakers)!==null&&tt!==void 0?tt:[]):nt.case==="leave"?this.onLeave&&this.onLeave(nt.value):nt.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(nt.value.sid,nt.value.muted):nt.case==="roomUpdate"?this.onRoomUpdate&&nt.value.room&&this.onRoomUpdate(nt.value.room):nt.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(nt.value):nt.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(nt.value):nt.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(nt.value):nt.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(nt.value):nt.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(nt.value):nt.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(nt.value):nt.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(nt.value):nt.case==="pong"||(nt.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(nt.value.lastPingTimestamp.toString()),this.resetPingTimeout(),rt=!0):nt.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(nt.value):nt.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(nt.value.trackSid):nt.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(nt.value.token),this.onRoomMoved&&this.onRoomMoved(nt.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:nt.case})));rt||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const $=this.queuedRequests.shift();$&&this.requestQueue.run($)}}handleOnClose($){return __awaiter$1(this,void 0,void 0,function*(){if(this.state===SignalConnectionState.DISCONNECTED)return;const et=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat($),Object.assign(Object.assign({},this.logContext),{reason:$})),et&&et($)})}handleWSError($){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:$}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=CriticalTimers.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&CriticalTimers.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=CriticalTimers.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&CriticalTimers.clearInterval(this.pingInterval)}}function fromProtoSessionDescription(_e){const $={type:"offer",sdp:_e.sdp};switch(_e.type){case"answer":case"offer":case"pranswer":case"rollback":$.type=_e.type;break}return $}function toProtoSessionDescription(_e,$){return new SessionDescription({sdp:_e.sdp,type:_e.type,id:$})}function createConnectionParams(_e,$,et){var tt;const nt=new URLSearchParams;return nt.set("access_token",_e),et.reconnect&&(nt.set("reconnect","1"),et.sid&&nt.set("sid",et.sid)),nt.set("auto_subscribe",et.autoSubscribe?"1":"0"),nt.set("sdk",isReactNative()?"reactnative":"js"),nt.set("version",$.version),nt.set("protocol",$.protocol.toString()),$.deviceModel&&nt.set("device_model",$.deviceModel),$.os&&nt.set("os",$.os),$.osVersion&&nt.set("os_version",$.osVersion),$.browser&&nt.set("browser",$.browser),$.browserVersion&&nt.set("browser_version",$.browserVersion),et.adaptiveStream&&nt.set("adaptive_stream","1"),et.reconnectReason&&nt.set("reconnect_reason",et.reconnectReason.toString()),!((tt=navigator.connection)===null||tt===void 0)&&tt.type&&nt.set("network",navigator.connection.type),nt}class DataPacketBuffer{constructor(){this.buffer=[],this._totalSize=0}push($){this.buffer.push($),this._totalSize+=$.data.byteLength}pop(){const $=this.buffer.shift();return $&&(this._totalSize-=$.data.byteLength),$}getAll(){return this.buffer.slice()}popToSequence($){for(;this.buffer.length>0&&this.buffer[0].sequence<=$;)this.pop()}alignBufferedAmount($){for(;this.buffer.length>0;){const et=this.buffer[0];if(this._totalSize-et.data.byteLength<=$)break;this.pop()}}get length(){return this.buffer.length}}class TTLMap{constructor($){this._map=new Map,this._lastCleanup=0,this.ttl=$}set($,et){const tt=Date.now();tt-this._lastCleanup>this.ttl/2&&this.cleanup();const nt=tt+this.ttl;return this._map.set($,{value:et,expiresAt:nt}),this}get($){const et=this._map.get($);if(et){if(et.expiresAt<Date.now()){this._map.delete($);return}return et.value}}has($){const et=this._map.get($);return et?et.expiresAt<Date.now()?(this._map.delete($),!1):!0:!1}delete($){return this._map.delete($)}clear(){this._map.clear()}cleanup(){const $=Date.now();for(const[et,tt]of this._map.entries())tt.expiresAt<$&&this._map.delete(et);this._lastCleanup=$}get size(){return this.cleanup(),this._map.size}forEach($){this.cleanup();for(const[et,tt]of this._map.entries())tt.expiresAt>=Date.now()&&$(tt.value,et,this.asValueMap())}map($){this.cleanup();const et=[],tt=this.asValueMap();for(const[nt,rt]of tt.entries())et.push($(rt,nt,tt));return et}asValueMap(){const $=new Map;for(const[et,tt]of this._map.entries())tt.expiresAt>=Date.now()&&$.set(et,tt.value);return $}}var lib={},parser={},grammar={exports:{}},hasRequiredGrammar;function requireGrammar(){if(hasRequiredGrammar)return grammar.exports;hasRequiredGrammar=1;var _e=grammar.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function($){return $.encoding?"rtpmap:%d %s/%s/%s":$.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function($){return $.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function($){return $.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function($){return"extmap:%d"+($.direction?"/%s":"%v")+($["encrypt-uri"]?" %s":"%v")+" %s"+($.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function($){return $.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function($){var et="candidate:%s %d %s %d %s %d typ %s";return et+=$.raddr!=null?" raddr %s rport %d":"%v%v",et+=$.tcptype!=null?" tcptype %s":"%v",$.generation!=null&&(et+=" generation %d"),et+=$["network-id"]!=null?" network-id %d":"%v",et+=$["network-cost"]!=null?" network-cost %d":"%v",et}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function($){var et="ssrc:%d";return $.attribute!=null&&(et+=" %s",$.value!=null&&(et+=":%s")),et}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function($){return $.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function($){return $.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function($){return"imageattr:%s %s %s"+($.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function($){return"simulcast:%s %s"+($.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function($){return"ts-refclk:%s"+($.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function($){var et="mediaclk:";return et+=$.id!=null?"id=%s %s":"%v%s",et+=$.mediaClockValue!=null?"=%s":"",et+=$.rateNumerator!=null?" rate=%s":"",et+=$.rateDenominator!=null?"/%s":"",et}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(_e).forEach(function($){var et=_e[$];et.forEach(function(tt){tt.reg||(tt.reg=/(.*)/),tt.format||(tt.format="%s")})}),grammar.exports}var hasRequiredParser;function requireParser(){return hasRequiredParser||(hasRequiredParser=1,function(_e){var $=function(ot){return String(Number(ot))===ot?Number(ot):ot},et=function(ot,st,at,lt){if(lt&&!at)st[lt]=$(ot[1]);else for(var dt=0;dt<at.length;dt+=1)ot[dt+1]!=null&&(st[at[dt]]=$(ot[dt+1]))},tt=function(ot,st,at){var lt=ot.name&&ot.names;ot.push&&!st[ot.push]?st[ot.push]=[]:lt&&!st[ot.name]&&(st[ot.name]={});var dt=ot.push?{}:lt?st[ot.name]:st;et(at.match(ot.reg),dt,ot.names,ot.name),ot.push&&st[ot.push].push(dt)},nt=requireGrammar(),rt=RegExp.prototype.test.bind(/^([a-z])=(.*)/);_e.parse=function(ot){var st={},at=[],lt=st;return ot.split(/(\r\n|\r|\n)/).filter(rt).forEach(function(dt){var pt=dt[0],ht=dt.slice(2);pt==="m"&&(at.push({rtp:[],fmtp:[]}),lt=at[at.length-1]);for(var vt=0;vt<(nt[pt]||[]).length;vt+=1){var mt=nt[pt][vt];if(mt.reg.test(ht))return tt(mt,lt,ht)}}),st.media=at,st};var it=function(ot,st){var at=st.split(/=(.+)/,2);return at.length===2?ot[at[0]]=$(at[1]):at.length===1&&st.length>1&&(ot[at[0]]=void 0),ot};_e.parseParams=function(ot){return ot.split(/;\s?/).reduce(it,{})},_e.parseFmtpConfig=_e.parseParams,_e.parsePayloads=function(ot){return ot.toString().split(" ").map(Number)},_e.parseRemoteCandidates=function(ot){for(var st=[],at=ot.split(" ").map($),lt=0;lt<at.length;lt+=3)st.push({component:at[lt],ip:at[lt+1],port:at[lt+2]});return st},_e.parseImageAttributes=function(ot){return ot.split(" ").map(function(st){return st.substring(1,st.length-1).split(",").reduce(it,{})})},_e.parseSimulcastStreamList=function(ot){return ot.split(";").map(function(st){return st.split(",").map(function(at){var lt,dt=!1;return at[0]!=="~"?lt=$(at):(lt=$(at.substring(1,at.length)),dt=!0),{scid:lt,paused:dt}})})}}(parser)),parser}var writer$1,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer$1;hasRequiredWriter=1;var _e=requireGrammar(),$=/%[sdv%]/g,et=function(it){var ot=1,st=arguments,at=st.length;return it.replace($,function(lt){if(ot>=at)return lt;var dt=st[ot];switch(ot+=1,lt){case"%%":return"%";case"%s":return String(dt);case"%d":return Number(dt);case"%v":return""}})},tt=function(it,ot,st){var at=ot.format instanceof Function?ot.format(ot.push?st:st[ot.name]):ot.format,lt=[it+"="+at];if(ot.names)for(var dt=0;dt<ot.names.length;dt+=1){var pt=ot.names[dt];ot.name?lt.push(st[ot.name][pt]):lt.push(st[ot.names[dt]])}else lt.push(st[ot.name]);return et.apply(null,lt)},nt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],rt=["i","c","b","a"];return writer$1=function(it,ot){ot=ot||{},it.version==null&&(it.version=0),it.name==null&&(it.name=" "),it.media.forEach(function(dt){dt.payloads==null&&(dt.payloads="")});var st=ot.outerOrder||nt,at=ot.innerOrder||rt,lt=[];return st.forEach(function(dt){_e[dt].forEach(function(pt){pt.name in it&&it[pt.name]!=null?lt.push(tt(dt,pt,it)):pt.push in it&&it[pt.push]!=null&&it[pt.push].forEach(function(ht){lt.push(tt(dt,pt,ht))})})}),it.media.forEach(function(dt){lt.push(tt("m",_e.m[0],dt)),at.forEach(function(pt){_e[pt].forEach(function(ht){ht.name in dt&&dt[ht.name]!=null?lt.push(tt(pt,ht,dt)):ht.push in dt&&dt[ht.push]!=null&&dt[ht.push].forEach(function(vt){lt.push(tt(pt,ht,vt))})})})}),lt.join(`\r
`)+`\r
`},writer$1}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var _e=requireParser(),$=requireWriter(),et=requireGrammar();return lib.grammar=et,lib.write=$,lib.parse=_e.parse,lib.parseParams=_e.parseParams,lib.parseFmtpConfig=_e.parseFmtpConfig,lib.parsePayloads=_e.parsePayloads,lib.parseRemoteCandidates=_e.parseRemoteCandidates,lib.parseImageAttributes=_e.parseImageAttributes,lib.parseSimulcastStreamList=_e.parseSimulcastStreamList,lib}var libExports=requireLib();function r$1(_e,$,et){var tt,nt,rt;$===void 0&&($=50),et===void 0&&(et={});var it=(tt=et.isImmediate)!=null&&tt,ot=(nt=et.callback)!=null&&nt,st=et.maxWait,at=Date.now(),lt=[];function dt(){if(st!==void 0){var ht=Date.now()-at;if(ht+$>=st)return st-ht}return $}var pt=function(){var ht=[].slice.call(arguments),vt=this;return new Promise(function(mt,kt){var bt=it&&rt===void 0;if(rt!==void 0&&clearTimeout(rt),rt=setTimeout(function(){if(rt=void 0,at=Date.now(),!it){var St=_e.apply(vt,ht);ot&&ot(St),lt.forEach(function(yt){return(0,yt.resolve)(St)}),lt=[]}},dt()),bt){var gt=_e.apply(vt,ht);return ot&&ot(gt),mt(gt)}lt.push({resolve:mt,reject:kt})})};return pt.cancel=function(ht){rt!==void 0&&clearTimeout(rt),lt.forEach(function(vt){return(0,vt.reject)(ht)}),lt=[]},pt}const startBitrateForSVC=.7,debounceInterval=20,PCEvents={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class PCTransport extends eventsExports.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor($){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var tt;super(),this.log=livekitLogger,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=r$1(nt=>__awaiter$1(this,void 0,void 0,function*(){this.emit(PCEvents.NegotiationStarted);try{yield this.createAndSendOffer()}catch(rt){if(nt)nt(rt);else throw rt}}),debounceInterval),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=getLogger((tt=et.loggerName)!==null&&tt!==void 0?tt:LoggerNames.PCTransport),this.loggerOptions=et,this.config=$,this._pc=this.createPC(),this.offerLock=new _$1}createPC(){const $=new RTCPeerConnection(this.config);return $.onicecandidate=et=>{var tt;et.candidate&&((tt=this.onIceCandidate)===null||tt===void 0||tt.call(this,et.candidate))},$.onicecandidateerror=et=>{var tt;(tt=this.onIceCandidateError)===null||tt===void 0||tt.call(this,et)},$.oniceconnectionstatechange=()=>{var et;(et=this.onIceConnectionStateChange)===null||et===void 0||et.call(this,$.iceConnectionState)},$.onsignalingstatechange=()=>{var et;(et=this.onSignalingStatechange)===null||et===void 0||et.call(this,$.signalingState)},$.onconnectionstatechange=()=>{var et;(et=this.onConnectionStateChange)===null||et===void 0||et.call(this,$.connectionState)},$.ondatachannel=et=>{var tt;(tt=this.onDataChannel)===null||tt===void 0||tt.call(this,et)},$.ontrack=et=>{var tt;(tt=this.onTrack)===null||tt===void 0||tt.call(this,et)},$}get logContext(){var $,et;return Object.assign({},(et=($=this.loggerOptions).loggerContextCb)===null||et===void 0?void 0:et.call($))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate($){return __awaiter$1(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate($);this.pendingCandidates.push($)})}setRemoteDescription($,et){return __awaiter$1(this,void 0,void 0,function*(){var tt;if($.type==="answer"&&this.latestOfferId>0&&et>0&&et!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:et,latestOfferId:this.latestOfferId})),!1;let nt;if($.type==="offer"){let{stereoMids:rt,nackMids:it}=extractStereoAndNackAudioFromOffer($);this.remoteStereoMids=rt,this.remoteNackMids=it}else if($.type==="answer"){const rt=libExports.parse((tt=$.sdp)!==null&&tt!==void 0?tt:"");rt.media.forEach(it=>{it.type==="audio"&&this.trackBitrates.some(ot=>{if(!ot.transceiver||it.mid!=ot.transceiver.mid)return!1;let st=0;if(it.rtp.some(lt=>lt.codec.toUpperCase()===ot.codec.toUpperCase()?(st=lt.payload,!0):!1),st===0)return!0;let at=!1;for(const lt of it.fmtp)if(lt.payload===st){lt.config=lt.config.split(";").filter(dt=>!dt.includes("maxaveragebitrate")).join(";"),ot.maxbr>0&&(lt.config+=";maxaveragebitrate=".concat(ot.maxbr*1e3)),at=!0;break}return at||ot.maxbr>0&&it.fmtp.push({payload:st,config:"maxaveragebitrate=".concat(ot.maxbr*1e3)}),!0})}),nt=libExports.write(rt)}return yield this.setMungedSDP($,nt,!0),this.pendingCandidates.forEach(rt=>{this.pc.addIceCandidate(rt)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):$.type==="answer"&&(this.emit(PCEvents.NegotiationComplete),$.sdp&&libExports.parse($.sdp).media.forEach(it=>{it.type==="video"&&this.emit(PCEvents.RTPVideoPayloadTypes,it.rtp)})),!0})}createAndSendOffer($){return __awaiter$1(this,void 0,void 0,function*(){var et;const tt=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if($!=null&&$.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const ot=this._pc.remoteDescription;if($!=null&&$.iceRestart&&ot)yield this._pc.setRemoteDescription(ot);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const nt=this.latestOfferId+1;this.latestOfferId=nt;const rt=yield this.pc.createOffer($);this.log.debug("original offer",Object.assign({sdp:rt.sdp},this.logContext));const it=libExports.parse((et=rt.sdp)!==null&&et!==void 0?et:"");if(it.media.forEach(ot=>{ensureIPAddrMatchVersion(ot),ot.type==="audio"?ensureAudioNackAndStereo(ot,[],[]):ot.type==="video"&&this.trackBitrates.some(st=>{if(!ot.msid||!st.cid||!ot.msid.includes(st.cid))return!1;let at=0;if(ot.rtp.some(dt=>dt.codec.toUpperCase()===st.codec.toUpperCase()?(at=dt.payload,!0):!1),at===0||(isSVCCodec(st.codec)&&!isSafari()&&this.ensureVideoDDExtensionForSVC(ot,it),st.codec!=="av1"))return!0;const lt=Math.round(st.maxbr*startBitrateForSVC);for(const dt of ot.fmtp)if(dt.payload===at){dt.config.includes("x-google-start-bitrate")||(dt.config+=";x-google-start-bitrate=".concat(lt));break}return!0})}),this.latestOfferId>nt){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:nt}));return}yield this.setMungedSDP(rt,libExports.write(it)),this.onOffer(rt,this.latestOfferId)}finally{tt()}})}createAndSetAnswer(){return __awaiter$1(this,void 0,void 0,function*(){var $;const et=yield this.pc.createAnswer(),tt=libExports.parse(($=et.sdp)!==null&&$!==void 0?$:"");return tt.media.forEach(nt=>{ensureIPAddrMatchVersion(nt),nt.type==="audio"&&ensureAudioNackAndStereo(nt,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(et,libExports.write(tt)),et})}createDataChannel($,et){return this.pc.createDataChannel($,et)}addTransceiver($,et){return this.pc.addTransceiver($,et)}addTrack($){if(!this._pc)throw new UnexpectedConnectionState("PC closed, cannot add track");return this._pc.addTrack($)}setTrackCodecBitrate($){this.trackBitrates.push($)}setConfiguration($){var et;if(!this._pc)throw new UnexpectedConnectionState("PC closed, cannot configure");return(et=this._pc)===null||et===void 0?void 0:et.setConfiguration($)}canRemoveTrack(){var $;return!!(!(($=this._pc)===null||$===void 0)&&$.removeTrack)}removeTrack($){var et;return(et=this._pc)===null||et===void 0?void 0:et.removeTrack($)}getConnectionState(){var $,et;return(et=($=this._pc)===null||$===void 0?void 0:$.connectionState)!==null&&et!==void 0?et:"closed"}getICEConnectionState(){var $,et;return(et=($=this._pc)===null||$===void 0?void 0:$.iceConnectionState)!==null&&et!==void 0?et:"closed"}getSignallingState(){var $,et;return(et=($=this._pc)===null||$===void 0?void 0:$.signalingState)!==null&&et!==void 0?et:"closed"}getTransceivers(){var $,et;return(et=($=this._pc)===null||$===void 0?void 0:$.getTransceivers())!==null&&et!==void 0?et:[]}getSenders(){var $,et;return(et=($=this._pc)===null||$===void 0?void 0:$.getSenders())!==null&&et!==void 0?et:[]}getLocalDescription(){var $;return($=this._pc)===null||$===void 0?void 0:$.localDescription}getRemoteDescription(){var $;return($=this.pc)===null||$===void 0?void 0:$.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return __awaiter$1(this,void 0,void 0,function*(){var $;if(!this._pc)return;let et="";const tt=new Map,nt=new Map;if((yield this._pc.getStats()).forEach(ot=>{switch(ot.type){case"transport":et=ot.selectedCandidatePairId;break;case"candidate-pair":et===""&&ot.selected&&(et=ot.id),tt.set(ot.id,ot);break;case"remote-candidate":nt.set(ot.id,"".concat(ot.address,":").concat(ot.port));break}}),et==="")return;const it=($=tt.get(et))===null||$===void 0?void 0:$.remoteCandidateId;if(it!==void 0)return nt.get(it)})}setMungedSDP($,et,tt){return __awaiter$1(this,void 0,void 0,function*(){if(et){const nt=$.sdp;$.sdp=et;try{this.log.debug("setting munged ".concat(tt?"remote":"local"," description"),this.logContext),tt?yield this.pc.setRemoteDescription($):yield this.pc.setLocalDescription($);return}catch(rt){this.log.warn("not able to set ".concat($.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:rt,sdp:et})),$.sdp=nt}}try{tt?yield this.pc.setRemoteDescription($):yield this.pc.setLocalDescription($)}catch(nt){let rt="unknown error";nt instanceof Error?rt=nt.message:typeof nt=="string"&&(rt=nt);const it={error:rt,sdp:$.sdp};throw!tt&&this.pc.remoteDescription&&(it.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat($.type),Object.assign(Object.assign({},this.logContext),{fields:it})),new NegotiationError(rt)}})}ensureVideoDDExtensionForSVC($,et){var tt,nt;if(!((tt=$.ext)===null||tt===void 0?void 0:tt.some(it=>it.uri===ddExtensionURI))){if(this.ddExtID===0){let it=0;et.media.forEach(ot=>{var st;ot.type==="video"&&((st=ot.ext)===null||st===void 0||st.forEach(at=>{at.value>it&&(it=at.value)}))}),this.ddExtID=it+1}(nt=$.ext)===null||nt===void 0||nt.push({value:this.ddExtID,uri:ddExtensionURI})}}}function ensureAudioNackAndStereo(_e,$,et){let tt=0;_e.rtp.some(nt=>nt.codec==="opus"?(tt=nt.payload,!0):!1),tt>0&&(_e.rtcpFb||(_e.rtcpFb=[]),et.includes(_e.mid)&&!_e.rtcpFb.some(nt=>nt.payload===tt&&nt.type==="nack")&&_e.rtcpFb.push({payload:tt,type:"nack"}),$.includes(_e.mid)&&_e.fmtp.some(nt=>nt.payload===tt?(nt.config.includes("stereo=1")||(nt.config+=";stereo=1"),!0):!1))}function extractStereoAndNackAudioFromOffer(_e){var $;const et=[],tt=[],nt=libExports.parse(($=_e.sdp)!==null&&$!==void 0?$:"");let rt=0;return nt.media.forEach(it=>{var ot;it.type==="audio"&&(it.rtp.some(st=>st.codec==="opus"?(rt=st.payload,!0):!1),!((ot=it.rtcpFb)===null||ot===void 0)&&ot.some(st=>st.payload===rt&&st.type==="nack")&&tt.push(it.mid),it.fmtp.some(st=>st.payload===rt?(st.config.includes("sprop-stereo=1")&&et.push(it.mid),!0):!1))}),{stereoMids:et,nackMids:tt}}function ensureIPAddrMatchVersion(_e){if(_e.connection){const $=_e.connection.ip.indexOf(":")>=0;(_e.connection.version===4&&$||_e.connection.version===6&&!$)&&(_e.connection.ip="0.0.0.0",_e.connection.version=4)}}const defaultVideoCodec="vp8",publishDefaults={audioPreset:AudioPresets.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:ScreenSharePresets.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:defaultVideoCodec,backupCodec:!0,preConnectBuffer:!1},audioDefaults={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},videoDefaults={deviceId:{ideal:"default"},resolution:VideoPresets.h720.resolution},roomOptionDefaults={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new DefaultReconnectPolicy,disconnectOnPageLeave:!0,webAudioMix:!1},roomConnectOptionDefaults={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var PCTransportState;(function(_e){_e[_e.NEW=0]="NEW",_e[_e.CONNECTING=1]="CONNECTING",_e[_e.CONNECTED=2]="CONNECTED",_e[_e.FAILED=3]="FAILED",_e[_e.CLOSING=4]="CLOSING",_e[_e.CLOSED=5]="CLOSED"})(PCTransportState||(PCTransportState={}));class PCTransportManager{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor($,et,tt){var nt;this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.log=livekitLogger,this.updateState=()=>{var rt;const it=this.state,ot=this.requiredTransports.map(st=>st.getConnectionState());ot.every(st=>st==="connected")?this.state=PCTransportState.CONNECTED:ot.some(st=>st==="failed")?this.state=PCTransportState.FAILED:ot.some(st=>st==="connecting")?this.state=PCTransportState.CONNECTING:ot.every(st=>st==="closed")?this.state=PCTransportState.CLOSED:ot.some(st=>st==="closed")?this.state=PCTransportState.CLOSING:ot.every(st=>st==="new")&&(this.state=PCTransportState.NEW),it!==this.state&&(this.log.debug("pc state change: from ".concat(PCTransportState[it]," to ").concat(PCTransportState[this.state]),this.logContext),(rt=this.onStateChange)===null||rt===void 0||rt.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=getLogger((nt=tt.loggerName)!==null&&nt!==void 0?nt:LoggerNames.PCManager),this.loggerOptions=tt,this.isPublisherConnectionRequired=!et,this.isSubscriberConnectionRequired=et,this.publisher=new PCTransport($,tt),this.subscriber=new PCTransport($,tt),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=rt=>{var it;(it=this.onIceCandidate)===null||it===void 0||it.call(this,rt,SignalTarget.PUBLISHER)},this.subscriber.onIceCandidate=rt=>{var it;(it=this.onIceCandidate)===null||it===void 0||it.call(this,rt,SignalTarget.SUBSCRIBER)},this.subscriber.onDataChannel=rt=>{var it;(it=this.onDataChannel)===null||it===void 0||it.call(this,rt)},this.subscriber.onTrack=rt=>{var it;(it=this.onTrack)===null||it===void 0||it.call(this,rt)},this.publisher.onOffer=(rt,it)=>{var ot;(ot=this.onPublisherOffer)===null||ot===void 0||ot.call(this,rt,it)},this.state=PCTransportState.NEW,this.connectionLock=new _$1,this.remoteOfferLock=new _$1}get logContext(){var $,et;return Object.assign({},(et=($=this.loggerOptions).loggerContextCb)===null||et===void 0?void 0:et.call($))}requirePublisher(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=$,this.updateState()}requireSubscriber(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=$,this.updateState()}createAndSendPublisherOffer($){return this.publisher.createAndSendOffer($)}setPublisherAnswer($,et){return this.publisher.setRemoteDescription($,et)}removeTrack($){return this.publisher.removeTrack($)}close(){return __awaiter$1(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const $=this.publisher;for(const et of $.getSenders())try{$.canRemoveTrack()&&$.removeTrack(et)}catch(tt){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:tt}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return __awaiter$1(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate($,et){return __awaiter$1(this,void 0,void 0,function*(){et===SignalTarget.PUBLISHER?yield this.publisher.addIceCandidate($):yield this.subscriber.addIceCandidate($)})}createSubscriberAnswerFromOffer($,et){return __awaiter$1(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:$.type,sdp:$.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const tt=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription($,et))?yield this.subscriber.createAndSetAnswer():void 0}finally{tt()}})}updateConfiguration($,et){this.publisher.setConfiguration($),this.subscriber.setConfiguration($),et&&this.triggerIceRestart()}ensurePCTransportConnection($,et){return __awaiter$1(this,void 0,void 0,function*(){var tt;const nt=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((tt=this.requiredTransports)===null||tt===void 0?void 0:tt.map(rt=>this.ensureTransportConnected(rt,$,et)))}finally{nt()}})}negotiate($){return __awaiter$1(this,void 0,void 0,function*(){return new Promise((et,tt)=>__awaiter$1(this,void 0,void 0,function*(){const nt=setTimeout(()=>{tt("negotiation timed out")},this.peerConnectionTimeout),rt=()=>{clearTimeout(nt),tt("negotiation aborted")};$.signal.addEventListener("abort",rt),this.publisher.once(PCEvents.NegotiationStarted,()=>{$.signal.aborted||this.publisher.once(PCEvents.NegotiationComplete,()=>{clearTimeout(nt),et()})}),yield this.publisher.negotiate(it=>{clearTimeout(nt),tt(it)})}))})}addPublisherTransceiver($,et){return this.publisher.addTransceiver($,et)}addPublisherTrack($){return this.publisher.addTrack($)}createPublisherDataChannel($,et){return this.publisher.createDataChannel($,et)}getConnectedAddress($){return $===SignalTarget.PUBLISHER?this.publisher.getConnectedAddress():$===SignalTarget.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const $=[];return this.isPublisherConnectionRequired&&$.push(this.publisher),this.isSubscriberConnectionRequired&&$.push(this.subscriber),$}ensureTransportConnected($,et){return __awaiter$1(this,arguments,void 0,function(tt,nt){var rt=this;let it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(tt.getConnectionState()!=="connected")return new Promise((st,at)=>__awaiter$1(rt,void 0,void 0,function*(){const lt=()=>{this.log.warn("abort transport connection",this.logContext),CriticalTimers.clearTimeout(dt),at(new ConnectionError("room connection has been cancelled",ConnectionErrorReason.Cancelled))};nt!=null&&nt.signal.aborted&&lt(),nt==null||nt.signal.addEventListener("abort",lt);const dt=CriticalTimers.setTimeout(()=>{nt==null||nt.signal.removeEventListener("abort",lt),at(new ConnectionError("could not establish pc connection",ConnectionErrorReason.InternalError))},it);for(;this.state!==PCTransportState.CONNECTED;)if(yield sleep$1(50),nt!=null&&nt.signal.aborted){at(new ConnectionError("room connection has been cancelled",ConnectionErrorReason.Cancelled));return}CriticalTimers.clearTimeout(dt),nt==null||nt.signal.removeEventListener("abort",lt),st()}))}()})}}class RpcError extends Error{constructor($,et,tt){super(et),this.code=$,this.message=truncateBytes(et,RpcError.MAX_MESSAGE_BYTES),this.data=tt?truncateBytes(tt,RpcError.MAX_DATA_BYTES):void 0}static fromProto($){return new RpcError($.code,$.message,$.data)}toProto(){return new RpcError$1({code:this.code,message:this.message,data:this.data})}static builtIn($,et){return new RpcError(RpcError.ErrorCode[$],RpcError.ErrorMessage[$],et)}}RpcError.MAX_MESSAGE_BYTES=256;RpcError.MAX_DATA_BYTES=15360;RpcError.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};RpcError.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const MAX_PAYLOAD_BYTES=15360;function byteLength(_e){return new TextEncoder().encode(_e).length}function truncateBytes(_e,$){if(byteLength(_e)<=$)return _e;let et=0,tt=_e.length;const nt=new TextEncoder;for(;et<tt;){const rt=Math.floor((et+tt+1)/2);nt.encode(_e.slice(0,rt)).length<=$?et=rt:tt=rt-1}return _e.slice(0,et)}const monitorFrequency=2e3;function computeBitrate(_e,$){if(!$)return 0;let et,tt;return"bytesReceived"in _e?(et=_e.bytesReceived,tt=$.bytesReceived):"bytesSent"in _e&&(et=_e.bytesSent,tt=$.bytesSent),et===void 0||tt===void 0||_e.timestamp===void 0||$.timestamp===void 0?0:(et-tt)*8*1e3/(_e.timestamp-$.timestamp)}const isMediaRecorderAvailable=typeof MediaRecorder<"u";class FallbackRecorder{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const RecorderBase=isMediaRecorderAvailable?MediaRecorder:FallbackRecorder;class LocalTrackRecorder extends RecorderBase{constructor($,et){if(!isMediaRecorderAvailable)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([$.mediaStreamTrack]),et);let tt,nt;const rt=()=>nt===void 0,it=()=>{this.removeEventListener("dataavailable",tt),this.removeEventListener("stop",it),this.removeEventListener("error",ot),nt==null||nt.close(),nt=void 0},ot=st=>{nt==null||nt.error(st),this.removeEventListener("dataavailable",tt),this.removeEventListener("stop",it),this.removeEventListener("error",ot),nt=void 0};this.byteStream=new ReadableStream({start:st=>{nt=st,tt=at=>__awaiter$1(this,void 0,void 0,function*(){let lt;if(at.data.arrayBuffer){const dt=yield at.data.arrayBuffer();lt=new Uint8Array(dt)}else if(at.data.byteArray)lt=at.data.byteArray;else throw new Error("no data available!");rt()||st.enqueue(lt)}),this.addEventListener("dataavailable",tt)},cancel:()=>{it()}}),this.addEventListener("stop",it),this.addEventListener("error",ot)}}function isRecordingSupported(){return isMediaRecorderAvailable}const DEFAULT_DIMENSIONS_TIMEOUT=1e3,PRE_CONNECT_BUFFER_TIMEOUT=1e4;class LocalTrack extends Track{get sender(){return this._sender}set sender($){this._sender=$}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor($,et,tt){let nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,rt=arguments.length>4?arguments[4]:void 0;super($,et,rt),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=r$1(()=>__awaiter$1(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>__awaiter$1(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(TrackEvent.Ended,this)},this.reacquireTrack=!1,this.providedByUser=nt,this.muteLock=new _$1,this.pauseUpstreamLock=new _$1,this.processorLock=new _$1,this.restartLock=new _$1,this.setMediaStreamTrack($,!0),this._constraints=$.getConstraints(),tt&&(this._constraints=tt)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Track.Kind.Video)return;const{width:$,height:et}=this._mediaStreamTrack.getSettings();if($&&et)return{width:$,height:et}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var $,et;return(et=($=this.processor)===null||$===void 0?void 0:$.processedTrack)!==null&&et!==void 0?et:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack($,et){return __awaiter$1(this,void 0,void 0,function*(){var tt;if($===this._mediaStreamTrack&&!et)return;this._mediaStreamTrack&&(this.attachedElements.forEach(rt=>{detachTrack(this._mediaStreamTrack,rt)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([$]),$&&($.addEventListener("ended",this.handleEnded),$.addEventListener("mute",this.handleTrackMuteEvent),$.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=$.getConstraints());let nt;if(this.processor&&$){const rt=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(attachToElement($,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:$,kind:this.kind,element:this.processorElement}),nt=this.processor.processedTrack}finally{rt()}}this.sender&&((tt=this.sender.transport)===null||tt===void 0?void 0:tt.state)!=="closed"&&(yield this.sender.replaceTrack(nt??$)),!this.providedByUser&&this._mediaStreamTrack!==$&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=$,$&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(rt=>{attachToElement(nt??$,rt)}))})}waitForDimensions(){return __awaiter$1(this,arguments,void 0,function(){var $=this;let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:DEFAULT_DIMENSIONS_TIMEOUT;return function*(){var tt;if($.kind===Track.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((tt=getBrowser())===null||tt===void 0?void 0:tt.os)==="iOS"&&(yield sleep$1(10));const nt=Date.now();for(;Date.now()-nt<et;){const rt=$.dimensions;if(rt)return rt;yield sleep$1(50)}throw new TrackInvalidError("unable to get track dimensions after timeout")}()})}setDeviceId($){return __awaiter$1(this,void 0,void 0,function*(){return this._constraints.deviceId===$&&this._mediaStreamTrack.getSettings().deviceId===unwrapConstraint($)||(this._constraints.deviceId=$,this.isMuted)?!0:(yield this.restartTrack(),unwrapConstraint($)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return __awaiter$1(this,arguments,void 0,function(){var $=this;let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if($.source===Track.Source.ScreenShare)return;const{deviceId:tt,groupId:nt}=$._mediaStreamTrack.getSettings(),rt=$.kind===Track.Kind.Audio?"audioinput":"videoinput";return et?DeviceManager.getInstance().normalizeDeviceId(rt,tt,nt):tt}()})}mute(){return __awaiter$1(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return __awaiter$1(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack($,et){return __awaiter$1(this,void 0,void 0,function*(){if(!this.sender)throw new TrackInvalidError("unable to replace an unpublished track");let tt,nt;return typeof et=="boolean"?tt=et:et!==void 0&&(tt=et.userProvidedTrack,nt=et.stopProcessor),this.providedByUser=tt??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack($),nt&&this.processor&&(yield this.stopProcessor()),this})}restart($){return __awaiter$1(this,void 0,void 0,function*(){this.manuallyStopped=!1;const et=yield this.restartLock.lock();try{$||($=this._constraints);const{deviceId:tt,facingMode:nt}=$,rt=__rest($,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:$}));const it={audio:!1,video:!1};this.kind===Track.Kind.Video?it.video=tt||nt?{deviceId:tt,facingMode:nt}:!0:it.audio=tt?{deviceId:tt}:!0,this.attachedElements.forEach(at=>{detachTrack(this.mediaStreamTrack,at)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const st=(yield navigator.mediaDevices.getUserMedia(it)).getTracks()[0];return yield st.applyConstraints(rt),st.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(st),this._constraints=$,this.emit(TrackEvent.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{et()}})}setTrackMuted($){this.log.debug("setting ".concat(this.kind," track ").concat($?"muted":"unmuted"),this.logContext),!(this.isMuted===$&&this._mediaStreamTrack.enabled!==$)&&(this.isMuted=$,this._mediaStreamTrack.enabled=!$,this.emit($?TrackEvent.Muted:TrackEvent.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const $=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter$1(this,void 0,void 0,function*(){yield $.handleAppVisibilityChanged.call(this),isMobile()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var $;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),($=this.processor)===null||$===void 0||$.destroy(),this.processor=void 0}pauseUpstream(){return __awaiter$1(this,void 0,void 0,function*(){var $;const et=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(TrackEvent.UpstreamPaused,this);const tt=getBrowser();if((tt==null?void 0:tt.name)==="Safari"&&compareVersions(tt.version,"12.0")<0)throw new DeviceUnsupportedError("pauseUpstream is not supported on Safari < 12.");(($=this.sender.transport)===null||$===void 0?void 0:$.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{et()}})}resumeUpstream(){return __awaiter$1(this,void 0,void 0,function*(){var $;const et=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(TrackEvent.UpstreamResumed,this),(($=this.sender.transport)===null||$===void 0?void 0:$.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{et()}})}getRTCStatsReport(){return __awaiter$1(this,void 0,void 0,function*(){var $;return!(($=this.sender)===null||$===void 0)&&$.getStats?yield this.sender.getStats():void 0})}setProcessor($){return __awaiter$1(this,arguments,void 0,function(et){var tt=this;let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var rt;const it=yield tt.processorLock.lock();try{tt.log.debug("setting up processor",tt.logContext);const ot=document.createElement(tt.kind),st={kind:tt.kind,track:tt._mediaStreamTrack,element:ot,audioContext:tt.audioContext};if(yield et.init(st),tt.log.debug("processor initialized",tt.logContext),tt.processor&&(yield tt.stopProcessor()),tt.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(attachToElement(tt._mediaStreamTrack,ot),ot.muted=!0,ot.play().catch(at=>{at instanceof DOMException&&at.name==="AbortError"?(tt.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},tt.logContext),{error:at})),setTimeout(()=>{ot.play().catch(lt=>{tt.log.error("failed to play processor element",Object.assign(Object.assign({},tt.logContext),{err:lt}))})},100)):tt.log.error("failed to play processor element",Object.assign(Object.assign({},tt.logContext),{error:at}))}),tt.processor=et,tt.processorElement=ot,tt.processor.processedTrack){for(const at of tt.attachedElements)at!==tt.processorElement&&nt&&(detachTrack(tt._mediaStreamTrack,at),attachToElement(tt.processor.processedTrack,at));yield(rt=tt.sender)===null||rt===void 0?void 0:rt.replaceTrack(tt.processor.processedTrack)}tt.emit(TrackEvent.TrackProcessorUpdate,tt.processor)}finally{it()}}()})}getProcessor(){return this.processor}stopProcessor(){return __awaiter$1(this,arguments,void 0,function(){var $=this;let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var tt,nt;$.processor&&($.log.debug("stopping processor",$.logContext),(tt=$.processor.processedTrack)===null||tt===void 0||tt.stop(),yield $.processor.destroy(),$.processor=void 0,et||((nt=$.processorElement)===null||nt===void 0||nt.remove(),$.processorElement=void 0),yield $._mediaStreamTrack.applyConstraints($._constraints),yield $.setMediaStreamTrack($._mediaStreamTrack,!0),$.emit(TrackEvent.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!isRecordingSupported()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let et="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(et)||(et="video/mp4"),this.localTrackRecorder=new LocalTrackRecorder(this,{mimeType:et})}this.localTrackRecorder.start($),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},PRE_CONNECT_BUFFER_TIMEOUT)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var $;return($=this.localTrackRecorder)===null||$===void 0?void 0:$.byteStream}getPreConnectBufferMimeType(){var $;return($=this.localTrackRecorder)===null||$===void 0?void 0:$.mimeType}}class LocalAudioTrack extends LocalTrack{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor($,et){let tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,nt=arguments.length>3?arguments[3]:void 0,rt=arguments.length>4?arguments[4]:void 0;super($,Track.Kind.Audio,et,tt,rt),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>__awaiter$1(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let it;try{it=yield this.getSenderStats()}catch(ot){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:ot}));return}it&&this.prevStats&&(this._currentBitrate=computeBitrate(it,this.prevStats)),this.prevStats=it}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(TrackEvent.AudioTrackFeatureUpdate,this,AudioTrackFeature.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(TrackEvent.AudioTrackFeatureUpdate,this,AudioTrackFeature.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=nt,this.checkForSilence()}mute(){const $=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter$1(this,void 0,void 0,function*(){const et=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Track.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield $.mute.call(this),this)}finally{et()}})}unmute(){const $=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter$1(this,void 0,void 0,function*(){const et=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const tt=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==unwrapConstraint(this._constraints.deviceId);return this.source===Track.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||tt)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield $.unmute.call(this),this}finally{et()}})}restartTrack($){return __awaiter$1(this,void 0,void 0,function*(){let et;if($){const tt=constraintsForOptions({audio:$});typeof tt.audio!="boolean"&&(et=tt.audio)}yield this.restart(et)})}restart($){const et=Object.create(null,{restart:{get:()=>super.restart}});return __awaiter$1(this,void 0,void 0,function*(){const tt=yield et.restart.call(this,$);return this.checkForSilence(),tt})}startMonitor(){isWeb()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency)))}setProcessor($){return __awaiter$1(this,void 0,void 0,function*(){var et;const tt=yield this.processorLock.lock();try{if(!isReactNative()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const nt={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat($.name),this.logContext),yield $.init(nt),this.processor=$,this.processor.processedTrack&&(yield(et=this.sender)===null||et===void 0?void 0:et.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(TrackEvent.TrackProcessorUpdate,this.processor)}finally{tt()}})}setAudioContext($){this.audioContext=$}getSenderStats(){return __awaiter$1(this,void 0,void 0,function*(){var $;if(!(!(($=this.sender)===null||$===void 0)&&$.getStats))return;const et=yield this.sender.getStats();let tt;return et.forEach(nt=>{nt.type==="outbound-rtp"&&(tt={type:"audio",streamId:nt.id,packetsSent:nt.packetsSent,packetsLost:nt.packetsLost,bytesSent:nt.bytesSent,timestamp:nt.timestamp,roundTripTime:nt.roundTripTime,jitter:nt.jitter})}),tt})}checkForSilence(){return __awaiter$1(this,void 0,void 0,function*(){const $=yield detectSilence(this);return $&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(TrackEvent.AudioSilenceDetected)),$})}}function mediaTrackToLocalTrack(_e,$,et){switch(_e.kind){case"audio":return new LocalAudioTrack(_e,$,!1,void 0,et);case"video":return new LocalVideoTrack(_e,$,!1,et);default:throw new TrackInvalidError("unsupported track type: ".concat(_e.kind))}}const presets169=Object.values(VideoPresets),presets43=Object.values(VideoPresets43),presetsScreenShare=Object.values(ScreenSharePresets),defaultSimulcastPresets169=[VideoPresets.h180,VideoPresets.h360],defaultSimulcastPresets43=[VideoPresets43.h180,VideoPresets43.h360],computeDefaultScreenShareSimulcastPresets=_e=>[{scaleResolutionDownBy:2,fps:_e.encoding.maxFramerate}].map(et=>{var tt,nt;return new VideoPreset(Math.floor(_e.width/et.scaleResolutionDownBy),Math.floor(_e.height/et.scaleResolutionDownBy),Math.max(15e4,Math.floor(_e.encoding.maxBitrate/(Math.pow(et.scaleResolutionDownBy,2)*(((tt=_e.encoding.maxFramerate)!==null&&tt!==void 0?tt:30)/((nt=et.fps)!==null&&nt!==void 0?nt:30))))),et.fps,_e.encoding.priority)}),videoRids=["q","h","f"];function computeVideoEncodings(_e,$,et,tt){var nt,rt;let it=tt==null?void 0:tt.videoEncoding;_e&&(it=tt==null?void 0:tt.screenShareEncoding);const ot=tt==null?void 0:tt.simulcast,st=tt==null?void 0:tt.scalabilityMode,at=tt==null?void 0:tt.videoCodec;if(!it&&!ot&&!st||!$||!et)return[{}];it||(it=determineAppropriateEncoding(_e,$,et,at),livekitLogger.debug("using video encoding",it));const lt=it.maxFramerate,dt=new VideoPreset($,et,it.maxBitrate,it.maxFramerate,it.priority);if(st&&isSVCCodec(at)){const vt=new ScalabilityMode(st),mt=[];if(vt.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(st));const kt=getBrowser();if(isSafariBased()||isReactNative()||(kt==null?void 0:kt.name)==="Chrome"&&compareVersions(kt==null?void 0:kt.version,"113")<0){const bt=vt.suffix=="h"?2:3,gt=isSafariSvcApi(kt);for(let St=0;St<vt.spatial;St+=1)mt.push({rid:videoRids[2-St],maxBitrate:it.maxBitrate/Math.pow(bt,St),maxFramerate:dt.encoding.maxFramerate,scaleResolutionDownBy:gt?Math.pow(2,St):void 0});mt[0].scalabilityMode=st}else mt.push({maxBitrate:it.maxBitrate,maxFramerate:dt.encoding.maxFramerate,scalabilityMode:st});return dt.encoding.priority&&(mt[0].priority=dt.encoding.priority,mt[0].networkPriority=dt.encoding.priority),livekitLogger.debug("using svc encoding",{encodings:mt}),mt}if(!ot)return[it];let pt=[];_e?pt=(nt=sortPresets(tt==null?void 0:tt.screenShareSimulcastLayers))!==null&&nt!==void 0?nt:defaultSimulcastLayers(_e,dt):pt=(rt=sortPresets(tt==null?void 0:tt.videoSimulcastLayers))!==null&&rt!==void 0?rt:defaultSimulcastLayers(_e,dt);let ht;if(pt.length>0){const vt=pt[0];pt.length>1&&([,ht]=pt);const mt=Math.max($,et);if(mt>=960&&ht)return encodingsFromPresets($,et,[vt,ht,dt],lt);if(mt>=480)return encodingsFromPresets($,et,[vt,dt],lt)}return encodingsFromPresets($,et,[dt])}function computeTrackBackupEncodings(_e,$,et){var tt,nt,rt,it;if(!et.backupCodec||et.backupCodec===!0||et.backupCodec.codec===et.videoCodec)return;$!==et.backupCodec.codec&&livekitLogger.warn("requested a different codec than specified as backup",{serverRequested:$,backup:et.backupCodec.codec}),et.videoCodec=$,et.videoEncoding=et.backupCodec.encoding;const ot=_e.mediaStreamTrack.getSettings(),st=(tt=ot.width)!==null&&tt!==void 0?tt:(nt=_e.dimensions)===null||nt===void 0?void 0:nt.width,at=(rt=ot.height)!==null&&rt!==void 0?rt:(it=_e.dimensions)===null||it===void 0?void 0:it.height;return _e.source===Track.Source.ScreenShare&&et.simulcast&&(et.simulcast=!1),computeVideoEncodings(_e.source===Track.Source.ScreenShare,st,at,et)}function determineAppropriateEncoding(_e,$,et,tt){const nt=presetsForResolution(_e,$,et);let{encoding:rt}=nt[0];const it=Math.max($,et);for(let ot=0;ot<nt.length;ot+=1){const st=nt[ot];if(rt=st.encoding,st.width>=it)break}if(tt)switch(tt){case"av1":case"h265":rt=Object.assign({},rt),rt.maxBitrate=rt.maxBitrate*.7;break;case"vp9":rt=Object.assign({},rt),rt.maxBitrate=rt.maxBitrate*.85;break}return rt}function presetsForResolution(_e,$,et){if(_e)return presetsScreenShare;const tt=$>et?$/et:et/$;return Math.abs(tt-16/9)<Math.abs(tt-4/3)?presets169:presets43}function defaultSimulcastLayers(_e,$){if(_e)return computeDefaultScreenShareSimulcastPresets($);const{width:et,height:tt}=$,nt=et>tt?et/tt:tt/et;return Math.abs(nt-16/9)<Math.abs(nt-4/3)?defaultSimulcastPresets169:defaultSimulcastPresets43}function encodingsFromPresets(_e,$,et,tt){const nt=[];if(et.forEach((rt,it)=>{if(it>=videoRids.length)return;const ot=Math.min(_e,$),at={rid:videoRids[it],scaleResolutionDownBy:Math.max(1,ot/Math.min(rt.width,rt.height)),maxBitrate:rt.encoding.maxBitrate},lt=tt&&rt.encoding.maxFramerate?Math.min(tt,rt.encoding.maxFramerate):rt.encoding.maxFramerate;lt&&(at.maxFramerate=lt);const dt=isFireFox()||it===0;rt.encoding.priority&&dt&&(at.priority=rt.encoding.priority,at.networkPriority=rt.encoding.priority),nt.push(at)}),isReactNative()&&getReactNativeOs()==="ios"){let rt;nt.forEach(ot=>{rt?ot.maxFramerate&&ot.maxFramerate>rt&&(rt=ot.maxFramerate):rt=ot.maxFramerate});let it=!0;nt.forEach(ot=>{var st;ot.maxFramerate!=rt&&(it&&(it=!1,livekitLogger.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),livekitLogger.info('Setting framerate of encoding "'.concat((st=ot.rid)!==null&&st!==void 0?st:"",'" to ').concat(rt)),ot.maxFramerate=rt)})}return nt}function sortPresets(_e){if(_e)return _e.sort(($,et)=>{const{encoding:tt}=$,{encoding:nt}=et;return tt.maxBitrate>nt.maxBitrate?1:tt.maxBitrate<nt.maxBitrate?-1:tt.maxBitrate===nt.maxBitrate&&tt.maxFramerate&&nt.maxFramerate?tt.maxFramerate>nt.maxFramerate?1:-1:0})}class ScalabilityMode{constructor($){const et=$.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!et)throw new Error("invalid scalability mode");if(this.spatial=parseInt(et[1]),this.temporal=parseInt(et[2]),et.length>3)switch(et[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=et[3]}}toString(){var $;return"L".concat(this.spatial,"T").concat(this.temporal).concat(($=this.suffix)!==null&&$!==void 0?$:"")}}function getDefaultDegradationPreference(_e){return _e.source===Track.Source.ScreenShare||_e.constraints.height&&unwrapConstraint(_e.constraints.height)>=1080?"maintain-resolution":"balanced"}const refreshSubscribedCodecAfterNewCodec=5e3;class LocalVideoTrack extends LocalTrack{get sender(){return this._sender}set sender($){this._sender=$,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor($,et){let tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,nt=arguments.length>3?arguments[3]:void 0;super($,Track.Kind.Video,et,tt,nt),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>__awaiter$1(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let rt;try{rt=yield this.getSenderStats()}catch(st){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:st}));return}const it=new Map(rt.map(st=>[st.rid,st])),ot=rt.some(st=>st.qualityLimitationReason==="cpu");if(ot!==this.isCpuConstrained&&(this.isCpuConstrained=ot,this.isCpuConstrained&&this.emit(TrackEvent.CpuConstrained)),this.prevStats){let st=0;it.forEach((at,lt)=>{var dt;const pt=(dt=this.prevStats)===null||dt===void 0?void 0:dt.get(lt);st+=computeBitrate(at,pt)}),this._currentBitrate=st}this.prevStats=it}),this.senderLock=new _$1}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor($){var et;if(this.signalClient=$,!isWeb())return;const tt=(et=this.sender)===null||et===void 0?void 0:et.getParameters();tt&&(this.encodings=tt.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach($=>{$.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const $=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return __awaiter$1(this,void 0,void 0,function*(){var et,tt,nt,rt,it;yield $.pauseUpstream.call(this);try{for(var ot=!0,st=__asyncValues(this.simulcastCodecs.values()),at;at=yield st.next(),et=at.done,!et;ot=!0)rt=at.value,ot=!1,yield(it=rt.sender)===null||it===void 0?void 0:it.replaceTrack(null)}catch(lt){tt={error:lt}}finally{try{!ot&&!et&&(nt=st.return)&&(yield nt.call(st))}finally{if(tt)throw tt.error}}})}resumeUpstream(){const $=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return __awaiter$1(this,void 0,void 0,function*(){var et,tt,nt,rt,it;yield $.resumeUpstream.call(this);try{for(var ot=!0,st=__asyncValues(this.simulcastCodecs.values()),at;at=yield st.next(),et=at.done,!et;ot=!0){rt=at.value,ot=!1;const lt=rt;yield(it=lt.sender)===null||it===void 0?void 0:it.replaceTrack(lt.mediaStreamTrack)}}catch(lt){tt={error:lt}}finally{try{!ot&&!et&&(nt=st.return)&&(yield nt.call(st))}finally{if(tt)throw tt.error}}})}mute(){const $=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter$1(this,void 0,void 0,function*(){const et=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Track.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield $.mute.call(this),this)}finally{et()}})}unmute(){const $=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter$1(this,void 0,void 0,function*(){const et=yield this.muteLock.lock();try{return this.isMuted?(this.source===Track.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield $.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{et()}})}setTrackMuted($){super.setTrackMuted($);for(const et of this.simulcastCodecs.values())et.mediaStreamTrack.enabled=!$}getSenderStats(){return __awaiter$1(this,void 0,void 0,function*(){var $;if(!(!(($=this.sender)===null||$===void 0)&&$.getStats))return[];const et=[],tt=yield this.sender.getStats();return tt.forEach(nt=>{var rt;if(nt.type==="outbound-rtp"){const it={type:"video",streamId:nt.id,frameHeight:nt.frameHeight,frameWidth:nt.frameWidth,framesPerSecond:nt.framesPerSecond,framesSent:nt.framesSent,firCount:nt.firCount,pliCount:nt.pliCount,nackCount:nt.nackCount,packetsSent:nt.packetsSent,bytesSent:nt.bytesSent,qualityLimitationReason:nt.qualityLimitationReason,qualityLimitationDurations:nt.qualityLimitationDurations,qualityLimitationResolutionChanges:nt.qualityLimitationResolutionChanges,rid:(rt=nt.rid)!==null&&rt!==void 0?rt:nt.id,retransmittedPacketsSent:nt.retransmittedPacketsSent,targetBitrate:nt.targetBitrate,timestamp:nt.timestamp},ot=tt.get(nt.remoteId);ot&&(it.jitter=ot.jitter,it.packetsLost=ot.packetsLost,it.roundTripTime=ot.roundTripTime),et.push(it)}}),et.sort((nt,rt)=>{var it,ot;return((it=rt.frameWidth)!==null&&it!==void 0?it:0)-((ot=nt.frameWidth)!==null&&ot!==void 0?ot:0)}),et})}setPublishingQuality($){const et=[];for(let tt=VideoQuality.LOW;tt<=VideoQuality.HIGH;tt+=1)et.push(new SubscribedQuality({quality:tt,enabled:tt<=$}));this.log.debug("setting publishing quality. max quality ".concat($),this.logContext),this.setPublishingLayers(isSVCCodec(this.codec),et)}restartTrack($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt,nt,rt,it;let ot;if($){const dt=constraintsForOptions({video:$});typeof dt.video!="boolean"&&(ot=dt.video)}yield this.restart(ot),this.isCpuConstrained=!1;try{for(var st=!0,at=__asyncValues(this.simulcastCodecs.values()),lt;lt=yield at.next(),et=lt.done,!et;st=!0){rt=lt.value,st=!1;const dt=rt;dt.sender&&((it=dt.sender.transport)===null||it===void 0?void 0:it.state)!=="closed"&&(dt.mediaStreamTrack=this.mediaStreamTrack.clone(),yield dt.sender.replaceTrack(dt.mediaStreamTrack))}}catch(dt){tt={error:dt}}finally{try{!st&&!et&&(nt=at.return)&&(yield nt.call(at))}finally{if(tt)throw tt.error}}})}setProcessor($){const et=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return __awaiter$1(this,arguments,void 0,function(tt){var nt=this;let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var it,ot,st,at,lt,dt;if(yield et.setProcessor.call(nt,tt,rt),!((lt=nt.processor)===null||lt===void 0)&&lt.processedTrack)try{for(var pt=!0,ht=__asyncValues(nt.simulcastCodecs.values()),vt;vt=yield ht.next(),it=vt.done,!it;pt=!0)at=vt.value,pt=!1,yield(dt=at.sender)===null||dt===void 0?void 0:dt.replaceTrack(nt.processor.processedTrack)}catch(mt){ot={error:mt}}finally{try{!pt&&!it&&(st=ht.return)&&(yield st.call(ht))}finally{if(ot)throw ot.error}}}()})}setDegradationPreference($){return __awaiter$1(this,void 0,void 0,function*(){if(this.degradationPreference=$,this.sender)try{this.log.debug("setting degradationPreference to ".concat($),this.logContext);const et=this.sender.getParameters();et.degradationPreference=$,this.sender.setParameters(et)}catch(et){this.log.warn("failed to set degradationPreference",Object.assign({error:et},this.logContext))}})}addSimulcastTrack($,et){if(this.simulcastCodecs.has($)){this.log.error("".concat($," already added, skipping adding simulcast codec"),this.logContext);return}const tt={codec:$,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:et};return this.simulcastCodecs.set($,tt),tt}setSimulcastTrackSender($,et){const tt=this.simulcastCodecs.get($);tt&&(tt.sender=et,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},refreshSubscribedCodecAfterNewCodec))}setPublishingCodecs($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt,nt,rt,it,ot,st;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:$,currentCodec:this.codec})),!this.codec&&$.length>0)return yield this.setPublishingLayers(isSVCCodec($[0].codec),$[0].qualities),[];this.subscribedCodecs=$;const at=[];try{for(et=!0,tt=__asyncValues($);nt=yield tt.next(),rt=nt.done,!rt;et=!0){st=nt.value,et=!1;const lt=st;if(!this.codec||this.codec===lt.codec)yield this.setPublishingLayers(isSVCCodec(lt.codec),lt.qualities);else{const dt=this.simulcastCodecs.get(lt.codec);if(this.log.debug("try setPublishingCodec for ".concat(lt.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:dt})),!dt||!dt.sender){for(const pt of lt.qualities)if(pt.enabled){at.push(lt.codec);break}}else dt.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(lt.codec),this.logContext),yield setPublishingLayersForSender(dt.sender,dt.encodings,lt.qualities,this.senderLock,isSVCCodec(lt.codec),this.log,this.logContext))}}}catch(lt){it={error:lt}}finally{try{!et&&!rt&&(ot=tt.return)&&(yield ot.call(tt))}finally{if(it)throw it.error}}return at})}setPublishingLayers($,et){return __awaiter$1(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:et}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:et})),!(!this.sender||!this.encodings)&&(yield setPublishingLayersForSender(this.sender,this.encodings,et,this.senderLock,$,this.log,this.logContext))})}prioritizePerformance(){return __awaiter$1(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const $=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const et=this.sender.getParameters();et.encodings=et.encodings.map((tt,nt)=>{var rt;return Object.assign(Object.assign({},tt),{active:nt===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((rt=this.mediaStreamTrack.getSettings().height)!==null&&rt!==void 0?rt:360)/360)),scalabilityMode:nt===0&&isSVCCodec(this.codec)?"L1T3":void 0,maxFramerate:nt===0?15:0,maxBitrate:nt===0?tt.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:et.encodings})),this.encodings=et.encodings,yield this.sender.setParameters(et)}catch(et){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:et})),this.optimizeForPerformance=!1}finally{$()}})}handleAppVisibilityChanged(){const $=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter$1(this,void 0,void 0,function*(){yield $.handleAppVisibilityChanged.call(this),isMobile()&&this.isInBackground&&this.source===Track.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function setPublishingLayersForSender(_e,$,et,tt,nt,rt,it){return __awaiter$1(this,void 0,void 0,function*(){const ot=yield tt.lock();rt.debug("setPublishingLayersForSender",Object.assign(Object.assign({},it),{sender:_e,qualities:et,senderEncodings:$}));try{const st=_e.getParameters(),{encodings:at}=st;if(!at)return;if(at.length!==$.length){rt.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},it),{encodings:at,senderEncodings:$}));return}let lt=!1;!1&&at[0].scalabilityMode||(nt&&et.some(ht=>ht.enabled)&&et.forEach(ht=>ht.enabled=!0),at.forEach((pt,ht)=>{var vt;let mt=(vt=pt.rid)!==null&&vt!==void 0?vt:"";mt===""&&(mt="q");const kt=videoQualityForRid(mt),bt=et.find(gt=>gt.quality===kt);bt&&pt.active!==bt.enabled&&(lt=!0,pt.active=bt.enabled,rt.debug("setting layer ".concat(bt.quality," to ").concat(pt.active?"enabled":"disabled"),it),isFireFox()&&(bt.enabled?(pt.scaleResolutionDownBy=$[ht].scaleResolutionDownBy,pt.maxBitrate=$[ht].maxBitrate,pt.maxFrameRate=$[ht].maxFrameRate):(pt.scaleResolutionDownBy=4,pt.maxBitrate=10,pt.maxFrameRate=2)))})),lt&&(st.encodings=at,rt.debug("setting encodings",Object.assign(Object.assign({},it),{encodings:st.encodings})),yield _e.setParameters(st))}finally{ot()}})}function videoQualityForRid(_e){switch(_e){case"f":return VideoQuality.HIGH;case"h":return VideoQuality.MEDIUM;case"q":return VideoQuality.LOW;default:return VideoQuality.HIGH}}function videoLayersFromEncodings(_e,$,et,tt){if(!et)return[new VideoLayer({quality:VideoQuality.HIGH,width:_e,height:$,bitrate:0,ssrc:0})];if(tt){const nt=et[0].scalabilityMode,rt=new ScalabilityMode(nt),it=[],ot=rt.suffix=="h"?1.5:2,st=rt.suffix=="h"?2:3;for(let at=0;at<rt.spatial;at+=1)it.push(new VideoLayer({quality:Math.min(VideoQuality.HIGH,rt.spatial-1)-at,width:Math.ceil(_e/Math.pow(ot,at)),height:Math.ceil($/Math.pow(ot,at)),bitrate:et[0].maxBitrate?Math.ceil(et[0].maxBitrate/Math.pow(st,at)):0,ssrc:0}));return it}return et.map(nt=>{var rt,it,ot;const st=(rt=nt.scaleResolutionDownBy)!==null&&rt!==void 0?rt:1;let at=videoQualityForRid((it=nt.rid)!==null&&it!==void 0?it:"");return new VideoLayer({quality:at,width:Math.ceil(_e/st),height:Math.ceil($/st),bitrate:(ot=nt.maxBitrate)!==null&&ot!==void 0?ot:0,ssrc:0})})}const lossyDataChannel="_lossy",reliableDataChannel="_reliable",minReconnectWait=2*1e3,leaveReconnect="leave-reconnect",reliabeReceiveStateTTL=3e4;var PCState;(function(_e){_e[_e.New=0]="New",_e[_e.Connected=1]="Connected",_e[_e.Disconnected=2]="Disconnected",_e[_e.Reconnecting=3]="Reconnecting",_e[_e.Closed=4]="Closed"})(PCState||(PCState={}));class RTCEngine extends eventsExports.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor($){var et;super(),this.options=$,this.rtcConfig={},this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=PCState.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=livekitLogger,this.reliableDataSequence=1,this.reliableMessageBuffer=new DataPacketBuffer,this.reliableReceivedState=new TTLMap(reliabeReceiveStateTTL),this.handleDataChannel=tt=>__awaiter$1(this,[tt],void 0,function(nt){var rt=this;let{channel:it}=nt;return function*(){if(it){if(it.label===reliableDataChannel)rt.reliableDCSub=it;else if(it.label===lossyDataChannel)rt.lossyDCSub=it;else return;rt.log.debug("on data channel ".concat(it.id,", ").concat(it.label),rt.logContext),it.onmessage=rt.handleDataMessage}}()}),this.handleDataMessage=tt=>__awaiter$1(this,void 0,void 0,function*(){var nt,rt;const it=yield this.dataProcessLock.lock();try{let ot;if(tt.data instanceof ArrayBuffer)ot=tt.data;else if(tt.data instanceof Blob)ot=yield tt.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:tt.data}));return}const st=DataPacket.fromBinary(new Uint8Array(ot));if(st.sequence>0&&st.participantSid!==""){const at=this.reliableReceivedState.get(st.participantSid);if(at&&st.sequence<=at)return;this.reliableReceivedState.set(st.participantSid,st.sequence)}((nt=st.value)===null||nt===void 0?void 0:nt.case)==="speaker"?this.emit(EngineEvent.ActiveSpeakersUpdate,st.value.value.speakers):(((rt=st.value)===null||rt===void 0?void 0:rt.case)==="user"&&applyUserDataCompat(st,st.value.value),this.emit(EngineEvent.DataPacketReceived,st))}finally{it()}}),this.handleDataError=tt=>{const rt=tt.currentTarget.maxRetransmits===0?"lossy":"reliable";if(tt instanceof ErrorEvent&&tt.error){const{error:it}=tt.error;this.log.error("DataChannel error on ".concat(rt,": ").concat(tt.message),Object.assign(Object.assign({},this.logContext),{error:it}))}else this.log.error("Unknown DataChannel error on ".concat(rt),Object.assign(Object.assign({},this.logContext),{event:tt}))},this.handleBufferedAmountLow=tt=>{const rt=tt.currentTarget.maxRetransmits===0?DataPacket_Kind.LOSSY:DataPacket_Kind.RELIABLE;this.updateAndEmitDCBufferStatus(rt)},this.handleDisconnect=(tt,nt)=>{if(this._isClosed)return;this.log.warn("".concat(tt," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const rt=st=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(st,"ms. giving up"),this.logContext),this.emit(EngineEvent.Disconnected),this.close()},it=Date.now()-this.reconnectStart;let ot=this.getNextRetryDelay({elapsedMs:it,retryCount:this.reconnectAttempts});if(ot===null){rt(it);return}tt===leaveReconnect&&(ot=0),this.log.debug("reconnecting in ".concat(ot,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=CriticalTimers.setTimeout(()=>this.attemptReconnect(nt).finally(()=>this.reconnectTimeout=void 0),ot)},this.waitForRestarted=()=>new Promise((tt,nt)=>{this.pcState===PCState.Connected&&tt();const rt=()=>{this.off(EngineEvent.Disconnected,it),tt()},it=()=>{this.off(EngineEvent.Restarted,rt),nt()};this.once(EngineEvent.Restarted,rt),this.once(EngineEvent.Disconnected,it)}),this.updateAndEmitDCBufferStatus=tt=>{const nt=this.isBufferStatusLow(tt);typeof nt<"u"&&nt!==this.dcBufferStatus.get(tt)&&(this.dcBufferStatus.set(tt,nt),this.emit(EngineEvent.DCBufferStatusChanged,nt,tt))},this.isBufferStatusLow=tt=>{const nt=this.dataChannelForKind(tt);if(nt)return tt===DataPacket_Kind.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(nt.bufferedAmount),nt.bufferedAmount<=nt.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===SignalConnectionState.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(ReconnectReason.RR_SIGNAL_DISCONNECTED))},this.log=getLogger((et=$.loggerName)!==null&&et!==void 0?et:LoggerNames.Engine),this.loggerOptions={loggerName:$.loggerName,loggerContextCb:()=>this.logContext},this.client=new SignalClient(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new _$1,this.dataProcessLock=new _$1,this.dcBufferStatus=new Map([[DataPacket_Kind.LOSSY,!0],[DataPacket_Kind.RELIABLE,!0]]),this.client.onParticipantUpdate=tt=>this.emit(EngineEvent.ParticipantUpdate,tt),this.client.onConnectionQuality=tt=>this.emit(EngineEvent.ConnectionQualityUpdate,tt),this.client.onRoomUpdate=tt=>this.emit(EngineEvent.RoomUpdate,tt),this.client.onSubscriptionError=tt=>this.emit(EngineEvent.SubscriptionError,tt),this.client.onSubscriptionPermissionUpdate=tt=>this.emit(EngineEvent.SubscriptionPermissionUpdate,tt),this.client.onSpeakersChanged=tt=>this.emit(EngineEvent.SpeakersChanged,tt),this.client.onStreamStateUpdate=tt=>this.emit(EngineEvent.StreamStateChanged,tt),this.client.onRequestResponse=tt=>this.emit(EngineEvent.SignalRequestResponse,tt)}get logContext(){var $,et,tt,nt,rt,it;return{room:(et=($=this.latestJoinResponse)===null||$===void 0?void 0:$.room)===null||et===void 0?void 0:et.name,roomID:(nt=(tt=this.latestJoinResponse)===null||tt===void 0?void 0:tt.room)===null||nt===void 0?void 0:nt.sid,participant:(it=(rt=this.latestJoinResponse)===null||rt===void 0?void 0:rt.participant)===null||it===void 0?void 0:it.identity,pID:this.participantSid}}join($,et,tt,nt){return __awaiter$1(this,void 0,void 0,function*(){this.url=$,this.token=et,this.signalOpts=tt,this.maxJoinAttempts=tt.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const rt=yield this.client.join($,et,tt,nt);return this._isClosed=!1,this.latestJoinResponse=rt,this.subscriberPrimary=rt.subscriberPrimary,this.pcManager||(yield this.configure(rt)),(!this.subscriberPrimary||rt.fastPublish)&&this.negotiate(),this.clientConfiguration=rt.clientConfiguration,this.emit(EngineEvent.SignalConnected,rt),rt}catch(rt){if(rt instanceof ConnectionError&&rt.reason===ConnectionErrorReason.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join($,et,tt,nt);throw rt}})}close(){return __awaiter$1(this,void 0,void 0,function*(){const $=yield this.closingLock.lock();if(this.isClosed){$();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(EngineEvent.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{$()}})}cleanupPeerConnections(){return __awaiter$1(this,void 0,void 0,function*(){var $;yield($=this.pcManager)===null||$===void 0?void 0:$.close(),this.pcManager=void 0;const et=tt=>{tt&&(tt.close(),tt.onbufferedamountlow=null,tt.onclose=null,tt.onclosing=null,tt.onerror=null,tt.onmessage=null,tt.onopen=null)};et(this.lossyDC),et(this.lossyDCSub),et(this.reliableDC),et(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new DataPacketBuffer,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return __awaiter$1(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack($){if(this.pendingTrackResolvers[$.cid])throw new TrackInvalidError("a track with the same ID has already been published");return new Promise((et,tt)=>{const nt=setTimeout(()=>{delete this.pendingTrackResolvers[$.cid],tt(new ConnectionError("publication of local track timed out, no response from server",ConnectionErrorReason.Timeout))},1e4);this.pendingTrackResolvers[$.cid]={resolve:rt=>{clearTimeout(nt),et(rt)},reject:()=>{clearTimeout(nt),tt(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack($)})}removeTrack($){if($.track&&this.pendingTrackResolvers[$.track.id]){const{reject:et}=this.pendingTrackResolvers[$.track.id];et&&et(),delete this.pendingTrackResolvers[$.track.id]}try{return this.pcManager.removeTrack($),!0}catch(et){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:et}))}return!1}updateMuteStatus($,et){this.client.sendMuteTrack($,et)}get dataSubscriberReadyState(){var $;return($=this.reliableDCSub)===null||$===void 0?void 0:$.readyState}getConnectedServerAddress(){return __awaiter$1(this,void 0,void 0,function*(){var $;return($=this.pcManager)===null||$===void 0?void 0:$.getConnectedAddress()})}setRegionUrlProvider($){this.regionUrlProvider=$}configure($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt;if(this.pcManager&&this.pcManager.currentState!==PCTransportState.NEW)return;this.participantSid=(et=$.participant)===null||et===void 0?void 0:et.sid;const nt=this.makeRTCConfiguration($);this.pcManager=new PCTransportManager(nt,$.subscriberPrimary,this.loggerOptions),this.emit(EngineEvent.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(rt,it)=>{this.client.sendIceCandidate(rt,it)},this.pcManager.onPublisherOffer=(rt,it)=>{this.client.sendOffer(rt,it)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(rt,it,ot)=>__awaiter$1(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(rt),this.logContext),["closed","disconnected","failed"].includes(it)&&(this.publisherConnectionPromise=void 0),rt===PCTransportState.CONNECTED){const lt=this.pcState===PCState.New;this.pcState=PCState.Connected,lt&&this.emit(EngineEvent.Connected,$)}else rt===PCTransportState.FAILED&&this.pcState===PCState.Connected&&(this.pcState=PCState.Disconnected,this.handleDisconnect("peerconnection failed",ot==="failed"?ReconnectReason.RR_SUBSCRIBER_FAILED:ReconnectReason.RR_PUBLISHER_FAILED));const st=this.client.isDisconnected||this.client.currentState===SignalConnectionState.RECONNECTING,at=[PCTransportState.FAILED,PCTransportState.CLOSING,PCTransportState.CLOSED].includes(rt);st&&at&&!this._isClosed&&this.emit(EngineEvent.Offline)}),this.pcManager.onTrack=rt=>{this.emit(EngineEvent.MediaTrackAdded,rt.track,rt.streams[0],rt.receiver)},supportOptionalDatachannel((tt=$.serverInfo)===null||tt===void 0?void 0:tt.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=($,et)=>__awaiter$1(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:$.type})),yield this.pcManager.setPublisherAnswer($,et))}),this.client.onTrickle=($,et)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:$,target:et})),this.pcManager.addIceCandidate($,et))},this.client.onOffer=($,et)=>__awaiter$1(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=et,!this.pcManager)return;const tt=yield this.pcManager.createSubscriberAnswerFromOffer($,et);tt&&this.client.sendAnswer(tt,et)}),this.client.onLocalTrackPublished=$=>{var et;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:$.cid,track:(et=$.track)===null||et===void 0?void 0:et.sid})),!this.pendingTrackResolvers[$.cid]){this.log.error("missing track resolver for ".concat($.cid),Object.assign(Object.assign({},this.logContext),{cid:$.cid}));return}const{resolve:tt}=this.pendingTrackResolvers[$.cid];delete this.pendingTrackResolvers[$.cid],tt($.track)},this.client.onLocalTrackUnpublished=$=>{this.emit(EngineEvent.LocalTrackUnpublished,$)},this.client.onLocalTrackSubscribed=$=>{this.emit(EngineEvent.LocalTrackSubscribed,$)},this.client.onTokenRefresh=$=>{this.token=$},this.client.onRemoteMuteChanged=($,et)=>{this.emit(EngineEvent.RemoteMute,$,et)},this.client.onSubscribedQualityUpdate=$=>{this.emit(EngineEvent.SubscribedQualityUpdate,$)},this.client.onRoomMoved=$=>{var et;this.participantSid=(et=$.participant)===null||et===void 0?void 0:et.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=$.room),this.emit(EngineEvent.RoomMoved,$)},this.client.onClose=()=>{this.handleDisconnect("signal",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=$=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:$==null?void 0:$.reason})),$.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions($.regions)),$.action){case LeaveRequest_Action.DISCONNECT:this.emit(EngineEvent.Disconnected,$==null?void 0:$.reason),this.close();break;case LeaveRequest_Action.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(leaveReconnect);break;case LeaveRequest_Action.RESUME:this.handleDisconnect(leaveReconnect)}}}makeRTCConfiguration($){var et;const tt=Object.assign({},this.rtcConfig);if(!((et=this.signalOpts)===null||et===void 0)&&et.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),tt.encodedInsertableStreams=!0),$.iceServers&&!tt.iceServers){const nt=[];$.iceServers.forEach(rt=>{const it={urls:rt.urls};rt.username&&(it.username=rt.username),rt.credential&&(it.credential=rt.credential),nt.push(it)}),tt.iceServers=nt}return $.clientConfiguration&&$.clientConfiguration.forceRelay===ClientConfigSetting.ENABLED&&(tt.iceTransportPolicy="relay"),tt.sdpSemantics="unified-plan",tt.continualGatheringPolicy="gather_continually",tt}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(lossyDataChannel,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(reliableDataChannel,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender($,et,tt){return __awaiter$1(this,void 0,void 0,function*(){if(supportsTransceiver())return yield this.createTransceiverRTCRtpSender($,et,tt);if(supportsAddTrack())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender($.mediaStreamTrack);throw new UnexpectedConnectionState("Required webRTC APIs not supported on this device")})}createSimulcastSender($,et,tt,nt){return __awaiter$1(this,void 0,void 0,function*(){if(supportsTransceiver())return this.createSimulcastTransceiverSender($,et,tt,nt);if(supportsAddTrack())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender($.mediaStreamTrack);throw new UnexpectedConnectionState("Cannot stream on this device")})}createTransceiverRTCRtpSender($,et,tt){return __awaiter$1(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("publisher is closed");const nt=[];$.mediaStream&&nt.push($.mediaStream),isVideoTrack($)&&($.codec=et.videoCodec);const rt={direction:"sendonly",streams:nt};return tt&&(rt.sendEncodings=tt),(yield this.pcManager.addPublisherTransceiver($.mediaStreamTrack,rt)).sender})}createSimulcastTransceiverSender($,et,tt,nt){return __awaiter$1(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("publisher is closed");const rt={direction:"sendonly"};nt&&(rt.sendEncodings=nt);const it=yield this.pcManager.addPublisherTransceiver(et.mediaStreamTrack,rt);if(tt.videoCodec)return $.setSimulcastTrackSender(tt.videoCodec,it.sender),it.sender})}createRTCRtpSender($){return __awaiter$1(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("publisher is closed");return this.pcManager.addPublisherTrack($)})}attemptReconnect($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt,nt;if(!this._isClosed){if(this.attemptingReconnect){livekitLogger.warn("already attempting reconnect, returning early",this.logContext);return}(((et=this.clientConfiguration)===null||et===void 0?void 0:et.resumeConnection)===ClientConfigSetting.DISABLED||((nt=(tt=this.pcManager)===null||tt===void 0?void 0:tt.currentState)!==null&&nt!==void 0?nt:PCTransportState.NEW)===PCTransportState.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection($),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(rt){this.reconnectAttempts+=1;let it=!0;rt instanceof UnexpectedConnectionState?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:rt})),it=!1):rt instanceof SignalReconnectError||(this.fullReconnectOnNext=!0),it?this.handleDisconnect("reconnect",ReconnectReason.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(EngineEvent.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay($){try{return this.reconnectPolicy.nextRetryDelayInMs($)}catch(et){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:et}))}return null}restartConnection($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt,nt;try{if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(EngineEvent.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let rt;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new SignalReconnectError;rt=yield this.join($??this.url,this.token,this.signalOpts)}catch(it){throw it instanceof ConnectionError&&it.reason===ConnectionErrorReason.NotAllowed?new UnexpectedConnectionState("could not reconnect, token might be expired"):new SignalReconnectError}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(EngineEvent.SignalRestarted,rt),yield this.waitForPCReconnected(),this.client.currentState!==SignalConnectionState.CONNECTED)throw new SignalReconnectError("Signal connection got severed during reconnect");(et=this.regionUrlProvider)===null||et===void 0||et.resetAttempts(),this.emit(EngineEvent.Restarted)}catch(rt){const it=yield(tt=this.regionUrlProvider)===null||tt===void 0?void 0:tt.getNextBestRegionUrl();if(it){yield this.restartConnection(it);return}else throw(nt=this.regionUrlProvider)===null||nt===void 0||nt.resetAttempts(),rt}})}resumeConnection($){return __awaiter$1(this,void 0,void 0,function*(){var et;if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");if(!this.pcManager)throw new UnexpectedConnectionState("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(EngineEvent.Resuming);let tt;try{this.setupSignalClientCallbacks(),tt=yield this.client.reconnect(this.url,this.token,this.participantSid,$)}catch(nt){let rt="";throw nt instanceof Error&&(rt=nt.message,this.log.error(nt.message,Object.assign(Object.assign({},this.logContext),{error:nt}))),nt instanceof ConnectionError&&nt.reason===ConnectionErrorReason.NotAllowed?new UnexpectedConnectionState("could not reconnect, token might be expired"):nt instanceof ConnectionError&&nt.reason===ConnectionErrorReason.LeaveRequest?nt:new SignalReconnectError(rt)}if(this.emit(EngineEvent.SignalResumed),tt){const nt=this.makeRTCConfiguration(tt);this.pcManager.updateConfiguration(nt),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=tt.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==SignalConnectionState.CONNECTED)throw new SignalReconnectError("Signal connection got severed during reconnect");this.client.setReconnected(),((et=this.reliableDC)===null||et===void 0?void 0:et.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),tt!=null&&tt.lastMessageSeq&&this.resendReliableMessagesForResume(tt.lastMessageSeq),this.emit(EngineEvent.Resumed)})}waitForPCInitialConnection($,et){return __awaiter$1(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(et,$)})}waitForPCReconnected(){return __awaiter$1(this,void 0,void 0,function*(){this.pcState=PCState.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield sleep$1(minReconnectWait),!this.pcManager)throw new UnexpectedConnectionState("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=PCState.Connected}catch($){throw this.pcState=PCState.Disconnected,new ConnectionError("could not establish PC connection, ".concat($.message),ConnectionErrorReason.InternalError)}})}publishRpcResponse($,et,tt,nt){return __awaiter$1(this,void 0,void 0,function*(){const rt=new DataPacket({destinationIdentities:[$],kind:DataPacket_Kind.RELIABLE,value:{case:"rpcResponse",value:new RpcResponse({requestId:et,value:nt?{case:"error",value:nt.toProto()}:{case:"payload",value:tt??""}})}});yield this.sendDataPacket(rt,DataPacket_Kind.RELIABLE)})}publishRpcAck($,et){return __awaiter$1(this,void 0,void 0,function*(){const tt=new DataPacket({destinationIdentities:[$],kind:DataPacket_Kind.RELIABLE,value:{case:"rpcAck",value:new RpcAck({requestId:et})}});yield this.sendDataPacket(tt,DataPacket_Kind.RELIABLE)})}sendDataPacket($,et){return __awaiter$1(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(et),et===DataPacket_Kind.RELIABLE&&($.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const tt=$.toBinary(),nt=this.dataChannelForKind(et);if(nt){if(et===DataPacket_Kind.RELIABLE&&this.reliableMessageBuffer.push({data:tt,sequence:$.sequence}),this.attemptingReconnect)return;nt.send(tt)}this.updateAndEmitDCBufferStatus(et)})}resendReliableMessagesForResume($){return __awaiter$1(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(DataPacket_Kind.RELIABLE);const et=this.dataChannelForKind(DataPacket_Kind.RELIABLE);et&&(this.reliableMessageBuffer.popToSequence($),this.reliableMessageBuffer.getAll().forEach(tt=>{et.send(tt.data)})),this.updateAndEmitDCBufferStatus(DataPacket_Kind.RELIABLE)})}waitForBufferStatusLow($){return new Promise((et,tt)=>__awaiter$1(this,void 0,void 0,function*(){if(this.isBufferStatusLow($))et();else{const nt=()=>tt("Engine closed");for(this.once(EngineEvent.Closing,nt);!this.dcBufferStatus.get($);)yield sleep$1(10);this.off(EngineEvent.Closing,nt),et()}}))}ensureDataTransportConnected($){return __awaiter$1(this,arguments,void 0,function(et){var tt=this;let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var rt;if(!tt.pcManager)throw new UnexpectedConnectionState("PC manager is closed");const it=nt?tt.pcManager.subscriber:tt.pcManager.publisher,ot=nt?"Subscriber":"Publisher";if(!it)throw new ConnectionError("".concat(ot," connection not set"),ConnectionErrorReason.InternalError);let st=!1;!nt&&!tt.dataChannelForKind(et,nt)&&(tt.createDataChannels(),st=!0),!st&&!nt&&!tt.pcManager.publisher.isICEConnected&&tt.pcManager.publisher.getICEConnectionState()!=="checking"&&(st=!0),st&&tt.negotiate();const at=tt.dataChannelForKind(et,nt);if((at==null?void 0:at.readyState)==="open")return;const lt=new Date().getTime()+tt.peerConnectionTimeout;for(;new Date().getTime()<lt;){if(it.isICEConnected&&((rt=tt.dataChannelForKind(et,nt))===null||rt===void 0?void 0:rt.readyState)==="open")return;yield sleep$1(50)}throw new ConnectionError("could not establish ".concat(ot," connection, state: ").concat(it.getICEConnectionState()),ConnectionErrorReason.InternalError)}()})}ensurePublisherConnected($){return __awaiter$1(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected($,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==PCTransportState.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return __awaiter$1(this,void 0,void 0,function*(){return new Promise(($,et)=>__awaiter$1(this,void 0,void 0,function*(){if(!this.pcManager){et(new NegotiationError("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const tt=new AbortController,nt=()=>{tt.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),$()};this.isClosed&&et("cannot negotiate on closed engine"),this.on(EngineEvent.Closing,nt),this.pcManager.publisher.once(PCEvents.RTPVideoPayloadTypes,rt=>{const it=new Map;rt.forEach(ot=>{const st=ot.codec.toLowerCase();isVideoCodec(st)&&it.set(ot.payload,st)}),this.emit(EngineEvent.RTPVideoMapUpdate,it)});try{yield this.pcManager.negotiate(tt),$()}catch(rt){rt instanceof NegotiationError&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ReconnectReason.RR_UNKNOWN),et(rt)}finally{this.off(EngineEvent.Closing,nt)}}))})}dataChannelForKind($,et){if(et){if($===DataPacket_Kind.LOSSY)return this.lossyDCSub;if($===DataPacket_Kind.RELIABLE)return this.reliableDCSub}else{if($===DataPacket_Kind.LOSSY)return this.lossyDC;if($===DataPacket_Kind.RELIABLE)return this.reliableDC}}sendSyncState($,et){var tt,nt;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const rt=this.pcManager.subscriber.getLocalDescription(),it=this.pcManager.subscriber.getRemoteDescription(),ot=(nt=(tt=this.signalOpts)===null||tt===void 0?void 0:tt.autoSubscribe)!==null&&nt!==void 0?nt:!0,st=new Array,at=new Array;$.forEach(lt=>{lt.isDesired!==ot&&st.push(lt.trackSid),lt.isEnabled||at.push(lt.trackSid)}),this.client.sendSyncState(new SyncState({answer:rt?toProtoSessionDescription({sdp:rt.sdp,type:rt.type}):void 0,offer:it?toProtoSessionDescription({sdp:it.sdp,type:it.type}):void 0,subscription:new UpdateSubscription({trackSids:st,subscribe:!ot,participantTracks:[]}),publishTracks:getTrackPublicationInfo(et),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:at,datachannelReceiveStates:this.reliableReceivedState.map((lt,dt)=>new DataChannelReceiveState({publisherSid:dt,lastSeq:lt}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const $=[],et=(tt,nt)=>{(tt==null?void 0:tt.id)!==void 0&&tt.id!==null&&$.push(new DataChannelInfo({label:tt.label,id:tt.id,target:nt}))};return et(this.dataChannelForKind(DataPacket_Kind.LOSSY),SignalTarget.PUBLISHER),et(this.dataChannelForKind(DataPacket_Kind.RELIABLE),SignalTarget.PUBLISHER),et(this.dataChannelForKind(DataPacket_Kind.LOSSY,!0),SignalTarget.SUBSCRIBER),et(this.dataChannelForKind(DataPacket_Kind.RELIABLE,!0),SignalTarget.SUBSCRIBER),$}clearReconnectTimeout(){this.reconnectTimeout&&CriticalTimers.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){isWeb()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){isWeb()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class SignalReconnectError extends Error{}function supportOptionalDatachannel(_e){return _e!==void 0&&_e>13}function applyUserDataCompat(_e,$){const et=_e.participantIdentity?_e.participantIdentity:$.participantIdentity;_e.participantIdentity=et,$.participantIdentity=et;const tt=_e.destinationIdentities.length!==0?_e.destinationIdentities:$.destinationIdentities;_e.destinationIdentities=tt,$.destinationIdentities=tt}class RegionUrlProvider{constructor($,et){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL($),this.token=et}updateToken($){this.token=$}isCloud(){return isCloud(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl($){return __awaiter$1(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings($));const et=this.regionSettings.regions.filter(tt=>!this.attemptedRegions.find(nt=>nt.url===tt.url));if(et.length>0){const tt=et[0];return this.attemptedRegions.push(tt),livekitLogger.debug("next region: ".concat(tt.region)),tt.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings($){return __awaiter$1(this,void 0,void 0,function*(){const et=yield fetch("".concat(getCloudConfigUrl(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:$});if(et.ok){const tt=yield et.json();return this.lastUpdateAt=Date.now(),tt}else throw new ConnectionError("Could not fetch region settings: ".concat(et.statusText),et.status===401?ConnectionErrorReason.NotAllowed:ConnectionErrorReason.InternalError,et.status)})}setServerReportedRegions($){this.regionSettings=$,this.lastUpdateAt=Date.now()}}function getCloudConfigUrl(_e){return"".concat(_e.protocol.replace("ws","http"),"//").concat(_e.host,"/settings")}class BaseStreamReader{get info(){return this._info}constructor($,et,tt){this.reader=et,this.totalByteSize=tt,this._info=$,this.bytesReceived=0}}class ByteStreamReader extends BaseStreamReader{handleChunkReceived($){var et;this.bytesReceived+=$.content.byteLength;const tt=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(et=this.onProgress)===null||et===void 0||et.call(this,tt)}[Symbol.asyncIterator](){const $=this.reader.getReader();return{next:()=>__awaiter$1(this,void 0,void 0,function*(){try{const{done:et,value:tt}=yield $.read();return et?{done:!0,value:void 0}:(this.handleChunkReceived(tt),{done:!1,value:tt.content})}catch{return{done:!0,value:void 0}}}),return(){return __awaiter$1(this,void 0,void 0,function*(){return $.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return __awaiter$1(this,void 0,void 0,function*(){var $,et,tt,nt;let rt=new Set;try{for(var it=!0,ot=__asyncValues(this),st;st=yield ot.next(),$=st.done,!$;it=!0){nt=st.value,it=!1;const at=nt;rt.add(at)}}catch(at){et={error:at}}finally{try{!it&&!$&&(tt=ot.return)&&(yield tt.call(ot))}finally{if(et)throw et.error}}return Array.from(rt)})}}class TextStreamReader extends BaseStreamReader{constructor($,et,tt){super($,et,tt),this.receivedChunks=new Map}handleChunkReceived($){var et;const tt=bigIntToNumber($.chunkIndex),nt=this.receivedChunks.get(tt);if(nt&&nt.version>$.version)return;this.receivedChunks.set(tt,$),this.bytesReceived+=$.content.byteLength;const rt=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(et=this.onProgress)===null||et===void 0||et.call(this,rt)}[Symbol.asyncIterator](){const $=this.reader.getReader(),et=new TextDecoder;return{next:()=>__awaiter$1(this,void 0,void 0,function*(){try{const{done:tt,value:nt}=yield $.read();return tt?{done:!0,value:void 0}:(this.handleChunkReceived(nt),{done:!1,value:et.decode(nt.content)})}catch{return{done:!0,value:void 0}}}),return(){return __awaiter$1(this,void 0,void 0,function*(){return $.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return __awaiter$1(this,void 0,void 0,function*(){var $,et,tt,nt;let rt="";try{for(var it=!0,ot=__asyncValues(this),st;st=yield ot.next(),$=st.done,!$;it=!0)nt=st.value,it=!1,rt+=nt}catch(at){et={error:at}}finally{try{!it&&!$&&(tt=ot.return)&&(yield tt.call(ot))}finally{if(et)throw et.error}}return rt})}}class BaseStreamWriter{constructor($,et,tt){this.writableStream=$,this.defaultWriter=$.getWriter(),this.onClose=tt,this.info=et}write($){return this.defaultWriter.write($)}close(){return __awaiter$1(this,void 0,void 0,function*(){var $;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),($=this.onClose)===null||$===void 0||$.call(this)})}}class TextStreamWriter extends BaseStreamWriter{}class ByteStreamWriter extends BaseStreamWriter{}class RemoteTrack extends Track{constructor($,et,tt,nt,rt){super($,tt,rt),this.sid=et,this.receiver=nt}get isLocal(){return!1}setMuted($){this.isMuted!==$&&(this.isMuted=$,this._mediaStreamTrack.enabled=!$,this.emit($?TrackEvent.Muted:TrackEvent.Unmuted,this))}setMediaStream($){this.mediaStream=$;const et=tt=>{tt.track===this._mediaStreamTrack&&($.removeEventListener("removetrack",et),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(TrackEvent.Ended,this))};$.addEventListener("removetrack",et)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return __awaiter$1(this,void 0,void 0,function*(){var $;return!(($=this.receiver)===null||$===void 0)&&$.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay($){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=$:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),monitorFrequency)),supportsSynchronizationSources()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const $=()=>{var et;this.timeSyncHandle=requestAnimationFrame(()=>$());const tt=(et=this.receiver)===null||et===void 0?void 0:et.getSynchronizationSources()[0];if(tt){const{timestamp:nt,rtpTimestamp:rt}=tt;rt&&this.rtpTimestamp!==rt&&(this.emit(TrackEvent.TimeSyncUpdate,{timestamp:nt,rtpTimestamp:rt}),this.rtpTimestamp=rt)}};$()}}class RemoteAudioTrack extends RemoteTrack{constructor($,et,tt,nt,rt,it){super($,et,Track.Kind.Audio,tt,it),this.monitorReceiver=()=>__awaiter$1(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const ot=yield this.getReceiverStats();ot&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(ot,this.prevStats)),this.prevStats=ot}),this.audioContext=nt,this.webAudioPluginNodes=[],rt&&(this.sinkId=rt.deviceId)}setVolume($){var et;for(const tt of this.attachedElements)this.audioContext?(et=this.gainNode)===null||et===void 0||et.gain.setTargetAtTime($,0,.1):tt.volume=$;isReactNative()&&this._mediaStreamTrack._setVolume($),this.elementVolume=$}getVolume(){if(this.elementVolume)return this.elementVolume;if(isReactNative())return 1;let $=0;return this.attachedElements.forEach(et=>{et.volume>$&&($=et.volume)}),$}setSinkId($){return __awaiter$1(this,void 0,void 0,function*(){this.sinkId=$,yield Promise.all(this.attachedElements.map(et=>{if(supportsSetSinkId(et))return et.setSinkId($)}))})}attach($){const et=this.attachedElements.length===0;return $?super.attach($):$=super.attach(),this.sinkId&&supportsSetSinkId($)&&$.setSinkId(this.sinkId).catch(tt=>{this.log.error("Failed to set sink id on remote audio track",tt,this.logContext)}),this.audioContext&&et&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,$),$.volume=0,$.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),$}detach($){let et;return $?(et=super.detach($),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(et=super.detach(),this.disconnectWebAudio()),et}setAudioContext($){this.audioContext=$,$&&this.attachedElements.length>0?this.connectWebAudio($,this.attachedElements[0]):$||this.disconnectWebAudio()}setWebAudioPlugins($){this.webAudioPluginNodes=$,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio($,et){this.disconnectWebAudio(),this.sourceNode=$.createMediaStreamSource(et.srcObject);let tt=this.sourceNode;this.webAudioPluginNodes.forEach(nt=>{tt.connect(nt),tt=nt}),this.gainNode=$.createGain(),tt.connect(this.gainNode),this.gainNode.connect($.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),$.state!=="running"&&$.resume().then(()=>{$.state!=="running"&&this.emit(TrackEvent.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(nt=>{this.emit(TrackEvent.AudioPlaybackFailed,nt)})}disconnectWebAudio(){var $,et;($=this.gainNode)===null||$===void 0||$.disconnect(),(et=this.sourceNode)===null||et===void 0||et.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return __awaiter$1(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const $=yield this.receiver.getStats();let et;return $.forEach(tt=>{tt.type==="inbound-rtp"&&(et={type:"audio",streamId:tt.id,timestamp:tt.timestamp,jitter:tt.jitter,bytesReceived:tt.bytesReceived,concealedSamples:tt.concealedSamples,concealmentEvents:tt.concealmentEvents,silentConcealedSamples:tt.silentConcealedSamples,silentConcealmentEvents:tt.silentConcealmentEvents,totalAudioEnergy:tt.totalAudioEnergy,totalSamplesDuration:tt.totalSamplesDuration})}),et})}}const REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack{constructor($,et,tt,nt,rt){super($,et,Track.Kind.Video,tt,rt),this.elementInfos=[],this.monitorReceiver=()=>__awaiter$1(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const it=yield this.getReceiverStats();it&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(it,this.prevStats)),this.prevStats=it}),this.debouncedHandleResize=r$1(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStreamSettings=nt}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted($){super.setMuted($),this.attachedElements.forEach(et=>{$?detachTrack(this._mediaStreamTrack,et):attachToElement(this._mediaStreamTrack,et)})}attach($){if($?super.attach($):$=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(et=>et.element===$)===void 0){const et=new HTMLElementInfo($);this.observeElementInfo(et)}return $}observeElementInfo($){this.adaptiveStreamSettings&&this.elementInfos.find(et=>et===$)===void 0?($.handleResize=()=>{this.debouncedHandleResize()},$.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push($),$.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo($){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const et=this.elementInfos.filter(tt=>tt===$);for(const tt of et)tt.stopObserving();this.elementInfos=this.elementInfos.filter(tt=>tt!==$),this.updateVisibility(),this.debouncedHandleResize()}detach($){let et=[];if($)return this.stopObservingElement($),super.detach($);et=super.detach();for(const tt of et)this.stopObservingElement(tt);return et}getDecoderImplementation(){var $;return($=this.prevStats)===null||$===void 0?void 0:$.decoderImplementation}getReceiverStats(){return __awaiter$1(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const $=yield this.receiver.getStats();let et,tt="",nt=new Map;return $.forEach(rt=>{rt.type==="inbound-rtp"?(tt=rt.codecId,et={type:"video",streamId:rt.id,framesDecoded:rt.framesDecoded,framesDropped:rt.framesDropped,framesReceived:rt.framesReceived,packetsReceived:rt.packetsReceived,packetsLost:rt.packetsLost,frameWidth:rt.frameWidth,frameHeight:rt.frameHeight,pliCount:rt.pliCount,firCount:rt.firCount,nackCount:rt.nackCount,jitter:rt.jitter,timestamp:rt.timestamp,bytesReceived:rt.bytesReceived,decoderImplementation:rt.decoderImplementation}):rt.type==="codec"&&nt.set(rt.id,rt)}),et&&tt!==""&&nt.get(tt)&&(et.mimeType=nt.get(tt).mimeType),et})}stopObservingElement($){const et=this.elementInfos.filter(tt=>tt.element===$);for(const tt of et)this.stopObservingElementInfo(tt)}handleAppVisibilityChanged(){const $=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter$1(this,void 0,void 0,function*(){yield $.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var $,et;const tt=this.elementInfos.reduce((ot,st)=>Math.max(ot,st.visibilityChangedAt||0),0),nt=!((et=($=this.adaptiveStreamSettings)===null||$===void 0?void 0:$.pauseVideoInBackground)!==null&&et!==void 0)||et?this.isInBackground:!1,rt=this.elementInfos.some(ot=>ot.pictureInPicture),it=this.elementInfos.some(ot=>ot.visible)&&!nt||rt;if(this.lastVisible!==it){if(!it&&Date.now()-tt<REACTION_DELAY){CriticalTimers.setTimeout(()=>{this.updateVisibility()},REACTION_DELAY);return}this.lastVisible=it,this.emit(TrackEvent.VisibilityChanged,it,this)}}updateDimensions(){var $,et;let tt=0,nt=0;const rt=this.getPixelDensity();for(const it of this.elementInfos){const ot=it.width()*rt,st=it.height()*rt;ot+st>tt+nt&&(tt=ot,nt=st)}(($=this.lastDimensions)===null||$===void 0?void 0:$.width)===tt&&((et=this.lastDimensions)===null||et===void 0?void 0:et.height)===nt||(this.lastDimensions={width:tt,height:nt},this.emit(TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var $;const et=($=this.adaptiveStreamSettings)===null||$===void 0?void 0:$.pixelDensity;return et==="screen"?getDevicePixelRatio():et||(getDevicePixelRatio()>2?2:1)}}class HTMLElementInfo{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor($,et){this.onVisibilityChanged=tt=>{var nt;const{target:rt,isIntersecting:it}=tt;rt===this.element&&(this.isIntersecting=it,this.isPiP=isElementInPiP(this.element),this.visibilityChangedAt=Date.now(),(nt=this.handleVisibilityChanged)===null||nt===void 0||nt.call(this))},this.onEnterPiP=()=>{var tt,nt,rt;(nt=(tt=window.documentPictureInPicture)===null||tt===void 0?void 0:tt.window)===null||nt===void 0||nt.addEventListener("pagehide",this.onLeavePiP),this.isPiP=isElementInPiP(this.element),(rt=this.handleVisibilityChanged)===null||rt===void 0||rt.call(this)},this.onLeavePiP=()=>{var tt;this.isPiP=isElementInPiP(this.element),(tt=this.handleVisibilityChanged)===null||tt===void 0||tt.call(this)},this.element=$,this.isIntersecting=et??isElementInViewport($),this.isPiP=isWeb()&&isElementInPiP($),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var $,et,tt;this.isIntersecting=isElementInViewport(this.element),this.isPiP=isElementInPiP(this.element),this.element.handleResize=()=>{var nt;(nt=this.handleResize)===null||nt===void 0||nt.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,getIntersectionObserver().observe(this.element),getResizeObserver().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),($=window.documentPictureInPicture)===null||$===void 0||$.addEventListener("enter",this.onEnterPiP),(tt=(et=window.documentPictureInPicture)===null||et===void 0?void 0:et.window)===null||tt===void 0||tt.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var $,et,tt,nt,rt;($=getIntersectionObserver())===null||$===void 0||$.unobserve(this.element),(et=getResizeObserver())===null||et===void 0||et.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(tt=window.documentPictureInPicture)===null||tt===void 0||tt.removeEventListener("enter",this.onEnterPiP),(rt=(nt=window.documentPictureInPicture)===null||nt===void 0?void 0:nt.window)===null||rt===void 0||rt.removeEventListener("pagehide",this.onLeavePiP)}}function isElementInPiP(_e){var $,et;return document.pictureInPictureElement===_e?!0:!(($=window.documentPictureInPicture)===null||$===void 0)&&$.window?isElementInViewport(_e,(et=window.documentPictureInPicture)===null||et===void 0?void 0:et.window):!1}function isElementInViewport(_e,$){const et=$||window;let tt=_e.offsetTop,nt=_e.offsetLeft;const rt=_e.offsetWidth,it=_e.offsetHeight,{hidden:ot}=_e,{display:st}=getComputedStyle(_e);for(;_e.offsetParent;)_e=_e.offsetParent,tt+=_e.offsetTop,nt+=_e.offsetLeft;return tt<et.pageYOffset+et.innerHeight&&nt<et.pageXOffset+et.innerWidth&&tt+it>et.pageYOffset&&nt+rt>et.pageXOffset&&!ot&&st!=="none"}class TrackPublication extends eventsExports.EventEmitter{constructor($,et,tt,nt){var rt;super(),this.metadataMuted=!1,this.encryption=Encryption_Type.NONE,this.log=livekitLogger,this.handleMuted=()=>{this.emit(TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(TrackEvent.Unmuted)},this.log=getLogger((rt=nt==null?void 0:nt.loggerName)!==null&&rt!==void 0?rt:LoggerNames.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=$,this.trackSid=et,this.trackName=tt,this.source=Track.Source.Unknown}setTrack($){this.track&&(this.track.off(TrackEvent.Muted,this.handleMuted),this.track.off(TrackEvent.Unmuted,this.handleUnmuted)),this.track=$,$&&($.on(TrackEvent.Muted,this.handleMuted),$.on(TrackEvent.Unmuted,this.handleUnmuted))}get logContext(){var $;return Object.assign(Object.assign({},($=this.loggerContextCb)===null||$===void 0?void 0:$.call(this)),getLogContextFromTrack(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Encryption_Type.NONE}get audioTrack(){if(isAudioTrack(this.track))return this.track}get videoTrack(){if(isVideoTrack(this.track))return this.track}updateInfo($){this.trackSid=$.sid,this.trackName=$.name,this.source=Track.sourceFromProto($.source),this.mimeType=$.mimeType,this.kind===Track.Kind.Video&&$.width>0&&(this.dimensions={width:$.width,height:$.height},this.simulcasted=$.simulcast),this.encryption=$.encryption,this.trackInfo=$,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:$}))}}(function(_e){(function($){$.Desired="desired",$.Subscribed="subscribed",$.Unsubscribed="unsubscribed"})(_e.SubscriptionStatus||(_e.SubscriptionStatus={})),function($){$.Allowed="allowed",$.NotAllowed="not_allowed"}(_e.PermissionStatus||(_e.PermissionStatus={}))})(TrackPublication||(TrackPublication={}));class LocalTrackPublication extends TrackPublication{get isUpstreamPaused(){var $;return($=this.track)===null||$===void 0?void 0:$.isUpstreamPaused}constructor($,et,tt,nt){super($,et.sid,et.name,nt),this.track=void 0,this.handleTrackEnded=()=>{this.emit(TrackEvent.Ended)},this.handleCpuConstrained=()=>{this.track&&isVideoTrack(this.track)&&this.emit(TrackEvent.CpuConstrained,this.track)},this.updateInfo(et),this.setTrack(tt)}setTrack($){this.track&&(this.track.off(TrackEvent.Ended,this.handleTrackEnded),this.track.off(TrackEvent.CpuConstrained,this.handleCpuConstrained)),super.setTrack($),$&&($.on(TrackEvent.Ended,this.handleTrackEnded),$.on(TrackEvent.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return __awaiter$1(this,void 0,void 0,function*(){var $;return($=this.track)===null||$===void 0?void 0:$.mute()})}unmute(){return __awaiter$1(this,void 0,void 0,function*(){var $;return($=this.track)===null||$===void 0?void 0:$.unmute()})}pauseUpstream(){return __awaiter$1(this,void 0,void 0,function*(){var $;yield($=this.track)===null||$===void 0?void 0:$.pauseUpstream()})}resumeUpstream(){return __awaiter$1(this,void 0,void 0,function*(){var $;yield($=this.track)===null||$===void 0?void 0:$.resumeUpstream()})}getTrackFeatures(){var $;if(isAudioTrack(this.track)){const et=this.track.getSourceTrackSettings(),tt=new Set;return et.autoGainControl&&tt.add(AudioTrackFeature.TF_AUTO_GAIN_CONTROL),et.echoCancellation&&tt.add(AudioTrackFeature.TF_ECHO_CANCELLATION),et.noiseSuppression&&tt.add(AudioTrackFeature.TF_NOISE_SUPPRESSION),et.channelCount&&et.channelCount>1&&tt.add(AudioTrackFeature.TF_STEREO),!(($=this.options)===null||$===void 0)&&$.dtx||tt.add(AudioTrackFeature.TF_NO_DTX),this.track.enhancedNoiseCancellation&&tt.add(AudioTrackFeature.TF_ENHANCED_NOISE_CANCELLATION),Array.from(tt.values())}else return[]}}function createLocalTracks(_e,$){return __awaiter$1(this,void 0,void 0,function*(){_e??(_e={});let et=!1;const{audioProcessor:tt,videoProcessor:nt,optionsWithoutProcessor:rt}=extractProcessorsFromOptions(_e);let it=rt.audio,ot=rt.video;if(tt&&typeof rt.audio=="object"&&(rt.audio.processor=tt),nt&&typeof rt.video=="object"&&(rt.video.processor=nt),_e.audio&&typeof rt.audio=="object"&&typeof rt.audio.deviceId=="string"){const dt=rt.audio.deviceId;rt.audio.deviceId={exact:dt},et=!0,it=Object.assign(Object.assign({},rt.audio),{deviceId:{ideal:dt}})}if(rt.video&&typeof rt.video=="object"&&typeof rt.video.deviceId=="string"){const dt=rt.video.deviceId;rt.video.deviceId={exact:dt},et=!0,ot=Object.assign(Object.assign({},rt.video),{deviceId:{ideal:dt}})}(rt.audio===!0||typeof rt.audio=="object"&&!rt.audio.deviceId)&&(rt.audio={deviceId:"default"}),rt.video===!0?rt.video={deviceId:"default"}:typeof rt.video=="object"&&!rt.video.deviceId&&(rt.video.deviceId="default");const st=mergeDefaultOptions(rt,audioDefaults,videoDefaults),at=constraintsForOptions(st),lt=navigator.mediaDevices.getUserMedia(at);rt.audio&&(DeviceManager.userMediaPromiseMap.set("audioinput",lt),lt.catch(()=>DeviceManager.userMediaPromiseMap.delete("audioinput"))),rt.video&&(DeviceManager.userMediaPromiseMap.set("videoinput",lt),lt.catch(()=>DeviceManager.userMediaPromiseMap.delete("videoinput")));try{const dt=yield lt;return yield Promise.all(dt.getTracks().map(pt=>__awaiter$1(this,void 0,void 0,function*(){const ht=pt.kind==="audio";let vt=ht?st.audio:st.video;(typeof vt=="boolean"||!vt)&&(vt={});let mt;const kt=ht?at.audio:at.video;typeof kt!="boolean"&&(mt=kt);const bt=pt.getSettings().deviceId;mt!=null&&mt.deviceId&&unwrapConstraint(mt.deviceId)!==bt?mt.deviceId=bt:mt||(mt={deviceId:bt});const gt=mediaTrackToLocalTrack(pt,mt,$);return gt.kind===Track.Kind.Video?gt.source=Track.Source.Camera:gt.kind===Track.Kind.Audio&&(gt.source=Track.Source.Microphone),gt.mediaStream=dt,isAudioTrack(gt)&&tt?yield gt.setProcessor(tt):isVideoTrack(gt)&&nt&&(yield gt.setProcessor(nt)),gt})))}catch(dt){if(!et)throw dt;return createLocalTracks(Object.assign(Object.assign({},_e),{audio:it,video:ot}),$)}})}function createLocalVideoTrack(_e){return __awaiter$1(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:!1,video:!0}))[0]})}function createLocalAudioTrack(_e){return __awaiter$1(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:_e??!0,video:!1}))[0]})}var ConnectionQuality$2;(function(_e){_e.Excellent="excellent",_e.Good="good",_e.Poor="poor",_e.Lost="lost",_e.Unknown="unknown"})(ConnectionQuality$2||(ConnectionQuality$2={}));function qualityFromProto(_e){switch(_e){case ConnectionQuality$1.EXCELLENT:return ConnectionQuality$2.Excellent;case ConnectionQuality$1.GOOD:return ConnectionQuality$2.Good;case ConnectionQuality$1.POOR:return ConnectionQuality$2.Poor;case ConnectionQuality$1.LOST:return ConnectionQuality$2.Lost;default:return ConnectionQuality$2.Unknown}}class Participant extends eventsExports.EventEmitter{get logContext(){var $,et;return Object.assign({},(et=($=this.loggerOptions)===null||$===void 0?void 0:$.loggerContextCb)===null||et===void 0?void 0:et.call($))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every($=>$.isEncrypted)}get isAgent(){var $;return(($=this.permissions)===null||$===void 0?void 0:$.agent)||this.kind===ParticipantInfo_Kind.AGENT}get isActive(){var $;return(($=this.participantInfo)===null||$===void 0?void 0:$.state)===ParticipantInfo_State.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor($,et,tt,nt,rt,it){let ot=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ParticipantInfo_Kind.STANDARD;var st;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ConnectionQuality$2.Unknown,this.log=livekitLogger,this.log=getLogger((st=it==null?void 0:it.loggerName)!==null&&st!==void 0?st:LoggerNames.Participant),this.loggerOptions=it,this.setMaxListeners(100),this.sid=$,this.identity=et,this.name=tt,this.metadata=nt,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=ot,this._attributes=rt??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication($){for(const[,et]of this.trackPublications)if(et.source===$)return et}getTrackPublicationByName($){for(const[,et]of this.trackPublications)if(et.trackName===$)return et}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Future,this.once(ParticipantEvent.Active,()=>{var $,et;(et=($=this.activeFuture)===null||$===void 0?void 0:$.resolve)===null||et===void 0||et.call($),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var $;const et=this.getTrackPublication(Track.Source.Camera);return!(!(($=et==null?void 0:et.isMuted)!==null&&$!==void 0)||$)}get isMicrophoneEnabled(){var $;const et=this.getTrackPublication(Track.Source.Microphone);return!(!(($=et==null?void 0:et.isMuted)!==null&&$!==void 0)||$)}get isScreenShareEnabled(){return!!this.getTrackPublication(Track.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo($){var et;return this.participantInfo&&this.participantInfo.sid===$.sid&&this.participantInfo.version>$.version?!1:(this.identity=$.identity,this.sid=$.sid,this._setName($.name),this._setMetadata($.metadata),this._setAttributes($.attributes),$.state===ParticipantInfo_State.ACTIVE&&((et=this.participantInfo)===null||et===void 0?void 0:et.state)!==ParticipantInfo_State.ACTIVE&&this.emit(ParticipantEvent.Active),$.permission&&this.setPermissions($.permission),this.participantInfo=$,!0)}_setMetadata($){const et=this.metadata!==$,tt=this.metadata;this.metadata=$,et&&this.emit(ParticipantEvent.ParticipantMetadataChanged,tt)}_setName($){const et=this.name!==$;this.name=$,et&&this.emit(ParticipantEvent.ParticipantNameChanged,$)}_setAttributes($){const et=diffAttributes(this.attributes,$);this._attributes=$,Object.keys(et).length>0&&this.emit(ParticipantEvent.AttributesChanged,et)}setPermissions($){var et,tt,nt,rt,it,ot;const st=this.permissions,at=$.canPublish!==((et=this.permissions)===null||et===void 0?void 0:et.canPublish)||$.canSubscribe!==((tt=this.permissions)===null||tt===void 0?void 0:tt.canSubscribe)||$.canPublishData!==((nt=this.permissions)===null||nt===void 0?void 0:nt.canPublishData)||$.hidden!==((rt=this.permissions)===null||rt===void 0?void 0:rt.hidden)||$.recorder!==((it=this.permissions)===null||it===void 0?void 0:it.recorder)||$.canPublishSources.length!==this.permissions.canPublishSources.length||$.canPublishSources.some((lt,dt)=>{var pt;return lt!==((pt=this.permissions)===null||pt===void 0?void 0:pt.canPublishSources[dt])})||$.canSubscribeMetrics!==((ot=this.permissions)===null||ot===void 0?void 0:ot.canSubscribeMetrics);return this.permissions=$,at&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,st),at}setIsSpeaking($){$!==this.isSpeaking&&(this.isSpeaking=$,$&&(this.lastSpokeAt=new Date),this.emit(ParticipantEvent.IsSpeakingChanged,$))}setConnectionQuality($){const et=this._connectionQuality;this._connectionQuality=qualityFromProto($),et!==this._connectionQuality&&this.emit(ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var $,et;this.activeFuture&&((et=($=this.activeFuture).reject)===null||et===void 0||et.call($,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext($){this.audioContext=$,this.audioTrackPublications.forEach(et=>isAudioTrack(et.track)&&et.track.setAudioContext($))}addTrackPublication($){$.on(TrackEvent.Muted,()=>{this.emit(ParticipantEvent.TrackMuted,$)}),$.on(TrackEvent.Unmuted,()=>{this.emit(ParticipantEvent.TrackUnmuted,$)});const et=$;switch(et.track&&(et.track.sid=$.trackSid),this.trackPublications.set($.trackSid,$),$.kind){case Track.Kind.Audio:this.audioTrackPublications.set($.trackSid,$);break;case Track.Kind.Video:this.videoTrackPublications.set($.trackSid,$);break}}}function trackPermissionToProto(_e){var $,et,tt;if(!_e.participantSid&&!_e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new TrackPermission({participantIdentity:($=_e.participantIdentity)!==null&&$!==void 0?$:"",participantSid:(et=_e.participantSid)!==null&&et!==void 0?et:"",allTracks:(tt=_e.allowAll)!==null&&tt!==void 0?tt:!1,trackSids:_e.allowedTrackSids||[]})}const STREAM_CHUNK_SIZE=15e3;class LocalParticipant extends Participant{constructor($,et,tt,nt,rt){super($,et,void 0,void 0,void 0,{loggerName:nt.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Encryption_Type.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Future)},this.handleReconnected=()=>{var it,ot;(ot=(it=this.reconnectFuture)===null||it===void 0?void 0:it.resolve)===null||ot===void 0||ot.call(it),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var it,ot,st,at,lt,dt;this.reconnectFuture&&(this.reconnectFuture.promise.catch(pt=>this.log.warn(pt.message,this.logContext)),(ot=(it=this.reconnectFuture)===null||it===void 0?void 0:it.reject)===null||ot===void 0||ot.call(it,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((at=(st=this.signalConnectedFuture).reject)===null||at===void 0||at.call(st,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(dt=(lt=this.activeAgentFuture)===null||lt===void 0?void 0:lt.reject)===null||dt===void 0||dt.call(lt,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=it=>{var ot,st;it.participant&&this.updateInfo(it.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Future),(st=(ot=this.signalConnectedFuture).resolve)===null||st===void 0||st.call(ot)},this.handleSignalRequestResponse=it=>{const{requestId:ot,reason:st,message:at}=it,lt=this.pendingSignalRequests.get(ot);lt&&(st!==RequestResponse_Reason.OK&&lt.reject(new SignalRequestError(at,st)),this.pendingSignalRequests.delete(ot))},this.handleDataPacket=it=>{switch(it.value.case){case"rpcResponse":let ot=it.value.value,st=null,at=null;ot.value.case==="payload"?st=ot.value.value:ot.value.case==="error"&&(at=RpcError.fromProto(ot.value.value)),this.handleIncomingRpcResponse(ot.requestId,st,at);break;case"rpcAck":let lt=it.value.value;this.handleIncomingRpcAck(lt.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(it=>trackPermissionToProto(it)))},this.onTrackUnmuted=it=>{this.onTrackMuted(it,it.isUpstreamPaused)},this.onTrackMuted=(it,ot)=>{if(ot===void 0&&(ot=!0),!it.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(it)));return}this.engine.updateMuteStatus(it.sid,ot)},this.onTrackUpstreamPaused=it=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(it))),this.onTrackMuted(it,!0)},this.onTrackUpstreamResumed=it=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(it))),this.onTrackMuted(it,it.isMuted)},this.onTrackFeatureUpdate=it=>{const ot=this.audioTrackPublications.get(it.sid);if(!ot){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(it.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(ot.trackSid,ot.getTrackFeatures())},this.onTrackCpuConstrained=(it,ot)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(ot))),this.emit(ParticipantEvent.LocalTrackCpuConstrained,it,ot)},this.handleSubscribedQualityUpdate=it=>__awaiter$1(this,void 0,void 0,function*(){var ot,st,at,lt,dt;if(!(!((dt=this.roomOptions)===null||dt===void 0)&&dt.dynacast))return;const pt=this.videoTrackPublications.get(it.trackSid);if(!pt){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:it.trackSid}));return}if(!pt.videoTrack)return;const ht=yield pt.videoTrack.setPublishingCodecs(it.subscribedCodecs);try{for(var vt=!0,mt=__asyncValues(ht),kt;kt=yield mt.next(),ot=kt.done,!ot;vt=!0){lt=kt.value,vt=!1;const bt=lt;isBackupCodec(bt)&&(this.log.debug("publish ".concat(bt," for ").concat(pt.videoTrack.sid),Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(pt))),yield this.publishAdditionalCodecForTrack(pt.videoTrack,bt,pt.options))}}catch(bt){st={error:bt}}finally{try{!vt&&!ot&&(at=mt.return)&&(yield at.call(mt))}finally{if(st)throw st.error}}}),this.handleLocalTrackUnpublished=it=>{const ot=this.trackPublications.get(it.trackSid);if(!ot){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:it.trackSid}));return}this.unpublishTrack(ot.track)},this.handleTrackEnded=it=>__awaiter$1(this,void 0,void 0,function*(){if(it.source===Track.Source.ScreenShare||it.source===Track.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(it))),this.unpublishTrack(it);else if(it.isUserProvided)yield it.mute();else if(isLocalAudioTrack(it)||isLocalVideoTrack(it))try{if(isWeb())try{const ot=yield navigator==null?void 0:navigator.permissions.query({name:it.source===Track.Source.Camera?"camera":"microphone"});if(ot&&ot.state==="denied")throw this.log.warn("user has revoked access to ".concat(it.source),Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(it))),ot.onchange=()=>{ot.state!=="denied"&&(it.isMuted||it.restartTrack(),ot.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}it.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(it))),isLocalAudioTrack(it)?yield it.restartTrack({deviceId:"default"}):yield it.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(it))),yield it.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=tt,this.roomOptions=nt,this.setupEngine(tt),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=rt}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Encryption_Type.NONE}getTrackPublication($){const et=super.getTrackPublication($);if(et)return et}getTrackPublicationByName($){const et=super.getTrackPublicationByName($);if(et)return et}setupEngine($){var et;this.engine=$,this.engine.on(EngineEvent.RemoteMute,(tt,nt)=>{const rt=this.trackPublications.get(tt);!rt||!rt.track||(nt?rt.mute():rt.unmute())}),!((et=this.signalConnectedFuture)===null||et===void 0)&&et.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(EngineEvent.Connected,this.handleReconnected).on(EngineEvent.SignalConnected,this.handleSignalConnected).on(EngineEvent.SignalRestarted,this.handleReconnected).on(EngineEvent.SignalResumed,this.handleReconnected).on(EngineEvent.Restarting,this.handleReconnecting).on(EngineEvent.Resuming,this.handleReconnecting).on(EngineEvent.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(EngineEvent.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(EngineEvent.Closing,this.handleClosing).on(EngineEvent.SignalRequestResponse,this.handleSignalRequestResponse).on(EngineEvent.DataPacketReceived,this.handleDataPacket)}setMetadata($){return __awaiter$1(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:$})})}setName($){return __awaiter$1(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:$})})}setAttributes($){return __awaiter$1(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:$})})}requestMetadataUpdate($){return __awaiter$1(this,arguments,void 0,function(et){var tt=this;let{metadata:nt,name:rt,attributes:it}=et;return function*(){return new Promise((ot,st)=>__awaiter$1(tt,void 0,void 0,function*(){var at,lt;try{let dt=!1;const pt=yield this.engine.client.sendUpdateLocalMetadata((at=nt??this.metadata)!==null&&at!==void 0?at:"",(lt=rt??this.name)!==null&&lt!==void 0?lt:"",it),ht=performance.now();for(this.pendingSignalRequests.set(pt,{resolve:ot,reject:vt=>{st(vt),dt=!0},values:{name:rt,metadata:nt,attributes:it}});performance.now()-ht<5e3&&!dt;){if((!rt||this.name===rt)&&(!nt||this.metadata===nt)&&(!it||Object.entries(it).every(vt=>{let[mt,kt]=vt;return this.attributes[mt]===kt||kt===""&&!this.attributes[mt]}))){this.pendingSignalRequests.delete(pt),ot();return}yield sleep$1(50)}st(new SignalRequestError("Request to update local metadata timed out","TimeoutError"))}catch(dt){dt instanceof Error&&st(dt)}}))}()})}setCameraEnabled($,et,tt){return this.setTrackEnabled(Track.Source.Camera,$,et,tt)}setMicrophoneEnabled($,et,tt){return this.setTrackEnabled(Track.Source.Microphone,$,et,tt)}setScreenShareEnabled($,et,tt){return this.setTrackEnabled(Track.Source.ScreenShare,$,et,tt)}setPermissions($){const et=this.permissions,tt=super.setPermissions($);return tt&&et&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,et),tt}setE2EEEnabled($){return __awaiter$1(this,void 0,void 0,function*(){this.encryptionType=$?Encryption_Type.GCM:Encryption_Type.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled($,et,tt,nt){return __awaiter$1(this,void 0,void 0,function*(){var rt,it;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:$,enabled:et})),this.republishPromise&&(yield this.republishPromise);let ot=this.getTrackPublication($);if(et)if(ot)yield ot.unmute();else{let st;if(this.pendingPublishing.has($)){const at=yield this.waitForPendingPublicationOfSource($);return at||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:$})),yield at==null?void 0:at.unmute(),at}this.pendingPublishing.add($);try{switch($){case Track.Source.Camera:st=yield this.createTracks({video:(rt=tt)!==null&&rt!==void 0?rt:!0});break;case Track.Source.Microphone:st=yield this.createTracks({audio:(it=tt)!==null&&it!==void 0?it:!0});break;case Track.Source.ScreenShare:st=yield this.createScreenTracks(Object.assign({},tt));break;default:throw new TrackInvalidError($)}}catch(at){throw st==null||st.forEach(lt=>{lt.stop()}),at instanceof Error&&this.emit(ParticipantEvent.MediaDevicesError,at,sourceToKind($)),this.pendingPublishing.delete($),at}for(const at of st){const lt=Object.assign(Object.assign({},this.roomOptions.publishDefaults),tt);$===Track.Source.Microphone&&isAudioTrack(at)&&lt.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),at.startPreConnectBuffer())}try{const at=[];for(const dt of st)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(dt))),at.push(this.publishTrack(dt,nt));[ot]=yield Promise.all(at)}catch(at){throw st==null||st.forEach(lt=>{lt.stop()}),at}finally{this.pendingPublishing.delete($)}}else if(!(ot!=null&&ot.track)&&this.pendingPublishing.has($)&&(ot=yield this.waitForPendingPublicationOfSource($),ot||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:$}))),ot&&ot.track)if($===Track.Source.ScreenShare){ot=yield this.unpublishTrack(ot.track);const st=this.getTrackPublication(Track.Source.ScreenShareAudio);st&&st.track&&this.unpublishTrack(st.track)}else yield ot.mute();return ot})}enableCameraAndMicrophone(){return __awaiter$1(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Track.Source.Camera)||this.pendingPublishing.has(Track.Source.Microphone))){this.pendingPublishing.add(Track.Source.Camera),this.pendingPublishing.add(Track.Source.Microphone);try{const $=yield this.createTracks({audio:!0,video:!0});yield Promise.all($.map(et=>this.publishTrack(et)))}finally{this.pendingPublishing.delete(Track.Source.Camera),this.pendingPublishing.delete(Track.Source.Microphone)}}})}createTracks($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt;$??($={});const nt=mergeDefaultOptions($,(et=this.roomOptions)===null||et===void 0?void 0:et.audioCaptureDefaults,(tt=this.roomOptions)===null||tt===void 0?void 0:tt.videoCaptureDefaults);try{return(yield createLocalTracks(nt,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(ot=>(isAudioTrack(ot)&&(this.microphoneError=void 0,ot.setAudioContext(this.audioContext),ot.source=Track.Source.Microphone,this.emit(ParticipantEvent.AudioStreamAcquired)),isVideoTrack(ot)&&(this.cameraError=void 0,ot.source=Track.Source.Camera),ot))}catch(rt){throw rt instanceof Error&&($.audio&&(this.microphoneError=rt),$.video&&(this.cameraError=rt)),rt}})}createScreenTracks($){return __awaiter$1(this,void 0,void 0,function*(){if($===void 0&&($={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new DeviceUnsupportedError("getDisplayMedia not supported");$.resolution===void 0&&!isSafari17Based()&&($.resolution=ScreenSharePresets.h1080fps30.resolution);const et=screenCaptureToDisplayMediaStreamOptions($),tt=yield navigator.mediaDevices.getDisplayMedia(et),nt=tt.getVideoTracks();if(nt.length===0)throw new TrackInvalidError("no video track found");const rt=new LocalVideoTrack(nt[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});rt.source=Track.Source.ScreenShare,$.contentHint&&(rt.mediaStreamTrack.contentHint=$.contentHint);const it=[rt];if(tt.getAudioTracks().length>0){this.emit(ParticipantEvent.AudioStreamAcquired);const ot=new LocalAudioTrack(tt.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});ot.source=Track.Source.ScreenShareAudio,it.push(ot)}return it})}publishTrack($,et){return __awaiter$1(this,void 0,void 0,function*(){return this.publishOrRepublishTrack($,et)})}publishOrRepublishTrack($,et){return __awaiter$1(this,arguments,void 0,function(tt,nt){var rt=this;let it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var ot,st,at,lt;isLocalAudioTrack(tt)&&tt.setAudioContext(rt.audioContext),yield(ot=rt.reconnectFuture)===null||ot===void 0?void 0:ot.promise,rt.republishPromise&&!it&&(yield rt.republishPromise),isLocalTrack(tt)&&rt.pendingPublishPromises.has(tt)&&(yield rt.pendingPublishPromises.get(tt));let dt;if(tt instanceof MediaStreamTrack)dt=tt.getConstraints();else{dt=tt.constraints;let bt;switch(tt.source){case Track.Source.Microphone:bt="audioinput";break;case Track.Source.Camera:bt="videoinput"}bt&&rt.activeDeviceMap.has(bt)&&(dt=Object.assign(Object.assign({},dt),{deviceId:rt.activeDeviceMap.get(bt)}))}if(tt instanceof MediaStreamTrack)switch(tt.kind){case"audio":tt=new LocalAudioTrack(tt,dt,!0,rt.audioContext,{loggerName:rt.roomOptions.loggerName,loggerContextCb:()=>rt.logContext});break;case"video":tt=new LocalVideoTrack(tt,dt,!0,{loggerName:rt.roomOptions.loggerName,loggerContextCb:()=>rt.logContext});break;default:throw new TrackInvalidError("unsupported MediaStreamTrack kind ".concat(tt.kind))}else tt.updateLoggerOptions({loggerName:rt.roomOptions.loggerName,loggerContextCb:()=>rt.logContext});let pt;if(rt.trackPublications.forEach(bt=>{bt.track&&bt.track===tt&&(pt=bt)}),pt)return rt.log.warn("track has already been published, skipping",Object.assign(Object.assign({},rt.logContext),getLogContextFromTrack(pt))),pt;const ht="channelCount"in tt.mediaStreamTrack.getSettings()&&tt.mediaStreamTrack.getSettings().channelCount===2||tt.mediaStreamTrack.getConstraints().channelCount===2,vt=(st=nt==null?void 0:nt.forceStereo)!==null&&st!==void 0?st:ht;vt&&(nt||(nt={}),nt.dtx===void 0&&rt.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},rt.logContext),getLogContextFromTrack(tt))),nt.red===void 0&&rt.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(at=nt.dtx)!==null&&at!==void 0||(nt.dtx=!1),(lt=nt.red)!==null&&lt!==void 0||(nt.red=!1));const mt=Object.assign(Object.assign({},rt.roomOptions.publishDefaults),nt);!isE2EESimulcastSupported()&&rt.roomOptions.e2ee&&(rt.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},rt.logContext)),mt.simulcast=!1),mt.source&&(tt.source=mt.source);const kt=new Promise((bt,gt)=>__awaiter$1(rt,void 0,void 0,function*(){try{if(this.engine.client.currentState!==SignalConnectionState.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:getLogContextFromTrack(tt)}));const St=setTimeout(()=>{gt(new PublishTrackError("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(St);const yt=yield this.publish(tt,mt,vt);bt(yt)}else try{const St=yield this.publish(tt,mt,vt);bt(St)}catch(St){gt(St)}}catch(St){gt(St)}}));rt.pendingPublishPromises.set(tt,kt);try{return yield kt}catch(bt){throw bt}finally{rt.pendingPublishPromises.delete(tt)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Future),this.signalConnectedFuture.promise}hasPermissionsToPublish($){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($))),!1;const{canPublish:et,canPublishSources:tt}=this.permissions;return et&&(tt.length===0||tt.map(nt=>getTrackSourceFromProto(nt)).includes($.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($))),!1)}publish($,et,tt){return __awaiter$1(this,void 0,void 0,function*(){var nt,rt,it,ot,st,at,lt,dt,pt,ht;if(!this.hasPermissionsToPublish($))throw new PublishTrackError("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(xt=>isLocalTrack($)&&xt.source===$.source)&&$.source!==Track.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat($.source),Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($))),et.stopMicTrackOnMute&&isAudioTrack($)&&($.stopOnMute=!0),$.source===Track.Source.ScreenShare&&isFireFox()&&(et.simulcast=!1),et.videoCodec==="av1"&&!supportsAV1()&&(et.videoCodec=void 0),et.videoCodec==="vp9"&&!supportsVP9()&&(et.videoCodec=void 0),et.videoCodec===void 0&&(et.videoCodec=defaultVideoCodec),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(xt=>et.videoCodec===mimeTypeToVideoCodecString(xt.mime))||(et.videoCodec=mimeTypeToVideoCodecString(this.enabledPublishVideoCodecs[0].mime)));const mt=et.videoCodec;$.on(TrackEvent.Muted,this.onTrackMuted),$.on(TrackEvent.Unmuted,this.onTrackUnmuted),$.on(TrackEvent.Ended,this.handleTrackEnded),$.on(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),$.on(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),$.on(TrackEvent.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const kt=[],bt=!(!((nt=et.dtx)!==null&&nt!==void 0)||nt),gt=$.getSourceTrackSettings();gt.autoGainControl&&kt.push(AudioTrackFeature.TF_AUTO_GAIN_CONTROL),gt.echoCancellation&&kt.push(AudioTrackFeature.TF_ECHO_CANCELLATION),gt.noiseSuppression&&kt.push(AudioTrackFeature.TF_NOISE_SUPPRESSION),gt.channelCount&&gt.channelCount>1&&kt.push(AudioTrackFeature.TF_STEREO),bt&&kt.push(AudioTrackFeature.TF_NO_DTX),isLocalAudioTrack($)&&$.hasPreConnectBuffer&&kt.push(AudioTrackFeature.TF_PRECONNECT_BUFFER);const St=new AddTrackRequest({cid:$.mediaStreamTrack.id,name:et.name,type:Track.kindToProto($.kind),muted:$.isMuted,source:Track.sourceToProto($.source),disableDtx:bt,encryption:this.encryptionType,stereo:tt,disableRed:this.isE2EEEnabled||!(!((rt=et.red)!==null&&rt!==void 0)||rt),stream:et==null?void 0:et.stream,backupCodecPolicy:et==null?void 0:et.backupCodecPolicy,audioFeatures:kt});let yt;if($.kind===Track.Kind.Video){let xt={width:0,height:0};try{xt=yield $.waitForDimensions()}catch{const At=(ot=(it=this.roomOptions.videoCaptureDefaults)===null||it===void 0?void 0:it.resolution)!==null&&ot!==void 0?ot:VideoPresets.h720.resolution;xt={width:At.width,height:At.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($)),{dims:xt}))}St.width=xt.width,St.height=xt.height,isLocalVideoTrack($)&&(isSVCCodec(mt)&&($.source===Track.Source.ScreenShare&&(et.scalabilityMode="L1T3","contentHint"in $.mediaStreamTrack&&($.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($))))),et.scalabilityMode=(st=et.scalabilityMode)!==null&&st!==void 0?st:"L3T3_KEY"),St.simulcastCodecs=[new SimulcastCodec({codec:mt,cid:$.mediaStreamTrack.id})],et.backupCodec===!0&&(et.backupCodec={codec:defaultVideoCodec}),et.backupCodec&&mt!==et.backupCodec.codec&&St.encryption===Encryption_Type.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),St.simulcastCodecs.push(new SimulcastCodec({codec:et.backupCodec.codec,cid:""})))),yt=computeVideoEncodings($.source===Track.Source.ScreenShare,St.width,St.height,et),St.layers=videoLayersFromEncodings(St.width,St.height,yt,isSVCCodec(et.videoCodec))}else $.kind===Track.Kind.Audio&&(yt=[{maxBitrate:(at=et.audioPreset)===null||at===void 0?void 0:at.maxBitrate,priority:(dt=(lt=et.audioPreset)===null||lt===void 0?void 0:lt.priority)!==null&&dt!==void 0?dt:"high",networkPriority:(ht=(pt=et.audioPreset)===null||pt===void 0?void 0:pt.priority)!==null&&ht!==void 0?ht:"high"}]);if(!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const Et=()=>__awaiter$1(this,void 0,void 0,function*(){var xt,Pt,At;if(!this.engine.pcManager)throw new UnexpectedConnectionState("pcManager is not ready");if($.sender=yield this.engine.createSender($,et,yt),this.emit(ParticipantEvent.LocalSenderCreated,$.sender,$),isLocalVideoTrack($)&&((xt=et.degradationPreference)!==null&&xt!==void 0||(et.degradationPreference=getDefaultDegradationPreference($)),$.setDegradationPreference(et.degradationPreference)),yt)if(isFireFox()&&$.kind===Track.Kind.Audio){let Nt;for(const Bt of this.engine.pcManager.publisher.getTransceivers())if(Bt.sender===$.sender){Nt=Bt;break}Nt&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:Nt,codec:"opus",maxbr:!((Pt=yt[0])===null||Pt===void 0)&&Pt.maxBitrate?yt[0].maxBitrate/1e3:0})}else $.codec&&isSVCCodec($.codec)&&(!((At=yt[0])===null||At===void 0)&&At.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:St.cid,codec:$.codec,maxbr:yt[0].maxBitrate/1e3});yield this.engine.negotiate()});let Tt;const wt=new Promise((xt,Pt)=>__awaiter$1(this,void 0,void 0,function*(){var At;try{Tt=yield this.engine.addTrack(St),xt(Tt)}catch(Nt){$.sender&&(!((At=this.engine.pcManager)===null||At===void 0)&&At.publisher)&&(this.engine.pcManager.publisher.removeTrack($.sender),yield this.engine.negotiate().catch(Bt=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($)),{error:Bt}))})),Pt(Nt)}}));if(this.enabledPublishVideoCodecs.length>0)Tt=(yield Promise.all([wt,Et()]))[0];else{Tt=yield wt;let xt;if(Tt.codecs.forEach(Pt=>{xt===void 0&&(xt=Pt.mimeType)}),xt&&$.kind===Track.Kind.Video){const Pt=mimeTypeToVideoCodecString(xt);Pt!==mt&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($)),{codec:Pt})),et.videoCodec=Pt,yt=computeVideoEncodings($.source===Track.Source.ScreenShare,St.width,St.height,et))}yield Et()}const Rt=new LocalTrackPublication($.kind,Tt,$,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(Rt.on(TrackEvent.CpuConstrained,xt=>this.onTrackCpuConstrained(xt,Rt)),Rt.options=et,$.sid=Tt.sid,this.log.debug("publishing ".concat($.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:yt,trackInfo:Tt})),isLocalVideoTrack($)?$.startMonitor(this.engine.client):isLocalAudioTrack($)&&$.startMonitor(),this.addTrackPublication(Rt),this.emit(ParticipantEvent.LocalTrackPublished,Rt),isLocalAudioTrack($)&&Tt.audioFeatures.includes(AudioTrackFeature.TF_PRECONNECT_BUFFER)){const xt=$.getPreConnectBuffer(),Pt=$.getPreConnectBufferMimeType();this.on(ParticipantEvent.LocalTrackSubscribed,At=>{if(At.trackSid===Tt.sid){if(!$.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($))),$.stopPreConnectBuffer()}}),xt&&new Promise((Nt,Bt)=>__awaiter$1(this,void 0,void 0,function*(){var Jt,ln,on,an,Lt,en;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($)));const mn=setTimeout(()=>{Bt(new Error("agent not active within 10 seconds"))},1e4),wn=yield this.waitUntilActiveAgentPresent();clearTimeout(mn),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($)));const Cn=yield this.streamBytes({name:"preconnect-buffer",mimeType:Pt,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[wn.identity],attributes:{trackId:Rt.trackSid,sampleRate:String((Lt=gt.sampleRate)!==null&&Lt!==void 0?Lt:"48000"),channels:String((en=gt.channelCount)!==null&&en!==void 0?en:"1")}});try{for(var rn=!0,sn=__asyncValues(xt),hn;hn=yield sn.next(),Jt=hn.done,!Jt;rn=!0){an=hn.value,rn=!1;const kn=an;yield Cn.write(kn)}}catch(kn){ln={error:kn}}finally{try{!rn&&!Jt&&(on=sn.return)&&(yield on.call(sn))}finally{if(ln)throw ln.error}}yield Cn.close(),Nt()}catch(mn){Bt(mn)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($)))}).catch(Nt=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($)),{error:Nt}))})}return Rt})}get isLocal(){return!0}publishAdditionalCodecForTrack($,et,tt){return __awaiter$1(this,void 0,void 0,function*(){var nt;if(this.encryptionType!==Encryption_Type.NONE)return;let rt;if(this.trackPublications.forEach(ht=>{ht.track&&ht.track===$&&(rt=ht)}),!rt)throw new TrackInvalidError("track is not published");if(!isLocalVideoTrack($))throw new TrackInvalidError("track is not a video track");const it=Object.assign(Object.assign({},(nt=this.roomOptions)===null||nt===void 0?void 0:nt.publishDefaults),tt),ot=computeTrackBackupEncodings($,et,it);if(!ot){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($)));return}const st=$.addSimulcastTrack(et,ot);if(!st)return;const at=new AddTrackRequest({cid:st.mediaStreamTrack.id,type:Track.kindToProto($.kind),muted:$.isMuted,source:Track.sourceToProto($.source),sid:$.sid,simulcastCodecs:[{codec:it.videoCodec,cid:st.mediaStreamTrack.id}]});if(at.layers=videoLayersFromEncodings(at.width,at.height,ot),!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const lt=()=>__awaiter$1(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender($,st,it,ot),yield this.engine.negotiate()}),pt=(yield Promise.all([this.engine.addTrack(at),lt()]))[0];this.log.debug("published ".concat(et," for track ").concat($.sid),Object.assign(Object.assign({},this.logContext),{encodings:ot,trackInfo:pt}))})}unpublishTrack($,et){return __awaiter$1(this,void 0,void 0,function*(){var tt,nt;if(isLocalTrack($)){const at=this.pendingPublishPromises.get($);at&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($))),yield at)}const rt=this.getPublicationForTrack($),it=rt?getLogContextFromTrack(rt):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),it)),!rt||!rt.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),it));return}$=rt.track,$.off(TrackEvent.Muted,this.onTrackMuted),$.off(TrackEvent.Unmuted,this.onTrackUnmuted),$.off(TrackEvent.Ended,this.handleTrackEnded),$.off(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),$.off(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),$.off(TrackEvent.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),et===void 0&&(et=(nt=(tt=this.roomOptions)===null||tt===void 0?void 0:tt.stopLocalTrackOnUnpublish)!==null&&nt!==void 0?nt:!0),et?$.stop():$.stopMonitor();let ot=!1;const st=$.sender;if($.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<PCTransportState.FAILED&&st)try{for(const at of this.engine.pcManager.publisher.getTransceivers())at.sender===st&&(at.direction="inactive",ot=!0);if(this.engine.removeTrack(st)&&(ot=!0),isLocalVideoTrack($)){for(const[,at]of $.simulcastCodecs)at.sender&&(this.engine.removeTrack(at.sender)&&(ot=!0),at.sender=void 0);$.simulcastCodecs.clear()}}catch(at){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),it),{error:at}))}switch(this.trackPublications.delete(rt.trackSid),rt.kind){case Track.Kind.Audio:this.audioTrackPublications.delete(rt.trackSid);break;case Track.Kind.Video:this.videoTrackPublications.delete(rt.trackSid);break}return this.emit(ParticipantEvent.LocalTrackUnpublished,rt),rt.setTrack(void 0),ot&&(yield this.engine.negotiate()),rt})}unpublishTracks($){return __awaiter$1(this,void 0,void 0,function*(){return(yield Promise.all($.map(tt=>this.unpublishTrack(tt)))).filter(tt=>!!tt)})}republishAllTracks($){return __awaiter$1(this,arguments,void 0,function(et){var tt=this;let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){tt.republishPromise&&(yield tt.republishPromise),tt.republishPromise=new Promise((rt,it)=>__awaiter$1(tt,void 0,void 0,function*(){try{const ot=[];this.trackPublications.forEach(st=>{st.track&&(et&&(st.options=Object.assign(Object.assign({},st.options),et)),ot.push(st))}),yield Promise.all(ot.map(st=>__awaiter$1(this,void 0,void 0,function*(){const at=st.track;yield this.unpublishTrack(at,!1),nt&&!at.isMuted&&at.source!==Track.Source.ScreenShare&&at.source!==Track.Source.ScreenShareAudio&&(isLocalAudioTrack(at)||isLocalVideoTrack(at))&&!at.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:st.trackSid})),yield at.restartTrack()),yield this.publishOrRepublishTrack(at,st.options,!0)}))),rt()}catch(ot){it(ot)}finally{this.republishPromise=void 0}})),yield tt.republishPromise}()})}publishData($){return __awaiter$1(this,arguments,void 0,function(et){var tt=this;let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const rt=nt.reliable?DataPacket_Kind.RELIABLE:DataPacket_Kind.LOSSY,it=nt.destinationIdentities,ot=nt.topic,st=new DataPacket({kind:rt,value:{case:"user",value:new UserPacket({participantIdentity:tt.identity,payload:et,destinationIdentities:it,topic:ot})}});yield tt.engine.sendDataPacket(st,rt)}()})}publishDtmf($,et){return __awaiter$1(this,void 0,void 0,function*(){const tt=new DataPacket({kind:DataPacket_Kind.RELIABLE,value:{case:"sipDtmf",value:new SipDTMF({code:$,digit:et})}});yield this.engine.sendDataPacket(tt,DataPacket_Kind.RELIABLE)})}sendChatMessage($,et){return __awaiter$1(this,void 0,void 0,function*(){const tt={id:crypto.randomUUID(),message:$,timestamp:Date.now(),attachedFiles:et==null?void 0:et.attachments},nt=new DataPacket({value:{case:"chatMessage",value:new ChatMessage(Object.assign(Object.assign({},tt),{timestamp:protoInt64.parse(tt.timestamp)}))}});return yield this.engine.sendDataPacket(nt,DataPacket_Kind.RELIABLE),this.emit(ParticipantEvent.ChatMessage,tt),tt})}editChatMessage($,et){return __awaiter$1(this,void 0,void 0,function*(){const tt=Object.assign(Object.assign({},et),{message:$,editTimestamp:Date.now()}),nt=new DataPacket({value:{case:"chatMessage",value:new ChatMessage(Object.assign(Object.assign({},tt),{timestamp:protoInt64.parse(tt.timestamp),editTimestamp:protoInt64.parse(tt.editTimestamp)}))}});return yield this.engine.sendDataPacket(nt,DataPacket_Kind.RELIABLE),this.emit(ParticipantEvent.ChatMessage,tt),tt})}sendText($,et){return __awaiter$1(this,void 0,void 0,function*(){var tt;const nt=crypto.randomUUID(),it=new TextEncoder().encode($).byteLength,ot=(tt=et==null?void 0:et.attachments)===null||tt===void 0?void 0:tt.map(()=>crypto.randomUUID()),st=new Array(ot?ot.length+1:1).fill(0),at=(dt,pt)=>{var ht;st[pt]=dt;const vt=st.reduce((mt,kt)=>mt+kt,0);(ht=et==null?void 0:et.onProgress)===null||ht===void 0||ht.call(et,vt)},lt=yield this.streamText({streamId:nt,totalSize:it,destinationIdentities:et==null?void 0:et.destinationIdentities,topic:et==null?void 0:et.topic,attachedStreamIds:ot,attributes:et==null?void 0:et.attributes});return yield lt.write($),at(1,0),yield lt.close(),et!=null&&et.attachments&&ot&&(yield Promise.all(et.attachments.map((dt,pt)=>__awaiter$1(this,void 0,void 0,function*(){return this._sendFile(ot[pt],dt,{topic:et.topic,mimeType:dt.type,onProgress:ht=>{at(ht,pt+1)}})})))),lt.info})}streamText($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt;const nt=(et=$==null?void 0:$.streamId)!==null&&et!==void 0?et:crypto.randomUUID(),rt={id:nt,mimeType:"text/plain",timestamp:Date.now(),topic:(tt=$==null?void 0:$.topic)!==null&&tt!==void 0?tt:"",size:$==null?void 0:$.totalSize,attributes:$==null?void 0:$.attributes},it=new DataStream_Header({streamId:nt,mimeType:rt.mimeType,topic:rt.topic,timestamp:numberToBigInt(rt.timestamp),totalLength:numberToBigInt($==null?void 0:$.totalSize),attributes:rt.attributes,contentHeader:{case:"textHeader",value:new DataStream_TextHeader({version:$==null?void 0:$.version,attachedStreamIds:$==null?void 0:$.attachedStreamIds,replyToStreamId:$==null?void 0:$.replyToStreamId,operationType:($==null?void 0:$.type)==="update"?DataStream_OperationType.UPDATE:DataStream_OperationType.CREATE})}}),ot=$==null?void 0:$.destinationIdentities,st=new DataPacket({destinationIdentities:ot,value:{case:"streamHeader",value:it}});yield this.engine.sendDataPacket(st,DataPacket_Kind.RELIABLE);let at=0;const lt=this,dt=new WritableStream({write(vt){return __awaiter$1(this,void 0,void 0,function*(){for(const mt of splitUtf8(vt,STREAM_CHUNK_SIZE)){yield lt.engine.waitForBufferStatusLow(DataPacket_Kind.RELIABLE);const kt=new DataStream_Chunk({content:mt,streamId:nt,chunkIndex:numberToBigInt(at)}),bt=new DataPacket({destinationIdentities:ot,value:{case:"streamChunk",value:kt}});yield lt.engine.sendDataPacket(bt,DataPacket_Kind.RELIABLE),at+=1}})},close(){return __awaiter$1(this,void 0,void 0,function*(){const vt=new DataStream_Trailer({streamId:nt}),mt=new DataPacket({destinationIdentities:ot,value:{case:"streamTrailer",value:vt}});yield lt.engine.sendDataPacket(mt,DataPacket_Kind.RELIABLE)})},abort(vt){console.log("Sink error:",vt)}});let pt=()=>__awaiter$1(this,void 0,void 0,function*(){yield ht.close()});lt.engine.once(EngineEvent.Closing,pt);const ht=new TextStreamWriter(dt,rt,()=>this.engine.off(EngineEvent.Closing,pt));return ht})}sendFile($,et){return __awaiter$1(this,void 0,void 0,function*(){const tt=crypto.randomUUID();return yield this._sendFile(tt,$,et),{id:tt}})}_sendFile($,et,tt){return __awaiter$1(this,void 0,void 0,function*(){var nt;const rt=yield this.streamBytes({streamId:$,totalSize:et.size,name:et.name,mimeType:(nt=tt==null?void 0:tt.mimeType)!==null&&nt!==void 0?nt:et.type,topic:tt==null?void 0:tt.topic,destinationIdentities:tt==null?void 0:tt.destinationIdentities}),it=et.stream().getReader();for(;;){const{done:ot,value:st}=yield it.read();if(ot)break;yield rt.write(st)}return yield rt.close(),rt.info})}streamBytes($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt,nt,rt,it;const ot=(et=$==null?void 0:$.streamId)!==null&&et!==void 0?et:crypto.randomUUID(),st=$==null?void 0:$.destinationIdentities,at={id:ot,mimeType:(tt=$==null?void 0:$.mimeType)!==null&&tt!==void 0?tt:"application/octet-stream",topic:(nt=$==null?void 0:$.topic)!==null&&nt!==void 0?nt:"",timestamp:Date.now(),attributes:$==null?void 0:$.attributes,size:$==null?void 0:$.totalSize,name:(rt=$==null?void 0:$.name)!==null&&rt!==void 0?rt:"unknown"},lt=new DataStream_Header({totalLength:numberToBigInt((it=at.size)!==null&&it!==void 0?it:0),mimeType:at.mimeType,streamId:ot,topic:at.topic,timestamp:numberToBigInt(Date.now()),attributes:at.attributes,contentHeader:{case:"byteHeader",value:new DataStream_ByteHeader({name:at.name})}}),dt=new DataPacket({destinationIdentities:st,value:{case:"streamHeader",value:lt}});yield this.engine.sendDataPacket(dt,DataPacket_Kind.RELIABLE);let pt=0;const ht=new _$1,vt=this.engine,mt=this.log,kt=new WritableStream({write(gt){return __awaiter$1(this,void 0,void 0,function*(){const St=yield ht.lock();let yt=0;try{for(;yt<gt.byteLength;){const Et=gt.slice(yt,yt+STREAM_CHUNK_SIZE);yield vt.waitForBufferStatusLow(DataPacket_Kind.RELIABLE);const Tt=new DataPacket({destinationIdentities:st,value:{case:"streamChunk",value:new DataStream_Chunk({content:Et,streamId:ot,chunkIndex:numberToBigInt(pt)})}});yield vt.sendDataPacket(Tt,DataPacket_Kind.RELIABLE),pt+=1,yt+=Et.byteLength}}finally{St()}})},close(){return __awaiter$1(this,void 0,void 0,function*(){const gt=new DataStream_Trailer({streamId:ot}),St=new DataPacket({destinationIdentities:st,value:{case:"streamTrailer",value:gt}});yield vt.sendDataPacket(St,DataPacket_Kind.RELIABLE)})},abort(gt){mt.error("Sink error:",gt)}});return new ByteStreamWriter(kt,at)})}performRpc($){return __awaiter$1(this,arguments,void 0,function(et){var tt=this;let{destinationIdentity:nt,method:rt,payload:it,responseTimeout:ot=1e4}=et;return function*(){return new Promise((at,lt)=>__awaiter$1(tt,void 0,void 0,function*(){var dt,pt,ht,vt;if(byteLength(it)>MAX_PAYLOAD_BYTES){lt(RpcError.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((pt=(dt=this.engine.latestJoinResponse)===null||dt===void 0?void 0:dt.serverInfo)===null||pt===void 0)&&pt.version&&compareVersions((vt=(ht=this.engine.latestJoinResponse)===null||ht===void 0?void 0:ht.serverInfo)===null||vt===void 0?void 0:vt.version,"1.8.0")<0){lt(RpcError.builtIn("UNSUPPORTED_SERVER"));return}const mt=crypto.randomUUID();yield this.publishRpcRequest(nt,mt,rt,it,ot-2e3);const kt=setTimeout(()=>{this.pendingAcks.delete(mt),lt(RpcError.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(mt),clearTimeout(bt)},2e3);this.pendingAcks.set(mt,{resolve:()=>{clearTimeout(kt)},participantIdentity:nt});const bt=setTimeout(()=>{this.pendingResponses.delete(mt),lt(RpcError.builtIn("RESPONSE_TIMEOUT"))},ot);this.pendingResponses.set(mt,{resolve:(gt,St)=>{clearTimeout(bt),this.pendingAcks.has(mt)&&(console.warn("RPC response received before ack",mt),this.pendingAcks.delete(mt),clearTimeout(kt)),St?lt(St):at(gt??"")},participantIdentity:nt})}))}()})}registerRpcMethod($,et){this.rpcHandlers.has($)&&this.log.warn("you're overriding the RPC handler for method ".concat($,", in the future this will throw an error")),this.rpcHandlers.set($,et)}unregisterRpcMethod($){this.rpcHandlers.delete($)}setTrackSubscriptionPermissions($){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=et,this.allParticipantsAllowedToSubscribe=$,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck($){const et=this.pendingAcks.get($);et?(et.resolve(),this.pendingAcks.delete($)):console.error("Ack received for unexpected RPC request",$)}handleIncomingRpcResponse($,et,tt){const nt=this.pendingResponses.get($);nt?(nt.resolve(et,tt),this.pendingResponses.delete($)):console.error("Response received for unexpected RPC request",$)}publishRpcRequest($,et,tt,nt,rt){return __awaiter$1(this,void 0,void 0,function*(){const it=new DataPacket({destinationIdentities:[$],kind:DataPacket_Kind.RELIABLE,value:{case:"rpcRequest",value:new RpcRequest({id:et,method:tt,payload:nt,responseTimeoutMs:rt,version:1})}});yield this.engine.sendDataPacket(it,DataPacket_Kind.RELIABLE)})}handleParticipantDisconnected($){for(const[et,{participantIdentity:tt}]of this.pendingAcks)tt===$&&this.pendingAcks.delete(et);for(const[et,{participantIdentity:tt,resolve:nt}]of this.pendingResponses)tt===$&&(nt(null,RpcError.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(et))}setEnabledPublishCodecs($){this.enabledPublishVideoCodecs=$.filter(et=>et.mime.split("/")[0].toLowerCase()==="video")}updateInfo($){return super.updateInfo($)?($.tracks.forEach(et=>{var tt,nt;const rt=this.trackPublications.get(et.sid);if(rt){const it=rt.isMuted||((nt=(tt=rt.track)===null||tt===void 0?void 0:tt.isUpstreamPaused)!==null&&nt!==void 0?nt:!1);it!==et.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(rt)),{mutedOnServer:it})),this.engine.client.sendMuteTrack(et.sid,it))}}),!0):!1}setActiveAgent($){var et,tt,nt,rt;this.firstActiveAgent=$,$&&!this.firstActiveAgent&&(this.firstActiveAgent=$),$?(tt=(et=this.activeAgentFuture)===null||et===void 0?void 0:et.resolve)===null||tt===void 0||tt.call(et,$):(rt=(nt=this.activeAgentFuture)===null||nt===void 0?void 0:nt.reject)===null||rt===void 0||rt.call(nt,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Future),this.activeAgentFuture.promise)}getPublicationForTrack($){let et;return this.trackPublications.forEach(tt=>{const nt=tt.track;nt&&($ instanceof MediaStreamTrack?(isLocalAudioTrack(nt)||isLocalVideoTrack(nt))&&nt.mediaStreamTrack===$&&(et=tt):$===nt&&(et=tt))}),et}waitForPendingPublicationOfSource($){return __awaiter$1(this,void 0,void 0,function*(){const tt=Date.now();for(;Date.now()<tt+1e4;){const nt=Array.from(this.pendingPublishPromises.entries()).find(rt=>{let[it]=rt;return it.source===$});if(nt)return nt[1];yield sleep$1(20)}})}}class RemoteTrackPublication extends TrackPublication{constructor($,et,tt,nt){super($,et.sid,et.name,nt),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=rt=>{this.setTrack(void 0),this.emit(TrackEvent.Ended,rt)},this.handleVisibilityChange=rt=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(rt),this.logContext),this.visible=rt,this.emitTrackUpdate()},this.handleVideoDimensionsChange=rt=>{this.log.debug("adaptivestream video dimensions ".concat(rt.width,"x").concat(rt.height),this.logContext),this.videoDimensionsAdaptiveStream=rt,this.emitTrackUpdate()},this.subscribed=tt,this.updateInfo(et)}setSubscribed($){const et=this.subscriptionStatus,tt=this.permissionStatus;this.subscribed=$,$&&(this.allowed=!0);const nt=new UpdateSubscription({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new ParticipantTracks({participantSid:"",trackSids:[this.trackSid]})]});this.emit(TrackEvent.UpdateSubscription,nt),this.emitSubscriptionUpdateIfChanged(et),this.emitPermissionUpdateIfChanged(tt)}get subscriptionStatus(){return this.subscribed===!1?TrackPublication.SubscriptionStatus.Unsubscribed:super.isSubscribed?TrackPublication.SubscriptionStatus.Subscribed:TrackPublication.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?TrackPublication.PermissionStatus.Allowed:TrackPublication.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled($){!this.isManualOperationAllowed()||this.requestedDisabled===!$||(this.requestedDisabled=!$,this.emitTrackUpdate())}setVideoQuality($){!this.isManualOperationAllowed()||this.requestedMaxQuality===$||(this.requestedMaxQuality=$,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions($){var et,tt;this.isManualOperationAllowed()&&(((et=this.requestedVideoDimensions)===null||et===void 0?void 0:et.width)===$.width&&((tt=this.requestedVideoDimensions)===null||tt===void 0?void 0:tt.height)===$.height||(isRemoteVideoTrack(this.track)&&(this.requestedVideoDimensions=$),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS($){this.isManualOperationAllowed()&&isRemoteVideoTrack(this.track)&&this.fps!==$&&(this.fps=$,this.emitTrackUpdate())}get videoQuality(){var $;return($=this.requestedMaxQuality)!==null&&$!==void 0?$:VideoQuality.HIGH}setTrack($){const et=this.subscriptionStatus,tt=this.permissionStatus,nt=this.track;nt!==$&&(nt&&(nt.off(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),nt.off(TrackEvent.VisibilityChanged,this.handleVisibilityChange),nt.off(TrackEvent.Ended,this.handleEnded),nt.detach(),nt.stopMonitor(),this.emit(TrackEvent.Unsubscribed,nt)),super.setTrack($),$&&($.sid=this.trackSid,$.on(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),$.on(TrackEvent.VisibilityChanged,this.handleVisibilityChange),$.on(TrackEvent.Ended,this.handleEnded),this.emit(TrackEvent.Subscribed,$)),this.emitPermissionUpdateIfChanged(tt),this.emitSubscriptionUpdateIfChanged(et))}setAllowed($){const et=this.subscriptionStatus,tt=this.permissionStatus;this.allowed=$,this.emitPermissionUpdateIfChanged(tt),this.emitSubscriptionUpdateIfChanged(et)}setSubscriptionError($){this.emit(TrackEvent.SubscriptionFailed,$)}updateInfo($){super.updateInfo($);const et=this.metadataMuted;this.metadataMuted=$.muted,this.track?this.track.setMuted($.muted):et!==$.muted&&this.emit($.muted?TrackEvent.Muted:TrackEvent.Unmuted)}emitSubscriptionUpdateIfChanged($){const et=this.subscriptionStatus;$!==et&&this.emit(TrackEvent.SubscriptionStatusChanged,et,$)}emitPermissionUpdateIfChanged($){this.permissionStatus!==$&&this.emit(TrackEvent.SubscriptionPermissionChanged,this.permissionStatus,$)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return isRemoteVideoTrack(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const $=new UpdateTrackSettings({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===Track.Kind.Video){let et=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(et)areDimensionsSmaller(this.videoDimensionsAdaptiveStream,et)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),et=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const tt=layerDimensionsFor(this.trackInfo,this.requestedMaxQuality);tt&&areDimensionsSmaller(this.videoDimensionsAdaptiveStream,tt)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),et=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),et=this.videoDimensionsAdaptiveStream;et?($.width=Math.ceil(et.width),$.height=Math.ceil(et.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),$.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:VideoQuality.HIGH})),$.quality=VideoQuality.HIGH)}this.emit(TrackEvent.UpdateSettings,$)}}class RemoteParticipant extends Participant{static fromParticipantInfo($,et,tt){return new RemoteParticipant($,et.sid,et.identity,et.name,et.metadata,et.attributes,tt,et.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor($,et,tt,nt,rt,it,ot){let st=arguments.length>7&&arguments[7]!==void 0?arguments[7]:ParticipantInfo_Kind.STANDARD;super(et,tt||"",nt,rt,it,ot,st),this.signalClient=$,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication($){super.addTrackPublication($),$.on(TrackEvent.UpdateSettings,et=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($)),{settings:et})),this.signalClient.sendUpdateTrackSettings(et)}),$.on(TrackEvent.UpdateSubscription,et=>{et.participantTracks.forEach(tt=>{tt.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(et)}),$.on(TrackEvent.SubscriptionPermissionChanged,et=>{this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,$,et)}),$.on(TrackEvent.SubscriptionStatusChanged,et=>{this.emit(ParticipantEvent.TrackSubscriptionStatusChanged,$,et)}),$.on(TrackEvent.Subscribed,et=>{this.emit(ParticipantEvent.TrackSubscribed,et,$)}),$.on(TrackEvent.Unsubscribed,et=>{this.emit(ParticipantEvent.TrackUnsubscribed,et,$)}),$.on(TrackEvent.SubscriptionFailed,et=>{this.emit(ParticipantEvent.TrackSubscriptionFailed,$.trackSid,et)})}getTrackPublication($){const et=super.getTrackPublication($);if(et)return et}getTrackPublicationByName($){const et=super.getTrackPublicationByName($);if(et)return et}setVolume($){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Track.Source.Microphone;this.volumeMap.set(et,$);const tt=this.getTrackPublication(et);tt&&tt.track&&tt.track.setVolume($)}getVolume(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Track.Source.Microphone;const et=this.getTrackPublication($);return et&&et.track?et.track.getVolume():this.volumeMap.get($)}addSubscribedMediaTrack($,et,tt,nt,rt,it){let ot=this.getTrackPublicationBySid(et);if(ot||et.startsWith("TR")||this.trackPublications.forEach(lt=>{!ot&&$.kind===lt.kind.toString()&&(ot=lt)}),!ot){if(it===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:et})),this.emit(ParticipantEvent.TrackSubscriptionFailed,et);return}it===void 0&&(it=20),setTimeout(()=>{this.addSubscribedMediaTrack($,et,tt,nt,rt,it-1)},150);return}if($.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(ot))),this.emit(ParticipantEvent.TrackSubscriptionFailed,et);return}const st=$.kind==="video";let at;return st?at=new RemoteVideoTrack($,et,nt,rt):at=new RemoteAudioTrack($,et,nt,this.audioContext,this.audioOutput),at.source=ot.source,at.isMuted=ot.isMuted,at.setMediaStream(tt),at.start(),ot.setTrack(at),this.volumeMap.has(ot.source)&&isRemoteTrack(at)&&isAudioTrack(at)&&at.setVolume(this.volumeMap.get(ot.source)),ot}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid($){return this.trackPublications.get($)}updateInfo($){if(!super.updateInfo($))return!1;const et=new Map,tt=new Map;return $.tracks.forEach(nt=>{var rt,it;let ot=this.getTrackPublicationBySid(nt.sid);if(ot)ot.updateInfo(nt);else{const st=Track.kindFromProto(nt.type);if(!st)return;ot=new RemoteTrackPublication(st,nt,(rt=this.signalClient.connectOptions)===null||rt===void 0?void 0:rt.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(it=this.loggerOptions)===null||it===void 0?void 0:it.loggerName}),ot.updateInfo(nt),tt.set(nt.sid,ot);const at=Array.from(this.trackPublications.values()).find(lt=>lt.source===(ot==null?void 0:ot.source));at&&ot.source!==Track.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(ot.source),Object.assign(Object.assign({},this.logContext),{oldTrack:getLogContextFromTrack(at),newTrack:getLogContextFromTrack(ot)})),this.addTrackPublication(ot)}et.set(nt.sid,ot)}),this.trackPublications.forEach(nt=>{et.has(nt.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(nt))),this.unpublishTrack(nt.trackSid,!0))}),tt.forEach(nt=>{this.emit(ParticipantEvent.TrackPublished,nt)}),!0}unpublishTrack($,et){const tt=this.trackPublications.get($);if(!tt)return;const{track:nt}=tt;switch(nt&&(nt.stop(),tt.setTrack(void 0)),this.trackPublications.delete($),tt.kind){case Track.Kind.Audio:this.audioTrackPublications.delete($);break;case Track.Kind.Video:this.videoTrackPublications.delete($);break}et&&this.emit(ParticipantEvent.TrackUnpublished,tt)}setAudioOutput($){return __awaiter$1(this,void 0,void 0,function*(){this.audioOutput=$;const et=[];this.audioTrackPublications.forEach(tt=>{var nt;isAudioTrack(tt.track)&&isRemoteTrack(tt.track)&&et.push(tt.track.setSinkId((nt=$.deviceId)!==null&&nt!==void 0?nt:"default"))}),yield Promise.all(et)})}emit($){for(var et=arguments.length,tt=new Array(et>1?et-1:0),nt=1;nt<et;nt++)tt[nt-1]=arguments[nt];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:$,args:tt})),super.emit($,...tt)}}var ConnectionState;(function(_e){_e.Disconnected="disconnected",_e.Connecting="connecting",_e.Connected="connected",_e.Reconnecting="reconnecting",_e.SignalReconnecting="signalReconnecting"})(ConnectionState||(ConnectionState={}));const connectionReconcileFrequency=4*1e3;class Room extends eventsExports.EventEmitter{constructor($){var et,tt,nt,rt;if(super(),et=this,this.state=ConnectionState.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=livekitLogger,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(it,ot,st)=>__awaiter$1(this,void 0,void 0,function*(){var at;if(!isBrowserSupported())throw isReactNative()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const lt=yield this.disconnectLock.lock();if(this.state===ConnectionState.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),lt(),Promise.resolve();if(this.connectFuture)return lt(),this.connectFuture.promise;this.setAndEmitConnectionState(ConnectionState.Connecting),((at=this.regionUrlProvider)===null||at===void 0?void 0:at.getServerUrl().toString())!==it&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),isCloud(new URL(it))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new RegionUrlProvider(it,ot):this.regionUrlProvider.updateToken(ot),this.regionUrlProvider.fetchRegionSettings().then(ht=>{var vt;(vt=this.regionUrlProvider)===null||vt===void 0||vt.setServerReportedRegions(ht)}).catch(ht=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:ht}))}));const dt=(ht,vt,mt)=>__awaiter$1(this,void 0,void 0,function*(){var kt,bt;this.abortController&&this.abortController.abort();const gt=new AbortController;this.abortController=gt,lt==null||lt();try{yield this.attemptConnection(mt??it,ot,st,gt),this.abortController=void 0,ht()}catch(St){if(this.regionUrlProvider&&St instanceof ConnectionError&&St.reason!==ConnectionErrorReason.Cancelled&&St.reason!==ConnectionErrorReason.NotAllowed){let yt=null;try{yt=yield this.regionUrlProvider.getNextBestRegionUrl((kt=this.abortController)===null||kt===void 0?void 0:kt.signal)}catch(Et){if(Et instanceof ConnectionError&&(Et.status===401||Et.reason===ConnectionErrorReason.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),vt(Et);return}}yt&&!(!((bt=this.abortController)===null||bt===void 0)&&bt.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(St.message,". Retrying with another region: ").concat(yt),this.logContext),this.recreateEngine(),yield dt(ht,vt,yt)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,getDisconnectReasonFromConnectionError(St)),vt(St))}else{let yt=DisconnectReason.UNKNOWN_REASON;St instanceof ConnectionError&&(yt=getDisconnectReasonFromConnectionError(St)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,yt),vt(St)}}}),pt=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Future((ht,vt)=>{dt(ht,vt,pt)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(it,ot,st,at,lt,dt)=>__awaiter$1(this,void 0,void 0,function*(){var pt,ht,vt;const mt=yield st.join(it,ot,{autoSubscribe:at.autoSubscribe,adaptiveStream:typeof lt.adaptiveStream=="object"?!0:lt.adaptiveStream,maxRetries:at.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:at.websocketTimeout},dt.signal);let kt=mt.serverInfo;if(kt||(kt={version:mt.serverVersion,region:mt.serverRegion}),this.serverInfo=kt,this.log.debug("connected to Livekit Server ".concat(Object.entries(kt).map(bt=>{let[gt,St]=bt;return"".concat(gt,": ").concat(St)}).join(", ")),{room:(pt=mt.room)===null||pt===void 0?void 0:pt.name,roomSid:(ht=mt.room)===null||ht===void 0?void 0:ht.sid,identity:(vt=mt.participant)===null||vt===void 0?void 0:vt.identity}),!kt.version)throw new UnsupportedServer("unknown server version");return kt.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),lt.dynacast=!1),mt}),this.applyJoinResponse=it=>{const ot=it.participant;if(this.localParticipant.sid=ot.sid,this.localParticipant.identity=ot.identity,this.localParticipant.setEnabledPublishCodecs(it.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(it.sifTrailer)}catch(st){this.log.error(st instanceof Error?st.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:st}))}this.handleParticipantUpdates([ot,...it.otherParticipants]),it.room&&this.handleRoomUpdate(it.room)},this.attemptConnection=(it,ot,st,at)=>__awaiter$1(this,void 0,void 0,function*(){var lt,dt;this.state===ConnectionState.Reconnecting||this.isResuming||!((lt=this.engine)===null||lt===void 0)&&lt.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((dt=this.regionUrlProvider)===null||dt===void 0)&&dt.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},roomConnectOptionDefaults),st),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const pt=yield this.connectSignal(it,ot,this.engine,this.connOptions,this.options,at);this.applyJoinResponse(pt),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected)}catch(pt){yield this.engine.close(),this.recreateEngine();const ht=new ConnectionError("could not establish signal connection",ConnectionErrorReason.ServerUnreachable);throw pt instanceof Error&&(ht.message="".concat(ht.message,": ").concat(pt.message)),pt instanceof ConnectionError&&(ht.reason=pt.reason,ht.status=pt.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:pt})),ht}if(at.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new ConnectionError("Connection attempt aborted",ConnectionErrorReason.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,at)}catch(pt){throw yield this.engine.close(),this.recreateEngine(),pt}isWeb()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),isWeb()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var it=arguments.length,ot=new Array(it),st=0;st<it;st++)ot[st]=arguments[st];return __awaiter$1(et,[...ot],void 0,function(){var at=this;let lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var dt,pt,ht,vt;const mt=yield at.disconnectLock.lock();try{if(at.state===ConnectionState.Disconnected){at.log.debug("already disconnected",at.logContext);return}at.log.info("disconnect from room",Object.assign({},at.logContext)),(at.state===ConnectionState.Connecting||at.state===ConnectionState.Reconnecting||at.isResuming)&&(at.log.warn("abort connection attempt",at.logContext),(dt=at.abortController)===null||dt===void 0||dt.abort(),(ht=(pt=at.connectFuture)===null||pt===void 0?void 0:pt.reject)===null||ht===void 0||ht.call(pt,new ConnectionError("Client initiated disconnect",ConnectionErrorReason.Cancelled)),at.connectFuture=void 0),!((vt=at.engine)===null||vt===void 0)&&vt.client.isDisconnected||(yield at.engine.client.sendLeave()),at.engine&&(yield at.engine.close()),at.handleDisconnect(lt,DisconnectReason.CLIENT_INITIATED),at.engine=void 0}finally{mt()}}()})},this.onPageLeave=()=>__awaiter$1(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>__awaiter$1(this,void 0,void 0,function*(){const it=[],ot=getBrowser();if(ot&&ot.os==="iOS"){const st="livekit-dummy-audio-el";let at=document.getElementById(st);if(!at){at=document.createElement("audio"),at.id=st,at.autoplay=!0,at.hidden=!0;const lt=getEmptyAudioStreamTrack();lt.enabled=!0;const dt=new MediaStream([lt]);at.srcObject=dt,document.addEventListener("visibilitychange",()=>{at&&(at.srcObject=document.hidden?null:dt,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(at),this.once(RoomEvent.Disconnected,()=>{at==null||at.remove(),at=null})}it.push(at)}this.remoteParticipants.forEach(st=>{st.audioTrackPublications.forEach(at=>{at.track&&at.track.attachedElements.forEach(lt=>{it.push(lt)})})});try{yield Promise.all([this.acquireAudioContext(),...it.map(st=>(st.muted=!1,st.play()))]),this.handleAudioPlaybackStarted()}catch(st){throw this.handleAudioPlaybackFailed(st),st}}),this.startVideo=()=>__awaiter$1(this,void 0,void 0,function*(){const it=[];for(const ot of this.remoteParticipants.values())ot.videoTrackPublications.forEach(st=>{var at;(at=st.track)===null||at===void 0||at.attachedElements.forEach(lt=>{it.includes(lt)||it.push(lt)})});yield Promise.all(it.map(ot=>ot.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(ot=>{ot.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const it of this.remoteParticipants.values())this.handleParticipantDisconnected(it.identity,it);this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)},this.handleSignalRestarted=it=>__awaiter$1(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(it.serverRegion),Object.assign(Object.assign({},this.logContext),{region:it.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(it);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(ot){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:ot}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:it.serverRegion}))}catch{return}this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=it=>{it.forEach(ot=>{var st;if(ot.identity===this.localParticipant.identity){this.localParticipant.updateInfo(ot);return}ot.identity===""&&(ot.identity=(st=this.sidToIdentity.get(ot.sid))!==null&&st!==void 0?st:"");let at=this.remoteParticipants.get(ot.identity);ot.state===ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(ot.identity,at):at=this.getOrCreateParticipant(ot.identity,ot)})},this.handleActiveSpeakersUpdate=it=>{const ot=[],st={};it.forEach(at=>{if(st[at.sid]=!0,at.sid===this.localParticipant.sid)this.localParticipant.audioLevel=at.level,this.localParticipant.setIsSpeaking(!0),ot.push(this.localParticipant);else{const lt=this.getRemoteParticipantBySid(at.sid);lt&&(lt.audioLevel=at.level,lt.setIsSpeaking(!0),ot.push(lt))}}),st[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(at=>{st[at.sid]||(at.audioLevel=0,at.setIsSpeaking(!1))}),this.activeSpeakers=ot,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,ot)},this.handleSpeakersChanged=it=>{const ot=new Map;this.activeSpeakers.forEach(at=>{const lt=this.remoteParticipants.get(at.identity);lt&&lt.sid!==at.sid||ot.set(at.sid,at)}),it.forEach(at=>{let lt=this.getRemoteParticipantBySid(at.sid);at.sid===this.localParticipant.sid&&(lt=this.localParticipant),lt&&(lt.audioLevel=at.level,lt.setIsSpeaking(at.active),at.active?ot.set(at.sid,lt):ot.delete(at.sid))});const st=Array.from(ot.values());st.sort((at,lt)=>lt.audioLevel-at.audioLevel),this.activeSpeakers=st,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,st)},this.handleStreamStateUpdate=it=>{it.streamStates.forEach(ot=>{const st=this.getRemoteParticipantBySid(ot.participantSid);if(!st)return;const at=st.getTrackPublicationBySid(ot.trackSid);if(!at||!at.track)return;const lt=Track.streamStateFromProto(ot.state);lt!==at.track.streamState&&(at.track.streamState=lt,st.emit(ParticipantEvent.TrackStreamStateChanged,at,at.track.streamState),this.emitWhenConnected(RoomEvent.TrackStreamStateChanged,at,at.track.streamState,st))})},this.handleSubscriptionPermissionUpdate=it=>{const ot=this.getRemoteParticipantBySid(it.participantSid);if(!ot)return;const st=ot.getTrackPublicationBySid(it.trackSid);st&&st.setAllowed(it.allowed)},this.handleSubscriptionError=it=>{const ot=Array.from(this.remoteParticipants.values()).find(at=>at.trackPublications.has(it.trackSid));if(!ot)return;const st=ot.getTrackPublicationBySid(it.trackSid);st&&st.setSubscriptionError(it.err)},this.handleDataPacket=it=>{const ot=this.remoteParticipants.get(it.participantIdentity);if(it.value.case==="user")this.handleUserPacket(ot,it.value.value,it.kind);else if(it.value.case==="transcription")this.handleTranscription(ot,it.value.value);else if(it.value.case==="sipDtmf")this.handleSipDtmf(ot,it.value.value);else if(it.value.case==="chatMessage")this.handleChatMessage(ot,it.value.value);else if(it.value.case==="metrics")this.handleMetrics(it.value.value,ot);else if(it.value.case==="streamHeader")this.handleStreamHeader(it.value.value,it.participantIdentity);else if(it.value.case==="streamChunk")this.handleStreamChunk(it.value.value);else if(it.value.case==="streamTrailer")this.handleStreamTrailer(it.value.value);else if(it.value.case==="rpcRequest"){const st=it.value.value;this.handleIncomingRpcRequest(it.participantIdentity,st.id,st.method,st.payload,st.responseTimeoutMs,st.version)}},this.handleUserPacket=(it,ot,st)=>{this.emit(RoomEvent.DataReceived,ot.payload,it,st,ot.topic),it==null||it.emit(ParticipantEvent.DataReceived,ot.payload,st)},this.handleSipDtmf=(it,ot)=>{this.emit(RoomEvent.SipDTMFReceived,ot,it),it==null||it.emit(ParticipantEvent.SipDTMFReceived,ot)},this.bufferedSegments=new Map,this.handleTranscription=(it,ot)=>{const st=ot.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(ot.transcribedParticipantIdentity),at=st==null?void 0:st.trackPublications.get(ot.trackId),lt=extractTranscriptionSegments(ot,this.transcriptionReceivedTimes);at==null||at.emit(TrackEvent.TranscriptionReceived,lt),st==null||st.emit(ParticipantEvent.TranscriptionReceived,lt,at),this.emit(RoomEvent.TranscriptionReceived,lt,st,at)},this.handleChatMessage=(it,ot)=>{const st=extractChatMessage(ot);this.emit(RoomEvent.ChatMessage,st,it)},this.handleMetrics=(it,ot)=>{this.emit(RoomEvent.MetricsReceived,it,ot)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=it=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:it})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(RoomEvent.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(RoomEvent.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>__awaiter$1(this,void 0,void 0,function*(){var it;((it=getBrowser())===null||it===void 0?void 0:it.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(RoomEvent.MediaDevicesChanged)}),this.handleRoomUpdate=it=>{const ot=this.roomInfo;this.roomInfo=it,ot&&ot.metadata!==it.metadata&&this.emitWhenConnected(RoomEvent.RoomMetadataChanged,it.metadata),(ot==null?void 0:ot.activeRecording)!==it.activeRecording&&this.emitWhenConnected(RoomEvent.RecordingStatusChanged,it.activeRecording)},this.handleConnectionQualityUpdate=it=>{it.updates.forEach(ot=>{if(ot.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(ot.quality);return}const st=this.getRemoteParticipantBySid(ot.participantSid);st&&st.setConnectionQuality(ot.quality)})},this.onLocalParticipantMetadataChanged=it=>{this.emit(RoomEvent.ParticipantMetadataChanged,it,this.localParticipant)},this.onLocalParticipantNameChanged=it=>{this.emit(RoomEvent.ParticipantNameChanged,it,this.localParticipant)},this.onLocalAttributesChanged=it=>{this.emit(RoomEvent.ParticipantAttributesChanged,it,this.localParticipant)},this.onLocalTrackMuted=it=>{this.emit(RoomEvent.TrackMuted,it,this.localParticipant)},this.onLocalTrackUnmuted=it=>{this.emit(RoomEvent.TrackUnmuted,it,this.localParticipant)},this.onTrackProcessorUpdate=it=>{var ot;(ot=it==null?void 0:it.onPublish)===null||ot===void 0||ot.call(it,this)},this.onLocalTrackPublished=it=>__awaiter$1(this,void 0,void 0,function*(){var ot,st,at,lt,dt,pt;(ot=it.track)===null||ot===void 0||ot.on(TrackEvent.TrackProcessorUpdate,this.onTrackProcessorUpdate),(st=it.track)===null||st===void 0||st.on(TrackEvent.Restarted,this.onLocalTrackRestarted),(dt=(lt=(at=it.track)===null||at===void 0?void 0:at.getProcessor())===null||lt===void 0?void 0:lt.onPublish)===null||dt===void 0||dt.call(lt,this),this.emit(RoomEvent.LocalTrackPublished,it,this.localParticipant),isLocalAudioTrack(it.track)&&(yield it.track.checkForSilence())&&this.emit(RoomEvent.LocalAudioSilenceDetected,it);const ht=yield(pt=it.track)===null||pt===void 0?void 0:pt.getDeviceId(!1),vt=sourceToKind(it.source);vt&&ht&&ht!==this.localParticipant.activeDeviceMap.get(vt)&&(this.localParticipant.activeDeviceMap.set(vt,ht),this.emit(RoomEvent.ActiveDeviceChanged,vt,ht))}),this.onLocalTrackUnpublished=it=>{var ot,st;(ot=it.track)===null||ot===void 0||ot.off(TrackEvent.TrackProcessorUpdate,this.onTrackProcessorUpdate),(st=it.track)===null||st===void 0||st.off(TrackEvent.Restarted,this.onLocalTrackRestarted),this.emit(RoomEvent.LocalTrackUnpublished,it,this.localParticipant)},this.onLocalTrackRestarted=it=>__awaiter$1(this,void 0,void 0,function*(){const ot=yield it.getDeviceId(!1),st=sourceToKind(it.source);st&&ot&&ot!==this.localParticipant.activeDeviceMap.get(st)&&(this.log.debug("local track restarted, setting ".concat(st," ").concat(ot," active"),this.logContext),this.localParticipant.activeDeviceMap.set(st,ot),this.emit(RoomEvent.ActiveDeviceChanged,st,ot))}),this.onLocalConnectionQualityChanged=it=>{this.emit(RoomEvent.ConnectionQualityChanged,it,this.localParticipant)},this.onMediaDevicesError=(it,ot)=>{this.emit(RoomEvent.MediaDevicesError,it,ot)},this.onLocalParticipantPermissionsChanged=it=>{this.emit(RoomEvent.ParticipantPermissionsChanged,it,this.localParticipant)},this.onLocalChatMessageSent=it=>{this.emit(RoomEvent.ChatMessage,it,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},roomOptionDefaults),$),this.log=getLogger((tt=this.options.loggerName)!==null&&tt!==void 0?tt:LoggerNames.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},audioDefaults),$==null?void 0:$.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},videoDefaults),$==null?void 0:$.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},publishDefaults),$==null?void 0:$.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new _$1,this.localParticipant=new LocalParticipant("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",unwrapConstraint(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",unwrapConstraint(this.options.audioCaptureDefaults.deviceId)),!((nt=this.options.audioOutput)===null||nt===void 0)&&nt.deviceId&&this.switchActiveDevice("audiooutput",unwrapConstraint(this.options.audioOutput.deviceId)).catch(it=>this.log.warn("Could not set audio output: ".concat(it.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),isWeb()){const it=new AbortController;(rt=navigator.mediaDevices)===null||rt===void 0||rt.addEventListener("devicechange",this.handleDeviceChange,{signal:it.signal}),Room.cleanupRegistry&&Room.cleanupRegistry.register(this,()=>{it.abort()})}}registerTextStreamHandler($,et){if(this.textStreamHandlers.has($))throw new TypeError('A text stream handler for topic "'.concat($,'" has already been set.'));this.textStreamHandlers.set($,et)}unregisterTextStreamHandler($){this.textStreamHandlers.delete($)}registerByteStreamHandler($,et){if(this.byteStreamHandlers.has($))throw new TypeError('A byte stream handler for topic "'.concat($,'" has already been set.'));this.byteStreamHandlers.set($,et)}unregisterByteStreamHandler($){this.byteStreamHandlers.delete($)}registerRpcMethod($,et){if(this.rpcHandlers.has($))throw Error("RPC handler already registered for method ".concat($,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set($,et)}unregisterRpcMethod($){this.rpcHandlers.delete($)}handleIncomingRpcRequest($,et,tt,nt,rt,it){return __awaiter$1(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck($,et),it!==1){yield this.engine.publishRpcResponse($,et,null,RpcError.builtIn("UNSUPPORTED_VERSION"));return}const ot=this.rpcHandlers.get(tt);if(!ot){yield this.engine.publishRpcResponse($,et,null,RpcError.builtIn("UNSUPPORTED_METHOD"));return}let st=null,at=null;try{const lt=yield ot({requestId:et,callerIdentity:$,payload:nt,responseTimeout:rt});byteLength(lt)>MAX_PAYLOAD_BYTES?(st=RpcError.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(tt))):at=lt}catch(lt){lt instanceof RpcError?st=lt:(console.warn("Uncaught error returned by RPC handler for ".concat(tt,". Returning APPLICATION_ERROR instead."),lt),st=RpcError.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse($,et,at,st)})}setE2EEEnabled($){return __awaiter$1(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled($)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled($,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var $;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new E2EEManager(this.options.e2ee),this.e2eeManager.on(EncryptionEvent.ParticipantEncryptionStatusChanged,(et,tt)=>{isLocalParticipant(tt)&&(this.isE2EEEnabled=et),this.emit(RoomEvent.ParticipantEncryptionStatusChanged,et,tt)}),this.e2eeManager.on(EncryptionEvent.EncryptionError,et=>this.emit(RoomEvent.EncryptionError,et)),($=this.e2eeManager)===null||$===void 0||$.setup(this))}get logContext(){var $;return{room:this.name,roomID:($=this.roomInfo)===null||$===void 0?void 0:$.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var $,et;return(et=($=this.roomInfo)===null||$===void 0?void 0:$.activeRecording)!==null&&et!==void 0?et:!1}getSid(){return __awaiter$1(this,void 0,void 0,function*(){return this.state===ConnectionState.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise(($,et)=>{const tt=nt=>{nt.sid!==""&&(this.engine.off(EngineEvent.RoomUpdate,tt),$(nt.sid))};this.engine.on(EngineEvent.RoomUpdate,tt),this.once(RoomEvent.Disconnected,()=>{this.engine.off(EngineEvent.RoomUpdate,tt),et("Room disconnected before room server id was available")})})})}get name(){var $,et;return(et=($=this.roomInfo)===null||$===void 0?void 0:$.name)!==null&&et!==void 0?et:""}get metadata(){var $;return($=this.roomInfo)===null||$===void 0?void 0:$.metadata}get numParticipants(){var $,et;return(et=($=this.roomInfo)===null||$===void 0?void 0:$.numParticipants)!==null&&et!==void 0?et:0}get numPublishers(){var $,et;return(et=($=this.roomInfo)===null||$===void 0?void 0:$.numPublishers)!==null&&et!==void 0?et:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new RTCEngine(this.options),this.engine.on(EngineEvent.ParticipantUpdate,this.handleParticipantUpdates).on(EngineEvent.RoomUpdate,this.handleRoomUpdate).on(EngineEvent.SpeakersChanged,this.handleSpeakersChanged).on(EngineEvent.StreamStateChanged,this.handleStreamStateUpdate).on(EngineEvent.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(EngineEvent.SubscriptionError,this.handleSubscriptionError).on(EngineEvent.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(EngineEvent.MediaTrackAdded,($,et,tt)=>{this.onTrackAdded($,et,tt)}).on(EngineEvent.Disconnected,$=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,$)}).on(EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived,this.handleDataPacket).on(EngineEvent.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(ConnectionState.SignalReconnecting)&&this.emit(RoomEvent.SignalReconnecting)}).on(EngineEvent.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(ConnectionState.Connected)&&this.emit(RoomEvent.Reconnected)}).on(EngineEvent.SignalResumed,()=>{this.bufferedEvents=[],(this.state===ConnectionState.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(EngineEvent.Restarting,this.handleRestarting).on(EngineEvent.SignalRestarted,this.handleSignalRestarted).on(EngineEvent.Offline,()=>{this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)}).on(EngineEvent.DCBufferStatusChanged,($,et)=>{this.emit(RoomEvent.DCBufferStatusChanged,$,et)}).on(EngineEvent.LocalTrackSubscribed,$=>{const et=this.localParticipant.getTrackPublications().find(tt=>{let{trackSid:nt}=tt;return nt===$});if(!et){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ParticipantEvent.LocalTrackSubscribed,et),this.emitWhenConnected(RoomEvent.LocalTrackSubscribed,et,this.localParticipant)}).on(EngineEvent.RoomMoved,$=>{this.log.debug("room moved",$),$.room&&this.handleRoomUpdate($.room),this.remoteParticipants.forEach((et,tt)=>{this.handleParticipantDisconnected(tt,et)}),this.emit(RoomEvent.Moved,$.room.name),$.participant?this.handleParticipantUpdates([$.participant,...$.otherParticipants]):this.handleParticipantUpdates($.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices($){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return DeviceManager.getInstance().getDevices($,et)}prepareConnection($,et){return __awaiter$1(this,void 0,void 0,function*(){if(this.state===ConnectionState.Disconnected){this.log.debug("prepareConnection to ".concat($),this.logContext);try{if(isCloud(new URL($))&&et){this.regionUrlProvider=new RegionUrlProvider($,et);const tt=yield this.regionUrlProvider.getNextBestRegionUrl();tt&&this.state===ConnectionState.Disconnected&&(this.regionUrl=tt,yield fetch(toHttpUrl(tt),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(tt),this.logContext))}else yield fetch(toHttpUrl($),{method:"HEAD"})}catch(tt){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:tt}))}}})}getParticipantByIdentity($){return this.localParticipant.identity===$?this.localParticipant:this.remoteParticipants.get($)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario($,et){return __awaiter$1(this,void 0,void 0,function*(){let tt=()=>{},nt;switch($){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":nt=new SimulateScenario({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":nt=new SimulateScenario({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":nt=new SimulateScenario({scenario:{case:"serverLeave",value:!0}});break;case"migration":nt=new SimulateScenario({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":tt=()=>__awaiter$1(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),nt=new SimulateScenario({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":tt=()=>__awaiter$1(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),nt=new SimulateScenario({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":nt=new SimulateScenario({scenario:{case:"switchCandidateProtocol",value:$==="force-tls"?2:1}}),tt=()=>__awaiter$1(this,void 0,void 0,function*(){const rt=this.engine.client.onLeave;rt&&rt(new LeaveRequest({reason:DisconnectReason.CLIENT_INITIATED,action:LeaveRequest_Action.RECONNECT}))});break;case"subscriber-bandwidth":if(et===void 0||typeof et!="number")throw new Error("subscriber-bandwidth requires a number as argument");nt=new SimulateScenario({scenario:{case:"subscriberBandwidth",value:numberToBigInt(et)}});break;case"leave-full-reconnect":nt=new SimulateScenario({scenario:{case:"leaveRequestFullReconnect",value:!0}})}nt&&(yield this.engine.client.sendSimulateScenario(nt),yield tt())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice($){return this.localParticipant.activeDeviceMap.get($)}switchActiveDevice($,et){return __awaiter$1(this,arguments,void 0,function(tt,nt){var rt=this;let it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var ot,st,at,lt,dt,pt,ht;let vt=!0,mt=!1;const kt=it?{exact:nt}:nt;if(tt==="audioinput"){mt=rt.localParticipant.audioTrackPublications.size===0;const bt=(ot=rt.getActiveDevice(tt))!==null&&ot!==void 0?ot:rt.options.audioCaptureDefaults.deviceId;rt.options.audioCaptureDefaults.deviceId=kt;const gt=Array.from(rt.localParticipant.audioTrackPublications.values()).filter(yt=>yt.source===Track.Source.Microphone);try{vt=(yield Promise.all(gt.map(yt=>{var Et;return(Et=yt.audioTrack)===null||Et===void 0?void 0:Et.setDeviceId(kt)}))).every(yt=>yt===!0)}catch(yt){throw rt.options.audioCaptureDefaults.deviceId=bt,yt}const St=gt.some(yt=>{var Et,Tt;return(Tt=(Et=yt.track)===null||Et===void 0?void 0:Et.isMuted)!==null&&Tt!==void 0?Tt:!1});vt&&St&&(mt=!0)}else if(tt==="videoinput"){mt=rt.localParticipant.videoTrackPublications.size===0;const bt=(st=rt.getActiveDevice(tt))!==null&&st!==void 0?st:rt.options.videoCaptureDefaults.deviceId;rt.options.videoCaptureDefaults.deviceId=kt;const gt=Array.from(rt.localParticipant.videoTrackPublications.values()).filter(yt=>yt.source===Track.Source.Camera);try{vt=(yield Promise.all(gt.map(yt=>{var Et;return(Et=yt.videoTrack)===null||Et===void 0?void 0:Et.setDeviceId(kt)}))).every(yt=>yt===!0)}catch(yt){throw rt.options.videoCaptureDefaults.deviceId=bt,yt}const St=gt.some(yt=>{var Et,Tt;return(Tt=(Et=yt.track)===null||Et===void 0?void 0:Et.isMuted)!==null&&Tt!==void 0?Tt:!1});vt&&St&&(mt=!0)}else if(tt==="audiooutput"){if(mt=!0,!supportsSetSinkId()&&!rt.options.webAudioMix||rt.options.webAudioMix&&rt.audioContext&&!("setSinkId"in rt.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");rt.options.webAudioMix&&(nt=(at=yield DeviceManager.getInstance().normalizeDeviceId("audiooutput",nt))!==null&&at!==void 0?at:""),(lt=(ht=rt.options).audioOutput)!==null&&lt!==void 0||(ht.audioOutput={});const bt=(dt=rt.getActiveDevice(tt))!==null&&dt!==void 0?dt:rt.options.audioOutput.deviceId;rt.options.audioOutput.deviceId=nt;try{rt.options.webAudioMix&&((pt=rt.audioContext)===null||pt===void 0||pt.setSinkId(nt)),yield Promise.all(Array.from(rt.remoteParticipants.values()).map(gt=>gt.setAudioOutput({deviceId:nt})))}catch(gt){throw rt.options.audioOutput.deviceId=bt,gt}}return mt&&(rt.localParticipant.activeDeviceMap.set(tt,nt),rt.emit(RoomEvent.ActiveDeviceChanged,tt,nt)),vt}()})}setupLocalParticipantEvents(){this.localParticipant.on(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ParticipantEvent.AttributesChanged,this.onLocalAttributesChanged).on(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).on(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).on(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).on(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).on(ParticipantEvent.AudioStreamAcquired,this.startAudio).on(ParticipantEvent.ChatMessage,this.onLocalChatMessageSent).on(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var $;($=this.engine)===null||$===void 0||$.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded($,et,tt){if(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting){const lt=()=>{this.onTrackAdded($,et,tt),dt()},dt=()=>{this.off(RoomEvent.Reconnected,lt),this.off(RoomEvent.Connected,lt),this.off(RoomEvent.Disconnected,dt)};this.once(RoomEvent.Reconnected,lt),this.once(RoomEvent.Connected,lt),this.once(RoomEvent.Disconnected,dt);return}if(this.state===ConnectionState.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if($.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const nt=unpackStreamId(et.id),rt=nt[0];let it=nt[1],ot=$.id;if(it&&it.startsWith("TR")&&(ot=it),rt===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const st=Array.from(this.remoteParticipants.values()).find(lt=>lt.sid===rt);if(!st){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(rt),this.logContext);return}let at;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?at=this.options.adaptiveStream:at={}),st.addSubscribedMediaTrack($,ot,et,tt,at)}handleDisconnect(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,et=arguments.length>1?arguments[1]:void 0;var tt;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==ConnectionState.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(nt=>{nt.trackPublications.forEach(rt=>{nt.unpublishTrack(rt.trackSid)})}),this.localParticipant.trackPublications.forEach(nt=>{var rt,it,ot;nt.track&&this.localParticipant.unpublishTrack(nt.track,$),$?((rt=nt.track)===null||rt===void 0||rt.detach(),(it=nt.track)===null||it===void 0||it.stop()):(ot=nt.track)===null||ot===void 0||ot.stopMonitor()}),this.localParticipant.off(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ParticipantEvent.AttributesChanged,this.onLocalAttributesChanged).off(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).off(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).off(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).off(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).off(ParticipantEvent.AudioStreamAcquired,this.startAudio).off(ParticipantEvent.ChatMessage,this.onLocalChatMessageSent).off(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),isWeb()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(tt=navigator.mediaDevices)===null||tt===void 0||tt.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(ConnectionState.Disconnected),this.emit(RoomEvent.Disconnected,et)}}}handleParticipantDisconnected($,et){var tt;this.remoteParticipants.delete($),et&&(et.trackPublications.forEach(nt=>{et.unpublishTrack(nt.trackSid,!0)}),this.emit(RoomEvent.ParticipantDisconnected,et),et.setDisconnected(),(tt=this.localParticipant)===null||tt===void 0||tt.handleParticipantDisconnected(et.identity))}handleStreamHeader($,et){return __awaiter$1(this,void 0,void 0,function*(){var tt;if($.contentHeader.case==="byteHeader"){const nt=this.byteStreamHandlers.get($.topic);if(!nt){this.log.debug("ignoring incoming byte stream due to no handler for topic",$.topic);return}let rt;const it={id:$.streamId,name:(tt=$.contentHeader.value.name)!==null&&tt!==void 0?tt:"unknown",mimeType:$.mimeType,size:$.totalLength?Number($.totalLength):void 0,topic:$.topic,timestamp:bigIntToNumber($.timestamp),attributes:$.attributes},ot=new ReadableStream({start:st=>{rt=st,this.byteStreamControllers.set($.streamId,{info:it,controller:rt,startTime:Date.now()})}});nt(new ByteStreamReader(it,ot,bigIntToNumber($.totalLength)),{identity:et})}else if($.contentHeader.case==="textHeader"){const nt=this.textStreamHandlers.get($.topic);if(!nt){this.log.debug("ignoring incoming text stream due to no handler for topic",$.topic);return}let rt;const it={id:$.streamId,mimeType:$.mimeType,size:$.totalLength?Number($.totalLength):void 0,topic:$.topic,timestamp:Number($.timestamp),attributes:$.attributes},ot=new ReadableStream({start:st=>{rt=st,this.textStreamControllers.set($.streamId,{info:it,controller:rt,startTime:Date.now()})}});nt(new TextStreamReader(it,ot,bigIntToNumber($.totalLength)),{identity:et})}})}handleStreamChunk($){const et=this.byteStreamControllers.get($.streamId);et&&$.content.length>0&&et.controller.enqueue($);const tt=this.textStreamControllers.get($.streamId);tt&&$.content.length>0&&tt.controller.enqueue($)}handleStreamTrailer($){const et=this.textStreamControllers.get($.streamId);et&&(et.info.attributes=Object.assign(Object.assign({},et.info.attributes),$.attributes),et.controller.close(),this.textStreamControllers.delete($.streamId));const tt=this.byteStreamControllers.get($.streamId);tt&&(tt.info.attributes=Object.assign(Object.assign({},tt.info.attributes),$.attributes),tt.controller.close(),this.byteStreamControllers.delete($.streamId))}selectDefaultDevices(){return __awaiter$1(this,void 0,void 0,function*(){var $,et,tt;const nt=DeviceManager.getInstance().previousDevices,rt=yield DeviceManager.getInstance().getDevices(void 0,!1),it=getBrowser();if((it==null?void 0:it.name)==="Chrome"&&it.os!=="iOS")for(let st of rt){const at=nt.find(lt=>lt.deviceId===st.deviceId);at&&at.label!==""&&at.kind===st.kind&&at.label!==st.label&&this.getActiveDevice(st.kind)==="default"&&this.emit(RoomEvent.ActiveDeviceChanged,st.kind,st.deviceId)}const ot=["audiooutput","audioinput","videoinput"];for(let st of ot){const at=kindToSource(st),lt=this.localParticipant.getTrackPublication(at);if(lt&&(!(($=lt.track)===null||$===void 0)&&$.isUserProvided))continue;const dt=rt.filter(ht=>ht.kind===st),pt=this.getActiveDevice(st);if(pt===((et=nt.filter(ht=>ht.kind===st)[0])===null||et===void 0?void 0:et.deviceId)&&dt.length>0&&((tt=dt[0])===null||tt===void 0?void 0:tt.deviceId)!==pt){yield this.switchActiveDevice(st,dt[0].deviceId);continue}st==="audioinput"&&!isSafariBased()||st==="videoinput"||dt.length>0&&!dt.find(ht=>ht.deviceId===this.getActiveDevice(st))&&(st!=="audiooutput"||!isSafariBased())&&(yield this.switchActiveDevice(st,dt[0].deviceId))}})}acquireAudioContext(){return __awaiter$1(this,void 0,void 0,function*(){var $,et;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=($=getNewAudioContext())!==null&&$!==void 0?$:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(nt=>nt.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),sleep$1(200)])}catch(nt){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:nt}))}const tt=((et=this.audioContext)===null||et===void 0?void 0:et.state)==="running";tt!==this.canPlaybackAudio&&(this.audioEnabled=tt,this.emit(RoomEvent.AudioPlaybackStatusChanged,tt))})}createParticipant($,et){var tt;let nt;return et?nt=RemoteParticipant.fromParticipantInfo(this.engine.client,et,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):nt=new RemoteParticipant(this.engine.client,"",$,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&nt.setAudioContext(this.audioContext),!((tt=this.options.audioOutput)===null||tt===void 0)&&tt.deviceId&&nt.setAudioOutput(this.options.audioOutput).catch(rt=>this.log.warn("Could not set audio output: ".concat(rt.message),this.logContext)),nt}getOrCreateParticipant($,et){if(this.remoteParticipants.has($)){const nt=this.remoteParticipants.get($);return et&&nt.updateInfo(et)&&this.sidToIdentity.set(et.sid,et.identity),nt}const tt=this.createParticipant($,et);return this.remoteParticipants.set($,tt),this.sidToIdentity.set(et.sid,et.identity),this.emitWhenConnected(RoomEvent.ParticipantConnected,tt),tt.on(ParticipantEvent.TrackPublished,nt=>{this.emitWhenConnected(RoomEvent.TrackPublished,nt,tt)}).on(ParticipantEvent.TrackSubscribed,(nt,rt)=>{nt.kind===Track.Kind.Audio?(nt.on(TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),nt.on(TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):nt.kind===Track.Kind.Video&&(nt.on(TrackEvent.VideoPlaybackFailed,this.handleVideoPlaybackFailed),nt.on(TrackEvent.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(RoomEvent.TrackSubscribed,nt,rt,tt)}).on(ParticipantEvent.TrackUnpublished,nt=>{this.emit(RoomEvent.TrackUnpublished,nt,tt)}).on(ParticipantEvent.TrackUnsubscribed,(nt,rt)=>{this.emit(RoomEvent.TrackUnsubscribed,nt,rt,tt)}).on(ParticipantEvent.TrackMuted,nt=>{this.emitWhenConnected(RoomEvent.TrackMuted,nt,tt)}).on(ParticipantEvent.TrackUnmuted,nt=>{this.emitWhenConnected(RoomEvent.TrackUnmuted,nt,tt)}).on(ParticipantEvent.ParticipantMetadataChanged,nt=>{this.emitWhenConnected(RoomEvent.ParticipantMetadataChanged,nt,tt)}).on(ParticipantEvent.ParticipantNameChanged,nt=>{this.emitWhenConnected(RoomEvent.ParticipantNameChanged,nt,tt)}).on(ParticipantEvent.AttributesChanged,nt=>{this.emitWhenConnected(RoomEvent.ParticipantAttributesChanged,nt,tt)}).on(ParticipantEvent.ConnectionQualityChanged,nt=>{this.emitWhenConnected(RoomEvent.ConnectionQualityChanged,nt,tt)}).on(ParticipantEvent.ParticipantPermissionsChanged,nt=>{this.emitWhenConnected(RoomEvent.ParticipantPermissionsChanged,nt,tt)}).on(ParticipantEvent.TrackSubscriptionStatusChanged,(nt,rt)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionStatusChanged,nt,rt,tt)}).on(ParticipantEvent.TrackSubscriptionFailed,(nt,rt)=>{this.emit(RoomEvent.TrackSubscriptionFailed,nt,tt,rt)}).on(ParticipantEvent.TrackSubscriptionPermissionChanged,(nt,rt)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionPermissionChanged,nt,rt,tt)}).on(ParticipantEvent.Active,()=>{this.emitWhenConnected(RoomEvent.ParticipantActive,tt),tt.kind===ParticipantInfo_Kind.AGENT&&this.localParticipant.setActiveAgent(tt)}),et&&tt.updateInfo(et),tt}sendSyncState(){const $=Array.from(this.remoteParticipants.values()).reduce((tt,nt)=>(tt.push(...nt.getTrackPublications()),tt),[]),et=this.localParticipant.getTrackPublications();this.engine.sendSyncState($,et)}updateSubscriptions(){for(const $ of this.remoteParticipants.values())for(const et of $.videoTrackPublications.values())et.isSubscribed&&isRemotePub(et)&&et.emitTrackUpdate()}getRemoteParticipantBySid($){const et=this.sidToIdentity.get($);if(et)return this.remoteParticipants.get(et)}registerConnectionReconcile(){this.clearConnectionReconcile();let $=0;this.connectionReconcileInterval=CriticalTimers.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?($++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:$,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),$>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,DisconnectReason.STATE_MISMATCH))):$=0},connectionReconcileFrequency)}clearConnectionReconcile(){this.connectionReconcileInterval&&CriticalTimers.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState($){return $===this.state?!1:(this.state=$,this.emit(RoomEvent.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach($=>{let[et,tt]=$;this.emit(et,...tt)}),this.bufferedEvents=[]}emitWhenConnected($){for(var et=arguments.length,tt=new Array(et>1?et-1:0),nt=1;nt<et;nt++)tt[nt-1]=arguments[nt];if(this.state===ConnectionState.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([$,tt]);else if(this.state===ConnectionState.Connected)return this.emit($,...tt);return!1}simulateParticipants($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt;const nt=Object.assign({audio:!0,video:!0,useRealTracks:!1},$.publish),rt=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},$.participants);if(this.handleDisconnect(),this.roomInfo=new Room$1({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:protoInt64.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new ParticipantInfo({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected),this.emit(RoomEvent.Connected),this.setAndEmitConnectionState(ConnectionState.Connected),nt.video){const it=new LocalTrackPublication(Track.Kind.Video,new TrackInfo({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO,name:"video-dummy"}),new LocalVideoTrack(nt.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:createDummyVideoStreamTrack(160*((et=rt.aspectRatios[0])!==null&&et!==void 0?et:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(it),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,it)}if(nt.audio){const it=new LocalTrackPublication(Track.Kind.Audio,new TrackInfo({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO}),new LocalAudioTrack(nt.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:getEmptyAudioStreamTrack(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(it),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,it)}for(let it=0;it<rt.count-1;it+=1){let ot=new ParticipantInfo({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(it),state:ParticipantInfo_State.ACTIVE,tracks:[],joinedAt:protoInt64.parse(Date.now())});const st=this.getOrCreateParticipant(ot.identity,ot);if(rt.video){const at=createDummyVideoStreamTrack(160*((tt=rt.aspectRatios[it%rt.aspectRatios.length])!==null&&tt!==void 0?tt:1),160,!1,!0),lt=new TrackInfo({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});st.addSubscribedMediaTrack(at,lt.sid,new MediaStream([at]),new RTCRtpReceiver),ot.tracks=[...ot.tracks,lt]}if(rt.audio){const at=getEmptyAudioStreamTrack(),lt=new TrackInfo({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});st.addSubscribedMediaTrack(at,lt.sid,new MediaStream([at]),new RTCRtpReceiver),ot.tracks=[...ot.tracks,lt]}st.updateInfo(ot)}})}emit($){for(var et=arguments.length,tt=new Array(et>1?et-1:0),nt=1;nt<et;nt++)tt[nt-1]=arguments[nt];if($!==RoomEvent.ActiveSpeakersChanged&&$!==RoomEvent.TranscriptionReceived){const rt=mapArgs(tt).filter(it=>it!==void 0);this.log.debug("room event ".concat($),Object.assign(Object.assign({},this.logContext),{event:$,args:rt}))}return super.emit($,...tt)}}Room.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(_e=>{_e()});function mapArgs(_e){return _e.map($=>{if($)return Array.isArray($)?mapArgs($):typeof $=="object"?"logContext"in $?$.logContext:void 0:$})}var CheckStatus;(function(_e){_e[_e.IDLE=0]="IDLE",_e[_e.RUNNING=1]="RUNNING",_e[_e.SKIPPED=2]="SKIPPED",_e[_e.SUCCESS=3]="SUCCESS",_e[_e.FAILED=4]="FAILED"})(CheckStatus||(CheckStatus={}));class Checker extends eventsExports.EventEmitter{constructor($,et){let tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=CheckStatus.IDLE,this.logs=[],this.options={},this.url=$,this.token=et,this.name=this.constructor.name,this.room=new Room(tt.roomOptions),this.connectOptions=tt.connectOptions,this.options=tt}run($){return __awaiter$1(this,void 0,void 0,function*(){if(this.status!==CheckStatus.IDLE)throw Error("check is running already");this.setStatus(CheckStatus.RUNNING);try{yield this.perform()}catch(et){et instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(et.message):this.appendError(et.message))}return yield this.disconnect(),yield new Promise(et=>setTimeout(et,500)),this.status!==CheckStatus.SKIPPED&&this.setStatus(this.isSuccess()?CheckStatus.SUCCESS:CheckStatus.FAILED),$&&$(),this.getInfo()})}isSuccess(){return!this.logs.some($=>$.level==="error")}connect($){return __awaiter$1(this,void 0,void 0,function*(){return this.room.state===ConnectionState.Connected?this.room:($||($=this.url),yield this.room.connect($,this.token,this.connectOptions),this.room)})}disconnect(){return __awaiter$1(this,void 0,void 0,function*(){this.room&&this.room.state!==ConnectionState.Disconnected&&(yield this.room.disconnect(),yield new Promise($=>setTimeout($,500)))})}skip(){this.setStatus(CheckStatus.SKIPPED)}switchProtocol($){return __awaiter$1(this,void 0,void 0,function*(){let et=!1,tt=!1;if(this.room.on(RoomEvent.Reconnecting,()=>{et=!0}),this.room.once(RoomEvent.Reconnected,()=>{tt=!0}),this.room.simulateScenario("force-".concat($)),yield new Promise(rt=>setTimeout(rt,1e3)),!et)return;const nt=Date.now()+1e4;for(;Date.now()<nt;){if(tt)return;yield sleep$1(100)}throw new Error("Could not reconnect using ".concat($," protocol after 10 seconds"))})}appendMessage($){this.logs.push({level:"info",message:$}),this.emit("update",this.getInfo())}appendWarning($){this.logs.push({level:"warning",message:$}),this.emit("update",this.getInfo())}appendError($){this.logs.push({level:"error",message:$}),this.emit("update",this.getInfo())}setStatus($){this.status=$,this.emit("update",this.getInfo())}get engine(){var $;return($=this.room)===null||$===void 0?void 0:$.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class CloudRegionCheck extends Checker{get description(){return"Cloud regions"}perform(){return __awaiter$1(this,void 0,void 0,function*(){const $=new RegionUrlProvider(this.url,this.token);if(!$.isCloud()){this.skip();return}const et=[],tt=new Set;for(let rt=0;rt<3;rt++){const it=yield $.getNextBestRegionUrl();if(!it)break;if(tt.has(it))continue;tt.add(it);const ot=yield this.checkCloudRegion(it);this.appendMessage("".concat(ot.region," RTT: ").concat(ot.rtt,"ms, duration: ").concat(ot.duration,"ms")),et.push(ot)}et.sort((rt,it)=>(rt.duration-it.duration)*.5+(rt.rtt-it.rtt)*.5);const nt=et[0];this.bestStats=nt,this.appendMessage("best Cloud region: ".concat(nt.region))})}getInfo(){const $=super.getInfo();return $.data=this.bestStats,$}checkCloudRegion($){return __awaiter$1(this,void 0,void 0,function*(){var et,tt;yield this.connect($),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const nt=(et=this.room.serverInfo)===null||et===void 0?void 0:et.region;if(!nt)throw new Error("Region not found");const rt=yield this.room.localParticipant.streamText({topic:"test"}),it=1e3,st=1e6/it,at="A".repeat(it),lt=Date.now();for(let vt=0;vt<st;vt++)yield rt.write(at);yield rt.close();const dt=Date.now(),pt=yield(tt=this.room.engine.pcManager)===null||tt===void 0?void 0:tt.publisher.getStats(),ht={region:nt,rtt:1e4,duration:dt-lt};return pt==null||pt.forEach(vt=>{vt.type==="candidate-pair"&&vt.nominated&&(ht.rtt=vt.currentRoundTripTime*1e3)}),yield this.disconnect(),ht})}}const TEST_DURATION=1e4;class ConnectionProtocolCheck extends Checker{get description(){return"Connection via UDP vs TCP"}perform(){return __awaiter$1(this,void 0,void 0,function*(){const $=yield this.checkConnectionProtocol("udp"),et=yield this.checkConnectionProtocol("tcp");this.bestStats=$,$.qualityLimitationDurations.bandwidth-et.qualityLimitationDurations.bandwidth>.5||($.packetsLost-et.packetsLost)/$.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=et):this.appendMessage("best connection quality via udp");const tt=this.bestStats;this.appendMessage("upstream bitrate: ".concat((tt.bitrateTotal/tt.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((tt.rttTotal/tt.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((tt.jitterTotal/tt.count*1e3).toFixed(2)," ms")),tt.packetsLost>0&&this.appendWarning("packets lost: ".concat((tt.packetsLost/tt.packetsSent*100).toFixed(2),"%")),tt.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((tt.qualityLimitationDurations.bandwidth/(TEST_DURATION/1e3)*100).toFixed(2),"%")),tt.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((tt.qualityLimitationDurations.cpu/(TEST_DURATION/1e3)*100).toFixed(2),"%"))})}getInfo(){const $=super.getInfo();return $.data=this.bestStats,$}checkConnectionProtocol($){return __awaiter$1(this,void 0,void 0,function*(){yield this.connect(),$==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const et=document.createElement("canvas");et.width=1280,et.height=720;const tt=et.getContext("2d");if(!tt)throw new Error("Could not get canvas context");let nt=0;const rt=()=>{nt=(nt+1)%360,tt.fillStyle="hsl(".concat(nt,", 100%, 50%)"),tt.fillRect(0,0,et.width,et.height),requestAnimationFrame(rt)};rt();const ot=et.captureStream(30).getVideoTracks()[0],at=(yield this.room.localParticipant.publishTrack(ot,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,lt={protocol:$,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},dt=setInterval(()=>__awaiter$1(this,void 0,void 0,function*(){const pt=yield at.getRTCStatsReport();pt==null||pt.forEach(ht=>{ht.type==="outbound-rtp"?(lt.packetsSent=ht.packetsSent,lt.qualityLimitationDurations=ht.qualityLimitationDurations,lt.bitrateTotal+=ht.targetBitrate,lt.count++):ht.type==="remote-inbound-rtp"&&(lt.packetsLost=ht.packetsLost,lt.rttTotal+=ht.roundTripTime,lt.jitterTotal+=ht.jitter)})}),1e3);return yield new Promise(pt=>setTimeout(pt,TEST_DURATION)),clearInterval(dt),ot.stop(),et.remove(),yield this.disconnect(),lt})}}class PublishAudioCheck extends Checker{get description(){return"Can publish audio"}perform(){return __awaiter$1(this,void 0,void 0,function*(){var $;const et=yield this.connect(),tt=yield createLocalAudioTrack();if(yield detectSilence(tt,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),et.localParticipant.publishTrack(tt),yield new Promise(ot=>setTimeout(ot,3e3));const rt=yield($=tt.sender)===null||$===void 0?void 0:$.getStats();if(!rt)throw new Error("Could not get RTCStats");let it=0;if(rt.forEach(ot=>{ot.type==="outbound-rtp"&&(ot.kind==="audio"||!ot.kind&&ot.mediaType==="audio")&&(it=ot.packetsSent)}),it===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(it," audio packets"))})}}class PublishVideoCheck extends Checker{get description(){return"Can publish video"}perform(){return __awaiter$1(this,void 0,void 0,function*(){var $;const et=yield this.connect(),tt=yield createLocalVideoTrack();yield this.checkForVideo(tt.mediaStreamTrack),et.localParticipant.publishTrack(tt),yield new Promise(it=>setTimeout(it,5e3));const nt=yield($=tt.sender)===null||$===void 0?void 0:$.getStats();if(!nt)throw new Error("Could not get RTCStats");let rt=0;if(nt.forEach(it=>{it.type==="outbound-rtp"&&(it.kind==="video"||!it.kind&&it.mediaType==="video")&&(rt+=it.packetsSent)}),rt===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(rt," video packets"))})}checkForVideo($){return __awaiter$1(this,void 0,void 0,function*(){const et=new MediaStream;et.addTrack($.clone());const tt=document.createElement("video");tt.srcObject=et,tt.muted=!0,yield new Promise(nt=>{tt.onplay=()=>{setTimeout(()=>{var rt,it,ot,st;const at=document.createElement("canvas"),lt=$.getSettings(),dt=(it=(rt=lt.width)!==null&&rt!==void 0?rt:tt.videoWidth)!==null&&it!==void 0?it:1280,pt=(st=(ot=lt.height)!==null&&ot!==void 0?ot:tt.videoHeight)!==null&&st!==void 0?st:720;at.width=dt,at.height=pt;const ht=at.getContext("2d");ht.drawImage(tt,0,0);const mt=ht.getImageData(0,0,at.width,at.height).data;let kt=!0;for(let bt=0;bt<mt.length;bt+=4)if(mt[bt]!==0||mt[bt+1]!==0||mt[bt+2]!==0){kt=!1;break}kt?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),nt()},1e3)},tt.play()}),et.getTracks().forEach(nt=>nt.stop()),tt.remove()})}}class ReconnectCheck extends Checker{get description(){return"Resuming connection after interruption"}perform(){return __awaiter$1(this,void 0,void 0,function*(){var $;const et=yield this.connect();let tt=!1,nt=!1,rt;const it=new Promise(at=>{setTimeout(at,5e3),rt=at}),ot=()=>{tt=!0};et.on(RoomEvent.SignalReconnecting,ot).on(RoomEvent.Reconnecting,ot).on(RoomEvent.Reconnected,()=>{nt=!0,rt(!0)}),($=et.engine.client.ws)===null||$===void 0||$.close();const st=et.engine.client.onClose;if(st&&st(""),yield it,tt){if(!nt||et.state!==ConnectionState.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class TURNCheck extends Checker{get description(){return"Can connect via TURN"}perform(){return __awaiter$1(this,void 0,void 0,function*(){var $,et;const tt=new SignalClient,nt=yield tt.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let rt=!1,it=!1,ot=!1;for(let st of nt.iceServers)for(let at of st.urls)at.startsWith("turn:")?(it=!0,ot=!0):at.startsWith("turns:")&&(it=!0,ot=!0,rt=!0),at.startsWith("stun:")&&(ot=!0);ot?it&&!rt&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield tt.close(),!((et=($=this.connectOptions)===null||$===void 0?void 0:$.rtcConfig)===null||et===void 0)&&et.iceServers||it?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(st=>setTimeout(st,0)))})}}class WebRTCCheck extends Checker{get description(){return"Establishing WebRTC connection"}perform(){return __awaiter$1(this,void 0,void 0,function*(){let $=!1,et=!1;this.room.on(RoomEvent.SignalConnected,()=>{const tt=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(nt,rt)=>{if(nt.candidate){const it=new RTCIceCandidate(nt);let ot="".concat(it.protocol," ").concat(it.address,":").concat(it.port," ").concat(it.type);it.address&&(isIPPrivate(it.address)?ot+=" (private)":it.protocol==="tcp"&&it.tcpType==="passive"?($=!0,ot+=" (passive)"):it.protocol==="udp"&&(et=!0)),this.appendMessage(ot)}tt&&tt(nt,rt)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=nt=>{nt instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(nt.errorCode," ").concat(nt.errorText," ").concat(nt.url))})});try{yield this.connect(),livekitLogger.info("now the room is connected")}catch(tt){throw this.appendWarning("ports need to be open on firewall in order to connect."),tt}$||this.appendWarning("Server is not configured for ICE/TCP"),et||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function isIPPrivate(_e){const $=_e.split(".");if($.length===4){if($[0]==="10")return!0;if($[0]==="192"&&$[1]==="168")return!0;if($[0]==="172"){const et=parseInt($[1],10);if(et>=16&&et<=31)return!0}}return!1}class WebSocketCheck extends Checker{get description(){return"Connecting to signal connection via WebSocket"}perform(){return __awaiter$1(this,void 0,void 0,function*(){var $,et,tt;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let nt=new SignalClient;const rt=yield nt.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(rt.serverVersion,".")),(($=rt.serverInfo)===null||$===void 0?void 0:$.edition)===ServerInfo_Edition.Cloud&&(!((et=rt.serverInfo)===null||et===void 0)&&et.region)&&this.appendMessage("LiveKit Cloud: ".concat((tt=rt.serverInfo)===null||tt===void 0?void 0:tt.region)),yield nt.close()})}}class ConnectionCheck extends eventsExports.EventEmitter{constructor($,et){let tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=$,this.token=et,this.options=tt}getNextCheckId(){const $=this.checkResults.size;return this.checkResults.set($,{logs:[],status:CheckStatus.IDLE,name:"",description:""}),$}updateCheck($,et){this.checkResults.set($,et),this.emit("checkUpdate",$,et)}isSuccess(){return Array.from(this.checkResults.values()).every($=>$.status!==CheckStatus.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck($){return __awaiter$1(this,void 0,void 0,function*(){const et=this.getNextCheckId(),tt=new $(this.url,this.token,this.options),nt=it=>{this.updateCheck(et,it)};tt.on("update",nt);const rt=yield tt.run();return tt.off("update",nt),rt})}checkWebsocket(){return __awaiter$1(this,void 0,void 0,function*(){return this.createAndRunCheck(WebSocketCheck)})}checkWebRTC(){return __awaiter$1(this,void 0,void 0,function*(){return this.createAndRunCheck(WebRTCCheck)})}checkTURN(){return __awaiter$1(this,void 0,void 0,function*(){return this.createAndRunCheck(TURNCheck)})}checkReconnect(){return __awaiter$1(this,void 0,void 0,function*(){return this.createAndRunCheck(ReconnectCheck)})}checkPublishAudio(){return __awaiter$1(this,void 0,void 0,function*(){return this.createAndRunCheck(PublishAudioCheck)})}checkPublishVideo(){return __awaiter$1(this,void 0,void 0,function*(){return this.createAndRunCheck(PublishVideoCheck)})}checkConnectionProtocol(){return __awaiter$1(this,void 0,void 0,function*(){const $=yield this.createAndRunCheck(ConnectionProtocolCheck);if($.data&&"protocol"in $.data){const et=$.data;this.options.protocol=et.protocol}return $})}checkCloudRegion(){return __awaiter$1(this,void 0,void 0,function*(){return this.createAndRunCheck(CloudRegionCheck)})}}var src={exports:{}},indexLight={exports:{}},indexMinimal={},minimal={},aspromise=asPromise$1;function asPromise$1(_e,$){for(var et=new Array(arguments.length-1),tt=0,nt=2,rt=!0;nt<arguments.length;)et[tt++]=arguments[nt++];return new Promise(function(ot,st){et[tt]=function(lt){if(rt)if(rt=!1,lt)st(lt);else{for(var dt=new Array(arguments.length-1),pt=0;pt<dt.length;)dt[pt++]=arguments[pt];ot.apply(null,dt)}};try{_e.apply($||null,et)}catch(at){rt&&(rt=!1,st(at))}})}var base64$1={};(function(_e){var $=_e;$.length=function(ot){var st=ot.length;if(!st)return 0;for(var at=0;--st%4>1&&ot.charAt(st)==="=";)++at;return Math.ceil(ot.length*3)/4-at};for(var et=new Array(64),tt=new Array(123),nt=0;nt<64;)tt[et[nt]=nt<26?nt+65:nt<52?nt+71:nt<62?nt-4:nt-59|43]=nt++;$.encode=function(ot,st,at){for(var lt=null,dt=[],pt=0,ht=0,vt;st<at;){var mt=ot[st++];switch(ht){case 0:dt[pt++]=et[mt>>2],vt=(mt&3)<<4,ht=1;break;case 1:dt[pt++]=et[vt|mt>>4],vt=(mt&15)<<2,ht=2;break;case 2:dt[pt++]=et[vt|mt>>6],dt[pt++]=et[mt&63],ht=0;break}pt>8191&&((lt||(lt=[])).push(String.fromCharCode.apply(String,dt)),pt=0)}return ht&&(dt[pt++]=et[vt],dt[pt++]=61,ht===1&&(dt[pt++]=61)),lt?(pt&&lt.push(String.fromCharCode.apply(String,dt.slice(0,pt))),lt.join("")):String.fromCharCode.apply(String,dt.slice(0,pt))};var rt="invalid encoding";$.decode=function(ot,st,at){for(var lt=at,dt=0,pt,ht=0;ht<ot.length;){var vt=ot.charCodeAt(ht++);if(vt===61&&dt>1)break;if((vt=tt[vt])===void 0)throw Error(rt);switch(dt){case 0:pt=vt,dt=1;break;case 1:st[at++]=pt<<2|(vt&48)>>4,pt=vt,dt=2;break;case 2:st[at++]=(pt&15)<<4|(vt&60)>>2,pt=vt,dt=3;break;case 3:st[at++]=(pt&3)<<6|vt,dt=0;break}}if(dt===1)throw Error(rt);return at-lt},$.test=function(ot){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(ot)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function($,et,tt){return(this._listeners[$]||(this._listeners[$]=[])).push({fn:et,ctx:tt||this}),this};EventEmitter.prototype.off=function($,et){if($===void 0)this._listeners={};else if(et===void 0)this._listeners[$]=[];else for(var tt=this._listeners[$],nt=0;nt<tt.length;)tt[nt].fn===et?tt.splice(nt,1):++nt;return this};EventEmitter.prototype.emit=function($){var et=this._listeners[$];if(et){for(var tt=[],nt=1;nt<arguments.length;)tt.push(arguments[nt++]);for(nt=0;nt<et.length;)et[nt].fn.apply(et[nt++].ctx,tt)}return this};var float=factory(factory);function factory(_e){return typeof Float32Array<"u"?function(){var $=new Float32Array([-0]),et=new Uint8Array($.buffer),tt=et[3]===128;function nt(st,at,lt){$[0]=st,at[lt]=et[0],at[lt+1]=et[1],at[lt+2]=et[2],at[lt+3]=et[3]}function rt(st,at,lt){$[0]=st,at[lt]=et[3],at[lt+1]=et[2],at[lt+2]=et[1],at[lt+3]=et[0]}_e.writeFloatLE=tt?nt:rt,_e.writeFloatBE=tt?rt:nt;function it(st,at){return et[0]=st[at],et[1]=st[at+1],et[2]=st[at+2],et[3]=st[at+3],$[0]}function ot(st,at){return et[3]=st[at],et[2]=st[at+1],et[1]=st[at+2],et[0]=st[at+3],$[0]}_e.readFloatLE=tt?it:ot,_e.readFloatBE=tt?ot:it}():function(){function $(tt,nt,rt,it){var ot=nt<0?1:0;if(ot&&(nt=-nt),nt===0)tt(1/nt>0?0:2147483648,rt,it);else if(isNaN(nt))tt(2143289344,rt,it);else if(nt>34028234663852886e22)tt((ot<<31|2139095040)>>>0,rt,it);else if(nt<11754943508222875e-54)tt((ot<<31|Math.round(nt/1401298464324817e-60))>>>0,rt,it);else{var st=Math.floor(Math.log(nt)/Math.LN2),at=Math.round(nt*Math.pow(2,-st)*8388608)&8388607;tt((ot<<31|st+127<<23|at)>>>0,rt,it)}}_e.writeFloatLE=$.bind(null,writeUintLE),_e.writeFloatBE=$.bind(null,writeUintBE);function et(tt,nt,rt){var it=tt(nt,rt),ot=(it>>31)*2+1,st=it>>>23&255,at=it&8388607;return st===255?at?NaN:ot*(1/0):st===0?ot*1401298464324817e-60*at:ot*Math.pow(2,st-150)*(at+8388608)}_e.readFloatLE=et.bind(null,readUintLE),_e.readFloatBE=et.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var $=new Float64Array([-0]),et=new Uint8Array($.buffer),tt=et[7]===128;function nt(st,at,lt){$[0]=st,at[lt]=et[0],at[lt+1]=et[1],at[lt+2]=et[2],at[lt+3]=et[3],at[lt+4]=et[4],at[lt+5]=et[5],at[lt+6]=et[6],at[lt+7]=et[7]}function rt(st,at,lt){$[0]=st,at[lt]=et[7],at[lt+1]=et[6],at[lt+2]=et[5],at[lt+3]=et[4],at[lt+4]=et[3],at[lt+5]=et[2],at[lt+6]=et[1],at[lt+7]=et[0]}_e.writeDoubleLE=tt?nt:rt,_e.writeDoubleBE=tt?rt:nt;function it(st,at){return et[0]=st[at],et[1]=st[at+1],et[2]=st[at+2],et[3]=st[at+3],et[4]=st[at+4],et[5]=st[at+5],et[6]=st[at+6],et[7]=st[at+7],$[0]}function ot(st,at){return et[7]=st[at],et[6]=st[at+1],et[5]=st[at+2],et[4]=st[at+3],et[3]=st[at+4],et[2]=st[at+5],et[1]=st[at+6],et[0]=st[at+7],$[0]}_e.readDoubleLE=tt?it:ot,_e.readDoubleBE=tt?ot:it}():function(){function $(tt,nt,rt,it,ot,st){var at=it<0?1:0;if(at&&(it=-it),it===0)tt(0,ot,st+nt),tt(1/it>0?0:2147483648,ot,st+rt);else if(isNaN(it))tt(0,ot,st+nt),tt(2146959360,ot,st+rt);else if(it>17976931348623157e292)tt(0,ot,st+nt),tt((at<<31|2146435072)>>>0,ot,st+rt);else{var lt;if(it<22250738585072014e-324)lt=it/5e-324,tt(lt>>>0,ot,st+nt),tt((at<<31|lt/4294967296)>>>0,ot,st+rt);else{var dt=Math.floor(Math.log(it)/Math.LN2);dt===1024&&(dt=1023),lt=it*Math.pow(2,-dt),tt(lt*4503599627370496>>>0,ot,st+nt),tt((at<<31|dt+1023<<20|lt*1048576&1048575)>>>0,ot,st+rt)}}}_e.writeDoubleLE=$.bind(null,writeUintLE,0,4),_e.writeDoubleBE=$.bind(null,writeUintBE,4,0);function et(tt,nt,rt,it,ot){var st=tt(it,ot+nt),at=tt(it,ot+rt),lt=(at>>31)*2+1,dt=at>>>20&2047,pt=4294967296*(at&1048575)+st;return dt===2047?pt?NaN:lt*(1/0):dt===0?lt*5e-324*pt:lt*Math.pow(2,dt-1075)*(pt+4503599627370496)}_e.readDoubleLE=et.bind(null,readUintLE,0,4),_e.readDoubleBE=et.bind(null,readUintBE,4,0)}(),_e}function writeUintLE(_e,$,et){$[et]=_e&255,$[et+1]=_e>>>8&255,$[et+2]=_e>>>16&255,$[et+3]=_e>>>24}function writeUintBE(_e,$,et){$[et]=_e>>>24,$[et+1]=_e>>>16&255,$[et+2]=_e>>>8&255,$[et+3]=_e&255}function readUintLE(_e,$){return(_e[$]|_e[$+1]<<8|_e[$+2]<<16|_e[$+3]<<24)>>>0}function readUintBE(_e,$){return(_e[$]<<24|_e[$+1]<<16|_e[$+2]<<8|_e[$+3])>>>0}var inquire_1=inquire$1;function inquire$1(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_e){}return null}var utf8$2={};(function(_e){var $=_e;$.length=function(tt){for(var nt=0,rt=0,it=0;it<tt.length;++it)rt=tt.charCodeAt(it),rt<128?nt+=1:rt<2048?nt+=2:(rt&64512)===55296&&(tt.charCodeAt(it+1)&64512)===56320?(++it,nt+=4):nt+=3;return nt},$.read=function(tt,nt,rt){var it=rt-nt;if(it<1)return"";for(var ot=null,st=[],at=0,lt;nt<rt;)lt=tt[nt++],lt<128?st[at++]=lt:lt>191&&lt<224?st[at++]=(lt&31)<<6|tt[nt++]&63:lt>239&&lt<365?(lt=((lt&7)<<18|(tt[nt++]&63)<<12|(tt[nt++]&63)<<6|tt[nt++]&63)-65536,st[at++]=55296+(lt>>10),st[at++]=56320+(lt&1023)):st[at++]=(lt&15)<<12|(tt[nt++]&63)<<6|tt[nt++]&63,at>8191&&((ot||(ot=[])).push(String.fromCharCode.apply(String,st)),at=0);return ot?(at&&ot.push(String.fromCharCode.apply(String,st.slice(0,at))),ot.join("")):String.fromCharCode.apply(String,st.slice(0,at))},$.write=function(tt,nt,rt){for(var it=rt,ot,st,at=0;at<tt.length;++at)ot=tt.charCodeAt(at),ot<128?nt[rt++]=ot:ot<2048?(nt[rt++]=ot>>6|192,nt[rt++]=ot&63|128):(ot&64512)===55296&&((st=tt.charCodeAt(at+1))&64512)===56320?(ot=65536+((ot&1023)<<10)+(st&1023),++at,nt[rt++]=ot>>18|240,nt[rt++]=ot>>12&63|128,nt[rt++]=ot>>6&63|128,nt[rt++]=ot&63|128):(nt[rt++]=ot>>12|224,nt[rt++]=ot>>6&63|128,nt[rt++]=ot&63|128);return rt-it}})(utf8$2);var pool_1=pool;function pool(_e,$,et){var tt=et||8192,nt=tt>>>1,rt=null,it=tt;return function(st){if(st<1||st>nt)return _e(st);it+st>tt&&(rt=_e(tt),it=0);var at=$.call(rt,it,it+=st);return it&7&&(it=(it|7)+1),at}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=$;var _e=requireMinimal();function $(rt,it){this.lo=rt>>>0,this.hi=it>>>0}var et=$.zero=new $(0,0);et.toNumber=function(){return 0},et.zzEncode=et.zzDecode=function(){return this},et.length=function(){return 1};var tt=$.zeroHash="\0\0\0\0\0\0\0\0";$.fromNumber=function(it){if(it===0)return et;var ot=it<0;ot&&(it=-it);var st=it>>>0,at=(it-st)/4294967296>>>0;return ot&&(at=~at>>>0,st=~st>>>0,++st>4294967295&&(st=0,++at>4294967295&&(at=0))),new $(st,at)},$.from=function(it){if(typeof it=="number")return $.fromNumber(it);if(_e.isString(it))if(_e.Long)it=_e.Long.fromString(it);else return $.fromNumber(parseInt(it,10));return it.low||it.high?new $(it.low>>>0,it.high>>>0):et},$.prototype.toNumber=function(it){if(!it&&this.hi>>>31){var ot=~this.lo+1>>>0,st=~this.hi>>>0;return ot||(st=st+1>>>0),-(ot+st*4294967296)}return this.lo+this.hi*4294967296},$.prototype.toLong=function(it){return _e.Long?new _e.Long(this.lo|0,this.hi|0,!!it):{low:this.lo|0,high:this.hi|0,unsigned:!!it}};var nt=String.prototype.charCodeAt;return $.fromHash=function(it){return it===tt?et:new $((nt.call(it,0)|nt.call(it,1)<<8|nt.call(it,2)<<16|nt.call(it,3)<<24)>>>0,(nt.call(it,4)|nt.call(it,5)<<8|nt.call(it,6)<<16|nt.call(it,7)<<24)>>>0)},$.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},$.prototype.zzEncode=function(){var it=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^it)>>>0,this.lo=(this.lo<<1^it)>>>0,this},$.prototype.zzDecode=function(){var it=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^it)>>>0,this.hi=(this.hi>>>1^it)>>>0,this},$.prototype.length=function(){var it=this.lo,ot=(this.lo>>>28|this.hi<<4)>>>0,st=this.hi>>>24;return st===0?ot===0?it<16384?it<128?1:2:it<2097152?3:4:ot<16384?ot<128?5:6:ot<2097152?7:8:st<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(_e){var $=_e;$.asPromise=aspromise,$.base64=base64$1,$.EventEmitter=eventemitter,$.float=float,$.inquire=inquire_1,$.utf8=utf8$2,$.pool=pool_1,$.LongBits=requireLongbits(),$.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),$.global=$.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,$.emptyArray=Object.freeze?Object.freeze([]):[],$.emptyObject=Object.freeze?Object.freeze({}):{},$.isInteger=Number.isInteger||function(rt){return typeof rt=="number"&&isFinite(rt)&&Math.floor(rt)===rt},$.isString=function(rt){return typeof rt=="string"||rt instanceof String},$.isObject=function(rt){return rt&&typeof rt=="object"},$.isset=$.isSet=function(rt,it){var ot=rt[it];return ot!=null&&rt.hasOwnProperty(it)?typeof ot!="object"||(Array.isArray(ot)?ot.length:Object.keys(ot).length)>0:!1},$.Buffer=function(){try{var nt=$.inquire("buffer").Buffer;return nt.prototype.utf8Write?nt:null}catch{return null}}(),$._Buffer_from=null,$._Buffer_allocUnsafe=null,$.newBuffer=function(rt){return typeof rt=="number"?$.Buffer?$._Buffer_allocUnsafe(rt):new $.Array(rt):$.Buffer?$._Buffer_from(rt):typeof Uint8Array>"u"?rt:new Uint8Array(rt)},$.Array=typeof Uint8Array<"u"?Uint8Array:Array,$.Long=$.global.dcodeIO&&$.global.dcodeIO.Long||$.global.Long||$.inquire("long"),$.key2Re=/^true|false|0|1$/,$.key32Re=/^-?(?:0|[1-9][0-9]*)$/,$.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,$.longToHash=function(rt){return rt?$.LongBits.from(rt).toHash():$.LongBits.zeroHash},$.longFromHash=function(rt,it){var ot=$.LongBits.fromHash(rt);return $.Long?$.Long.fromBits(ot.lo,ot.hi,it):ot.toNumber(!!it)};function et(nt,rt,it){for(var ot=Object.keys(rt),st=0;st<ot.length;++st)(nt[ot[st]]===void 0||!it)&&(nt[ot[st]]=rt[ot[st]]);return nt}$.merge=et,$.lcFirst=function(rt){return rt.charAt(0).toLowerCase()+rt.substring(1)};function tt(nt){function rt(it,ot){if(!(this instanceof rt))return new rt(it,ot);Object.defineProperty(this,"message",{get:function(){return it}}),Error.captureStackTrace?Error.captureStackTrace(this,rt):Object.defineProperty(this,"stack",{value:new Error().stack||""}),ot&&et(this,ot)}return rt.prototype=Object.create(Error.prototype,{constructor:{value:rt,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return nt},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),rt}$.newError=tt,$.ProtocolError=tt("ProtocolError"),$.oneOfGetter=function(rt){for(var it={},ot=0;ot<rt.length;++ot)it[rt[ot]]=1;return function(){for(var st=Object.keys(this),at=st.length-1;at>-1;--at)if(it[st[at]]===1&&this[st[at]]!==void 0&&this[st[at]]!==null)return st[at]}},$.oneOfSetter=function(rt){return function(it){for(var ot=0;ot<rt.length;++ot)rt[ot]!==it&&delete this[rt[ot]]}},$.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},$._configure=function(){var nt=$.Buffer;if(!nt){$._Buffer_from=$._Buffer_allocUnsafe=null;return}$._Buffer_from=nt.from!==Uint8Array.from&&nt.from||function(it,ot){return new nt(it,ot)},$._Buffer_allocUnsafe=nt.allocUnsafe||function(it){return new nt(it)}}}(minimal)),minimal}var writer=Writer$1,util$7=requireMinimal(),BufferWriter$1,LongBits$1=util$7.LongBits,base64=util$7.base64,utf8$1=util$7.utf8;function Op(_e,$,et){this.fn=_e,this.len=$,this.next=void 0,this.val=et}function noop(){}function State(_e){this.head=_e.head,this.tail=_e.tail,this.len=_e.len,this.next=_e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function _e(){return util$7.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function _e($){return new util$7.Array($)};util$7.Array!==Array&&(Writer$1.alloc=util$7.pool(Writer$1.alloc,util$7.Array.prototype.subarray));Writer$1.prototype._push=function _e($,et,tt){return this.tail=this.tail.next=new Op($,et,tt),this.len+=et,this};function writeByte(_e,$,et){$[et]=_e&255}function writeVarint32(_e,$,et){for(;_e>127;)$[et++]=_e&127|128,_e>>>=7;$[et]=_e}function VarintOp(_e,$){this.len=_e,this.next=void 0,this.val=$}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function _e($){return this.len+=(this.tail=this.tail.next=new VarintOp(($=$>>>0)<128?1:$<16384?2:$<2097152?3:$<268435456?4:5,$)).len,this};Writer$1.prototype.int32=function _e($){return $<0?this._push(writeVarint64,10,LongBits$1.fromNumber($)):this.uint32($)};Writer$1.prototype.sint32=function _e($){return this.uint32(($<<1^$>>31)>>>0)};function writeVarint64(_e,$,et){for(;_e.hi;)$[et++]=_e.lo&127|128,_e.lo=(_e.lo>>>7|_e.hi<<25)>>>0,_e.hi>>>=7;for(;_e.lo>127;)$[et++]=_e.lo&127|128,_e.lo=_e.lo>>>7;$[et++]=_e.lo}Writer$1.prototype.uint64=function _e($){var et=LongBits$1.from($);return this._push(writeVarint64,et.length(),et)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function _e($){var et=LongBits$1.from($).zzEncode();return this._push(writeVarint64,et.length(),et)};Writer$1.prototype.bool=function _e($){return this._push(writeByte,1,$?1:0)};function writeFixed32(_e,$,et){$[et]=_e&255,$[et+1]=_e>>>8&255,$[et+2]=_e>>>16&255,$[et+3]=_e>>>24}Writer$1.prototype.fixed32=function _e($){return this._push(writeFixed32,4,$>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function _e($){var et=LongBits$1.from($);return this._push(writeFixed32,4,et.lo)._push(writeFixed32,4,et.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function _e($){return this._push(util$7.float.writeFloatLE,4,$)};Writer$1.prototype.double=function _e($){return this._push(util$7.float.writeDoubleLE,8,$)};var writeBytes=util$7.Array.prototype.set?function _e($,et,tt){et.set($,tt)}:function _e($,et,tt){for(var nt=0;nt<$.length;++nt)et[tt+nt]=$[nt]};Writer$1.prototype.bytes=function _e($){var et=$.length>>>0;if(!et)return this._push(writeByte,1,0);if(util$7.isString($)){var tt=Writer$1.alloc(et=base64.length($));base64.decode($,tt,0),$=tt}return this.uint32(et)._push(writeBytes,et,$)};Writer$1.prototype.string=function _e($){var et=utf8$1.length($);return et?this.uint32(et)._push(utf8$1.write,et,$):this._push(writeByte,1,0)};Writer$1.prototype.fork=function _e(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function _e(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function _e(){var $=this.head,et=this.tail,tt=this.len;return this.reset().uint32(tt),tt&&(this.tail.next=$.next,this.tail=et,this.len+=tt),this};Writer$1.prototype.finish=function _e(){for(var $=this.head.next,et=this.constructor.alloc(this.len),tt=0;$;)$.fn($.val,et,tt),tt+=$.len,$=$.next;return et};Writer$1._configure=function(_e){BufferWriter$1=_e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$6=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$6._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$6.Buffer&&util$6.Buffer.prototype instanceof Uint8Array&&util$6.Buffer.prototype.set.name==="set"?function($,et,tt){et.set($,tt)}:function($,et,tt){if($.copy)$.copy(et,tt,0,$.length);else for(var nt=0;nt<$.length;)et[tt++]=$[nt++]}};BufferWriter.prototype.bytes=function _e($){util$6.isString($)&&($=util$6._Buffer_from($,"base64"));var et=$.length>>>0;return this.uint32(et),et&&this._push(BufferWriter.writeBytesBuffer,et,$),this};function writeStringBuffer(_e,$,et){_e.length<40?util$6.utf8.write(_e,$,et):$.utf8Write?$.utf8Write(_e,et):$.write(_e,et)}BufferWriter.prototype.string=function _e($){var et=util$6.Buffer.byteLength($);return this.uint32(et),et&&this._push(writeStringBuffer,et,$),this};BufferWriter._configure();var reader=Reader$1,util$5=requireMinimal(),BufferReader$1,LongBits=util$5.LongBits,utf8=util$5.utf8;function indexOutOfRange(_e,$){return RangeError("index out of range: "+_e.pos+" + "+($||1)+" > "+_e.len)}function Reader$1(_e){this.buf=_e,this.pos=0,this.len=_e.length}var create_array=typeof Uint8Array<"u"?function _e($){if($ instanceof Uint8Array||Array.isArray($))return new Reader$1($);throw Error("illegal buffer")}:function _e($){if(Array.isArray($))return new Reader$1($);throw Error("illegal buffer")},create=function _e(){return util$5.Buffer?function(et){return(Reader$1.create=function(nt){return util$5.Buffer.isBuffer(nt)?new BufferReader$1(nt):create_array(nt)})(et)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice;Reader$1.prototype.uint32=function _e(){var $=4294967295;return function(){if($=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||($=($|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||($=($|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||($=($|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||($=($|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return $;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return $}}();Reader$1.prototype.int32=function _e(){return this.uint32()|0};Reader$1.prototype.sint32=function _e(){var $=this.uint32();return $>>>1^-($&1)|0};function readLongVarint(){var _e=new LongBits(0,0),$=0;if(this.len-this.pos>4){for(;$<4;++$)if(_e.lo=(_e.lo|(this.buf[this.pos]&127)<<$*7)>>>0,this.buf[this.pos++]<128)return _e;if(_e.lo=(_e.lo|(this.buf[this.pos]&127)<<28)>>>0,_e.hi=(_e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return _e;$=0}else{for(;$<3;++$){if(this.pos>=this.len)throw indexOutOfRange(this);if(_e.lo=(_e.lo|(this.buf[this.pos]&127)<<$*7)>>>0,this.buf[this.pos++]<128)return _e}return _e.lo=(_e.lo|(this.buf[this.pos++]&127)<<$*7)>>>0,_e}if(this.len-this.pos>4){for(;$<5;++$)if(_e.hi=(_e.hi|(this.buf[this.pos]&127)<<$*7+3)>>>0,this.buf[this.pos++]<128)return _e}else for(;$<5;++$){if(this.pos>=this.len)throw indexOutOfRange(this);if(_e.hi=(_e.hi|(this.buf[this.pos]&127)<<$*7+3)>>>0,this.buf[this.pos++]<128)return _e}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function _e(){return this.uint32()!==0};function readFixed32_end(_e,$){return(_e[$-4]|_e[$-3]<<8|_e[$-2]<<16|_e[$-1]<<24)>>>0}Reader$1.prototype.fixed32=function _e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function _e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function _e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var $=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,$};Reader$1.prototype.double=function _e(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var $=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,$};Reader$1.prototype.bytes=function _e(){var $=this.uint32(),et=this.pos,tt=this.pos+$;if(tt>this.len)throw indexOutOfRange(this,$);if(this.pos+=$,Array.isArray(this.buf))return this.buf.slice(et,tt);if(et===tt){var nt=util$5.Buffer;return nt?nt.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,et,tt)};Reader$1.prototype.string=function _e(){var $=this.bytes();return utf8.read($,0,$.length)};Reader$1.prototype.skip=function _e($){if(typeof $=="number"){if(this.pos+$>this.len)throw indexOutOfRange(this,$);this.pos+=$}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(_e){switch(_e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(_e=this.uint32()&7)!==4;)this.skipType(_e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+_e+" at offset "+this.pos)}return this};Reader$1._configure=function(_e){BufferReader$1=_e,Reader$1.create=create(),BufferReader$1._configure();var $=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[$](!1)},uint64:function(){return readLongVarint.call(this)[$](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[$](!1)},fixed64:function(){return readFixed64.call(this)[$](!0)},sfixed64:function(){return readFixed64.call(this)[$](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$4=requireMinimal();function BufferReader(_e){Reader.call(this,_e)}BufferReader._configure=function(){util$4.Buffer&&(BufferReader.prototype._slice=util$4.Buffer.prototype.slice)};BufferReader.prototype.string=function _e(){var $=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+$,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+$,this.len))};BufferReader._configure();var rpc={},service$1=Service$1,util$3=requireMinimal();(Service$1.prototype=Object.create(util$3.EventEmitter.prototype)).constructor=Service$1;function Service$1(_e,$,et){if(typeof _e!="function")throw TypeError("rpcImpl must be a function");util$3.EventEmitter.call(this),this.rpcImpl=_e,this.requestDelimited=!!$,this.responseDelimited=!!et}Service$1.prototype.rpcCall=function _e($,et,tt,nt,rt){if(!nt)throw TypeError("request must be specified");var it=this;if(!rt)return util$3.asPromise(_e,it,$,et,tt,nt);if(!it.rpcImpl){setTimeout(function(){rt(Error("already ended"))},0);return}try{return it.rpcImpl($,et[it.requestDelimited?"encodeDelimited":"encode"](nt).finish(),function(st,at){if(st)return it.emit("error",st,$),rt(st);if(at===null){it.end(!0);return}if(!(at instanceof tt))try{at=tt[it.responseDelimited?"decodeDelimited":"decode"](at)}catch(lt){return it.emit("error",lt,$),rt(lt)}return it.emit("data",at,$),rt(null,at)})}catch(ot){it.emit("error",ot,$),setTimeout(function(){rt(ot)},0);return}};Service$1.prototype.end=function _e($){return this.rpcImpl&&($||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(_e){var $=_e;$.Service=service$1})(rpc);var roots={};(function(_e){var $=_e;$.build="minimal",$.Writer=writer,$.BufferWriter=writer_buffer,$.Reader=reader,$.BufferReader=reader_buffer,$.util=requireMinimal(),$.rpc=rpc,$.roots=roots,$.configure=et;function et(){$.util._configure(),$.Writer._configure($.BufferWriter),$.Reader._configure($.BufferReader)}et()})(indexMinimal);var types$1={},util$2={exports:{}},codegen_1=codegen;function codegen(_e,$){typeof _e=="string"&&($=_e,_e=void 0);var et=[];function tt(rt){if(typeof rt!="string"){var it=nt();if(codegen.verbose&&console.log("codegen: "+it),it="return "+it,rt){for(var ot=Object.keys(rt),st=new Array(ot.length+1),at=new Array(ot.length),lt=0;lt<ot.length;)st[lt]=ot[lt],at[lt]=rt[ot[lt++]];return st[lt]=it,Function.apply(null,st).apply(null,at)}return Function(it)()}for(var dt=new Array(arguments.length-1),pt=0;pt<dt.length;)dt[pt]=arguments[++pt];if(pt=0,rt=rt.replace(/%([%dfijs])/g,function(vt,mt){var kt=dt[pt++];switch(mt){case"d":case"f":return String(Number(kt));case"i":return String(Math.floor(kt));case"j":return JSON.stringify(kt);case"s":return String(kt)}return"%"}),pt!==dt.length)throw Error("parameter count mismatch");return et.push(rt),tt}function nt(rt){return"function "+(rt||$||"")+"("+(_e&&_e.join(",")||"")+`){
  `+et.join(`
  `)+`
}`}return tt.toString=nt,tt}codegen.verbose=!1;var fetch_1=fetch$1,asPromise=aspromise,inquire=inquire_1,fs=inquire("fs");function fetch$1(_e,$,et){return typeof $=="function"?(et=$,$={}):$||($={}),et?!$.xhr&&fs&&fs.readFile?fs.readFile(_e,function(nt,rt){return nt&&typeof XMLHttpRequest<"u"?fetch$1.xhr(_e,$,et):nt?et(nt):et(null,$.binary?rt:rt.toString("utf8"))}):fetch$1.xhr(_e,$,et):asPromise(fetch$1,this,_e,$)}fetch$1.xhr=function _e($,et,tt){var nt=new XMLHttpRequest;nt.onreadystatechange=function(){if(nt.readyState===4){if(nt.status!==0&&nt.status!==200)return tt(Error("status "+nt.status));if(et.binary){var it=nt.response;if(!it){it=[];for(var ot=0;ot<nt.responseText.length;++ot)it.push(nt.responseText.charCodeAt(ot)&255)}return tt(null,typeof Uint8Array<"u"?new Uint8Array(it):it)}return tt(null,nt.responseText)}},et.binary&&("overrideMimeType"in nt&&nt.overrideMimeType("text/plain; charset=x-user-defined"),nt.responseType="arraybuffer"),nt.open("GET",$),nt.send()};var path={};(function(_e){var $=_e,et=$.isAbsolute=function(rt){return/^(?:\/|\w+:)/.test(rt)},tt=$.normalize=function(rt){rt=rt.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var it=rt.split("/"),ot=et(rt),st="";ot&&(st=it.shift()+"/");for(var at=0;at<it.length;)it[at]===".."?at>0&&it[at-1]!==".."?it.splice(--at,2):ot?it.splice(at,1):++at:it[at]==="."?it.splice(at,1):++at;return st+it.join("/")};$.resolve=function(rt,it,ot){return ot||(it=tt(it)),et(it)?it:(ot||(rt=tt(rt)),(rt=rt.replace(/(?:\/|^)[^/]+$/,"")).length?tt(rt+"/"+it):it)}})(path);var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=st;var _e=requireObject();((st.prototype=Object.create(_e.prototype)).constructor=st).className="Namespace";var $=requireField(),et=requireUtil(),tt=requireOneof(),nt,rt,it;st.fromJSON=function(dt,pt){return new st(dt,pt.options).addJSON(pt.nested)};function ot(lt,dt){if(lt&&lt.length){for(var pt={},ht=0;ht<lt.length;++ht)pt[lt[ht].name]=lt[ht].toJSON(dt);return pt}}st.arrayToJSON=ot,st.isReservedId=function(dt,pt){if(dt){for(var ht=0;ht<dt.length;++ht)if(typeof dt[ht]!="string"&&dt[ht][0]<=pt&&dt[ht][1]>pt)return!0}return!1},st.isReservedName=function(dt,pt){if(dt){for(var ht=0;ht<dt.length;++ht)if(dt[ht]===pt)return!0}return!1};function st(lt,dt){_e.call(this,lt,dt),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function at(lt){lt._nestedArray=null,lt._lookupCache={};for(var dt=lt;dt=dt.parent;)dt._lookupCache={};return lt}return Object.defineProperty(st.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=et.toArray(this.nested))}}),st.prototype.toJSON=function(dt){return et.toObject(["options",this.options,"nested",ot(this.nestedArray,dt)])},st.prototype.addJSON=function(dt){var pt=this;if(dt)for(var ht=Object.keys(dt),vt=0,mt;vt<ht.length;++vt)mt=dt[ht[vt]],pt.add((mt.fields!==void 0?nt.fromJSON:mt.values!==void 0?it.fromJSON:mt.methods!==void 0?rt.fromJSON:mt.id!==void 0?$.fromJSON:st.fromJSON)(ht[vt],mt));return this},st.prototype.get=function(dt){return this.nested&&this.nested[dt]||null},st.prototype.getEnum=function(dt){if(this.nested&&this.nested[dt]instanceof it)return this.nested[dt].values;throw Error("no such enum: "+dt)},st.prototype.add=function(dt){if(!(dt instanceof $&&dt.extend!==void 0||dt instanceof nt||dt instanceof tt||dt instanceof it||dt instanceof rt||dt instanceof st))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var pt=this.get(dt.name);if(pt)if(pt instanceof st&&dt instanceof st&&!(pt instanceof nt||pt instanceof rt)){for(var ht=pt.nestedArray,vt=0;vt<ht.length;++vt)dt.add(ht[vt]);this.remove(pt),this.nested||(this.nested={}),dt.setOptions(pt.options,!0)}else throw Error("duplicate name '"+dt.name+"' in "+this)}this.nested[dt.name]=dt,this instanceof nt||this instanceof rt||this instanceof it||this instanceof $||dt._edition||(dt._edition=dt._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var mt=this;mt=mt.parent;)mt._needsRecursiveFeatureResolution=!0,mt._needsRecursiveResolve=!0;return dt.onAdd(this),at(this)},st.prototype.remove=function(dt){if(!(dt instanceof _e))throw TypeError("object must be a ReflectionObject");if(dt.parent!==this)throw Error(dt+" is not a member of "+this);return delete this.nested[dt.name],Object.keys(this.nested).length||(this.nested=void 0),dt.onRemove(this),at(this)},st.prototype.define=function(dt,pt){if(et.isString(dt))dt=dt.split(".");else if(!Array.isArray(dt))throw TypeError("illegal path");if(dt&&dt.length&&dt[0]==="")throw Error("path must be relative");for(var ht=this;dt.length>0;){var vt=dt.shift();if(ht.nested&&ht.nested[vt]){if(ht=ht.nested[vt],!(ht instanceof st))throw Error("path conflicts with non-namespace objects")}else ht.add(ht=new st(vt))}return pt&&ht.addJSON(pt),ht},st.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var dt=this.nestedArray,pt=0;for(this.resolve();pt<dt.length;)dt[pt]instanceof st?dt[pt++].resolveAll():dt[pt++].resolve();return this._needsRecursiveResolve=!1,this},st.prototype._resolveFeaturesRecursive=function(dt){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,dt=this._edition||dt,_e.prototype._resolveFeaturesRecursive.call(this,dt),this.nestedArray.forEach(pt=>{pt._resolveFeaturesRecursive(dt)}),this):this},st.prototype.lookup=function(dt,pt,ht){if(typeof pt=="boolean"?(ht=pt,pt=void 0):pt&&!Array.isArray(pt)&&(pt=[pt]),et.isString(dt)&&dt.length){if(dt===".")return this.root;dt=dt.split(".")}else if(!dt.length)return this;var vt=dt.join(".");if(dt[0]==="")return this.root.lookup(dt.slice(1),pt);var mt=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+vt];if(mt&&(!pt||pt.indexOf(mt.constructor)>-1)||(mt=this._lookupImpl(dt,vt),mt&&(!pt||pt.indexOf(mt.constructor)>-1)))return mt;if(ht)return null;for(var kt=this;kt.parent;){if(mt=kt.parent._lookupImpl(dt,vt),mt&&(!pt||pt.indexOf(mt.constructor)>-1))return mt;kt=kt.parent}return null},st.prototype._lookupImpl=function(dt,pt){if(Object.prototype.hasOwnProperty.call(this._lookupCache,pt))return this._lookupCache[pt];var ht=this.get(dt[0]),vt=null;if(ht)dt.length===1?vt=ht:ht instanceof st&&(dt=dt.slice(1),vt=ht._lookupImpl(dt,dt.join(".")));else for(var mt=0;mt<this.nestedArray.length;++mt)this._nestedArray[mt]instanceof st&&(ht=this._nestedArray[mt]._lookupImpl(dt,pt))&&(vt=ht);return this._lookupCache[pt]=vt,vt},st.prototype.lookupType=function(dt){var pt=this.lookup(dt,[nt]);if(!pt)throw Error("no such type: "+dt);return pt},st.prototype.lookupEnum=function(dt){var pt=this.lookup(dt,[it]);if(!pt)throw Error("no such Enum '"+dt+"' in "+this);return pt},st.prototype.lookupTypeOrEnum=function(dt){var pt=this.lookup(dt,[nt,it]);if(!pt)throw Error("no such Type or Enum '"+dt+"' in "+this);return pt},st.prototype.lookupService=function(dt){var pt=this.lookup(dt,[rt]);if(!pt)throw Error("no such Service '"+dt+"' in "+this);return pt},st._configure=function(lt,dt,pt){nt=lt,rt=dt,it=pt},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=tt;var _e=requireField();((tt.prototype=Object.create(_e.prototype)).constructor=tt).className="MapField";var $=requireTypes(),et=requireUtil();function tt(nt,rt,it,ot,st,at){if(_e.call(this,nt,rt,ot,void 0,void 0,st,at),!et.isString(it))throw TypeError("keyType must be a string");this.keyType=it,this.resolvedKeyType=null,this.map=!0}return tt.fromJSON=function(rt,it){return new tt(rt,it.id,it.keyType,it.type,it.options,it.comment)},tt.prototype.toJSON=function(rt){var it=rt?!!rt.keepComments:!1;return et.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",it?this.comment:void 0])},tt.prototype.resolve=function(){if(this.resolved)return this;if($.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return _e.prototype.resolve.call(this)},tt.d=function(rt,it,ot){return typeof ot=="function"?ot=et.decorateType(ot).name:ot&&typeof ot=="object"&&(ot=et.decorateEnum(ot).name),function(at,lt){et.decorateType(at.constructor).add(new tt(lt,rt,it,ot))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=et;var _e=requireObject();((et.prototype=Object.create(_e.prototype)).constructor=et).className="Method";var $=requireUtil();function et(tt,nt,rt,it,ot,st,at,lt,dt){if($.isObject(ot)?(at=ot,ot=st=void 0):$.isObject(st)&&(at=st,st=void 0),!(nt===void 0||$.isString(nt)))throw TypeError("type must be a string");if(!$.isString(rt))throw TypeError("requestType must be a string");if(!$.isString(it))throw TypeError("responseType must be a string");_e.call(this,tt,at),this.type=nt||"rpc",this.requestType=rt,this.requestStream=ot?!0:void 0,this.responseType=it,this.responseStream=st?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=lt,this.parsedOptions=dt}return et.fromJSON=function(nt,rt){return new et(nt,rt.type,rt.requestType,rt.responseType,rt.requestStream,rt.responseStream,rt.options,rt.comment,rt.parsedOptions)},et.prototype.toJSON=function(nt){var rt=nt?!!nt.keepComments:!1;return $.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",rt?this.comment:void 0,"parsedOptions",this.parsedOptions])},et.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),_e.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=nt;var _e=requireNamespace();((nt.prototype=Object.create(_e.prototype)).constructor=nt).className="Service";var $=requireMethod(),et=requireUtil(),tt=rpc;function nt(it,ot){_e.call(this,it,ot),this.methods={},this._methodsArray=null}nt.fromJSON=function(ot,st){var at=new nt(ot,st.options);if(st.methods)for(var lt=Object.keys(st.methods),dt=0;dt<lt.length;++dt)at.add($.fromJSON(lt[dt],st.methods[lt[dt]]));return st.nested&&at.addJSON(st.nested),st.edition&&(at._edition=st.edition),at.comment=st.comment,at._defaultEdition="proto3",at},nt.prototype.toJSON=function(ot){var st=_e.prototype.toJSON.call(this,ot),at=ot?!!ot.keepComments:!1;return et.toObject(["edition",this._editionToJSON(),"options",st&&st.options||void 0,"methods",_e.arrayToJSON(this.methodsArray,ot)||{},"nested",st&&st.nested||void 0,"comment",at?this.comment:void 0])},Object.defineProperty(nt.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=et.toArray(this.methods))}});function rt(it){return it._methodsArray=null,it}return nt.prototype.get=function(ot){return this.methods[ot]||_e.prototype.get.call(this,ot)},nt.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;_e.prototype.resolve.call(this);for(var ot=this.methodsArray,st=0;st<ot.length;++st)ot[st].resolve();return this},nt.prototype._resolveFeaturesRecursive=function(ot){return this._needsRecursiveFeatureResolution?(ot=this._edition||ot,_e.prototype._resolveFeaturesRecursive.call(this,ot),this.methodsArray.forEach(st=>{st._resolveFeaturesRecursive(ot)}),this):this},nt.prototype.add=function(ot){if(this.get(ot.name))throw Error("duplicate name '"+ot.name+"' in "+this);return ot instanceof $?(this.methods[ot.name]=ot,ot.parent=this,rt(this)):_e.prototype.add.call(this,ot)},nt.prototype.remove=function(ot){if(ot instanceof $){if(this.methods[ot.name]!==ot)throw Error(ot+" is not a member of "+this);return delete this.methods[ot.name],ot.parent=null,rt(this)}return _e.prototype.remove.call(this,ot)},nt.prototype.create=function(ot,st,at){for(var lt=new tt.Service(ot,st,at),dt=0,pt;dt<this.methodsArray.length;++dt){var ht=et.lcFirst((pt=this._methodsArray[dt]).resolve().name).replace(/[^$\w_]/g,"");lt[ht]=et.codegen(["r","c"],et.isReserved(ht)?ht+"_":ht)("return this.rpcCall(m,q,s,r,c)")({m:pt,q:pt.resolvedRequestType.ctor,s:pt.resolvedResponseType.ctor})}return lt},service}var message=Message,util$1=requireMinimal();function Message(_e){if(_e)for(var $=Object.keys(_e),et=0;et<$.length;++et)this[$[et]]=_e[$[et]]}Message.create=function _e($){return this.$type.create($)};Message.encode=function _e($,et){return this.$type.encode($,et)};Message.encodeDelimited=function _e($,et){return this.$type.encodeDelimited($,et)};Message.decode=function _e($){return this.$type.decode($)};Message.decodeDelimited=function _e($){return this.$type.decodeDelimited($)};Message.verify=function _e($){return this.$type.verify($)};Message.fromObject=function _e($){return this.$type.fromObject($)};Message.toObject=function _e($,et){return this.$type.toObject($,et)};Message.prototype.toJSON=function _e(){return this.$type.toObject(this,util$1.toJSONOptions)};var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=nt;var _e=require_enum(),$=requireTypes(),et=requireUtil();function tt(rt){return"missing required '"+rt.name+"'"}function nt(rt){for(var it=et.codegen(["r","l","e"],rt.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(rt.fieldsArray.filter(function(pt){return pt.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),ot=0;ot<rt.fieldsArray.length;++ot){var st=rt._fieldsArray[ot].resolve(),at=st.resolvedType instanceof _e?"int32":st.type,lt="m"+et.safeProp(st.name);it("case %i: {",st.id),st.map?(it("if(%s===util.emptyObject)",lt)("%s={}",lt)("var c2 = r.uint32()+r.pos"),$.defaults[st.keyType]!==void 0?it("k=%j",$.defaults[st.keyType]):it("k=null"),$.defaults[at]!==void 0?it("value=%j",$.defaults[at]):it("value=null"),it("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",st.keyType)("case 2:"),$.basic[at]===void 0?it("value=types[%i].decode(r,r.uint32())",ot):it("value=r.%s()",at),it("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),$.long[st.keyType]!==void 0?it('%s[typeof k==="object"?util.longToHash(k):k]=value',lt):it("%s[k]=value",lt)):st.repeated?(it("if(!(%s&&%s.length))",lt,lt)("%s=[]",lt),$.packed[at]!==void 0&&it("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",lt,at)("}else"),$.basic[at]===void 0?it(st.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",lt,ot):it("%s.push(r.%s())",lt,at)):$.basic[at]===void 0?it(st.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",lt,ot):it("%s=r.%s()",lt,at),it("break")("}")}for(it("default:")("r.skipType(t&7)")("break")("}")("}"),ot=0;ot<rt._fieldsArray.length;++ot){var dt=rt._fieldsArray[ot];dt.required&&it("if(!m.hasOwnProperty(%j))",dt.name)("throw util.ProtocolError(%j,{instance:m})",tt(dt))}return it("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=rt;var _e=require_enum(),$=requireUtil();function et(it,ot){return it.name+": "+ot+(it.repeated&&ot!=="array"?"[]":it.map&&ot!=="object"?"{k:"+it.keyType+"}":"")+" expected"}function tt(it,ot,st,at){if(ot.resolvedType)if(ot.resolvedType instanceof _e){it("switch(%s){",at)("default:")("return%j",et(ot,"enum value"));for(var lt=Object.keys(ot.resolvedType.values),dt=0;dt<lt.length;++dt)it("case %i:",ot.resolvedType.values[lt[dt]]);it("break")("}")}else it("{")("var e=types[%i].verify(%s);",st,at)("if(e)")("return%j+e",ot.name+".")("}");else switch(ot.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":it("if(!util.isInteger(%s))",at)("return%j",et(ot,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":it("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",at,at,at,at)("return%j",et(ot,"integer|Long"));break;case"float":case"double":it('if(typeof %s!=="number")',at)("return%j",et(ot,"number"));break;case"bool":it('if(typeof %s!=="boolean")',at)("return%j",et(ot,"boolean"));break;case"string":it("if(!util.isString(%s))",at)("return%j",et(ot,"string"));break;case"bytes":it('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',at,at,at)("return%j",et(ot,"buffer"));break}return it}function nt(it,ot,st){switch(ot.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":it("if(!util.key32Re.test(%s))",st)("return%j",et(ot,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":it("if(!util.key64Re.test(%s))",st)("return%j",et(ot,"integer|Long key"));break;case"bool":it("if(!util.key2Re.test(%s))",st)("return%j",et(ot,"boolean key"));break}return it}function rt(it){var ot=$.codegen(["m"],it.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),st=it.oneofsArray,at={};st.length&&ot("var p={}");for(var lt=0;lt<it.fieldsArray.length;++lt){var dt=it._fieldsArray[lt].resolve(),pt="m"+$.safeProp(dt.name);if(dt.optional&&ot("if(%s!=null&&m.hasOwnProperty(%j)){",pt,dt.name),dt.map)ot("if(!util.isObject(%s))",pt)("return%j",et(dt,"object"))("var k=Object.keys(%s)",pt)("for(var i=0;i<k.length;++i){"),nt(ot,dt,"k[i]"),tt(ot,dt,lt,pt+"[k[i]]")("}");else if(dt.repeated)ot("if(!Array.isArray(%s))",pt)("return%j",et(dt,"array"))("for(var i=0;i<%s.length;++i){",pt),tt(ot,dt,lt,pt+"[i]")("}");else{if(dt.partOf){var ht=$.safeProp(dt.partOf.name);at[dt.partOf.name]===1&&ot("if(p%s===1)",ht)("return%j",dt.partOf.name+": multiple values"),at[dt.partOf.name]=1,ot("p%s=1",ht)}tt(ot,dt,lt,pt)}dt.optional&&ot("}")}return ot("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(_e){var $=_e,et=require_enum(),tt=requireUtil();function nt(it,ot,st,at){var lt=!1;if(ot.resolvedType)if(ot.resolvedType instanceof et){it("switch(d%s){",at);for(var dt=ot.resolvedType.values,pt=Object.keys(dt),ht=0;ht<pt.length;++ht)dt[pt[ht]]===ot.typeDefault&&!lt&&(it("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',at,at,at),ot.repeated||it("break"),lt=!0),it("case%j:",pt[ht])("case %i:",dt[pt[ht]])("m%s=%j",at,dt[pt[ht]])("break");it("}")}else it('if(typeof d%s!=="object")',at)("throw TypeError(%j)",ot.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",at,st,at);else{var vt=!1;switch(ot.type){case"double":case"float":it("m%s=Number(d%s)",at,at);break;case"uint32":case"fixed32":it("m%s=d%s>>>0",at,at);break;case"int32":case"sint32":case"sfixed32":it("m%s=d%s|0",at,at);break;case"uint64":vt=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":it("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",at,at,vt)('else if(typeof d%s==="string")',at)("m%s=parseInt(d%s,10)",at,at)('else if(typeof d%s==="number")',at)("m%s=d%s",at,at)('else if(typeof d%s==="object")',at)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",at,at,at,vt?"true":"");break;case"bytes":it('if(typeof d%s==="string")',at)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",at,at,at)("else if(d%s.length >= 0)",at)("m%s=d%s",at,at);break;case"string":it("m%s=String(d%s)",at,at);break;case"bool":it("m%s=Boolean(d%s)",at,at);break}}return it}$.fromObject=function(ot){var st=ot.fieldsArray,at=tt.codegen(["d"],ot.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!st.length)return at("return new this.ctor");at("var m=new this.ctor");for(var lt=0;lt<st.length;++lt){var dt=st[lt].resolve(),pt=tt.safeProp(dt.name);dt.map?(at("if(d%s){",pt)('if(typeof d%s!=="object")',pt)("throw TypeError(%j)",dt.fullName+": object expected")("m%s={}",pt)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",pt),nt(at,dt,lt,pt+"[ks[i]]")("}")("}")):dt.repeated?(at("if(d%s){",pt)("if(!Array.isArray(d%s))",pt)("throw TypeError(%j)",dt.fullName+": array expected")("m%s=[]",pt)("for(var i=0;i<d%s.length;++i){",pt),nt(at,dt,lt,pt+"[i]")("}")("}")):(dt.resolvedType instanceof et||at("if(d%s!=null){",pt),nt(at,dt,lt,pt),dt.resolvedType instanceof et||at("}"))}return at("return m")};function rt(it,ot,st,at){if(ot.resolvedType)ot.resolvedType instanceof et?it("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",at,st,at,at,st,at,at):it("d%s=types[%i].toObject(m%s,o)",at,st,at);else{var lt=!1;switch(ot.type){case"double":case"float":it("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",at,at,at,at);break;case"uint64":lt=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":it('if(typeof m%s==="number")',at)("d%s=o.longs===String?String(m%s):m%s",at,at,at)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",at,at,at,at,lt?"true":"",at);break;case"bytes":it("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",at,at,at,at,at);break;default:it("d%s=m%s",at,at);break}}return it}$.toObject=function(ot){var st=ot.fieldsArray.slice().sort(tt.compareFieldsById);if(!st.length)return tt.codegen()("return {}");for(var at=tt.codegen(["m","o"],ot.name+"$toObject")("if(!o)")("o={}")("var d={}"),lt=[],dt=[],pt=[],ht=0;ht<st.length;++ht)st[ht].partOf||(st[ht].resolve().repeated?lt:st[ht].map?dt:pt).push(st[ht]);if(lt.length){for(at("if(o.arrays||o.defaults){"),ht=0;ht<lt.length;++ht)at("d%s=[]",tt.safeProp(lt[ht].name));at("}")}if(dt.length){for(at("if(o.objects||o.defaults){"),ht=0;ht<dt.length;++ht)at("d%s={}",tt.safeProp(dt[ht].name));at("}")}if(pt.length){for(at("if(o.defaults){"),ht=0;ht<pt.length;++ht){var vt=pt[ht],mt=tt.safeProp(vt.name);if(vt.resolvedType instanceof et)at("d%s=o.enums===String?%j:%j",mt,vt.resolvedType.valuesById[vt.typeDefault],vt.typeDefault);else if(vt.long)at("if(util.Long){")("var n=new util.Long(%i,%i,%j)",vt.typeDefault.low,vt.typeDefault.high,vt.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",mt)("}else")("d%s=o.longs===String?%j:%i",mt,vt.typeDefault.toString(),vt.typeDefault.toNumber());else if(vt.bytes){var kt="["+Array.prototype.slice.call(vt.typeDefault).join(",")+"]";at("if(o.bytes===String)d%s=%j",mt,String.fromCharCode.apply(String,vt.typeDefault))("else{")("d%s=%s",mt,kt)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",mt,mt)("}")}else at("d%s=%j",mt,vt.typeDefault)}at("}")}var bt=!1;for(ht=0;ht<st.length;++ht){var vt=st[ht],gt=ot._fieldsArray.indexOf(vt),mt=tt.safeProp(vt.name);vt.map?(bt||(bt=!0,at("var ks2")),at("if(m%s&&(ks2=Object.keys(m%s)).length){",mt,mt)("d%s={}",mt)("for(var j=0;j<ks2.length;++j){"),rt(at,vt,gt,mt+"[ks2[j]]")("}")):vt.repeated?(at("if(m%s&&m%s.length){",mt,mt)("d%s=[]",mt)("for(var j=0;j<m%s.length;++j){",mt),rt(at,vt,gt,mt+"[j]")("}")):(at("if(m%s!=null&&m.hasOwnProperty(%j)){",mt,vt.name),rt(at,vt,gt,mt),vt.partOf&&at("if(o.oneofs)")("d%s=%j",tt.safeProp(vt.partOf.name),vt.name)),at("}")}return at("return d")}}(converter)),converter}var wrappers={};(function(_e){var $=_e,et=message;$[".google.protobuf.Any"]={fromObject:function(tt){if(tt&&tt["@type"]){var nt=tt["@type"].substring(tt["@type"].lastIndexOf("/")+1),rt=this.lookup(nt);if(rt){var it=tt["@type"].charAt(0)==="."?tt["@type"].slice(1):tt["@type"];return it.indexOf("/")===-1&&(it="/"+it),this.create({type_url:it,value:rt.encode(rt.fromObject(tt)).finish()})}}return this.fromObject(tt)},toObject:function(tt,nt){var rt="type.googleapis.com/",it="",ot="";if(nt&&nt.json&&tt.type_url&&tt.value){ot=tt.type_url.substring(tt.type_url.lastIndexOf("/")+1),it=tt.type_url.substring(0,tt.type_url.lastIndexOf("/")+1);var st=this.lookup(ot);st&&(tt=st.decode(tt.value))}if(!(tt instanceof this.ctor)&&tt instanceof et){var at=tt.$type.toObject(tt,nt),lt=tt.$type.fullName[0]==="."?tt.$type.fullName.slice(1):tt.$type.fullName;return it===""&&(it=rt),ot=it+lt,at["@type"]=ot,at}return this.toObject(tt,nt)}}})(wrappers);var type,hasRequiredType;function requireType(){if(hasRequiredType)return type;hasRequiredType=1,type=mt;var _e=requireNamespace();((mt.prototype=Object.create(_e.prototype)).constructor=mt).className="Type";var $=require_enum(),et=requireOneof(),tt=requireField(),nt=requireMapfield(),rt=requireService(),it=message,ot=reader,st=writer,at=requireUtil(),lt=requireEncoder(),dt=requireDecoder(),pt=requireVerifier(),ht=requireConverter(),vt=wrappers;function mt(bt,gt){_e.call(this,bt,gt),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(mt.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var bt=Object.keys(this.fields),gt=0;gt<bt.length;++gt){var St=this.fields[bt[gt]],yt=St.id;if(this._fieldsById[yt])throw Error("duplicate id "+yt+" in "+this);this._fieldsById[yt]=St}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=at.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=at.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=mt.generateConstructor(this)())},set:function(bt){var gt=bt.prototype;gt instanceof it||((bt.prototype=new it).constructor=bt,at.merge(bt.prototype,gt)),bt.$type=bt.prototype.$type=this,at.merge(bt,it,!0),this._ctor=bt;for(var St=0;St<this.fieldsArray.length;++St)this._fieldsArray[St].resolve();var yt={};for(St=0;St<this.oneofsArray.length;++St)yt[this._oneofsArray[St].resolve().name]={get:at.oneOfGetter(this._oneofsArray[St].oneof),set:at.oneOfSetter(this._oneofsArray[St].oneof)};St&&Object.defineProperties(bt.prototype,yt)}}}),mt.generateConstructor=function(gt){for(var St=at.codegen(["p"],gt.name),yt=0,Et;yt<gt.fieldsArray.length;++yt)(Et=gt._fieldsArray[yt]).map?St("this%s={}",at.safeProp(Et.name)):Et.repeated&&St("this%s=[]",at.safeProp(Et.name));return St("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function kt(bt){return bt._fieldsById=bt._fieldsArray=bt._oneofsArray=null,delete bt.encode,delete bt.decode,delete bt.verify,bt}return mt.fromJSON=function(gt,St){var yt=new mt(gt,St.options);yt.extensions=St.extensions,yt.reserved=St.reserved;for(var Et=Object.keys(St.fields),Tt=0;Tt<Et.length;++Tt)yt.add((typeof St.fields[Et[Tt]].keyType<"u"?nt.fromJSON:tt.fromJSON)(Et[Tt],St.fields[Et[Tt]]));if(St.oneofs)for(Et=Object.keys(St.oneofs),Tt=0;Tt<Et.length;++Tt)yt.add(et.fromJSON(Et[Tt],St.oneofs[Et[Tt]]));if(St.nested)for(Et=Object.keys(St.nested),Tt=0;Tt<Et.length;++Tt){var wt=St.nested[Et[Tt]];yt.add((wt.id!==void 0?tt.fromJSON:wt.fields!==void 0?mt.fromJSON:wt.values!==void 0?$.fromJSON:wt.methods!==void 0?rt.fromJSON:_e.fromJSON)(Et[Tt],wt))}return St.extensions&&St.extensions.length&&(yt.extensions=St.extensions),St.reserved&&St.reserved.length&&(yt.reserved=St.reserved),St.group&&(yt.group=!0),St.comment&&(yt.comment=St.comment),St.edition&&(yt._edition=St.edition),yt._defaultEdition="proto3",yt},mt.prototype.toJSON=function(gt){var St=_e.prototype.toJSON.call(this,gt),yt=gt?!!gt.keepComments:!1;return at.toObject(["edition",this._editionToJSON(),"options",St&&St.options||void 0,"oneofs",_e.arrayToJSON(this.oneofsArray,gt),"fields",_e.arrayToJSON(this.fieldsArray.filter(function(Et){return!Et.declaringField}),gt)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",St&&St.nested||void 0,"comment",yt?this.comment:void 0])},mt.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;_e.prototype.resolveAll.call(this);var gt=this.oneofsArray;for(yt=0;yt<gt.length;)gt[yt++].resolve();for(var St=this.fieldsArray,yt=0;yt<St.length;)St[yt++].resolve();return this},mt.prototype._resolveFeaturesRecursive=function(gt){return this._needsRecursiveFeatureResolution?(gt=this._edition||gt,_e.prototype._resolveFeaturesRecursive.call(this,gt),this.oneofsArray.forEach(St=>{St._resolveFeatures(gt)}),this.fieldsArray.forEach(St=>{St._resolveFeatures(gt)}),this):this},mt.prototype.get=function(gt){return this.fields[gt]||this.oneofs&&this.oneofs[gt]||this.nested&&this.nested[gt]||null},mt.prototype.add=function(gt){if(this.get(gt.name))throw Error("duplicate name '"+gt.name+"' in "+this);if(gt instanceof tt&&gt.extend===void 0){if(this._fieldsById?this._fieldsById[gt.id]:this.fieldsById[gt.id])throw Error("duplicate id "+gt.id+" in "+this);if(this.isReservedId(gt.id))throw Error("id "+gt.id+" is reserved in "+this);if(this.isReservedName(gt.name))throw Error("name '"+gt.name+"' is reserved in "+this);return gt.parent&&gt.parent.remove(gt),this.fields[gt.name]=gt,gt.message=this,gt.onAdd(this),kt(this)}return gt instanceof et?(this.oneofs||(this.oneofs={}),this.oneofs[gt.name]=gt,gt.onAdd(this),kt(this)):_e.prototype.add.call(this,gt)},mt.prototype.remove=function(gt){if(gt instanceof tt&&gt.extend===void 0){if(!this.fields||this.fields[gt.name]!==gt)throw Error(gt+" is not a member of "+this);return delete this.fields[gt.name],gt.parent=null,gt.onRemove(this),kt(this)}if(gt instanceof et){if(!this.oneofs||this.oneofs[gt.name]!==gt)throw Error(gt+" is not a member of "+this);return delete this.oneofs[gt.name],gt.parent=null,gt.onRemove(this),kt(this)}return _e.prototype.remove.call(this,gt)},mt.prototype.isReservedId=function(gt){return _e.isReservedId(this.reserved,gt)},mt.prototype.isReservedName=function(gt){return _e.isReservedName(this.reserved,gt)},mt.prototype.create=function(gt){return new this.ctor(gt)},mt.prototype.setup=function(){for(var gt=this.fullName,St=[],yt=0;yt<this.fieldsArray.length;++yt)St.push(this._fieldsArray[yt].resolve().resolvedType);this.encode=lt(this)({Writer:st,types:St,util:at}),this.decode=dt(this)({Reader:ot,types:St,util:at}),this.verify=pt(this)({types:St,util:at}),this.fromObject=ht.fromObject(this)({types:St,util:at}),this.toObject=ht.toObject(this)({types:St,util:at});var Et=vt[gt];if(Et){var Tt=Object.create(this);Tt.fromObject=this.fromObject,this.fromObject=Et.fromObject.bind(Tt),Tt.toObject=this.toObject,this.toObject=Et.toObject.bind(Tt)}return this},mt.prototype.encode=function(gt,St){return this.setup().encode(gt,St)},mt.prototype.encodeDelimited=function(gt,St){return this.encode(gt,St&&St.len?St.fork():St).ldelim()},mt.prototype.decode=function(gt,St){return this.setup().decode(gt,St)},mt.prototype.decodeDelimited=function(gt){return gt instanceof ot||(gt=ot.create(gt)),this.decode(gt,gt.uint32())},mt.prototype.verify=function(gt){return this.setup().verify(gt)},mt.prototype.fromObject=function(gt){return this.setup().fromObject(gt)},mt.prototype.toObject=function(gt,St){return this.setup().toObject(gt,St)},mt.d=function(gt){return function(yt){at.decorateType(yt,gt)}},type}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1,root=st;var _e=requireNamespace();((st.prototype=Object.create(_e.prototype)).constructor=st).className="Root";var $=requireField(),et=require_enum(),tt=requireOneof(),nt=requireUtil(),rt,it,ot;function st(pt){_e.call(this,"",pt),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}st.fromJSON=function(ht,vt){return vt||(vt=new st),ht.options&&vt.setOptions(ht.options),vt.addJSON(ht.nested).resolveAll()},st.prototype.resolvePath=nt.path.resolve,st.prototype.fetch=nt.fetch;function at(){}st.prototype.load=function pt(ht,vt,mt){typeof vt=="function"&&(mt=vt,vt=void 0);var kt=this;if(!mt)return nt.asPromise(pt,kt,ht,vt);var bt=mt===at;function gt(xt,Pt){if(mt){if(bt)throw xt;Pt&&Pt.resolveAll();var At=mt;mt=null,At(xt,Pt)}}function St(xt){var Pt=xt.lastIndexOf("google/protobuf/");if(Pt>-1){var At=xt.substring(Pt);if(At in ot)return At}return null}function yt(xt,Pt){try{if(nt.isString(Pt)&&Pt.charAt(0)==="{"&&(Pt=JSON.parse(Pt)),!nt.isString(Pt))kt.setOptions(Pt.options).addJSON(Pt.nested);else{it.filename=xt;var At=it(Pt,kt,vt),Nt,Bt=0;if(At.imports)for(;Bt<At.imports.length;++Bt)(Nt=St(At.imports[Bt])||kt.resolvePath(xt,At.imports[Bt]))&&Et(Nt);if(At.weakImports)for(Bt=0;Bt<At.weakImports.length;++Bt)(Nt=St(At.weakImports[Bt])||kt.resolvePath(xt,At.weakImports[Bt]))&&Et(Nt,!0)}}catch(Jt){gt(Jt)}!bt&&!Tt&&gt(null,kt)}function Et(xt,Pt){if(xt=St(xt)||xt,!(kt.files.indexOf(xt)>-1)){if(kt.files.push(xt),xt in ot){bt?yt(xt,ot[xt]):(++Tt,setTimeout(function(){--Tt,yt(xt,ot[xt])}));return}if(bt){var At;try{At=nt.fs.readFileSync(xt).toString("utf8")}catch(Nt){Pt||gt(Nt);return}yt(xt,At)}else++Tt,kt.fetch(xt,function(Nt,Bt){if(--Tt,!!mt){if(Nt){Pt?Tt||gt(null,kt):gt(Nt);return}yt(xt,Bt)}})}}var Tt=0;nt.isString(ht)&&(ht=[ht]);for(var wt=0,Rt;wt<ht.length;++wt)(Rt=kt.resolvePath("",ht[wt]))&&Et(Rt);return bt?(kt.resolveAll(),kt):(Tt||gt(null,kt),kt)},st.prototype.loadSync=function(ht,vt){if(!nt.isNode)throw Error("not supported");return this.load(ht,vt,at)},st.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(ht){return"'extend "+ht.extend+"' in "+ht.parent.fullName}).join(", "));return _e.prototype.resolveAll.call(this)};var lt=/^[A-Z]/;function dt(pt,ht){var vt=ht.parent.lookup(ht.extend);if(vt){var mt=new $(ht.fullName,ht.id,ht.type,ht.rule,void 0,ht.options);return vt.get(mt.name)||(mt.declaringField=ht,ht.extensionField=mt,vt.add(mt)),!0}return!1}return st.prototype._handleAdd=function(ht){if(ht instanceof $)ht.extend!==void 0&&!ht.extensionField&&(dt(this,ht)||this.deferred.push(ht));else if(ht instanceof et)lt.test(ht.name)&&(ht.parent[ht.name]=ht.values);else if(!(ht instanceof tt)){if(ht instanceof rt)for(var vt=0;vt<this.deferred.length;)dt(this,this.deferred[vt])?this.deferred.splice(vt,1):++vt;for(var mt=0;mt<ht.nestedArray.length;++mt)this._handleAdd(ht._nestedArray[mt]);lt.test(ht.name)&&(ht.parent[ht.name]=ht)}(ht instanceof rt||ht instanceof et||ht instanceof $)&&(this._fullyQualifiedObjects[ht.fullName]=ht)},st.prototype._handleRemove=function(ht){if(ht instanceof $){if(ht.extend!==void 0)if(ht.extensionField)ht.extensionField.parent.remove(ht.extensionField),ht.extensionField=null;else{var vt=this.deferred.indexOf(ht);vt>-1&&this.deferred.splice(vt,1)}}else if(ht instanceof et)lt.test(ht.name)&&delete ht.parent[ht.name];else if(ht instanceof _e){for(var mt=0;mt<ht.nestedArray.length;++mt)this._handleRemove(ht._nestedArray[mt]);lt.test(ht.name)&&delete ht.parent[ht.name]}delete this._fullyQualifiedObjects[ht.fullName]},st._configure=function(pt,ht,vt){rt=pt,it=ht,ot=vt},root}var hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$2.exports;hasRequiredUtil=1;var _e=util$2.exports=requireMinimal(),$=roots,et,tt;_e.codegen=codegen_1,_e.fetch=fetch_1,_e.path=path,_e.fs=_e.inquire("fs"),_e.toArray=function(at){if(at){for(var lt=Object.keys(at),dt=new Array(lt.length),pt=0;pt<lt.length;)dt[pt]=at[lt[pt++]];return dt}return[]},_e.toObject=function(at){for(var lt={},dt=0;dt<at.length;){var pt=at[dt++],ht=at[dt++];ht!==void 0&&(lt[pt]=ht)}return lt};var nt=/\\/g,rt=/"/g;_e.isReserved=function(at){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(at)},_e.safeProp=function(at){return!/^[$\w_]+$/.test(at)||_e.isReserved(at)?'["'+at.replace(nt,"\\\\").replace(rt,'\\"')+'"]':"."+at},_e.ucFirst=function(at){return at.charAt(0).toUpperCase()+at.substring(1)};var it=/_([a-z])/g;_e.camelCase=function(at){return at.substring(0,1)+at.substring(1).replace(it,function(lt,dt){return dt.toUpperCase()})},_e.compareFieldsById=function(at,lt){return at.id-lt.id},_e.decorateType=function(at,lt){if(at.$type)return lt&&at.$type.name!==lt&&(_e.decorateRoot.remove(at.$type),at.$type.name=lt,_e.decorateRoot.add(at.$type)),at.$type;et||(et=requireType());var dt=new et(lt||at.name);return _e.decorateRoot.add(dt),dt.ctor=at,Object.defineProperty(at,"$type",{value:dt,enumerable:!1}),Object.defineProperty(at.prototype,"$type",{value:dt,enumerable:!1}),dt};var ot=0;return _e.decorateEnum=function(at){if(at.$type)return at.$type;tt||(tt=require_enum());var lt=new tt("Enum"+ot++,at);return _e.decorateRoot.add(lt),Object.defineProperty(at,"$type",{value:lt,enumerable:!1}),lt},_e.setProperty=function(at,lt,dt,pt){function ht(vt,mt,kt){var bt=mt.shift();if(bt==="__proto__"||bt==="prototype")return vt;if(mt.length>0)vt[bt]=ht(vt[bt]||{},mt,kt);else{var gt=vt[bt];if(gt&&pt)return vt;gt&&(kt=[].concat(gt).concat(kt)),vt[bt]=kt}return vt}if(typeof at!="object")throw TypeError("dst must be an object");if(!lt)throw TypeError("path must be specified");return lt=lt.split("."),ht(at,lt,dt)},Object.defineProperty(_e,"decorateRoot",{get:function(){return $.decorated||($.decorated=new(requireRoot()))}}),util$2.exports}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(_e){var $=_e,et=requireUtil(),tt=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function nt(rt,it){var ot=0,st={};for(it|=0;ot<rt.length;)st[tt[ot+it]]=rt[ot++];return st}$.basic=nt([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),$.defaults=nt([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",et.emptyArray,null]),$.long=nt([0,0,0,1,1],7),$.mapKey=nt([0,0,0,5,5,0,0,0,1,1,0,2],2),$.packed=nt([1,5,0,0,0,5,5,0,0,0,1,1,0])}(types$1)),types$1}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=it;var _e=requireObject();((it.prototype=Object.create(_e.prototype)).constructor=it).className="Field";var $=require_enum(),et=requireTypes(),tt=requireUtil(),nt,rt=/^required|optional|repeated$/;it.fromJSON=function(st,at){var lt=new it(st,at.id,at.type,at.rule,at.extend,at.options,at.comment);return at.edition&&(lt._edition=at.edition),lt._defaultEdition="proto3",lt};function it(ot,st,at,lt,dt,pt,ht){if(tt.isObject(lt)?(ht=dt,pt=lt,lt=dt=void 0):tt.isObject(dt)&&(ht=pt,pt=dt,dt=void 0),_e.call(this,ot,pt),!tt.isInteger(st)||st<0)throw TypeError("id must be a non-negative integer");if(!tt.isString(at))throw TypeError("type must be a string");if(lt!==void 0&&!rt.test(lt=lt.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(dt!==void 0&&!tt.isString(dt))throw TypeError("extend must be a string");lt==="proto3_optional"&&(lt="optional"),this.rule=lt&&lt!=="optional"?lt:void 0,this.type=at,this.id=st,this.extend=dt||void 0,this.repeated=lt==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=tt.Long?et.long[at]!==void 0:!1,this.bytes=at==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=ht}return Object.defineProperty(it.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}}),Object.defineProperty(it.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(it.prototype,"delimited",{get:function(){return this.resolvedType instanceof nt&&this._features.message_encoding==="DELIMITED"}}),Object.defineProperty(it.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}}),Object.defineProperty(it.prototype,"hasPresence",{get:function(){return this.repeated||this.map?!1:this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}}),it.prototype.setOption=function(st,at,lt){return _e.prototype.setOption.call(this,st,at,lt)},it.prototype.toJSON=function(st){var at=st?!!st.keepComments:!1;return tt.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",at?this.comment:void 0])},it.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=et.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof nt?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof $&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof $)&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=tt.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var st;tt.base64.test(this.typeDefault)?tt.base64.decode(this.typeDefault,st=tt.newBuffer(tt.base64.length(this.typeDefault)),0):tt.utf8.write(this.typeDefault,st=tt.newBuffer(tt.utf8.length(this.typeDefault)),0),this.typeDefault=st}return this.map?this.defaultValue=tt.emptyObject:this.repeated?this.defaultValue=tt.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof nt&&(this.parent.ctor.prototype[this.name]=this.defaultValue),_e.prototype.resolve.call(this)},it.prototype._inferLegacyProtoFeatures=function(st){if(st!=="proto2"&&st!=="proto3")return{};var at={};if(this.rule==="required"&&(at.field_presence="LEGACY_REQUIRED"),this.parent&&et.defaults[this.type]===void 0){var lt=this.parent.get(this.type.split(".").pop());lt&&lt instanceof nt&&lt.group&&(at.message_encoding="DELIMITED")}return this.getOption("packed")===!0?at.repeated_field_encoding="PACKED":this.getOption("packed")===!1&&(at.repeated_field_encoding="EXPANDED"),at},it.prototype._resolveFeatures=function(st){return _e.prototype._resolveFeatures.call(this,this._edition||st)},it.d=function(st,at,lt,dt){return typeof at=="function"?at=tt.decorateType(at).name:at&&typeof at=="object"&&(at=tt.decorateEnum(at).name),function(ht,vt){tt.decorateType(ht.constructor).add(new it(vt,st,at,lt,{default:dt}))}},it._configure=function(st){nt=st},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=tt;var _e=requireObject();((tt.prototype=Object.create(_e.prototype)).constructor=tt).className="OneOf";var $=requireField(),et=requireUtil();function tt(rt,it,ot,st){if(Array.isArray(it)||(ot=it,it=void 0),_e.call(this,rt,ot),!(it===void 0||Array.isArray(it)))throw TypeError("fieldNames must be an Array");this.oneof=it||[],this.fieldsArray=[],this.comment=st}tt.fromJSON=function(it,ot){return new tt(it,ot.oneof,ot.options,ot.comment)},tt.prototype.toJSON=function(it){var ot=it?!!it.keepComments:!1;return et.toObject(["options",this.options,"oneof",this.oneof,"comment",ot?this.comment:void 0])};function nt(rt){if(rt.parent)for(var it=0;it<rt.fieldsArray.length;++it)rt.fieldsArray[it].parent||rt.parent.add(rt.fieldsArray[it])}return tt.prototype.add=function(it){if(!(it instanceof $))throw TypeError("field must be a Field");return it.parent&&it.parent!==this.parent&&it.parent.remove(it),this.oneof.push(it.name),this.fieldsArray.push(it),it.partOf=this,nt(this),this},tt.prototype.remove=function(it){if(!(it instanceof $))throw TypeError("field must be a Field");var ot=this.fieldsArray.indexOf(it);if(ot<0)throw Error(it+" is not a member of "+this);return this.fieldsArray.splice(ot,1),ot=this.oneof.indexOf(it.name),ot>-1&&this.oneof.splice(ot,1),it.partOf=null,this},tt.prototype.onAdd=function(it){_e.prototype.onAdd.call(this,it);for(var ot=this,st=0;st<this.oneof.length;++st){var at=it.get(this.oneof[st]);at&&!at.partOf&&(at.partOf=ot,ot.fieldsArray.push(at))}nt(this)},tt.prototype.onRemove=function(it){for(var ot=0,st;ot<this.fieldsArray.length;++ot)(st=this.fieldsArray[ot]).parent&&st.parent.remove(st);_e.prototype.onRemove.call(this,it)},Object.defineProperty(tt.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1)return!1;var rt=this.fieldsArray[0];return rt.options!=null&&rt.options.proto3_optional===!0}}),tt.d=function(){for(var it=new Array(arguments.length),ot=0;ot<arguments.length;)it[ot]=arguments[ot++];return function(at,lt){et.decorateType(at.constructor).add(new tt(lt,it)),Object.defineProperty(at,lt,{get:et.oneOfGetter(it),set:et.oneOfSetter(it)})}},oneof}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=it,it.className="ReflectionObject";const _e=requireOneof();var $=requireUtil(),et,tt={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},nt={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},rt={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function it(ot,st){if(!$.isString(ot))throw TypeError("name must be a string");if(st&&!$.isObject(st))throw TypeError("options must be an object");this.options=st,this.parsedOptions=null,this.name=ot,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(it.prototype,{root:{get:function(){for(var ot=this;ot.parent!==null;)ot=ot.parent;return ot}},fullName:{get:function(){for(var ot=[this.name],st=this.parent;st;)ot.unshift(st.name),st=st.parent;return ot.join(".")}}}),it.prototype.toJSON=function(){throw Error()},it.prototype.onAdd=function(st){this.parent&&this.parent!==st&&this.parent.remove(this),this.parent=st,this.resolved=!1;var at=st.root;at instanceof et&&at._handleAdd(this)},it.prototype.onRemove=function(st){var at=st.root;at instanceof et&&at._handleRemove(this),this.parent=null,this.resolved=!1},it.prototype.resolve=function(){return this.resolved?this:(this.root instanceof et&&(this.resolved=!0),this)},it.prototype._resolveFeaturesRecursive=function(st){return this._resolveFeatures(this._edition||st)},it.prototype._resolveFeatures=function(st){if(!this._featuresResolved){var at={};if(!st)throw new Error("Unknown edition for "+this.fullName);var lt=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(st));if(this._edition){if(st==="proto2")at=Object.assign({},nt);else if(st==="proto3")at=Object.assign({},rt);else if(st==="2023")at=Object.assign({},tt);else throw new Error("Unknown edition: "+st);this._features=Object.assign(at,lt||{}),this._featuresResolved=!0;return}if(this.partOf instanceof _e){var dt=Object.assign({},this.partOf._features);this._features=Object.assign(dt,lt||{})}else if(!this.declaringField)if(this.parent){var pt=Object.assign({},this.parent._features);this._features=Object.assign(pt,lt||{})}else throw new Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},it.prototype._inferLegacyProtoFeatures=function(){return{}},it.prototype.getOption=function(st){if(this.options)return this.options[st]},it.prototype.setOption=function(st,at,lt){return this.options||(this.options={}),/^features\./.test(st)?$.setProperty(this.options,st,at,lt):(!lt||this.options[st]===void 0)&&(this.getOption(st)!==at&&(this.resolved=!1),this.options[st]=at),this},it.prototype.setParsedOption=function(st,at,lt){this.parsedOptions||(this.parsedOptions=[]);var dt=this.parsedOptions;if(lt){var pt=dt.find(function(mt){return Object.prototype.hasOwnProperty.call(mt,st)});if(pt){var ht=pt[st];$.setProperty(ht,lt,at)}else pt={},pt[st]=$.setProperty({},lt,at),dt.push(pt)}else{var vt={};vt[st]=at,dt.push(vt)}return this},it.prototype.setOptions=function(st,at){if(st)for(var lt=Object.keys(st),dt=0;dt<lt.length;++dt)this.setOption(lt[dt],st[lt[dt]],at);return this},it.prototype.toString=function(){var st=this.constructor.className,at=this.fullName;return at.length?st+" "+at:st},it.prototype._editionToJSON=function(){if(!(!this._edition||this._edition==="proto3"))return this._edition},it._configure=function(ot){et=ot},object}var _enum,hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,_enum=tt;var _e=requireObject();((tt.prototype=Object.create(_e.prototype)).constructor=tt).className="Enum";var $=requireNamespace(),et=requireUtil();function tt(nt,rt,it,ot,st,at){if(_e.call(this,nt,it),rt&&typeof rt!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=ot,this.comments=st||{},this.valuesOptions=at,this._valuesFeatures={},this.reserved=void 0,rt)for(var lt=Object.keys(rt),dt=0;dt<lt.length;++dt)typeof rt[lt[dt]]=="number"&&(this.valuesById[this.values[lt[dt]]=rt[lt[dt]]]=lt[dt])}return tt.prototype._resolveFeatures=function(rt){return rt=this._edition||rt,_e.prototype._resolveFeatures.call(this,rt),Object.keys(this.values).forEach(it=>{var ot=Object.assign({},this._features);this._valuesFeatures[it]=Object.assign(ot,this.valuesOptions&&this.valuesOptions[it]&&this.valuesOptions[it].features)}),this},tt.fromJSON=function(rt,it){var ot=new tt(rt,it.values,it.options,it.comment,it.comments);return ot.reserved=it.reserved,it.edition&&(ot._edition=it.edition),ot._defaultEdition="proto3",ot},tt.prototype.toJSON=function(rt){var it=rt?!!rt.keepComments:!1;return et.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",it?this.comment:void 0,"comments",it?this.comments:void 0])},tt.prototype.add=function(rt,it,ot,st){if(!et.isString(rt))throw TypeError("name must be a string");if(!et.isInteger(it))throw TypeError("id must be an integer");if(this.values[rt]!==void 0)throw Error("duplicate name '"+rt+"' in "+this);if(this.isReservedId(it))throw Error("id "+it+" is reserved in "+this);if(this.isReservedName(rt))throw Error("name '"+rt+"' is reserved in "+this);if(this.valuesById[it]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+it+" in "+this);this.values[rt]=it}else this.valuesById[this.values[rt]=it]=rt;return st&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[rt]=st||null),this.comments[rt]=ot||null,this},tt.prototype.remove=function(rt){if(!et.isString(rt))throw TypeError("name must be a string");var it=this.values[rt];if(it==null)throw Error("name '"+rt+"' does not exist in "+this);return delete this.valuesById[it],delete this.values[rt],delete this.comments[rt],this.valuesOptions&&delete this.valuesOptions[rt],this},tt.prototype.isReservedId=function(rt){return $.isReservedId(this.reserved,rt)},tt.prototype.isReservedName=function(rt){return $.isReservedName(this.reserved,rt)},_enum}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=nt;var _e=require_enum(),$=requireTypes(),et=requireUtil();function tt(rt,it,ot,st){return it.delimited?rt("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",ot,st,(it.id<<3|3)>>>0,(it.id<<3|4)>>>0):rt("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",ot,st,(it.id<<3|2)>>>0)}function nt(rt){for(var it=et.codegen(["m","w"],rt.name+"$encode")("if(!w)")("w=Writer.create()"),ot,st,at=rt.fieldsArray.slice().sort(et.compareFieldsById),ot=0;ot<at.length;++ot){var lt=at[ot].resolve(),dt=rt._fieldsArray.indexOf(lt),pt=lt.resolvedType instanceof _e?"int32":lt.type,ht=$.basic[pt];st="m"+et.safeProp(lt.name),lt.map?(it("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",st,lt.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",st)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(lt.id<<3|2)>>>0,8|$.mapKey[lt.keyType],lt.keyType),ht===void 0?it("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",dt,st):it(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|ht,pt,st),it("}")("}")):lt.repeated?(it("if(%s!=null&&%s.length){",st,st),lt.packed&&$.packed[pt]!==void 0?it("w.uint32(%i).fork()",(lt.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",st)("w.%s(%s[i])",pt,st)("w.ldelim()"):(it("for(var i=0;i<%s.length;++i)",st),ht===void 0?tt(it,lt,dt,st+"[i]"):it("w.uint32(%i).%s(%s[i])",(lt.id<<3|ht)>>>0,pt,st)),it("}")):(lt.optional&&it("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",st,lt.name),ht===void 0?tt(it,lt,dt,st):it("w.uint32(%i).%s(%s)",(lt.id<<3|ht)>>>0,pt,st))}return it("return w")}return encoder_1}var protobuf$2=indexLight.exports=indexMinimal;protobuf$2.build="light";function load(_e,$,et){return typeof $=="function"?(et=$,$=new protobuf$2.Root):$||($=new protobuf$2.Root),$.load(_e,et)}protobuf$2.load=load;function loadSync(_e,$){return $||($=new protobuf$2.Root),$.loadSync(_e)}protobuf$2.loadSync=loadSync;protobuf$2.encoder=requireEncoder();protobuf$2.decoder=requireDecoder();protobuf$2.verifier=requireVerifier();protobuf$2.converter=requireConverter();protobuf$2.ReflectionObject=requireObject();protobuf$2.Namespace=requireNamespace();protobuf$2.Root=requireRoot();protobuf$2.Enum=require_enum();protobuf$2.Type=requireType();protobuf$2.Field=requireField();protobuf$2.OneOf=requireOneof();protobuf$2.MapField=requireMapfield();protobuf$2.Service=requireService();protobuf$2.Method=requireMethod();protobuf$2.Message=message;protobuf$2.wrappers=wrappers;protobuf$2.types=requireTypes();protobuf$2.util=requireUtil();protobuf$2.ReflectionObject._configure(protobuf$2.Root);protobuf$2.Namespace._configure(protobuf$2.Type,protobuf$2.Service,protobuf$2.Enum);protobuf$2.Root._configure(protobuf$2.Type);protobuf$2.Field._configure(protobuf$2.Type);var indexLightExports=indexLight.exports,tokenize_1=tokenize$1,delimRe=/[\s{}=;:[\],'"()<>]/g,stringDoubleRe=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,stringSingleRe=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,setCommentRe=/^ *[*/]+ */,setCommentAltRe=/^\s*\*?\/*/,setCommentSplitRe=/\n/g,whitespaceRe=/\s/,unescapeRe=/\\(.?)/g,unescapeMap={0:"\0",r:"\r",n:`
`,t:"	"};function unescape(_e){return _e.replace(unescapeRe,function($,et){switch(et){case"\\":case"":return et;default:return unescapeMap[et]||""}})}tokenize$1.unescape=unescape;function tokenize$1(_e,$){_e=_e.toString();var et=0,tt=_e.length,nt=1,rt=0,it={},ot=[],st=null;function at(yt){return Error("illegal "+yt+" (line "+nt+")")}function lt(){var yt=st==="'"?stringSingleRe:stringDoubleRe;yt.lastIndex=et-1;var Et=yt.exec(_e);if(!Et)throw at("string");return et=yt.lastIndex,kt(st),st=null,unescape(Et[1])}function dt(yt){return _e.charAt(yt)}function pt(yt,Et,Tt){var wt={type:_e.charAt(yt++),lineEmpty:!1,leading:Tt},Rt;$?Rt=2:Rt=3;var xt=yt-Rt,Pt;do if(--xt<0||(Pt=_e.charAt(xt))===`
`){wt.lineEmpty=!0;break}while(Pt===" "||Pt==="	");for(var At=_e.substring(yt,Et).split(setCommentSplitRe),Nt=0;Nt<At.length;++Nt)At[Nt]=At[Nt].replace($?setCommentAltRe:setCommentRe,"").trim();wt.text=At.join(`
`).trim(),it[nt]=wt,rt=nt}function ht(yt){var Et=vt(yt),Tt=_e.substring(yt,Et),wt=/^\s*\/\//.test(Tt);return wt}function vt(yt){for(var Et=yt;Et<tt&&dt(Et)!==`
`;)Et++;return Et}function mt(){if(ot.length>0)return ot.shift();if(st)return lt();var yt,Et,Tt,wt,Rt,xt=et===0;do{if(et===tt)return null;for(yt=!1;whitespaceRe.test(Tt=dt(et));)if(Tt===`
`&&(xt=!0,++nt),++et===tt)return null;if(dt(et)==="/"){if(++et===tt)throw at("comment");if(dt(et)==="/")if($){if(wt=et,Rt=!1,ht(et-1)){Rt=!0;do if(et=vt(et),et===tt||(et++,!xt))break;while(ht(et))}else et=Math.min(tt,vt(et)+1);Rt&&(pt(wt,et,xt),xt=!0),nt++,yt=!0}else{for(Rt=dt(wt=et+1)==="/";dt(++et)!==`
`;)if(et===tt)return null;++et,Rt&&(pt(wt,et-1,xt),xt=!0),++nt,yt=!0}else if((Tt=dt(et))==="*"){wt=et+1,Rt=$||dt(wt)==="*";do{if(Tt===`
`&&++nt,++et===tt)throw at("comment");Et=Tt,Tt=dt(et)}while(Et!=="*"||Tt!=="/");++et,Rt&&(pt(wt,et-2,xt),xt=!0),yt=!0}else return"/"}}while(yt);var Pt=et;delimRe.lastIndex=0;var At=delimRe.test(dt(Pt++));if(!At)for(;Pt<tt&&!delimRe.test(dt(Pt));)++Pt;var Nt=_e.substring(et,et=Pt);return(Nt==='"'||Nt==="'")&&(st=Nt),Nt}function kt(yt){ot.push(yt)}function bt(){if(!ot.length){var yt=mt();if(yt===null)return null;kt(yt)}return ot[0]}function gt(yt,Et){var Tt=bt(),wt=Tt===yt;if(wt)return mt(),!0;if(!Et)throw at("token '"+Tt+"', '"+yt+"' expected");return!1}function St(yt){var Et=null,Tt;return yt===void 0?(Tt=it[nt-1],delete it[nt-1],Tt&&($||Tt.type==="*"||Tt.lineEmpty)&&(Et=Tt.leading?Tt.text:null)):(rt<yt&&bt(),Tt=it[yt],delete it[yt],Tt&&!Tt.lineEmpty&&($||Tt.type==="/")&&(Et=Tt.leading?null:Tt.text)),Et}return Object.defineProperty({next:mt,peek:bt,push:kt,skip:gt,cmnt:St},"line",{get:function(){return nt}})}var parse_1=parse;parse.filename=null;parse.defaults={keepCase:!1};var tokenize=tokenize_1,Root=requireRoot(),Type=requireType(),Field=requireField(),MapField=requireMapfield(),OneOf=requireOneof(),Enum=require_enum(),Service=requireService(),Method=requireMethod(),ReflectionObject=requireObject(),types=requireTypes(),util=requireUtil(),base10Re=/^[1-9][0-9]*$/,base10NegRe=/^-?[1-9][0-9]*$/,base16Re=/^0[x][0-9a-fA-F]+$/,base16NegRe=/^-?0[x][0-9a-fA-F]+$/,base8Re=/^0[0-7]+$/,base8NegRe=/^-?0[0-7]+$/,numberRe=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,nameRe=/^[a-zA-Z_][a-zA-Z_0-9]*$/,typeRefRe=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function parse(_e,$,et){$ instanceof Root||(et=$,$=new Root),et||(et=parse.defaults);var tt=et.preferTrailingComment||!1,nt=tokenize(_e,et.alternateCommentMode||!1),rt=nt.next,it=nt.push,ot=nt.peek,st=nt.skip,at=nt.cmnt,lt=!0,dt,pt,ht,vt="proto2",mt=$,kt=[],bt={},gt=et.keepCase?function(Mt){return Mt}:util.camelCase;function St(){kt.forEach(Mt=>{Mt._edition=vt,Object.keys(bt).forEach(jt=>{Mt.getOption(jt)===void 0&&Mt.setOption(jt,bt[jt],!0)})})}function yt(Mt,jt,zt){var dn=parse.filename;return zt||(parse.filename=null),Error("illegal "+(jt||"token")+" '"+Mt+"' ("+(dn?dn+", ":"")+"line "+nt.line+")")}function Et(){var Mt=[],jt;do{if((jt=rt())!=='"'&&jt!=="'")throw yt(jt);Mt.push(rt()),st(jt),jt=ot()}while(jt==='"'||jt==="'");return Mt.join("")}function Tt(Mt){var jt=rt();switch(jt){case"'":case'"':return it(jt),Et();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return Rt(jt,!0)}catch{if(typeRefRe.test(jt))return jt;throw yt(jt,"value")}}function wt(Mt,jt){var zt,dn;do if(jt&&((zt=ot())==='"'||zt==="'")){var fn=Et();if(Mt.push(fn),vt>=2023)throw yt(fn,"id")}else try{Mt.push([dn=xt(rt()),st("to",!0)?xt(rt()):dn])}catch(pn){if(jt&&typeRefRe.test(zt)&&vt>=2023)Mt.push(zt);else throw pn}while(st(",",!0));var tn={options:void 0};tn.setOption=function(pn,gn){this.options===void 0&&(this.options={}),this.options[pn]=gn},ln(tn,function(gn){if(gn==="option")mn(tn,gn),st(";");else throw yt(gn)},function(){yn(tn)})}function Rt(Mt,jt){var zt=1;switch(Mt.charAt(0)==="-"&&(zt=-1,Mt=Mt.substring(1)),Mt){case"inf":case"INF":case"Inf":return zt*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(base10Re.test(Mt))return zt*parseInt(Mt,10);if(base16Re.test(Mt))return zt*parseInt(Mt,16);if(base8Re.test(Mt))return zt*parseInt(Mt,8);if(numberRe.test(Mt))return zt*parseFloat(Mt);throw yt(Mt,"number",jt)}function xt(Mt,jt){switch(Mt){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!jt&&Mt.charAt(0)==="-")throw yt(Mt,"id");if(base10NegRe.test(Mt))return parseInt(Mt,10);if(base16NegRe.test(Mt))return parseInt(Mt,16);if(base8NegRe.test(Mt))return parseInt(Mt,8);throw yt(Mt,"id")}function Pt(){if(dt!==void 0)throw yt("package");if(dt=rt(),!typeRefRe.test(dt))throw yt(dt,"name");mt=mt.define(dt),st(";")}function At(){var Mt=ot(),jt;switch(Mt){case"weak":jt=ht||(ht=[]),rt();break;case"public":rt();default:jt=pt||(pt=[]);break}Mt=Et(),st(";"),jt.push(Mt)}function Nt(){if(st("="),vt=Et(),vt<2023)throw yt(vt,"syntax");st(";")}function Bt(){if(st("="),vt=Et(),!["2023"].includes(vt))throw yt(vt,"edition");st(";")}function Jt(Mt,jt){switch(jt){case"option":return mn(Mt,jt),st(";"),!0;case"message":return on(Mt,jt),!0;case"enum":return sn(Mt,jt),!0;case"service":return En(Mt,jt),!0;case"extend":return nn(Mt,jt),!0}return!1}function ln(Mt,jt,zt){var dn=nt.line;if(Mt&&(typeof Mt.comment!="string"&&(Mt.comment=at()),Mt.filename=parse.filename),st("{",!0)){for(var fn;(fn=rt())!=="}";)jt(fn);st(";",!0)}else zt&&zt(),st(";"),Mt&&(typeof Mt.comment!="string"||tt)&&(Mt.comment=at(dn)||Mt.comment)}function on(Mt,jt){if(!nameRe.test(jt=rt()))throw yt(jt,"type name");var zt=new Type(jt);ln(zt,function(fn){if(!Jt(zt,fn))switch(fn){case"map":en(zt);break;case"required":if(vt!=="proto2")throw yt(fn);case"repeated":an(zt,fn);break;case"optional":if(vt==="proto3")an(zt,"proto3_optional");else{if(vt!=="proto2")throw yt(fn);an(zt,"optional")}break;case"oneof":rn(zt,fn);break;case"extensions":wt(zt.extensions||(zt.extensions=[]));break;case"reserved":wt(zt.reserved||(zt.reserved=[]),!0);break;default:if(vt==="proto2"||!typeRefRe.test(fn))throw yt(fn);it(fn),an(zt,"optional");break}}),Mt.add(zt),Mt===mt&&kt.push(zt)}function an(Mt,jt,zt){var dn=rt();if(dn==="group"){Lt(Mt,jt);return}for(;dn.endsWith(".")||ot().startsWith(".");)dn+=rt();if(!typeRefRe.test(dn))throw yt(dn,"type");var fn=rt();if(!nameRe.test(fn))throw yt(fn,"name");fn=gt(fn),st("=");var tn=new Field(fn,xt(rt()),dn,jt,zt);if(ln(tn,function(Tn){if(Tn==="option")mn(tn,Tn),st(";");else throw yt(Tn)},function(){yn(tn)}),jt==="proto3_optional"){var pn=new OneOf("_"+fn);tn.setOption("proto3_optional",!0),pn.add(tn),Mt.add(pn)}else Mt.add(tn);Mt===mt&&kt.push(tn)}function Lt(Mt,jt){if(vt>=2023)throw yt("group");var zt=rt();if(!nameRe.test(zt))throw yt(zt,"name");var dn=util.lcFirst(zt);zt===dn&&(zt=util.ucFirst(zt)),st("=");var fn=xt(rt()),tn=new Type(zt);tn.group=!0;var pn=new Field(dn,fn,zt,jt);pn.filename=parse.filename,ln(tn,function(Tn){switch(Tn){case"option":mn(tn,Tn),st(";");break;case"required":case"repeated":an(tn,Tn);break;case"optional":vt==="proto3"?an(tn,"proto3_optional"):an(tn,"optional");break;case"message":on(tn,Tn);break;case"enum":sn(tn,Tn);break;case"reserved":wt(tn.reserved||(tn.reserved=[]),!0);break;default:throw yt(Tn)}}),Mt.add(tn).add(pn)}function en(Mt){st("<");var jt=rt();if(types.mapKey[jt]===void 0)throw yt(jt,"type");st(",");var zt=rt();if(!typeRefRe.test(zt))throw yt(zt,"type");st(">");var dn=rt();if(!nameRe.test(dn))throw yt(dn,"name");st("=");var fn=new MapField(gt(dn),xt(rt()),jt,zt);ln(fn,function(pn){if(pn==="option")mn(fn,pn),st(";");else throw yt(pn)},function(){yn(fn)}),Mt.add(fn)}function rn(Mt,jt){if(!nameRe.test(jt=rt()))throw yt(jt,"name");var zt=new OneOf(gt(jt));ln(zt,function(fn){fn==="option"?(mn(zt,fn),st(";")):(it(fn),an(zt,"optional"))}),Mt.add(zt)}function sn(Mt,jt){if(!nameRe.test(jt=rt()))throw yt(jt,"name");var zt=new Enum(jt);ln(zt,function(fn){switch(fn){case"option":mn(zt,fn),st(";");break;case"reserved":wt(zt.reserved||(zt.reserved=[]),!0),zt.reserved===void 0&&(zt.reserved=[]);break;default:hn(zt,fn)}}),Mt.add(zt),Mt===mt&&kt.push(zt)}function hn(Mt,jt){if(!nameRe.test(jt))throw yt(jt,"name");st("=");var zt=xt(rt(),!0),dn={options:void 0};dn.getOption=function(fn){return this.options[fn]},dn.setOption=function(fn,tn){ReflectionObject.prototype.setOption.call(dn,fn,tn)},dn.setParsedOption=function(){},ln(dn,function(tn){if(tn==="option")mn(dn,tn),st(";");else throw yt(tn)},function(){yn(dn)}),Mt.add(jt,zt,dn.comment,dn.parsedOptions||dn.options)}function mn(Mt,jt){var zt,dn,fn=!0;for(jt==="option"&&(jt=rt());jt!=="=";){if(jt==="("){var tn=rt();st(")"),jt="("+tn+")"}if(fn){if(fn=!1,jt.includes(".")&&!jt.includes("(")){var pn=jt.split(".");zt=pn[0]+".",jt=pn[1];continue}zt=jt}else dn=dn?dn+=jt:jt;jt=rt()}var gn=dn?zt.concat(dn):zt,Tn=wn(Mt,gn);dn=dn&&dn[0]==="."?dn.slice(1):dn,zt=zt&&zt[zt.length-1]==="."?zt.slice(0,-1):zt,kn(Mt,zt,Tn,dn)}function wn(Mt,jt){if(st("{",!0)){for(var zt={};!st("}",!0);){if(!nameRe.test(un=rt()))throw yt(un,"name");if(un===null)throw yt(un,"end of input");var dn,fn=un;if(st(":",!0),ot()==="{")dn=wn(Mt,jt+"."+un);else if(ot()==="["){dn=[];var tn;if(st("[",!0)){do tn=Tt(),dn.push(tn);while(st(",",!0));st("]"),typeof tn<"u"&&Cn(Mt,jt+"."+un,tn)}}else dn=Tt(),Cn(Mt,jt+"."+un,dn);var pn=zt[fn];pn&&(dn=[].concat(pn).concat(dn)),zt[fn]=dn,st(",",!0),st(";",!0)}return zt}var gn=Tt();return Cn(Mt,jt,gn),gn}function Cn(Mt,jt,zt){if(mt===Mt&&/^features\./.test(jt)){bt[jt]=zt;return}Mt.setOption&&Mt.setOption(jt,zt)}function kn(Mt,jt,zt,dn){Mt.setParsedOption&&Mt.setParsedOption(jt,zt,dn)}function yn(Mt){if(st("[",!0)){do mn(Mt,"option");while(st(",",!0));st("]")}return Mt}function En(Mt,jt){if(!nameRe.test(jt=rt()))throw yt(jt,"service name");var zt=new Service(jt);ln(zt,function(fn){if(!Jt(zt,fn))if(fn==="rpc")vn(zt,fn);else throw yt(fn)}),Mt.add(zt),Mt===mt&&kt.push(zt)}function vn(Mt,jt){var zt=at(),dn=jt;if(!nameRe.test(jt=rt()))throw yt(jt,"name");var fn=jt,tn,pn,gn,Tn;if(st("("),st("stream",!0)&&(pn=!0),!typeRefRe.test(jt=rt())||(tn=jt,st(")"),st("returns"),st("("),st("stream",!0)&&(Tn=!0),!typeRefRe.test(jt=rt())))throw yt(jt);gn=jt,st(")");var In=new Method(fn,dn,tn,gn,pn,Tn);In.comment=zt,ln(In,function(Rn){if(Rn==="option")mn(In,Rn),st(";");else throw yt(Rn)}),Mt.add(In)}function nn(Mt,jt){if(!typeRefRe.test(jt=rt()))throw yt(jt,"reference");var zt=jt;ln(null,function(fn){switch(fn){case"required":case"repeated":an(Mt,fn,zt);break;case"optional":vt==="proto3"?an(Mt,"proto3_optional",zt):an(Mt,"optional",zt);break;default:if(vt==="proto2"||!typeRefRe.test(fn))throw yt(fn);it(fn),an(Mt,"optional",zt);break}})}for(var un;(un=rt())!==null;)switch(un){case"package":if(!lt)throw yt(un);Pt();break;case"import":if(!lt)throw yt(un);At();break;case"syntax":if(!lt)throw yt(un);Nt();break;case"edition":if(!lt)throw yt(un);Bt();break;case"option":mn(mt,un),st(";",!0);break;default:if(Jt(mt,un)){lt=!1;continue}throw yt(un)}return St(),parse.filename=null,{package:dt,imports:pt,weakImports:ht,root:$}}var common_1=common,commonRe=/\/|\./;function common(_e,$){commonRe.test(_e)||(_e="google/protobuf/"+_e+".proto",$={nested:{google:{nested:{protobuf:{nested:$}}}}}),common[_e]=$}common("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var timeType;common("duration",{Duration:timeType={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});common("timestamp",{Timestamp:timeType});common("empty",{Empty:{fields:{}}});common("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});common("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});common("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});common.get=function _e($){return common[$]||null};var protobuf$1=src.exports=indexLightExports;protobuf$1.build="full";protobuf$1.tokenize=tokenize_1;protobuf$1.parse=parse_1;protobuf$1.common=common_1;protobuf$1.Root._configure(protobuf$1.Type,protobuf$1.parse,protobuf$1.common);var srcExports=src.exports,protobufjs=srcExports;const protobuf=getDefaultExportFromCjs$1(protobufjs);var extendStatics=function(_e,$){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,tt){et.__proto__=tt}||function(et,tt){for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])},extendStatics(_e,$)};function __extends(_e,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");extendStatics(_e,$);function et(){this.constructor=_e}_e.prototype=$===null?Object.create($):(et.prototype=$.prototype,new et)}var __assign=function(){return __assign=Object.assign||function($){for(var et,tt=1,nt=arguments.length;tt<nt;tt++){et=arguments[tt];for(var rt in et)Object.prototype.hasOwnProperty.call(et,rt)&&($[rt]=et[rt])}return $},__assign.apply(this,arguments)};function __awaiter(_e,$,et,tt){function nt(rt){return rt instanceof et?rt:new et(function(it){it(rt)})}return new(et||(et=Promise))(function(rt,it){function ot(lt){try{at(tt.next(lt))}catch(dt){it(dt)}}function st(lt){try{at(tt.throw(lt))}catch(dt){it(dt)}}function at(lt){lt.done?rt(lt.value):nt(lt.value).then(ot,st)}at((tt=tt.apply(_e,$||[])).next())})}function __generator(_e,$){var et={label:0,sent:function(){if(rt[0]&1)throw rt[1];return rt[1]},trys:[],ops:[]},tt,nt,rt,it;return it={next:ot(0),throw:ot(1),return:ot(2)},typeof Symbol=="function"&&(it[Symbol.iterator]=function(){return this}),it;function ot(at){return function(lt){return st([at,lt])}}function st(at){if(tt)throw new TypeError("Generator is already executing.");for(;it&&(it=0,at[0]&&(et=0)),et;)try{if(tt=1,nt&&(rt=at[0]&2?nt.return:at[0]?nt.throw||((rt=nt.return)&&rt.call(nt),0):nt.next)&&!(rt=rt.call(nt,at[1])).done)return rt;switch(nt=0,rt&&(at=[at[0]&2,rt.value]),at[0]){case 0:case 1:rt=at;break;case 4:return et.label++,{value:at[1],done:!1};case 5:et.label++,nt=at[1],at=[0];continue;case 7:at=et.ops.pop(),et.trys.pop();continue;default:if(rt=et.trys,!(rt=rt.length>0&&rt[rt.length-1])&&(at[0]===6||at[0]===2)){et=0;continue}if(at[0]===3&&(!rt||at[1]>rt[0]&&at[1]<rt[3])){et.label=at[1];break}if(at[0]===6&&et.label<rt[1]){et.label=rt[1],rt=at;break}if(rt&&et.label<rt[2]){et.label=rt[2],et.ops.push(at);break}rt[2]&&et.ops.pop(),et.trys.pop();continue}at=$.call(_e,et)}catch(lt){at=[6,lt],nt=0}finally{tt=rt=0}if(at[0]&5)throw at[1];return{value:at[0]?at[1]:void 0,done:!0}}}typeof SuppressedError=="function"&&SuppressedError;var options={syntax:"proto3"},nested={pipecat:{nested:{TextFrame:{fields:{id:{type:"uint64",id:1},name:{type:"string",id:2},text:{type:"string",id:3}}},AudioRawFrame:{fields:{id:{type:"uint64",id:1},name:{type:"string",id:2},audio:{type:"bytes",id:3},sampleRate:{type:"uint32",id:4},numChannels:{type:"uint32",id:5}}},TranscriptionFrame:{fields:{id:{type:"uint64",id:1},name:{type:"string",id:2},text:{type:"string",id:3},userId:{type:"string",id:4},timestamp:{type:"string",id:5}}},Frame:{oneofs:{frame:{oneof:["text","audio","transcription"]}},fields:{text:{type:"TextFrame",id:1},audio:{type:"AudioRawFrame",id:2},transcription:{type:"TranscriptionFrame",id:3}}}}}},jsonDescriptor={options,nested},ConnectionQuality;(function(_e){_e.UNKNOWN="UNKNOWN",_e.GOOD="GOOD",_e.BAD="BAD"})(ConnectionQuality||(ConnectionQuality={}));var AbstractConnectionQualityIndicator=function(){function _e($){this._connectionQuality=ConnectionQuality.UNKNOWN,this.onConnectionQualityChanged=$}return Object.defineProperty(_e.prototype,"connectionQuality",{get:function(){return this._connectionQuality},enumerable:!1,configurable:!0}),_e.prototype.handleStatsChanged=function(){var $=this.calculateConnectionQuality();$!==this._connectionQuality&&(this._connectionQuality=$,this.onConnectionQualityChanged($))},_e.prototype.start=function($){this.stop(!0),this._start($)},_e.prototype.stop=function($){$===void 0&&($=!1),this._stop(),this._connectionQuality=ConnectionQuality.UNKNOWN,$||this.onConnectionQualityChanged(ConnectionQuality.UNKNOWN)},_e}();function QualityIndicatorMixer(){for(var _e=[],$=0;$<arguments.length;$++)_e[$]=arguments[$];var et=function(tt){__extends(nt,tt);function nt(rt){var it=tt.call(this,rt)||this;return it.childTrackers=_e.map(function(ot){var st=ot.getParams,at=ot.TrackerClass;return{tracker:new at(function(){return it.handleStatsChanged()}),getParams:st}}),it}return nt.prototype.calculateConnectionQuality=function(){var rt=this.childTrackers.map(function(it){var ot=it.tracker;return ot.connectionQuality});return rt.some(function(it){return it===ConnectionQuality.BAD})?ConnectionQuality.BAD:rt.every(function(it){return it===ConnectionQuality.UNKNOWN})?ConnectionQuality.UNKNOWN:ConnectionQuality.GOOD},nt.prototype._start=function(rt){this.childTrackers.forEach(function(it){var ot=it.tracker,st=it.getParams;return ot.start(st(rt))})},nt.prototype._stop=function(){this.childTrackers.forEach(function(rt){var it=rt.tracker;return it.stop(!0)})},nt}(AbstractConnectionQualityIndicator);return et}var LiveKitConnectionQualityIndicator=function(_e){__extends($,_e);function $(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.room=null,et.liveKitConnectionQuality=ConnectionQuality$2.Unknown,et.liveKitConnectionState=null,et.handleConnectionQualityChanged=function(tt){et.liveKitConnectionQuality=tt,et.handleStatsChanged()},et.handleConnectionStateChanged=function(tt){et.liveKitConnectionState=tt,et.handleStatsChanged()},et}return $.prototype._start=function(et){this.room=et,this.room.localParticipant.on(ParticipantEvent.ConnectionQualityChanged,this.handleConnectionQualityChanged),this.room.on(RoomEvent.ConnectionStateChanged,this.handleConnectionStateChanged)},$.prototype._stop=function(){this.room&&(this.room.localParticipant.off(RoomEvent.ConnectionQualityChanged,this.handleConnectionQualityChanged),this.room.off(RoomEvent.ConnectionStateChanged,this.handleConnectionStateChanged))},$.prototype.calculateConnectionQuality=function(){return[ConnectionQuality$2.Lost,ConnectionQuality$2.Poor].includes(this.liveKitConnectionQuality)||this.liveKitConnectionState&&[ConnectionState.Disconnected,ConnectionState.Reconnecting,ConnectionState.SignalReconnecting].includes(this.liveKitConnectionState)?ConnectionQuality.BAD:ConnectionQuality.GOOD},$}(AbstractConnectionQualityIndicator),t,e,s,n;function r(){}function o(){o.init.call(this)}function i(_e){return _e._maxListeners===void 0?o.defaultMaxListeners:_e._maxListeners}function a(_e,$,et){if($)_e.call(et);else for(var tt=_e.length,nt=m(_e,tt),rt=0;rt<tt;++rt)nt[rt].call(et)}function c(_e,$,et,tt){if($)_e.call(et,tt);else for(var nt=_e.length,rt=m(_e,nt),it=0;it<nt;++it)rt[it].call(et,tt)}function d(_e,$,et,tt,nt){if($)_e.call(et,tt,nt);else for(var rt=_e.length,it=m(_e,rt),ot=0;ot<rt;++ot)it[ot].call(et,tt,nt)}function u(_e,$,et,tt,nt,rt){if($)_e.call(et,tt,nt,rt);else for(var it=_e.length,ot=m(_e,it),st=0;st<it;++st)ot[st].call(et,tt,nt,rt)}function h(_e,$,et,tt){if($)_e.apply(et,tt);else for(var nt=_e.length,rt=m(_e,nt),it=0;it<nt;++it)rt[it].apply(et,tt)}function l(_e,$,et,tt){var nt,rt,it,ot;if(typeof et!="function")throw new TypeError('"listener" argument must be a function');if((rt=_e._events)?(rt.newListener&&(_e.emit("newListener",$,et.listener?et.listener:et),rt=_e._events),it=rt[$]):(rt=_e._events=new r,_e._eventsCount=0),it){if(typeof it=="function"?it=rt[$]=tt?[et,it]:[it,et]:tt?it.unshift(et):it.push(et),!it.warned&&(nt=i(_e))&&nt>0&&it.length>nt){it.warned=!0;var st=new Error("Possible EventEmitter memory leak detected. "+it.length+" "+$+" listeners added. Use emitter.setMaxListeners() to increase limit");st.name="MaxListenersExceededWarning",st.emitter=_e,st.type=$,st.count=it.length,ot=st,typeof console.warn=="function"?console.warn(ot):console.log(ot)}}else it=rt[$]=et,++_e._eventsCount;return _e}function p(_e,$,et){var tt=!1;function nt(){_e.removeListener($,nt),tt||(tt=!0,et.apply(_e,arguments))}return nt.listener=et,nt}function f(_e){var $=this._events;if($){var et=$[_e];if(typeof et=="function")return 1;if(et)return et.length}return 0}function m(_e,$){for(var et=new Array($);$--;)et[$]=_e[$];return et}r.prototype=Object.create(null),o.EventEmitter=o,o.usingDomains=!1,o.prototype.domain=void 0,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.init=function(){this.domain=null,o.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new r,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(_e){if(typeof _e!="number"||_e<0||isNaN(_e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=_e,this},o.prototype.getMaxListeners=function(){return i(this)},o.prototype.emit=function(_e){var $,et,tt,nt,rt,it,ot,st=_e==="error";if(it=this._events)st=st&&it.error==null;else if(!st)return!1;if(ot=this.domain,st){if($=arguments[1],!ot){if($ instanceof Error)throw $;var at=new Error('Uncaught, unspecified "error" event. ('+$+")");throw at.context=$,at}return $||($=new Error('Uncaught, unspecified "error" event')),$.domainEmitter=this,$.domain=ot,$.domainThrown=!1,ot.emit("error",$),!1}if(!(et=it[_e]))return!1;var lt=typeof et=="function";switch(tt=arguments.length){case 1:a(et,lt,this);break;case 2:c(et,lt,this,arguments[1]);break;case 3:d(et,lt,this,arguments[1],arguments[2]);break;case 4:u(et,lt,this,arguments[1],arguments[2],arguments[3]);break;default:for(nt=new Array(tt-1),rt=1;rt<tt;rt++)nt[rt-1]=arguments[rt];h(et,lt,this,nt)}return!0},o.prototype.addListener=function(_e,$){return l(this,_e,$,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(_e,$){return l(this,_e,$,!0)},o.prototype.once=function(_e,$){if(typeof $!="function")throw new TypeError('"listener" argument must be a function');return this.on(_e,p(this,_e,$)),this},o.prototype.prependOnceListener=function(_e,$){if(typeof $!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(_e,p(this,_e,$)),this},o.prototype.removeListener=function(_e,$){var et,tt,nt,rt,it;if(typeof $!="function")throw new TypeError('"listener" argument must be a function');if(!(tt=this._events))return this;if(!(et=tt[_e]))return this;if(et===$||et.listener&&et.listener===$)--this._eventsCount==0?this._events=new r:(delete tt[_e],tt.removeListener&&this.emit("removeListener",_e,et.listener||$));else if(typeof et!="function"){for(nt=-1,rt=et.length;rt-- >0;)if(et[rt]===$||et[rt].listener&&et[rt].listener===$){it=et[rt].listener,nt=rt;break}if(nt<0)return this;if(et.length===1){if(et[0]=void 0,--this._eventsCount==0)return this._events=new r,this;delete tt[_e]}else(function(ot,st){for(var at=st,lt=at+1,dt=ot.length;lt<dt;at+=1,lt+=1)ot[at]=ot[lt];ot.pop()})(et,nt);tt.removeListener&&this.emit("removeListener",_e,it||$)}return this},o.prototype.off=function(_e,$){return this.removeListener(_e,$)},o.prototype.removeAllListeners=function(_e){var $,et;if(!(et=this._events))return this;if(!et.removeListener)return arguments.length===0?(this._events=new r,this._eventsCount=0):et[_e]&&(--this._eventsCount==0?this._events=new r:delete et[_e]),this;if(arguments.length===0){for(var tt,nt=Object.keys(et),rt=0;rt<nt.length;++rt)(tt=nt[rt])!=="removeListener"&&this.removeAllListeners(tt);return this.removeAllListeners("removeListener"),this._events=new r,this._eventsCount=0,this}if(typeof($=et[_e])=="function")this.removeListener(_e,$);else if($)do this.removeListener(_e,$[$.length-1]);while($[0]);return this},o.prototype.listeners=function(_e){var $,et=this._events;return et&&($=et[_e])?typeof $=="function"?[$.listener||$]:function(tt){for(var nt=new Array(tt.length),rt=0;rt<nt.length;++rt)nt[rt]=tt[rt].listener||tt[rt];return nt}($):[]},o.listenerCount=function(_e,$){return typeof _e.listenerCount=="function"?_e.listenerCount($):f.call(_e,$)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};class g extends o{}(function(_e){_e.Issue="issue",_e.NetworkScoresUpdated="network-scores-updated",_e.StatsParsingFinished="stats-parsing-finished"})(t||(t={})),function(_e){_e.Network="network",_e.CPU="cpu",_e.Server="server",_e.Stream="stream"}(e||(e={})),function(_e){_e.OutboundNetworkQuality="outbound-network-quality",_e.InboundNetworkQuality="inbound-network-quality",_e.OutboundNetworkMediaLatency="outbound-network-media-latency",_e.InboundNetworkMediaLatency="inbound-network-media-latency",_e.NetworkMediaSyncFailure="network-media-sync-failure",_e.OutboundNetworkThroughput="outbound-network-throughput",_e.InboundNetworkThroughput="inbound-network-throughput",_e.EncoderCPUThrottling="encoder-cpu-throttling",_e.DecoderCPUThrottling="decoder-cpu-throttling",_e.ServerIssue="server-issue",_e.UnknownVideoDecoderIssue="unknown-video-decoder",_e.LowInboundMOS="low-inbound-mean-opinion-score",_e.LowOutboundMOS="low-outbound-mean-opinion-score",_e.FrozenVideoTrack="frozen-video-track",_e.MissingVideoStreamData="missing-video-stream-data",_e.MissingAudioStreamData="missing-audio-stream-data"}(s||(s={})),function(_e){_e[_e.BAD=2.1]="BAD",_e[_e.POOR=2.6]="POOR",_e[_e.FAIR=3.1]="FAIR",_e[_e.GOOD=3.8]="GOOD",_e[_e.EXCELLENT=4.3]="EXCELLENT"}(n||(n={}));const gr=class gr extends o{constructor(et){super();An(this,"isStopped",!1);An(this,"reportTimer");An(this,"getStatsInterval");An(this,"compositeStatsParser");this.compositeStatsParser=et.compositeStatsParser,this.getStatsInterval=et.getStatsInterval??1e4}get isRunning(){return!!this.reportTimer&&!this.isStopped}startReporting(){if(this.reportTimer)return;const et=()=>setTimeout(()=>{this.isStopped?this.reportTimer=void 0:this.parseReports().finally(()=>{this.reportTimer=et()})},this.getStatsInterval);this.isStopped=!1,this.reportTimer=et()}stopReporting(){this.isStopped=!0,this.reportTimer&&(clearTimeout(this.reportTimer),this.reportTimer=void 0)}async parseReports(){const et=Date.now(),tt=await this.compositeStatsParser.parse(),nt=Date.now()-et;this.emit(gr.STATS_REPORTS_PARSED,{timeTaken:nt,reportItems:tt}),tt.forEach(rt=>{this.emit(gr.STATS_REPORT_READY_EVENT,rt)})}};An(gr,"STATS_REPORT_READY_EVENT","stats-report-ready"),An(gr,"STATS_REPORTS_PARSED","stats-reports-parsed");let S=gr;const v=(()=>{const _e=new Map;return $=>{const{taskId:et,delayMs:tt,maxJitterMs:nt,callback:rt}=$,it=Math.ceil(Math.random()*(nt||0)),ot=_e.get(et);ot&&clearTimeout(ot);const st=setTimeout(()=>{rt(),_e.delete(et)},tt+it);_e.set(et,st)}})();var pr;class k{constructor(){Sn(this,pr,{})}calculate($){const{connection:{id:et}}=$,{mos:tt,stats:nt}=this.calculateOutboundScore($)||{},{mos:rt,stats:it}=this.calculateInboundScore($)||{};return Yt(this,pr)[et]=$,v({taskId:et,delayMs:35e3,callback:()=>delete Yt(this,pr)[et]}),{outbound:tt,inbound:rt,connectionId:et,statsSamples:{inboundStatsSample:it,outboundStatsSample:nt}}}calculateOutboundScore($){var vt,mt,kt,bt;const et=[...((vt=$.remote)==null?void 0:vt.audio.inbound)||[],...((mt=$.remote)==null?void 0:mt.video.inbound)||[]];if(!et.length)return;const tt=Yt(this,pr)[$.connection.id];if(!tt)return;const nt=[...((kt=tt.remote)==null?void 0:kt.audio.inbound)||[],...((bt=tt.remote)==null?void 0:bt.video.inbound)||[]],{packetsSent:rt}=$.connection,it=tt.connection.packetsSent,ot=et.reduce((gt,St)=>{const yt=nt.find(Et=>Et.ssrc===St.ssrc);return{sumJitter:gt.sumJitter+St.jitter,packetsLost:gt.packetsLost+St.packetsLost,lastPacketsLost:gt.lastPacketsLost+((yt==null?void 0:yt.packetsLost)||0)}},{sumJitter:0,packetsLost:0,lastPacketsLost:0}),st=1e3*$.connection.currentRoundTripTime||0,{sumJitter:at}=ot,lt=at/et.length,dt=rt-it,pt=ot.packetsLost-ot.lastPacketsLost,ht=dt&&pt?Math.round(100*pt/(dt+pt)):0;return{mos:this.calculateMOS({avgJitter:lt,rtt:st,packetsLoss:ht}),stats:{avgJitter:lt,rtt:st,packetsLoss:ht}}}calculateInboundScore($){var vt,mt,kt,bt;const et=[...(vt=$.audio)==null?void 0:vt.inbound,...(mt=$.video)==null?void 0:mt.inbound];if(!et.length)return;const tt=Yt(this,pr)[$.connection.id];if(!tt)return;const nt=[...(kt=tt.video)==null?void 0:kt.inbound,...(bt=tt.audio)==null?void 0:bt.inbound],{packetsReceived:rt}=$.connection,it=tt.connection.packetsReceived,ot=et.reduce((gt,St)=>{const yt=nt.find(Et=>Et.ssrc===St.ssrc);return{sumJitter:gt.sumJitter+St.jitter,packetsLost:gt.packetsLost+St.packetsLost,lastPacketsLost:gt.lastPacketsLost+((yt==null?void 0:yt.packetsLost)||0)}},{sumJitter:0,packetsLost:0,lastPacketsLost:0}),st=1e3*$.connection.currentRoundTripTime||0,{sumJitter:at}=ot,lt=at/et.length,dt=rt-it,pt=ot.packetsLost-ot.lastPacketsLost,ht=dt&&pt?Math.round(100*pt/(dt+pt)):0;return{mos:this.calculateMOS({avgJitter:lt,rtt:st,packetsLoss:ht}),stats:{avgJitter:lt,rtt:st,packetsLoss:ht}}}calculateMOS({avgJitter:$,rtt:et,packetsLoss:tt}){const nt=et+2*$+10;let rt=nt<160?93.2-nt/40:93.2-nt/120-10;return rt-=2.5*tt,1+.035*rt+7e-6*rt*(rt-60)*(100-rt)}}pr=new WeakMap;var Yn,Ir,Nr;class y{constructor($={}){Sn(this,Yn,new Map);Sn(this,Ir);Sn(this,Nr);bn(this,Ir,$.statsCleanupTtlMs??35e3),bn(this,Nr,$.maxParsedStatsStorageSize??5)}detect($,et){const tt={...$,networkScores:{...et,statsSamples:(et==null?void 0:et.statsSamples)||{}}},nt=this.performDetection(tt);return this.setLastProcessedStats($.connection.id,tt),this.performPrevStatsCleanup({connectionId:$.connection.id}),nt}performPrevStatsCleanup($){const{connectionId:et,cleanupCallback:tt}=$;Yt(this,Yn).has(et)&&v({taskId:et,delayMs:Yt(this,Ir),callback:()=>{this.deleteLastProcessedStats(et),typeof tt=="function"&&tt()}})}setLastProcessedStats($,et){if(!$||et.connection.id!==$)return;const tt=Yt(this,Yn).get($)??[];tt.push(et),tt.length>Yt(this,Nr)&&tt.shift(),Yt(this,Yn).set($,tt)}getLastProcessedStats($){const et=Yt(this,Yn).get($);return et==null?void 0:et[et.length-1]}getAllLastProcessedStats($){return Yt(this,Yn).get($)??[]}deleteLastProcessedStats($){Yt(this,Yn).delete($)}}Yn=new WeakMap,Ir=new WeakMap,Nr=new WeakMap;var Dr;class w extends y{constructor(et={}){super(et);Sn(this,Dr);bn(this,Dr,et.availableOutgoingBitrateThreshold??1e5)}performDetection(et){const tt=[],{availableOutgoingBitrate:nt}=et.connection;if(nt===void 0)return tt;const rt=et.audio.outbound.reduce((st,at)=>st+at.targetBitrate,0),it=et.video.outbound.reduce((st,at)=>st+at.bitrate,0);if(!rt&&!it)return tt;const ot={availableOutgoingBitrate:nt,videoStreamsTotalBitrate:it,audioStreamsTotalTargetBitrate:rt};return(rt>nt||it>0&&nt<Yt(this,Dr))&&tt.push({statsSample:ot,type:e.Network,reason:s.OutboundNetworkThroughput}),tt}}Dr=new WeakMap;var Mr,Lr,jr,$r;class b extends y{constructor(et={}){super();Sn(this,Mr);Sn(this,Lr);Sn(this,jr);Sn(this,$r);bn(this,Mr,et.highPacketLossThresholdPct??5),bn(this,Lr,et.highJitterThreshold??200),bn(this,jr,et.highJitterBufferDelayThresholdMs??500),bn(this,$r,et.highRttThresholdMs??250)}performDetection(et){return this.processData(et)}processData(et){var Pt,At,Nt,Bt;const tt=[],nt=[...(Pt=et.audio)==null?void 0:Pt.inbound,...(At=et.video)==null?void 0:At.inbound];if(!nt.length)return tt;const rt=this.getLastProcessedStats(et.connection.id);if(!rt)return tt;const it=[...(Nt=rt.video)==null?void 0:Nt.inbound,...(Bt=rt.audio)==null?void 0:Bt.inbound],{packetsReceived:ot}=et.connection,st=rt.connection.packetsReceived,at=nt.reduce((Jt,ln)=>{const on=it.find(hn=>hn.ssrc===ln.ssrc),an=(on==null?void 0:on.jitterBufferDelay)||0,Lt=(on==null?void 0:on.jitterBufferEmittedCount)||0,en=ln.jitterBufferDelay-an,rn=ln.jitterBufferEmittedCount-Lt,sn=en&&rn?1e3*en/rn:0;return{sumJitter:Jt.sumJitter+ln.jitter,sumJitterBufferDelayMs:Jt.sumJitterBufferDelayMs+sn,packetsLost:Jt.packetsLost+ln.packetsLost,lastPacketsLost:Jt.lastPacketsLost+((on==null?void 0:on.packetsLost)||0)}},{sumJitter:0,sumJitterBufferDelayMs:0,packetsLost:0,lastPacketsLost:0}),lt=1e3*et.connection.currentRoundTripTime||0,{sumJitter:dt,sumJitterBufferDelayMs:pt}=at,ht=dt/nt.length,vt=pt/nt.length,mt=ot-st,kt=at.packetsLost-at.lastPacketsLost,bt=mt&&kt?Math.round(100*kt/(mt+kt)):0,gt=bt>Yt(this,Mr),St=ht>=Yt(this,Lr),yt=lt>=Yt(this,$r),Et=vt>Yt(this,jr),Tt=yt&&!St&&!gt,wt=gt&&St,Rt=St&&Et,xt={rtt:lt,packetLossPct:bt,avgJitter:ht,avgJitterBufferDelay:vt};return(St||gt)&&tt.push({statsSample:xt,type:e.Network,reason:s.InboundNetworkQuality,iceCandidate:et.connection.local.id}),Tt&&tt.push({statsSample:xt,type:e.Server,reason:s.ServerIssue,iceCandidate:et.connection.remote.id}),wt&&tt.push({statsSample:xt,type:e.Network,reason:s.InboundNetworkMediaLatency,iceCandidate:et.connection.local.id}),Rt&&tt.push({statsSample:xt,type:e.Network,reason:s.NetworkMediaSyncFailure,iceCandidate:et.connection.local.id}),tt}}Mr=new WeakMap,Lr=new WeakMap,jr=new WeakMap,$r=new WeakMap;var Fr;class P extends y{constructor(et={}){super();Sn(this,Fr);bn(this,Fr,et.correctedSamplesThresholdPct??5)}performDetection(et){return this.processData(et)}processData(et){var it;const tt=et.audio.inbound,nt=[],rt=(it=this.getLastProcessedStats(et.connection.id))==null?void 0:it.audio.inbound;return rt&&tt.forEach(ot=>{const st=rt.find(mt=>mt.ssrc===ot.ssrc);if(!st)return;const at=ot.track.insertedSamplesForDeceleration+ot.track.removedSamplesForAcceleration,lt=st.track.insertedSamplesForDeceleration+st.track.removedSamplesForAcceleration;if(at===lt)return;const dt=ot.track.totalSamplesReceived-st.track.totalSamplesReceived,pt=at-lt,ht=Math.round(100*pt/dt),vt={correctedSamplesPct:ht};ht>Yt(this,Fr)&&nt.push({statsSample:vt,type:e.Network,reason:s.NetworkMediaSyncFailure,ssrc:ot.ssrc})}),nt}}Fr=new WeakMap;var Ur,Br;class T extends y{constructor(et={}){super();Sn(this,Ur);Sn(this,Br);bn(this,Ur,et.highPacketLossThresholdPct??5),bn(this,Br,et.highJitterThreshold??200)}performDetection(et){return this.processData(et)}processData(et){var yt,Et,Tt,wt;const tt=[],nt=[...((yt=et.remote)==null?void 0:yt.audio.inbound)||[],...((Et=et.remote)==null?void 0:Et.video.inbound)||[]];if(!nt.length)return tt;const rt=this.getLastProcessedStats(et.connection.id);if(!rt)return tt;const it=[...((Tt=rt.remote)==null?void 0:Tt.audio.inbound)||[],...((wt=rt.remote)==null?void 0:wt.video.inbound)||[]],{packetsSent:ot}=et.connection,st=rt.connection.packetsSent,at=nt.reduce((Rt,xt)=>{const Pt=it.find(At=>At.ssrc===xt.ssrc);return{sumJitter:Rt.sumJitter+xt.jitter,packetsLost:Rt.packetsLost+xt.packetsLost,lastPacketsLost:Rt.lastPacketsLost+((Pt==null?void 0:Pt.packetsLost)||0)}},{sumJitter:0,packetsLost:0,lastPacketsLost:0}),lt=1e3*et.connection.currentRoundTripTime||0,{sumJitter:dt}=at,pt=dt/nt.length,ht=ot-st,vt=at.packetsLost-at.lastPacketsLost,mt=ht&&vt?Math.round(100*vt/(ht+vt)):0,kt=mt>Yt(this,Ur),bt=pt>=Yt(this,Br),gt=!kt&&bt||bt||kt,St={rtt:lt,avgJitter:pt,packetLossPct:mt};return kt&&bt&&tt.push({statsSample:St,type:e.Network,reason:s.OutboundNetworkMediaLatency,iceCandidate:et.connection.local.id}),gt&&tt.push({statsSample:St,type:e.Network,reason:s.OutboundNetworkQuality,iceCandidate:et.connection.local.id}),tt}}Ur=new WeakMap,Br=new WeakMap;class L extends y{performDetection($){return this.processData($)}processData($){var rt;const et=$.video.outbound.filter(it=>it.qualityLimitationReason!=="none"),tt=[],nt=(rt=this.getLastProcessedStats($.connection.id))==null?void 0:rt.video.outbound;return nt&&et.forEach(it=>{const ot=nt.find(at=>at.ssrc===it.ssrc);if(!ot)return;const st={qualityLimitationReason:it.qualityLimitationReason};it.framesSent>ot.framesSent||(it.qualityLimitationReason==="cpu"&&tt.push({statsSample:st,type:e.CPU,reason:s.EncoderCPUThrottling,ssrc:it.ssrc}),it.qualityLimitationReason==="bandwidth"&&tt.push({statsSample:st,type:e.Network,reason:s.OutboundNetworkThroughput,ssrc:it.ssrc}))}),tt}}var hr;class D extends y{constructor(){super(...arguments);An(this,"UNKNOWN_DECODER","unknown");Sn(this,hr,{})}performDetection(et){return this.processData(et)}performPrevStatsCleanup(et){const{connectionId:tt,cleanupCallback:nt}=et;super.performPrevStatsCleanup({...et,cleanupCallback:()=>{delete Yt(this,hr)[tt],typeof nt=="function"&&nt()}})}processData(et){var it;const tt=[],{id:nt}=et.connection,rt=(it=this.getLastProcessedStats(nt))==null?void 0:it.video.inbound;return et.video.inbound.forEach(ot=>{const{decoderImplementation:st,ssrc:at}=ot;if(rt==null?void 0:rt.find(dt=>dt.ssrc===at))if(st===this.UNKNOWN_DECODER){if(!this.hadLastDecoderWithIssue(nt,at)){this.setLastDecoderWithIssue(nt,at,this.UNKNOWN_DECODER);const dt={mimeType:ot.mimeType,decoderImplementation:st};tt.push({ssrc:at,statsSample:dt,type:e.Stream,reason:s.UnknownVideoDecoderIssue,trackIdentifier:ot.track.trackIdentifier})}}else this.setLastDecoderWithIssue(nt,at,void 0)}),tt}setLastDecoderWithIssue(et,tt,nt){const rt=Yt(this,hr)[et]??{};nt===void 0?delete rt[tt]:rt[tt]=nt,Yt(this,hr)[et]=rt}hadLastDecoderWithIssue(et,tt){const nt=Yt(this,hr)[et];return(nt&&nt[tt])===this.UNKNOWN_DECODER}}hr=new WeakMap;const C=_e=>_e.reduce(($,et)=>$+et,0)/_e.length,R=(_e,$,et=30)=>{var nt,rt,it,ot,st;const tt=[];for(let at=1;at<$.length-1;at+=1){const lt=(rt=(nt=$[at])==null?void 0:nt.video)==null?void 0:rt.inbound.find(vt=>vt.ssrc===_e);if(!lt)continue;const dt=(st=(ot=(it=$[at-1])==null?void 0:it.video)==null?void 0:ot.inbound)==null?void 0:st.find(vt=>vt.ssrc===_e);if(!lt||!dt)continue;const pt=lt.timestamp-dt.timestamp,ht=lt.framesDecoded-dt.framesDecoded;if(ht>0){const vt=pt/ht;tt.push(vt)}}return tt.length<=1?!1:(at=>{const lt=((dt,pt)=>pt.reduce((ht,vt)=>ht+(vt-dt)**2,0)/pt.length)(C(at),at);return Math.sqrt(lt)})(tt)>et},M=(_e,$)=>{for(let et=1;et<$.length;et+=1){const tt=$[et].video.inbound.find(ot=>ot.ssrc===_e);if(!tt)continue;const nt=$[et-1].video.inbound.find(ot=>ot.ssrc===_e),rt=tt.frameWidth!==(nt==null?void 0:nt.frameWidth),it=tt.frameHeight!==(nt==null?void 0:nt.frameHeight);if(rt||it)return!0}return!1};var Vr,zr,Wr;class I extends y{constructor(et={}){super();Sn(this,Vr);Sn(this,zr);Sn(this,Wr);bn(this,Vr,et.avgFreezeDurationThresholdMs??1e3),bn(this,zr,et.frozenDurationThresholdPct??30),bn(this,Wr,et.minMosQuality??n.BAD)}performDetection(et){const tt=et.networkScores.inbound;return tt!==void 0&&tt<=Yt(this,Wr)?[]:this.processData(et)}processData(et){const tt=[],nt=this.getAllLastProcessedStats(et.connection.id);if(nt.length===0)return[];const rt=et.video.inbound.map(it=>{const ot=nt[nt.length-1].video.inbound.find(pt=>pt.ssrc===it.ssrc);if(!ot||M(it.ssrc,[nt[nt.length-1],et])||R(it.ssrc,nt))return;const st=it.freezeCount-(ot.freezeCount??0),at=1e3*(it.totalFreezesDuration-(ot.totalFreezesDuration??0)),lt=st>0?at/st:0,dt=at/(it.timestamp-ot.timestamp)*100;return dt>Yt(this,zr)||lt>Yt(this,Vr)?{ssrc:it.ssrc,avgFreezeDurationMs:lt,frozenDurationPct:dt}:void 0}).filter(it=>it!==void 0);return rt.length>0&&(tt.push({type:e.Stream,reason:s.FrozenVideoTrack,statsSample:{ssrcs:rt.map(it=>it.ssrc)}}),this.deleteLastProcessedStats(et.connection.id)),tt}}Vr=new WeakMap,zr=new WeakMap,Wr=new WeakMap;var qr,Hr,Kr;class E extends y{constructor(et={}){super(et);Sn(this,qr);Sn(this,Hr);Sn(this,Kr);bn(this,qr,et.volatilityThreshold??8),bn(this,Hr,et.affectedStreamsPercentThreshold??30),bn(this,Kr,et.minMosQuality??n.BAD)}performDetection(et){return[...this.getAllLastProcessedStats(et.connection.id),et].find(tt=>tt.networkScores.inbound!==void 0&&tt.networkScores.inbound<=Yt(this,Kr))?[]:this.processData(et)}processData(et){const tt=[],nt=[...this.getAllLastProcessedStats(et.connection.id),et],rt=et.video.inbound.map(ot=>{if(nt.length<5||M(ot.ssrc,nt))return;const st=[];for(let lt=0;lt<nt.length-1;lt+=1){const dt=nt[lt].video.inbound.find(pt=>pt.ssrc===ot.ssrc);(dt==null?void 0:dt.framesPerSecond)!==void 0&&st.push(dt.framesPerSecond)}if(st.length<5||R(ot.ssrc,nt))return;const at=(lt=>{if(lt.length===0)throw new Error("Cannot calculate volatility for empty array");const dt=C(lt);return lt.reduce((pt,ht)=>pt+Math.abs(ht-dt),0)/lt.length*100/dt})(st);return at>Yt(this,qr)?{ssrc:ot.ssrc,allFps:st,volatility:at}:void 0}).filter(ot=>!!ot);if(rt.length===0)return tt;const it=rt.length/(et.video.inbound.length/100);return it>Yt(this,Hr)&&(tt.push({type:e.CPU,reason:s.DecoderCPUThrottling,statsSample:{affectedStreamsPercent:it,throtthedStreams:rt}}),this.deleteLastProcessedStats(et.connection.id)),tt}}qr=new WeakMap,Hr=new WeakMap,Kr=new WeakMap;const N=_e=>_e.iceConnectionState==="closed"||_e.connectionState==="closed",_=(_e,$,et)=>8*((tt,nt,rt)=>{if(!nt)return 0;const it=tt[rt],ot=nt[rt];if(it==null||ot==null)return 0;const st=Math.floor(tt.timestamp)-Math.floor(nt.timestamp);return st===0?0:(Number(it)-Number(ot))/st*1e3})(_e,$,et);class A{constructor($){An(this,"connections",[]);An(this,"statsParser");this.statsParser=$.statsParser}listConnections(){return[...this.connections]}addPeerConnection($){this.connections.push({id:$.id??String(Date.now()+Math.random().toString(32)),pc:$.pc})}removePeerConnection($){const et=this.connections.findIndex(({pc:tt})=>tt===$.pc);et>=0&&this.removeConnectionsByIndexes([et])}async parse(){const $=[],et=this.connections.map(async(tt,nt)=>{if(!N(tt.pc))return this.statsParser.parse(tt);$.unshift(nt)});return $.length&&this.removeConnectionsByIndexes($),(await Promise.all(et)).filter(tt=>tt!==void 0)}removeConnectionsByIndexes($){$.forEach(et=>{this.connections.splice(et,1)})}}class O{constructor($){An(this,"prevStats",new Map);An(this,"allowedReportTypes",new Set(["candidate-pair","inbound-rtp","outbound-rtp","remote-outbound-rtp","remote-inbound-rtp","track","transport"]));An(this,"ignoreSSRCList");An(this,"logger");this.ignoreSSRCList=$.ignoreSSRCList??[],this.logger=$.logger}get previouslyParsedStatsConnectionsIds(){return[...this.prevStats.keys()]}async parse($){if(!N($.pc))return this.getConnectionStats($);this.logger.debug("Skip stats parsing. Connection is closed.",{connection:$})}async getConnectionStats($){const{pc:et,id:tt}=$;try{const nt=Date.now(),rt=et.getReceivers().filter(at=>{var lt;return(lt=at.track)==null?void 0:lt.enabled}),it=et.getSenders().filter(at=>{var lt;return(lt=at.track)==null?void 0:lt.enabled}),ot=await Promise.all(rt.map(at=>at.getStats())),st=await Promise.all(it.map(at=>at.getStats()));return{id:tt,stats:this.mapReportsStats([...ot,...st],$),timeTaken:Date.now()-nt}}catch(nt){return void this.logger.error("Failed to get stats for PC",{id:tt,pc:et,error:nt})}}mapReportsStats($,et){const tt={audio:{inbound:[],outbound:[]},video:{inbound:[],outbound:[]},connection:{},remote:{video:{inbound:[],outbound:[]},audio:{inbound:[],outbound:[]}}};$.forEach(it=>{it.forEach(ot=>{this.allowedReportTypes.has(ot.type)&&this.updateMappedStatsWithReportItemData(ot,tt,it)})});const{id:nt}=et,rt=this.prevStats.get(nt);return rt&&this.propagateStatsWithRateValues(tt,rt.stats),this.prevStats.set(nt,{stats:tt,ts:Date.now()}),v({taskId:nt,delayMs:35e3,callback:()=>this.prevStats.delete(nt)}),tt}updateMappedStatsWithReportItemData($,et,tt){const nt=$.type;if(nt==="candidate-pair"&&$.state==="succeeded"&&$.nominated)return void(et.connection=this.prepareConnectionStats($,tt));const rt=this.getMediaType($);if(!rt)return;const it=$.ssrc;if(!it||!this.ignoreSSRCList.includes(it))if(nt!=="outbound-rtp")if(nt!=="inbound-rtp")nt!=="remote-outbound-rtp"?nt==="remote-inbound-rtp"&&(this.mapConnectionStatsIfNecessary(et,$,tt),et.remote[rt].inbound.push({...$})):et.remote[rt].outbound.push({...$});else{const ot=tt.get($.trackId)||tt.get($.mediaSourceId)||{};this.mapConnectionStatsIfNecessary(et,$,tt);const st={...$,track:{...ot}};et[rt].inbound.push(st)}else{const ot=tt.get($.trackId)||tt.get($.mediaSourceId)||{},st={...$,track:{...ot}};et[rt].outbound.push(st)}}getMediaType($){const et=$.mediaType||$.kind;if(!["audio","video"].includes(et)){const{id:tt}=$;return tt?String(tt).includes("Video")?"video":String(tt).includes("Audio")?"audio":void 0:void 0}return et}propagateStatsWithRateValues($,et){$.audio.inbound.forEach(tt=>{const nt=et.audio.inbound.find(({id:rt})=>rt===tt.id);tt.bitrate=_(tt,nt,"bytesReceived"),tt.packetRate=_(tt,nt,"packetsReceived")}),$.audio.outbound.forEach(tt=>{const nt=et.audio.outbound.find(({id:rt})=>rt===tt.id);tt.bitrate=_(tt,nt,"bytesSent"),tt.packetRate=_(tt,nt,"packetsSent")}),$.video.inbound.forEach(tt=>{const nt=et.video.inbound.find(({id:rt})=>rt===tt.id);tt.bitrate=_(tt,nt,"bytesReceived"),tt.packetRate=_(tt,nt,"packetsReceived")}),$.video.outbound.forEach(tt=>{const nt=et.video.outbound.find(({id:rt})=>rt===tt.id);tt.bitrate=_(tt,nt,"bytesSent"),tt.packetRate=_(tt,nt,"packetsSent")})}mapConnectionStatsIfNecessary($,et,tt){if($.connection.id||!et.transportId)return;const nt=tt.get(et.transportId);if(nt&&nt.selectedCandidatePairId){const rt=tt.get(nt.selectedCandidatePairId);$.connection=this.prepareConnectionStats(rt,tt)}}prepareConnectionStats($,et){if(!$||!et)return{};const tt={...$};if(tt.remoteCandidateId){const nt=et.get(tt.remoteCandidateId);tt.remote={...nt}}if(tt.localCandidateId){const nt=et.get(tt.localCandidateId);tt.local={...nt}}return tt}}var ar,Cr,Rr;const Jr=class Jr extends y{constructor(et={}){super();Sn(this,ar,new Map);Sn(this,Cr);Sn(this,Rr);bn(this,Cr,et.timeoutMs??15e3),bn(this,Rr,et.steps??3)}performDetection(et){return this.processData(et)}processData(et){const tt=[],nt=[...this.getAllLastProcessedStats(et.connection.id),et];if(nt.length<Yt(this,Rr))return tt;const rt=nt.slice(-Yt(this,Rr)),it=rt.map(st=>st.video.inbound),ot=rt.map(st=>st.audio.inbound);return tt.push(...this.detectMissingData(ot,e.Stream,s.MissingAudioStreamData)),tt.push(...this.detectMissingData(it,e.Stream,s.MissingVideoStreamData)),new Set(Yt(this,ar).keys()).forEach(st=>{const at=Yt(this,ar).get(st);at&&Date.now()-at>Yt(this,Cr)&&this.removeMarkedIssue(st)}),tt}detectMissingData(et,tt,nt){const rt=[],it=et.pop(),ot=Jr.mapStatsByTrackId(et);return it.forEach(st=>{const at=st.track.trackIdentifier,lt=ot.get(at);if(!Array.isArray(lt)||lt.length===0||st.track.detached||st.track.ended)return;if(!Jr.isAllBytesReceivedDidntChange(st.bytesReceived,lt))return void this.removeMarkedIssue(at);if(!this.markIssue(at))return;const dt={bytesReceived:st.bytesReceived};rt.push({type:tt,reason:nt,statsSample:dt,trackIdentifier:at})}),rt}static mapStatsByTrackId(et){const tt=new Map;return et.forEach(nt=>{nt.forEach(rt=>{const it=tt.get(rt.track.trackIdentifier)||[];it.push(rt),tt.set(rt.track.trackIdentifier,it)})}),tt}static isAllBytesReceivedDidntChange(et,tt){for(let nt=0;nt<tt.length;nt+=1)if(tt[nt].bytesReceived!==et)return!1;return!0}markIssue(et){const tt=Date.now(),nt=Yt(this,ar).get(et);return(!nt||tt-nt>Yt(this,Cr))&&(Yt(this,ar).set(et,tt),!0)}removeMarkedIssue(et){Yt(this,ar).delete(et)}};ar=new WeakMap,Cr=new WeakMap,Rr=new WeakMap;let J=Jr;var Gn;class x{constructor($){An(this,"eventEmitter");Sn(this,Gn,!1);An(this,"detectors",[]);An(this,"networkScoresCalculator");An(this,"statsReporter");An(this,"compositeStatsParser");An(this,"logger");An(this,"autoAddPeerConnections");this.logger=$.logger??{debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},this.eventEmitter=$.issueEmitter??new g,$.onIssues&&this.eventEmitter.on(t.Issue,$.onIssues),$.onNetworkScoresUpdated&&this.eventEmitter.on(t.NetworkScoresUpdated,$.onNetworkScoresUpdated),this.detectors=$.detectors??[new L,new b,new T,new P,new w,new D,new I,new E,new J],this.networkScoresCalculator=$.networkScoresCalculator??new k,this.compositeStatsParser=$.compositeStatsParser??new A({statsParser:new O({ignoreSSRCList:$.ignoreSSRCList,logger:this.logger})}),this.statsReporter=$.statsReporter??new S({compositeStatsParser:this.compositeStatsParser,getStatsInterval:$.getStatsInterval??5e3}),window.wid=this,this.autoAddPeerConnections=$.autoAddPeerConnections??!0,this.autoAddPeerConnections&&this.wrapRTCPeerConnection(),this.statsReporter.on(S.STATS_REPORT_READY_EVENT,et=>{const tt=this.calculateNetworkScores(et.stats);this.detectIssues({data:et.stats},tt)}),this.statsReporter.on(S.STATS_REPORTS_PARSED,et=>{const tt={timeTaken:et.timeTaken,ts:Date.now()};$.onStats&&$.onStats(et.reportItems),this.eventEmitter.emit(t.StatsParsingFinished,tt)})}watchNewPeerConnections(){if(!this.autoAddPeerConnections)throw new Error("Auto add peer connections was disabled in the constructor.");Yt(this,Gn)?this.logger.warn("WebRTCIssueDetector is already started. Skip processing"):(this.logger.info("Start watching peer connections"),bn(this,Gn,!0),this.statsReporter.startReporting())}stopWatchingNewPeerConnections(){Yt(this,Gn)?(this.logger.info("Stop watching peer connections"),bn(this,Gn,!1),this.statsReporter.stopReporting()):this.logger.warn("WebRTCIssueDetector is already stopped. Skip processing")}handleNewPeerConnection($,et){Yt(this,Gn)||!this.autoAddPeerConnections?(Yt(this,Gn)||this.autoAddPeerConnections!==!1||(this.logger.info("Starting stats reporting for new peer connection"),bn(this,Gn,!0),this.statsReporter.startReporting()),this.logger.debug("Handling new peer connection",$),this.compositeStatsParser.addPeerConnection({pc:$,id:et})):this.logger.debug("Skip handling new peer connection. Detector is not running",$)}emitIssues($){this.eventEmitter.emit(t.Issue,$)}detectIssues({data:$},et){const tt=this.detectors.reduce((nt,rt)=>[...nt,...rt.detect($,et)],[]);tt.length>0&&this.emitIssues(tt)}calculateNetworkScores($){const et=this.networkScoresCalculator.calculate($);return this.eventEmitter.emit(t.NetworkScoresUpdated,et),et}wrapRTCPeerConnection(){if(!window.RTCPeerConnection)return void this.logger.warn("No RTCPeerConnection found in browser window. Skipping");const $=window.RTCPeerConnection,et=nt=>this.handleNewPeerConnection(nt);function tt(nt){const rt=new $(nt);return et(rt),rt}tt.prototype=$.prototype,window.RTCPeerConnection=tt}}Gn=new WeakMap;var WebRTCConnectionQualityIndicator=function(_e){__extends($,_e);function $(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.issueDetector=null,et.mosScores=null,et}return $.prototype._start=function(et){var tt=this;this.issueDetector=new x({autoAddPeerConnections:!1,getStatsInterval:3e3,onNetworkScoresUpdated:function(nt){tt.mosScores=nt,tt.handleStatsChanged()}}),this.issueDetector.handleNewPeerConnection(et)},$.prototype._stop=function(){this.issueDetector&&(this.issueDetector.stopWatchingNewPeerConnections(),this.issueDetector=null),this.mosScores=null},$.prototype.calculateConnectionQuality=function(){return!this.mosScores||this.mosScores.inbound&&this.mosScores.outbound?ConnectionQuality.UNKNOWN:this.mosScores.inbound&&this.mosScores.inbound<3||this.mosScores.outbound&&this.mosScores.outbound<3?ConnectionQuality.BAD:ConnectionQuality.GOOD},$}(AbstractConnectionQualityIndicator),VoiceChatState;(function(_e){_e.INACTIVE="inactive",_e.STARTING="starting",_e.ACTIVE="started",_e.STOPPING="stopping"})(VoiceChatState||(VoiceChatState={}));var AbstractVoiceChat=function(){function _e(){}return _e}(),AbstractVoiceChatImplementation=function(_e){__extends($,_e);function $(){var et=_e!==null&&_e.apply(this,arguments)||this;return et._isMuted=!0,et.state=VoiceChatState.INACTIVE,et}return Object.defineProperty($.prototype,"isMuted",{get:function(){return this._isMuted},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"isVoiceChatting",{get:function(){return this.state!==VoiceChatState.INACTIVE},enumerable:!1,configurable:!0}),$.prototype.startVoiceChat=function(et){return __awaiter(this,void 0,void 0,function(){var tt;return __generator(this,function(nt){switch(nt.label){case 0:return this.state===VoiceChatState.INACTIVE?[3,2]:[4,this.stopVoiceChat()];case 1:nt.sent(),nt.label=2;case 2:return nt.trys.push([2,4,,6]),this.state=VoiceChatState.STARTING,[4,this._startVoiceChat(et)];case 3:return nt.sent(),this.state=VoiceChatState.ACTIVE,[3,6];case 4:return tt=nt.sent(),[4,this.stopVoiceChat()];case 5:throw nt.sent(),tt;case 6:return[2]}})})},$.prototype.stopVoiceChat=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(et){switch(et.label){case 0:return this.state===VoiceChatState.INACTIVE?[2]:(this.state=VoiceChatState.STOPPING,[4,this._stopVoiceChat()]);case 1:return et.sent(),this._isMuted=!0,this.state=VoiceChatState.INACTIVE,[2]}})})},$.prototype._mute=function(){},$.prototype._unmute=function(){},$.prototype.mute=function(){this.isVoiceChatting&&(this._mute(),this._isMuted=!0)},$.prototype.unmute=function(){this.isVoiceChatting&&(this._unmute(),this._isMuted=!1)},$}(AbstractVoiceChat);function sleep(_e){return new Promise(function($){return setTimeout($,_e)})}function convertFloat32ToS16PCM(_e){for(var $=new Int16Array(_e.length),et=0;et<_e.length;et++){var tt=Math.max(-1,Math.min(1,_e[et]));$[et]=tt<0?tt*32768:tt*32767}return $}var LivekitVoiceChat=function(_e){__extends($,_e);function $(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.room=null,et.track=null,et}return $.prototype._startVoiceChat=function(et){return __awaiter(this,void 0,void 0,function(){var tt,nt;return __generator(this,function(rt){switch(rt.label){case 0:return this.room=et.room,tt=this,[4,createLocalAudioTrack({echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0})];case 1:return tt.track=rt.sent(),[4,this.room.localParticipant.publishTrack(this.track)];case 2:return rt.sent(),!((nt=et.config)===null||nt===void 0)&&nt.defaultMuted?this.mute():this.unmute(),[4,sleep(4e3)];case 3:return rt.sent(),[2]}})})},$.prototype._stopVoiceChat=function(){return __awaiter(this,void 0,void 0,function(){var et;return __generator(this,function(tt){return!((et=this.room)===null||et===void 0)&&et.localParticipant&&this.room.localParticipant.getTrackPublications().forEach(function(nt){nt.track&&nt.track.kind===Track.Kind.Audio&&nt.track.stop()}),this.track&&(this.track.stop(),this.track=null),[2]})})},$.prototype._mute=function(){this.track&&!this.track.isMuted&&this.track.mute()},$.prototype._unmute=function(){this.track&&this.track.isMuted&&this.track.unmute()},$}(AbstractVoiceChatImplementation),WebSocketVoiceChat=function(_e){__extends($,_e);function $(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.audioContext=null,et.webSocket=null,et.scriptProcessor=null,et.mediaStreamAudioSource=null,et.mediaDevicesStream=null,et.audioRawFrame=null,et}return $.prototype._startVoiceChat=function(et){return __awaiter(this,void 0,void 0,function(){var tt,nt=this,rt,it,ot,st;return __generator(this,function(at){switch(at.label){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Cannot start voice chat without media devices");return this.webSocket=et.webSocket,this.audioRawFrame=et.audioRawFrame,this.audioContext=new window.AudioContext({latencyHint:"interactive",sampleRate:16e3}),!((rt=et.config)===null||rt===void 0)&&rt.defaultMuted||this.unmute(),[4,navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0}})];case 1:return tt=at.sent(),this.mediaDevicesStream=tt,this.mediaStreamAudioSource=(it=this.audioContext)===null||it===void 0?void 0:it.createMediaStreamSource(tt),this.scriptProcessor=(ot=this.audioContext)===null||ot===void 0?void 0:ot.createScriptProcessor(512,1,1),this.mediaStreamAudioSource.connect(this.scriptProcessor),this.scriptProcessor.connect((st=this.audioContext)===null||st===void 0?void 0:st.destination),this.scriptProcessor.onaudioprocess=function(lt){var dt;if(!(!nt.webSocket||!nt.audioRawFrame)){var pt;nt.isMuted?pt=new Float32Array(512):pt=lt.inputBuffer.getChannelData(0);var ht=convertFloat32ToS16PCM(pt),vt=new Uint8Array(ht.buffer),mt=nt.audioRawFrame.create({audio:{audio:Array.from(vt),sampleRate:16e3,numChannels:1}}),kt=new Uint8Array(nt.audioRawFrame.encode(mt).finish());(dt=nt.webSocket)===null||dt===void 0||dt.send(kt)}},[4,sleep(2e3)];case 2:return at.sent(),[2]}})})},$.prototype._stopVoiceChat=function(){return __awaiter(this,void 0,void 0,function(){var et,tt;return __generator(this,function(nt){return this.audioContext&&(this.audioContext=null),this.scriptProcessor&&(this.scriptProcessor.disconnect(),this.scriptProcessor=null),this.mediaStreamAudioSource&&(this.mediaStreamAudioSource.disconnect(),this.mediaStreamAudioSource=null),this.mediaDevicesStream&&((tt=(et=this.mediaDevicesStream)===null||et===void 0?void 0:et.getTracks())===null||tt===void 0||tt.forEach(function(rt){return rt.stop()}),this.mediaDevicesStream=null),[2]})})},$}(AbstractVoiceChatImplementation),VoiceChatTransport;(function(_e){_e.LIVEKIT="livekit",_e.WEBSOCKET="websocket"})(VoiceChatTransport||(VoiceChatTransport={}));var VoiceChatFactory=function(_e){__extends($,_e);function $(et){var tt=et.voiceChatInstance,nt=et.initialConfig,rt=_e.call(this)||this;return rt.initialConfig=nt,rt.voiceChat=tt,rt}return Object.defineProperty($.prototype,"isMuted",{get:function(){return this.voiceChat.isMuted},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"isVoiceChatting",{get:function(){return this.voiceChat.isVoiceChatting},enumerable:!1,configurable:!0}),$.prototype.startVoiceChat=function(et){return __awaiter(this,arguments,void 0,function(tt){var nt=tt.config;return __generator(this,function(rt){switch(rt.label){case 0:return[4,this.voiceChat.startVoiceChat(__assign(__assign({},this.initialConfig),{config:nt}))];case 1:return rt.sent(),[2]}})})},$.prototype.stopVoiceChat=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(et){switch(et.label){case 0:return[4,this.voiceChat.stopVoiceChat()];case 1:return et.sent(),[2]}})})},$.prototype.mute=function(){this.voiceChat.mute()},$.prototype.unmute=function(){this.voiceChat.unmute()},$.createLiveKitVoiceChat=function(et){return new this({voiceChatInstance:new LivekitVoiceChat,initialConfig:et})},$.createWebSocketVoiceChat=function(et){return new this({voiceChatInstance:new WebSocketVoiceChat,initialConfig:et})},$}(AbstractVoiceChat),AvatarQuality;(function(_e){_e.Low="low",_e.Medium="medium",_e.High="high"})(AvatarQuality||(AvatarQuality={}));var VoiceEmotion;(function(_e){_e.EXCITED="excited",_e.SERIOUS="serious",_e.FRIENDLY="friendly",_e.SOOTHING="soothing",_e.BROADCASTER="broadcaster"})(VoiceEmotion||(VoiceEmotion={}));var ElevenLabsModel;(function(_e){_e.eleven_flash_v2_5="eleven_flash_v2_5",_e.eleven_multilingual_v2="eleven_multilingual_v2"})(ElevenLabsModel||(ElevenLabsModel={}));var STTProvider;(function(_e){_e.DEEPGRAM="deepgram",_e.GLADIA="gladia"})(STTProvider||(STTProvider={}));var TaskType;(function(_e){_e.TALK="talk",_e.REPEAT="repeat"})(TaskType||(TaskType={}));var TaskMode;(function(_e){_e.SYNC="sync",_e.ASYNC="async"})(TaskMode||(TaskMode={}));var StreamingEvents;(function(_e){_e.AVATAR_START_TALKING="avatar_start_talking",_e.AVATAR_STOP_TALKING="avatar_stop_talking",_e.AVATAR_TALKING_MESSAGE="avatar_talking_message",_e.AVATAR_END_MESSAGE="avatar_end_message",_e.USER_TALKING_MESSAGE="user_talking_message",_e.USER_END_MESSAGE="user_end_message",_e.USER_START="user_start",_e.USER_STOP="user_stop",_e.USER_SILENCE="user_silence",_e.STREAM_READY="stream_ready",_e.STREAM_DISCONNECTED="stream_disconnected",_e.CONNECTION_QUALITY_CHANGED="connection_quality_changed"})(StreamingEvents||(StreamingEvents={}));var APIError=function(_e){__extends($,_e);function $(et,tt,nt){var rt=_e.call(this,et)||this;return rt.name="APIError",rt.status=tt,rt.responseText=nt,rt}return $}(Error),ConnectionQualityIndicatorClass=QualityIndicatorMixer({TrackerClass:LiveKitConnectionQualityIndicator,getParams:function(_e){return _e}},{TrackerClass:WebRTCConnectionQualityIndicator,getParams:function(_e){var $;return(($=_e.engine.pcManager)===null||$===void 0?void 0:$.subscriber)._pc}}),StreamingAvatar=function(){function _e($){var et=$.token,tt=$.basePath,nt=tt===void 0?"https://api.heygen.com":tt,rt=this;this.room=null,this.mediaStream=null,this.eventTarget=new EventTarget,this.webSocket=null,this.sessionId=null,this.voiceChat=null,this.isLiveKitTransport=!1,this.token=et,this.basePath=nt,this.connectionQualityIndicator=new ConnectionQualityIndicatorClass(function(it){return rt.emit(StreamingEvents.CONNECTION_QUALITY_CHANGED,it)})}return Object.defineProperty(_e.prototype,"connectionQuality",{get:function(){return this.connectionQualityIndicator.connectionQuality},enumerable:!1,configurable:!0}),Object.defineProperty(_e.prototype,"isInputAudioMuted",{get:function(){var $,et;return(et=($=this.voiceChat)===null||$===void 0?void 0:$.isMuted)!==null&&et!==void 0?et:!0},enumerable:!1,configurable:!0}),_e.prototype.muteInputAudio=function(){var $;($=this.voiceChat)===null||$===void 0||$.mute()},_e.prototype.unmuteInputAudio=function(){var $;($=this.voiceChat)===null||$===void 0||$.unmute()},_e.prototype.createStartAvatar=function($){return __awaiter(this,void 0,void 0,function(){var et;return __generator(this,function(tt){switch(tt.label){case 0:return[4,this.newSession($)];case 1:return et=tt.sent(),[2,this.startAvatar($,et)]}})})},_e.prototype.startAvatar=function($,et){return __awaiter(this,void 0,void 0,function(){var tt,nt,rt=this;return __generator(this,function(it){switch(it.label){case 0:this.sessionId=et.session_id,this.isLiveKitTransport=$.voiceChatTransport===VoiceChatTransport.LIVEKIT,tt=new Room({adaptiveStream:!0,dynacast:!0,videoCaptureDefaults:{resolution:VideoPresets.h720.resolution}}),this.room=tt,this.mediaStream=null,tt.on(RoomEvent.DataReceived,function(ot){var st=null;try{var at=new TextDecoder().decode(ot);st=JSON.parse(at)}catch(lt){console.error(lt)}st&&rt.emit(st.type,st)}),nt=new MediaStream,tt.on(RoomEvent.TrackSubscribed,function(ot){if(ot.kind==="video"||ot.kind==="audio"){nt.addTrack(ot.mediaStreamTrack);var st=nt.getVideoTracks().length>0,at=nt.getAudioTracks().length>0;st&&at&&!rt.mediaStream&&(rt.mediaStream=nt,rt.emit(StreamingEvents.STREAM_READY,rt.mediaStream))}}),tt.on(RoomEvent.TrackUnsubscribed,function(ot){var st=ot.mediaStreamTrack;st&&nt.removeTrack(st)}),tt.on(RoomEvent.Disconnected,function(ot){rt.emit(StreamingEvents.STREAM_DISCONNECTED,ot)}),it.label=1;case 1:return it.trys.push([1,3,,4]),[4,tt.prepareConnection(et.url,et.access_token)];case 2:return it.sent(),[3,4];case 3:return it.sent(),[3,4];case 4:return[4,this.startSession()];case 5:return it.sent(),[4,tt.connect(et.url,et.access_token)];case 6:return it.sent(),[4,this.connectWebSocket({useSilencePrompt:!!$.useSilencePrompt})];case 7:return it.sent(),this.initVoiceChat($.voiceChatTransport||VoiceChatTransport.WEBSOCKET),this.connectionQualityIndicator.start(tt),[2,et]}})})},_e.prototype.startVoiceChat=function(){return __awaiter(this,arguments,void 0,function($){var et,tt=$===void 0?{}:$,nt=tt.isInputAudioMuted;return __generator(this,function(rt){switch(rt.label){case 0:return[4,(et=this.voiceChat)===null||et===void 0?void 0:et.startVoiceChat({config:{defaultMuted:nt}})];case 1:return rt.sent(),[2]}})})},_e.prototype.closeVoiceChat=function(){return __awaiter(this,void 0,void 0,function(){var $;return __generator(this,function(et){switch(et.label){case 0:return[4,($=this.voiceChat)===null||$===void 0?void 0:$.stopVoiceChat()];case 1:return et.sent(),[2]}})})},_e.prototype.newSession=function($){return __awaiter(this,void 0,void 0,function(){var et,tt,nt,rt,it;return __generator(this,function(ot){return[2,this.request("/v1/streaming.new",{avatar_name:$.avatarName,quality:$.quality,knowledge_base_id:$.knowledgeId,knowledge_base:$.knowledgeBase,voice:{voice_id:(et=$.voice)===null||et===void 0?void 0:et.voiceId,rate:(tt=$.voice)===null||tt===void 0?void 0:tt.rate,emotion:(nt=$.voice)===null||nt===void 0?void 0:nt.emotion,elevenlabs_settings:__assign(__assign({},(rt=$==null?void 0:$.voice)===null||rt===void 0?void 0:rt.elevenlabsSettings),{model_id:(it=$.voice)===null||it===void 0?void 0:it.model})},language:$.language,version:"v2",video_encoding:"H264",source:"sdk",disable_idle_timeout:$.disableIdleTimeout,stt_settings:$.sttSettings,ia_is_livekit_transport:$.voiceChatTransport===VoiceChatTransport.LIVEKIT,silence_response:$.useSilencePrompt,activity_idle_timeout:$.activityIdleTimeout})]})})},_e.prototype.startSession=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($){return[2,this.request("/v1/streaming.start",{session_id:this.sessionId})]})})},_e.prototype.speak=function($){return __awaiter(this,void 0,void 0,function(){var et,tt;return __generator(this,function(nt){if(et=$.taskType||$.task_type||TaskType.TALK,tt=$.taskMode||TaskMode.ASYNC,et===TaskType.TALK&&tt===TaskMode.ASYNC){if(this.isLiveKitTransport&&this.room)return this.sendLivekitMessage($.text),[2];if(!this.isLiveKitTransport&&this.webSocket&&this.audioRawFrame)return this.sendWebsocketMessage($.text),[2]}return[2,this.request("/v1/streaming.task",{text:$.text,session_id:this.sessionId,task_mode:$.taskMode,task_type:$.taskType})]})})},_e.prototype.startListening=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($){return[2,this.request("/v1/streaming.start_listening",{session_id:this.sessionId})]})})},_e.prototype.stopListening=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($){return[2,this.request("/v1/streaming.stop_listening",{session_id:this.sessionId})]})})},_e.prototype.interrupt=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($){return[2,this.request("/v1/streaming.interrupt",{session_id:this.sessionId})]})})},_e.prototype.stopAvatar=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($){return this.closeVoiceChat(),this.connectionQualityIndicator.stop(),this.voiceChat=null,this.webSocket&&(this.webSocket.close(),this.webSocket=null),[2,this.request("/v1/streaming.stop",{session_id:this.sessionId})]})})},_e.prototype.keepAlive=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($){return[2,this.request("/v1/streaming.keep_alive",{session_id:this.sessionId})]})})},_e.prototype.on=function($,et){return this.eventTarget.addEventListener($,et),this},_e.prototype.off=function($,et){return this.eventTarget.removeEventListener($,et),this},_e.prototype.sendLivekitMessage=function($){return __awaiter(this,void 0,void 0,function(){var et;return __generator(this,function(tt){return this.room?(et=new TextEncoder().encode(JSON.stringify($)),this.room.localParticipant.publishData(et,{reliable:!0}),[2]):[2]})})},_e.prototype.sendWebsocketMessage=function($){return __awaiter(this,void 0,void 0,function(){var et,tt,nt,rt;return __generator(this,function(it){return!this.webSocket||!this.audioRawFrame?[2]:(et=(nt=this.audioRawFrame)===null||nt===void 0?void 0:nt.create({text:{text:$}}),tt=new Uint8Array((rt=this.audioRawFrame)===null||rt===void 0?void 0:rt.encode(et).finish()),this.webSocket.send(tt),[2])})})},_e.prototype.initVoiceChat=function($){if($===VoiceChatTransport.WEBSOCKET){if(this.loadAudioRawFrame(),!this.audioRawFrame||!this.webSocket)return;this.voiceChat=VoiceChatFactory.createWebSocketVoiceChat({webSocket:this.webSocket,audioRawFrame:this.audioRawFrame})}else{if(!this.room)return;this.voiceChat=VoiceChatFactory.createLiveKitVoiceChat({room:this.room})}},_e.prototype.request=function($,et,tt){return __awaiter(this,void 0,void 0,function(){var nt,rt,it,ot;return __generator(this,function(st){switch(st.label){case 0:return st.trys.push([0,5,,6]),[4,fetch(this.getRequestUrl($),{method:"POST",headers:{Authorization:"Bearer ".concat(this.token),"Content-Type":"application/json"},body:JSON.stringify(et)})];case 1:return nt=st.sent(),nt.ok?[3,3]:[4,nt.text()];case 2:throw rt=st.sent(),new APIError("API request failed with status ".concat(nt.status),nt.status,rt);case 3:return[4,nt.json()];case 4:return it=st.sent(),[2,it.data];case 5:throw ot=st.sent(),ot;case 6:return[2]}})})},_e.prototype.emit=function($,et){var tt=new CustomEvent($,{detail:et});this.eventTarget.dispatchEvent(tt)},_e.prototype.getRequestUrl=function($){return"".concat(this.basePath).concat($)},_e.prototype.connectWebSocket=function($){return __awaiter(this,void 0,void 0,function(){var et,tt=this;return __generator(this,function(nt){return et="wss://".concat(new URL(this.basePath).hostname,"/v1/ws/streaming.chat?session_id=").concat(this.sessionId,"&session_token=").concat(this.token).concat(this.isLiveKitTransport?"&arch_version=v2":"","&silence_response=").concat($.useSilencePrompt),this.webSocket=new WebSocket(et),this.webSocket.addEventListener("message",function(rt){var it=null;try{it=JSON.parse(rt.data)}catch(ot){console.error(ot);return}it&&tt.emit(it.event_type,it)}),this.webSocket.addEventListener("close",function(rt){tt.webSocket=null}),[2,new Promise(function(rt,it){var ot,st;(ot=tt.webSocket)===null||ot===void 0||ot.addEventListener("error",function(at){tt.webSocket=null,it(at)}),(st=tt.webSocket)===null||st===void 0||st.addEventListener("open",function(){rt(!0)})})]})})},_e.prototype.loadAudioRawFrame=function(){return __awaiter(this,void 0,void 0,function(){var $;return __generator(this,function(et){return this.audioRawFrame||($=protobuf.Root.fromJSON(jsonDescriptor),this.audioRawFrame=$==null?void 0:$.lookupType("pipecat.Frame")),[2]})})},_e}();const HeyGenAvatar=({onAvatarReady:_e,onError:$,isConnecting:et,onStartTalking:tt,onUserMessage:nt,onAvatarMessage:rt,onAvatarStopTalking:it,textToSpeak:ot,isAudioMuted:st,isVideoHidden:at,isUserMicMuted:lt})=>{const dt=reactExports.useRef(null),pt=reactExports.useRef(null),[ht,vt]=reactExports.useState(!1),[mt,kt]=reactExports.useState(!1),[bt,gt]=reactExports.useState(!1),St="OWQ5MzE2ZTI2ZDg3NGNlNThlNzYxNTI0OTM0MmE0OWYtMTc1NDUwOTA0OQ==",yt={quality:AvatarQuality.High,avatarName:"June_HR_public",voice:{rate:1,emotion:VoiceEmotion.FRIENDLY},language:"en",voiceChatTransport:VoiceChatTransport.LIVEKIT,sttSettings:{provider:STTProvider.GLADIA},knowledgeId:"0882ea24625c4c038f4d06c1dbda1007"},Et=reactExports.useRef(!0),Tt=reactExports.useRef(null);reactExports.useEffect(()=>{(async()=>{Et.current&&!pt.current&&!ht&&await Rt()})();const At=()=>{Et.current=!1,xt()};return window.addEventListener("beforeunload",At),()=>{Et.current=!1,Tt.current&&(clearTimeout(Tt.current),Tt.current=null),window.removeEventListener("beforeunload",At),xt()}},[]),reactExports.useEffect(()=>{if(ot&&pt.current&&mt&&!ht){console.log(" [DEBUG] Sending text to avatar:",ot),console.log(" [DEBUG] Avatar connected status:",mt),console.log(" [DEBUG] Avatar instance exists:",!!pt.current);try{pt.current.speak({text:ot})}catch(Pt){console.warn(" Error sending text to avatar:",Pt)}}else console.log(" [DEBUG] Not sending text - textToSpeak:",ot,"isConnected:",mt,"avatar exists:",!!pt.current,"isLoadingAvatar:",ht)},[ot,mt,ht]),reactExports.useEffect(()=>{dt.current&&(dt.current.muted=st||!1)},[st]),reactExports.useEffect(()=>{pt.current&&mt&&(lt?bt&&(console.log(" [DEBUG] Muting user microphone - closing voice chat"),pt.current.closeVoiceChat(),gt(!1)):bt||(console.log(" [DEBUG] Unmuting user microphone - starting voice chat"),pt.current.startVoiceChat().then(()=>{gt(!0)}).catch(Pt=>{console.error(" Failed to start voice chat:",Pt)})))},[lt,mt,bt]);async function wt(){var Pt;console.log(" Attempting to fetch access token...");try{console.log(" Making API call to HeyGen token endpoint...");const At=await fetch("https://api.heygen.com/v1/streaming.create_token",{method:"POST",headers:{"x-api-key":St}});if(!At.ok){const Jt=await At.text();throw console.error(" Failed to fetch token:",At.status,Jt),new Error(`Failed to fetch access token: ${At.status} - ${Jt}`)}const Nt=await At.json();console.log(" Raw token response:",Nt);const Bt=(Pt=Nt.data)==null?void 0:Pt.token;if(!Bt)throw console.error(" No token found in response:",Nt),new Error("No token found in API response");return console.log(" Token extracted successfully:",Bt.substring(0,20)+"..."),Bt}catch(At){throw console.error(" Error fetching access token:",At),At}}async function Rt(){if(ht||pt.current){console.log(" Avatar already loading or exists, skipping initialization");return}console.log(" Starting HeyGen avatar session..."),vt(!0);try{console.log(" Fetching access token...");const Pt=await wt();if(console.log(" Token received, creating avatar..."),pt.current=new StreamingAvatar({token:Pt}),console.log(" [SDK] Setting up ALL event listeners..."),pt.current.on(StreamingEvents.STREAM_READY,At=>{console.log(" [SDK EVENT] STREAM_READY received:",At.detail),dt.current&&At.detail&&(console.log(" Setting video srcObject..."),dt.current.srcObject=At.detail,console.log(" Video srcObject set successfully"))}),pt.current.on(StreamingEvents.STREAM_DISCONNECTED,()=>{console.log(" [SDK EVENT] STREAM_DISCONNECTED received"),kt(!1),gt(!1),vt(!1),Tt.current&&clearTimeout(Tt.current),Et.current&&!ht&&(console.log(" Scheduling reconnection in 5 seconds..."),Tt.current=setTimeout(()=>{Et.current&&!pt.current&&!ht&&(console.log(" Attempting to reconnect..."),Rt())},5e3))}),pt.current.on(StreamingEvents.AVATAR_START_TALKING,()=>{console.log(" [SDK EVENT] AVATAR_START_TALKING received"),tt==null||tt()}),pt.current.on(StreamingEvents.AVATAR_STOP_TALKING,()=>{console.log(" [SDK EVENT] AVATAR_STOP_TALKING received"),it==null||it()}),pt.current.on(StreamingEvents.USER_START,()=>{console.log(" [SDK EVENT] USER_START received")}),pt.current.on(StreamingEvents.USER_STOP,()=>{console.log(" [SDK EVENT] USER_STOP received")}),pt.current.on(StreamingEvents.USER_TALKING_MESSAGE,At=>{if(console.log(" [SDK EVENT] ===== USER_TALKING_MESSAGE RECEIVED ====="),console.log(" [SDK EVENT] Full event:",At),console.log(" [SDK EVENT] Event detail:",At.detail),console.log(" [SDK EVENT] Event detail type:",typeof At.detail),At.detail&&nt){const Nt=typeof At.detail=="string"?At.detail:At.detail.message||At.detail.text||JSON.stringify(At.detail);console.log(" [SDK] Extracted message text:",JSON.stringify(Nt)),console.log(" [SDK] About to call onUserMessage with:",JSON.stringify(Nt)),nt(Nt),console.log(" [SDK] Called onUserMessage")}else console.log(" [SDK] USER_TALKING_MESSAGE: No event detail or onUserMessage callback");console.log(" [SDK EVENT] ===== END USER_TALKING_MESSAGE =====")}),pt.current.on(StreamingEvents.AVATAR_TALKING_MESSAGE,At=>{if(console.log(" [SDK EVENT] ===== AVATAR_TALKING_MESSAGE RECEIVED ====="),console.log(" [SDK EVENT] Full event:",At),console.log(" [SDK EVENT] Event detail:",At.detail),console.log(" [SDK EVENT] Event detail type:",typeof At.detail),At.detail&&rt){const Nt=typeof At.detail=="string"?At.detail:At.detail.message||At.detail.text||JSON.stringify(At.detail);console.log(" [SDK] Extracted avatar message:",JSON.stringify(Nt)),console.log(" [SDK] About to call onAvatarMessage with:",JSON.stringify(Nt)),rt(Nt),console.log(" [SDK] Called onAvatarMessage")}else console.log(" [SDK] AVATAR_TALKING_MESSAGE event detail missing or onAvatarMessage not provided");console.log(" [SDK EVENT] ===== END AVATAR_TALKING_MESSAGE =====")}),console.log(" [SDK] All event listeners registered successfully"),console.log(" Creating avatar with config:",yt),await pt.current.createStartAvatar(yt),console.log(" Avatar created, starting voice chat..."),await new Promise(At=>setTimeout(At,1e3)),pt.current&&Et.current)try{await pt.current.startVoiceChat(),gt(!0),console.log(" Voice chat started successfully")}catch(At){console.error(" Failed to start voice chat:",At)}kt(!0),vt(!1),_e==null||_e(),console.log(" Avatar setup complete")}catch(Pt){console.error(" Error starting avatar session:",Pt),Pt instanceof Error&&(console.log(" Error message:",{error:Pt}),Pt.message.includes("401")?(console.error(" AUTHENTICATION FAILED - HeyGen API key is invalid or expired"),alert("Authentication failed: Please check your API key")):Pt.message.includes("quota")?(console.error(" QUOTA LIMIT REACHED - Please try again later"),alert("Quota limit reached: Please try refreshing"),xt(),window.location.reload()):Pt.message.includes("400")||Pt.message.includes("Concurrent limit")?(console.error(" CONCURRENT LIMIT REACHED - Please try again later"),alert("Concurrent limit reached: Please try refreshing"),xt(),window.location.reload()):(console.error(" UNKNOWN ERROR:",Pt.message),alert(`Avatar connection failed: ${Pt.message}`))),vt(!1),kt(!1),$==null||$(Pt)}}async function xt(){if(pt.current)try{if(console.log(" Stopping avatar session..."),Tt.current&&(clearTimeout(Tt.current),Tt.current=null),bt){console.log(" Closing voice chat...");try{await pt.current.closeVoiceChat()}catch(Pt){console.warn(" Error closing voice chat:",Pt)}gt(!1)}console.log(" Stopping avatar...");try{await pt.current.stopAvatar()}catch(Pt){console.warn(" Error stopping avatar:",Pt)}pt.current=null,console.log(" Avatar stopped and cleaned up")}catch(Pt){console.error(" Error stopping avatar:",Pt)}finally{pt.current=null,kt(!1),gt(!1),vt(!1)}}return jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[(ht||et)&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-10",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-8 w-8 animate-spin text-white"}),jsxRuntimeExports.jsx("p",{className:"text-white text-sm",children:et?"Connecting to Mindy...":"Loading avatar..."})]})}),jsxRuntimeExports.jsx("video",{ref:dt,autoPlay:!0,playsInline:!0,className:`w-[70%] h-[80%] object-cover lg:rounded-lg shadow-lg ${mt&&!at?"block":"hidden"}`,onLoadedData:()=>console.log(" Video loaded data event"),onCanPlay:()=>console.log(" Video can play event"),onError:Pt=>console.error(" Video error:",Pt)}),at&&mt&&jsxRuntimeExports.jsx("div",{className:"w-[70%] h-[80%] bg-secondary rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(VideoOff,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Video is off"})]})})]})},quickReplies=["what can 1mind do?","what are 1mind's features?","How can 1mind help in inbound sales?"],loadingTexts=["Hold tight, Mindy is on her way","Ask anything you'd ask a human","Ideate with her, make it fun"],VideoCallInterface=()=>{const[_e,$]=reactExports.useState(!1),[et,tt]=reactExports.useState(!1),[nt,rt]=reactExports.useState(!0),[it,ot]=reactExports.useState(""),[st,at]=reactExports.useState(!1),[lt,dt]=reactExports.useState([]),[pt,ht]=reactExports.useState(0),[vt,mt]=reactExports.useState(""),[kt,bt]=reactExports.useState(!0),[gt,St]=reactExports.useState(""),[yt,Et]=reactExports.useState(!1),[Tt,wt]=reactExports.useState(!1),[Rt]=reactExports.useState(Date.now()),[xt,Pt]=reactExports.useState("00:00"),[At,Nt]=reactExports.useState(!1),[Bt,Jt]=reactExports.useState([]),[ln,on]=reactExports.useState(null),[an,Lt]=reactExports.useState(0),en=reactExports.useRef(null),rn=reactExports.useRef(null),sn=reactExports.useRef("");reactExports.useEffect(()=>{if(nt){const tn=loadingTexts[pt];if(vt.length<tn.length){bt(!0);const pn=setTimeout(()=>{mt(tn.slice(0,vt.length+1))},50+Math.random()*50);return()=>clearTimeout(pn)}else{bt(!1);const pn=setTimeout(()=>{ht(gn=>(gn+1)%loadingTexts.length),mt("")},1500);return()=>clearTimeout(pn)}}},[nt,pt,vt]),reactExports.useEffect(()=>{nt&&vt===""&&(mt(""),bt(!0))},[nt]),reactExports.useEffect(()=>{const tn=setInterval(()=>{const pn=Date.now()-Rt,gn=Math.floor(pn/6e4),Tn=Math.floor(pn%6e4/1e3);Pt(`${gn.toString().padStart(2,"0")}:${Tn.toString().padStart(2,"0")}`)},1e3);return()=>clearInterval(tn)},[Rt]);const hn=reactExports.useCallback((tn,pn,gn)=>{var In;let Tn=0;return console.log(" [ADD MESSAGE] ===== ADDING MESSAGE ====="),console.log(" [ADD MESSAGE] Sender:",JSON.stringify(tn)),console.log(" [ADD MESSAGE] Message:",JSON.stringify(pn)),console.log(" [ADD MESSAGE] IsOwn:",gn),console.log(" [ADD MESSAGE] Called from:",(In=new Error().stack)==null?void 0:In.split(`
`)[2]),dt(Nn=>{const Rn=Nn.length>0?Math.max(...Nn.map(Xn=>Xn.id))+1:1;Tn=Rn;const Qn={id:Rn,sender:tn,message:pn,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isOwn:gn};console.log(" [ADD MESSAGE] New message ID:",Rn),console.log(" [ADD MESSAGE] Messages before:",Nn.length);const $n=[...Nn,Qn];return console.log(" [ADD MESSAGE] Messages after:",$n.length),console.log(" [ADD MESSAGE] ===== END ADDING MESSAGE ====="),$n}),Tn},[]),mn=()=>{if(it.trim()){console.log(" [DEBUG] ===== SEND MESSAGE HANDLER ====="),console.log(" [DEBUG] User typed message:",JSON.stringify(it)),console.log(" [DEBUG] Current messages count:",lt.length);const tn=it.trim();sn.current=tn,console.log(" [DEBUG] Set lastTypedMessageRef to:",JSON.stringify(sn.current));const pn=hn("You",tn,!0);console.log(" [DEBUG] User message added with ID:",pn),St(tn),ot(""),setTimeout(()=>St(""),100),setTimeout(()=>{console.log(" [DEBUG] Clearing lastTypedMessageRef after timeout"),sn.current=""},5e3),console.log(" [DEBUG] ===== END SEND MESSAGE HANDLER =====")}else console.log(" [DEBUG] Empty message, not sending")},wn=tn=>{console.log(" [DEBUG] ===== QUICK REPLY HANDLER ====="),console.log(" [DEBUG] Quick reply clicked:",JSON.stringify(tn)),console.log(" [DEBUG] Current messages count:",lt.length),console.log(" [DEBUG] Current lastTypedMessageRef:",JSON.stringify(sn.current));const pn=tn.trim();sn.current=pn,console.log(" [DEBUG] Set lastTypedMessageRef to:",JSON.stringify(sn.current));const gn=hn("You",pn,!0);console.log(" [DEBUG] Quick reply added with ID:",gn),St(pn),console.log(" [DEBUG] Set textToSpeak to:",JSON.stringify(pn)),setTimeout(()=>{console.log(" [DEBUG] Clearing textToSpeak"),St("")},100),setTimeout(()=>{console.log(" [DEBUG] Clearing lastTypedMessageRef after timeout"),console.log(" [DEBUG] lastTypedMessageRef was:",JSON.stringify(sn.current)),sn.current="",console.log(" [DEBUG] lastTypedMessageRef now:",JSON.stringify(sn.current))},5e3),console.log(" [DEBUG] ===== END QUICK REPLY HANDLER =====")},Cn=tn=>{console.log(" [TRANSFORM] ===== PROCESSING COMPLETE MESSAGE ====="),console.log(" [TRANSFORM] Original:",JSON.stringify(tn)),console.log(" [TRANSFORM] Length:",tn.length),console.log(' [TRANSFORM] Contains "Mind y":',tn.includes("Mind y")),console.log(' [TRANSFORM] Contains "mind y":',tn.includes("mind y")),console.log(' [TRANSFORM] Contains "1 mind":',tn.includes("1 mind"));let pn=tn;const gn=pn.replace(/Mind y/gi,"Mindy");gn!==pn&&console.log(" [TRANSFORM] Step 1 - Mind y -> Mindy:",JSON.stringify(gn)),pn=gn;const Tn=pn.replace(/1 mind's/gi,"1mind's");Tn!==pn&&console.log(" [TRANSFORM] Step 2 - 1 mind's -> 1mind's:",JSON.stringify(Tn)),pn=Tn;const In=pn.replace(/1 mind(?=\s|$|[.!?,:;])/gi,"1mind");In!==pn&&console.log(" [TRANSFORM] Step 3 - 1 mind (boundary) -> 1mind:",JSON.stringify(In)),pn=In;const Nn=pn.replace(/1 mind/gi,"1mind");return Nn!==pn&&console.log(" [TRANSFORM] Step 4 - 1 mind (all) -> 1mind:",JSON.stringify(Nn)),pn=Nn,console.log(" [TRANSFORM] Final result:",JSON.stringify(pn)),console.log(" [TRANSFORM] ===== END PROCESSING ====="),pn},kn=()=>{console.log(" [DEBUG] Avatar started talking event received"),console.log(" [DEBUG] Current buffer length:",Bt.length),Bt.length===0?console.log(" [DEBUG] Buffer empty, ready for new message"):console.log(" [DEBUG] Buffer has content, NOT clearing to avoid interruption")},yn=tn=>{console.log(" [DEBUG] ===== USER MESSAGE HANDLER ====="),console.log(" [DEBUG] Received message:",JSON.stringify(tn)),console.log(" [DEBUG] Last typed message:",JSON.stringify(sn.current));const pn=In=>In.trim().replace(/^["']|["']$/g,"").replace(/\s+/g," ").toLowerCase(),gn=tn?pn(tn):"",Tn=sn.current?pn(sn.current):"";console.log(" [DEBUG] Normalized received:",JSON.stringify(gn)),console.log(" [DEBUG] Normalized last typed:",JSON.stringify(Tn)),console.log(" [DEBUG] Are normalized equal?",gn===Tn),tn&&tn.trim()&&gn!==Tn?(console.log(" [DEBUG]  Adding new voice input message:",tn),hn("You",tn.trim(),!0)):(console.log(" [DEBUG]  Skipping duplicate/empty message"),console.log(" [DEBUG] Reason: Empty?",!tn||!tn.trim()),console.log(" [DEBUG] Reason: Duplicate?",gn===Tn),console.log(" [DEBUG] Exact match would be:",tn.trim()===sn.current)),console.log(" [DEBUG] ===== END USER MESSAGE HANDLER =====")},En=()=>{console.log(" [FINALIZE] ===== FINALIZING AVATAR BUFFER ====="),console.log(" [FINALIZE] Called at:",new Date().toISOString()),Jt(tn=>{if(console.log(" [FINALIZE] Current buffer length:",tn.length),console.log(" [FINALIZE] Current buffer content:",JSON.stringify(tn)),tn.length>0){const pn=tn.join(" ");console.log(" [FINALIZE] Raw joined message:",JSON.stringify(pn));const gn=Cn(pn);console.log(" [FINALIZE] Transformed message:",JSON.stringify(gn)),console.log(" [FINALIZE]  About to add message to chat");const Tn=hn("Mindy AI",gn,!1);console.log(" [FINALIZE]  Message added with ID:",Tn)}else console.log(" [FINALIZE]  Buffer is empty, nothing to finalize");return console.log(" [FINALIZE] Clearing buffer"),[]}),ln?(console.log(" [FINALIZE] Clearing timeout"),clearTimeout(ln),on(null)):console.log(" [FINALIZE] No timeout to clear"),console.log(" [FINALIZE] ===== END FINALIZING AVATAR BUFFER =====")},vn=tn=>{if(console.log(" [DEBUG] ===== AVATAR MESSAGE CHUNK RECEIVED ====="),console.log(" [DEBUG] Chunk:",JSON.stringify(tn)),console.log(" [DEBUG] Chunk length:",tn?tn.length:0),console.log(" [DEBUG] Chunk type:",typeof tn),console.log(" [DEBUG] Is empty?",!tn||!tn.trim()),!tn||!tn.trim()){console.log(" [DEBUG]  Empty chunk, ignoring");return}const pn=Date.now(),gn=pn-an;console.log(" [DEBUG] Time since last chunk:",gn,"ms"),console.log(" [DEBUG] Current buffer length:",Bt.length),console.log(" [DEBUG] Current buffer content:",JSON.stringify(Bt.join(" "))),gn>1e4&&Bt.length>0&&(console.log(" [DEBUG]  Very large gap (>10s), finalizing existing buffer"),En()),Jt(In=>{const Nn=[...In,tn.trim()];return console.log(" [DEBUG]  Buffer updated to:",JSON.stringify(Nn.join(" "))),console.log(" [DEBUG] Buffer now has",Nn.length,"chunks"),Nn}),Lt(pn),ln&&(console.log(" [DEBUG]  Clearing existing timeout"),clearTimeout(ln)),console.log(" [DEBUG]  Setting 2-second finalization timeout");const Tn=setTimeout(()=>{console.log(" [TIMEOUT]  2-second timeout triggered - finalizing buffer"),En()},2e3);on(Tn),console.log(" [DEBUG] ===== END AVATAR MESSAGE CHUNK =====")},nn=()=>{console.log(" [DEBUG] ===== AVATAR STOP TALKING ====="),console.log(" [DEBUG] Avatar stopped talking event received"),console.log(" [DEBUG] Current buffer length:",Bt.length),console.log(" [DEBUG] Current buffer content:",JSON.stringify(Bt.join(" "))),console.log(" [DEBUG] About to finalize buffer immediately"),En(),console.log(" [DEBUG] ===== END AVATAR STOP TALKING =====")},un=()=>{console.log(" [DEBUG] Avatar is now ready!"),rt(!1),setTimeout(()=>{console.log(" [DEBUG] Adding manual initial greeting message"),hn("Mindy AI","Hey there! I'm Mindy, your AI superhuman from 1mind. I'd love to give you a quick peek at what we're up to at 1mind. Then I'll ask you a few fun questions and show off some of my sales superpowers  Sound good?",!1)},1e3)},Mt=tn=>{rt(!1),console.error("Avatar error:",tn)},jt=tn=>{tn.key==="Enter"&&mn()},zt=()=>{wt(!0)},dn=()=>{wt(!1),console.log("Call ended")},fn=()=>{wt(!1)};return reactExports.useRef(!1),reactExports.useEffect(()=>{},[]),reactExports.useEffect(()=>{if(en.current&&rn.current){const tn=rn.current.querySelector("[data-radix-scroll-area-viewport]");tn&&tn.scrollTo({top:tn.scrollHeight,behavior:"smooth"})}},[lt]),reactExports.useEffect(()=>()=>{ln&&clearTimeout(ln)},[ln]),reactExports.useEffect(()=>()=>{document.body.style.overflow="unset"},[]),jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs("div",{className:"h-[70vh] w-full bg-background flex flex-col lg:flex-row overflow-hidden relative",children:[nt&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-background/95 backdrop-blur-sm flex items-center justify-center z-[100]",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-12 w-12 animate-spin text-primary"}),jsxRuntimeExports.jsx("div",{className:"text-center space-y-2",children:jsxRuntimeExports.jsxs("p",{className:"text-foreground text-lg font-medium min-h-[2rem] flex items-center justify-center",children:[jsxRuntimeExports.jsx("span",{children:vt}),jsxRuntimeExports.jsx("span",{className:`inline-block ml-1 w-0.5 h-6 bg-primary transition-opacity ${kt?"opacity-100":"animate-blink"}`})]})})]})}),jsxRuntimeExports.jsxs("div",{className:cn("bg-card border-border flex flex-col transition-transform duration-300 ease-in-out","lg:w-80 xl:w-96 lg:border-r lg:relative lg:translate-x-0 lg:h-full","fixed inset-0 z-50 md:w-96 h-full",st?"translate-x-0":"translate-x-full lg:translate-x-0"),children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Chat"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Mindy AI - Sales Assistant"})]}),jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>at(!1),children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Close chat"})})]})]}),jsxRuntimeExports.jsx("div",{className:"h-[32rem] overflow-hidden",ref:rn,children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full",onWheel:tn=>{tn.stopPropagation()},onTouchMove:tn=>{tn.stopPropagation()},onScroll:tn=>{tn.stopPropagation()},children:jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[lt.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center text-muted-foreground text-sm",children:"No messages yet..."}),lt.map(tn=>(console.log(" [DEBUG] Rendering message:",tn.id,tn.sender,tn.message),jsxRuntimeExports.jsxs("div",{className:cn("flex flex-col space-y-1",tn.isOwn?"items-end":"items-start"),children:[jsxRuntimeExports.jsx("div",{className:cn("max-w-[85%] rounded-lg px-3 py-2 text-sm",tn.isOwn?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"),children:tn.message}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-muted-foreground",children:[tn.sender," - ",tn.timestamp]})]},tn.id))),jsxRuntimeExports.jsx("div",{ref:en})]})})}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-border flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2 mb-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Quick replies:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:quickReplies.map((tn,pn)=>jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"text-xs h-8 rounded-full",onClick:()=>wn(tn),children:tn},pn))})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx(Input,{placeholder:"Type a message...",value:it,onChange:tn=>ot(tn.target.value),onKeyPress:jt,className:"flex-1"}),jsxRuntimeExports.jsx(Button,{onClick:mn,size:"icon",className:"shrink-0",children:jsxRuntimeExports.jsx(Send,{className:"h-4 w-4"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[jsxRuntimeExports.jsxs("div",{className:"lg:hidden bg-card border-b border-border p-4 flex items-center justify-between flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-primary rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-sm",children:"Mindy AI"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:["Sales Call - ",xt]})]})]}),jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>at(!0),children:jsxRuntimeExports.jsx(MessageSquare,{className:"h-5 w-5"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Open chat"})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 bg-background p-1 lg:p-6 overflow-hidden min-h-0",children:jsxRuntimeExports.jsxs(Card,{className:"w-full h-full relative overflow-hidden flex items-center justify-center",children:[jsxRuntimeExports.jsx(HeyGenAvatar,{onAvatarReady:un,onError:Mt,isConnecting:nt,onStartTalking:kn,onUserMessage:yn,onAvatarMessage:vn,onAvatarStopTalking:nn,textToSpeak:gt,isAudioMuted:yt,isVideoHidden:et,isUserMicMuted:At}),jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-4 z-20",children:jsxRuntimeExports.jsx("div",{className:"bg-black/50 text-white px-3 py-1 rounded text-sm",children:"Mindy AI - Sales Assistant"})}),_e&&jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-4",children:jsxRuntimeExports.jsx("div",{className:"bg-destructive text-destructive-foreground p-2 rounded-full",children:jsxRuntimeExports.jsx(MicOff,{className:"h-4 w-4"})})})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-card border-t border-border p-4 flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-3 lg:space-x-4",children:[jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{onClick:()=>{$(!_e),Et(!_e)},variant:_e?"destructive":"secondary",size:"lg",className:"rounded-full w-11 h-11 lg:w-12 lg:h-12",children:_e?jsxRuntimeExports.jsx(VolumeOff,{className:"h-4 w-4 lg:h-5 lg:w-5"}):jsxRuntimeExports.jsx(Volume2,{className:"h-4 w-4 lg:h-5 lg:w-5"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:_e?"Unmute avatar audio":"Mute avatar audio"})})]}),jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{onClick:()=>Nt(!At),variant:At?"destructive":"secondary",size:"lg",className:"rounded-full w-11 h-11 lg:w-12 lg:h-12",children:At?jsxRuntimeExports.jsx(MicOff,{className:"h-4 w-4 lg:h-5 lg:w-5"}):jsxRuntimeExports.jsx(Mic,{className:"h-4 w-4 lg:h-5 lg:w-5"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:At?"Unmute your microphone":"Mute your microphone"})})]}),jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{onClick:()=>tt(!et),variant:et?"destructive":"secondary",size:"lg",className:"rounded-full w-11 h-11 lg:w-12 lg:h-12",children:et?jsxRuntimeExports.jsx(VideoOff,{className:"h-4 w-4 lg:h-5 lg:w-5"}):jsxRuntimeExports.jsx(Video,{className:"h-4 w-4 lg:h-5 lg:w-5"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:et?"Turn on avatar video":"Turn off avatar video"})})]}),jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{onClick:zt,variant:"destructive",size:"lg",className:"rounded-full w-11 h-11 lg:w-12 lg:h-12",children:jsxRuntimeExports.jsx(Phone,{className:"h-4 w-4 lg:h-5 lg:w-5 rotate-[135deg]"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"End call"})})]}),jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"lg",className:"rounded-full w-11 h-11 lg:hidden",onClick:()=>at(!0),children:jsxRuntimeExports.jsx(MessageSquare,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Open chat"})})]})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-3 hidden lg:block",children:jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground",children:["Sales Call duration: ",xt]})})]})]}),Tt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[200]",children:jsxRuntimeExports.jsx("div",{className:"bg-card border border-border rounded-lg p-6 max-w-sm mx-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Phone,{className:"h-12 w-12 text-destructive mx-auto mb-4 rotate-[135deg]"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"End Call?"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-6",children:"Are you sure you want to end the call with Mindy AI?"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx(Button,{onClick:fn,variant:"outline",className:"flex-1",children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:dn,variant:"destructive",className:"flex-1",children:"End Call"})]})]})})}),st&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>at(!1)})]})})},Index=()=>{const[_e,$]=reactExports.useState(!1),[et,tt]=reactExports.useState({x:0,y:0});return reactExports.useEffect(()=>{const nt=rt=>{tt({x:rt.clientX/window.innerWidth*100,y:rt.clientY/window.innerHeight*100})};return window.addEventListener("mousemove",nt),()=>window.removeEventListener("mousemove",nt)},[]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background flex flex-col relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-20",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-purple-500/10 to-transparent bg-[length:100px_2px] bg-repeat-y animate-pulse duration-24000"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-purple-500/8 to-transparent bg-[length:2px_100px] bg-repeat-x animate-pulse duration-18000"})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/4 w-32 h-px bg-gradient-to-r from-transparent via-purple-500/50 to-transparent animate-pulse duration-9000",style:{left:`${20+et.x*.1}%`,transform:`translateY(${Math.sin(Date.now()*.001)*20}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 w-24 h-px bg-gradient-to-r from-transparent via-purple-500/45 to-transparent animate-ping duration-12000",style:{right:`${15+et.x*.08}%`,transform:`translateY(${Math.cos(Date.now()*8e-4)*15}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-3/4 w-28 h-px bg-gradient-to-r from-transparent via-purple-500/50 to-transparent animate-pulse duration-15000",style:{left:`${60-et.x*.05}%`,transform:`translateY(${Math.sin(Date.now()*.0012)*25}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/6 w-20 h-px bg-gradient-to-r from-transparent via-green-500/48 to-transparent animate-pulse duration-8400",style:{left:`${40+et.x*.06}%`,transform:`translateY(${Math.cos(Date.now()*.0015)*18}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-5/6 w-36 h-px bg-gradient-to-r from-transparent via-cyan-500/52 to-transparent animate-ping duration-10800",style:{right:`${25-et.x*.04}%`,transform:`translateY(${Math.sin(Date.now()*9e-4)*22}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-2/5 w-18 h-px bg-gradient-to-r from-transparent via-indigo-500/46 to-transparent animate-pulse duration-12600",style:{left:`${10+et.x*.07}%`,transform:`translateY(${Math.cos(Date.now()*.0011)*16}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/8 w-30 h-px bg-gradient-to-r from-transparent via-red-500/44 to-transparent animate-ping duration-10200",style:{left:`${35+et.x*.09}%`,transform:`translateY(${Math.sin(Date.now()*.0013)*19}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-3/8 w-26 h-px bg-gradient-to-r from-transparent via-yellow-500/47 to-transparent animate-pulse duration-8700",style:{right:`${30+et.x*.05}%`,transform:`translateY(${Math.cos(Date.now()*7e-4)*23}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-7/8 w-22 h-px bg-gradient-to-r from-transparent via-pink-500/49 to-transparent animate-ping duration-11100",style:{left:`${55-et.x*.06}%`,transform:`translateY(${Math.sin(Date.now()*.0016)*17}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/3 w-34 h-px bg-gradient-to-r from-transparent via-orange-500/51 to-transparent animate-pulse duration-12900",style:{right:`${40+et.x*.04}%`,transform:`translateY(${Math.cos(Date.now()*.0014)*21}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-2/3 w-28 h-px bg-gradient-to-r from-transparent via-emerald-500/45 to-transparent animate-ping duration-9300",style:{left:`${15+et.x*.08}%`,transform:`translateY(${Math.sin(Date.now()*.001)*26}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-11/12 w-24 h-px bg-gradient-to-r from-transparent via-violet-500/48 to-transparent animate-pulse duration-11400",style:{right:`${50-et.x*.03}%`,transform:`translateY(${Math.cos(Date.now()*6e-4)*14}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/12 w-40 h-0.5 bg-gradient-to-r from-transparent via-rose-500/43 to-transparent animate-ping duration-9600",style:{left:`${5+et.x*.12}%`,transform:`translateY(${Math.sin(Date.now()*.0017)*24}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-5/12 w-38 h-0.5 bg-gradient-to-r from-transparent via-amber-500/46 to-transparent animate-pulse duration-7800",style:{right:`${8+et.x*.11}%`,transform:`translateY(${Math.cos(Date.now()*.0019)*28}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-7/12 w-42 h-0.5 bg-gradient-to-r from-transparent via-lime-500/49 to-transparent animate-ping duration-13500",style:{left:`${75-et.x*.07}%`,transform:`translateY(${Math.sin(Date.now()*5e-4)*19}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-9/12 w-35 h-0.5 bg-gradient-to-r from-transparent via-sky-500/44 to-transparent animate-pulse duration-9900",style:{right:`${60+et.x*.06}%`,transform:`translateY(${Math.cos(Date.now()*.0018)*22}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/5 w-44 h-0.5 bg-gradient-to-r from-transparent via-fuchsia-500/50 to-transparent animate-ping duration-8250",style:{left:`${25+et.x*.09}%`,transform:`translateY(${Math.sin(Date.now()*.0021)*27}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-4/5 w-33 h-0.5 bg-gradient-to-r from-transparent via-teal-500/47 to-transparent animate-pulse duration-12300",style:{right:`${35-et.x*.08}%`,transform:`translateY(${Math.cos(Date.now()*4e-4)*20}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/10 w-46 h-0.5 bg-gradient-to-r from-transparent via-slate-500/45 to-transparent animate-ping duration-10500",style:{left:`${65+et.x*.05}%`,transform:`translateY(${Math.sin(Date.now()*.002)*25}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-9/10 w-29 h-0.5 bg-gradient-to-r from-transparent via-zinc-500/48 to-transparent animate-pulse duration-8700",style:{right:`${18+et.x*.1}%`,transform:`translateY(${Math.cos(Date.now()*.0022)*23}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/20 w-50 h-0.5 bg-gradient-to-r from-transparent via-purple-400/35 to-transparent animate-pulse duration-15600",style:{left:`${12+et.x*.08}%`,transform:`translateY(${Math.sin(Date.now()*.0023)*15}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-3/20 w-45 h-0.5 bg-gradient-to-r from-transparent via-purple-400/38 to-transparent animate-ping duration-14400",style:{right:`${22+et.x*.09}%`,transform:`translateY(${Math.cos(Date.now()*.0025)*18}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-9/20 w-52 h-0.5 bg-gradient-to-r from-transparent via-green-400/40 to-transparent animate-pulse duration-11700",style:{left:`${38+et.x*.06}%`,transform:`translateY(${Math.sin(Date.now()*.0027)*20}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-11/20 w-48 h-0.5 bg-gradient-to-r from-transparent via-red-400/36 to-transparent animate-ping duration-13200",style:{right:`${28+et.x*.07}%`,transform:`translateY(${Math.cos(Date.now()*.0029)*16}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-13/20 w-55 h-0.5 bg-gradient-to-r from-transparent via-yellow-400/42 to-transparent animate-pulse duration-11100",style:{left:`${8+et.x*.1}%`,transform:`translateY(${Math.sin(Date.now()*.0031)*22}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-17/20 w-41 h-0.5 bg-gradient-to-r from-transparent via-cyan-400/39 to-transparent animate-ping duration-15300",style:{right:`${45+et.x*.05}%`,transform:`translateY(${Math.cos(Date.now()*.0033)*17}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-19/20 w-47 h-0.5 bg-gradient-to-r from-transparent via-pink-400/37 to-transparent animate-pulse duration-13800",style:{left:`${32+et.x*.08}%`,transform:`translateY(${Math.sin(Date.now()*.0035)*19}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-1/4 w-px h-20 bg-gradient-to-b from-transparent via-purple-500/45 to-transparent animate-pulse duration-12000",style:{top:`${30+et.y*.1}%`,transform:`translateX(${Math.cos(Date.now()*.001)*15}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-1/4 w-px h-16 bg-gradient-to-b from-transparent via-purple-500/50 to-transparent animate-ping duration-10500",style:{top:`${50-et.y*.08}%`,transform:`translateX(${Math.sin(Date.now()*9e-4)*20}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-1/6 w-px h-24 bg-gradient-to-b from-transparent via-purple-500/48 to-transparent animate-pulse duration-9600",style:{top:`${20+et.y*.05}%`,transform:`translateX(${Math.cos(Date.now()*.0013)*12}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-1/6 w-px h-18 bg-gradient-to-b from-transparent via-green-500/52 to-transparent animate-ping duration-8700",style:{top:`${70-et.y*.06}%`,transform:`translateX(${Math.sin(Date.now()*7e-4)*18}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-1/2 w-px h-22 bg-gradient-to-b from-transparent via-cyan-500/47 to-transparent animate-pulse duration-11400",style:{top:`${15+et.y*.04}%`,transform:`translateX(${Math.cos(Date.now()*.0014)*14}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-3/4 w-px h-26 bg-gradient-to-b from-transparent via-indigo-500/49 to-transparent animate-ping duration-12300",style:{top:`${45+et.y*.07}%`,transform:`translateX(${Math.sin(Date.now()*8e-4)*16}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-1/8 w-px h-28 bg-gradient-to-b from-transparent via-red-500/46 to-transparent animate-pulse duration-9900",style:{top:`${35+et.y*.09}%`,transform:`translateX(${Math.cos(Date.now()*.0011)*19}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-1/8 w-px h-20 bg-gradient-to-b from-transparent via-yellow-500/50 to-transparent animate-ping duration-8100",style:{top:`${25-et.y*.05}%`,transform:`translateX(${Math.sin(Date.now()*.0015)*22}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-3/8 w-px h-32 bg-gradient-to-b from-transparent via-pink-500/44 to-transparent animate-pulse duration-13200",style:{top:`${60+et.y*.03}%`,transform:`translateX(${Math.cos(Date.now()*8e-4)*17}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-3/8 w-px h-24 bg-gradient-to-b from-transparent via-orange-500/48 to-transparent animate-ping duration-10800",style:{top:`${40-et.y*.07}%`,transform:`translateX(${Math.sin(Date.now()*.0012)*21}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-5/8 w-px h-30 bg-gradient-to-b from-transparent via-emerald-500/51 to-transparent animate-pulse duration-8400",style:{top:`${10+et.y*.08}%`,transform:`translateX(${Math.cos(Date.now()*.0016)*13}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-5/8 w-px h-22 bg-gradient-to-b from-transparent via-violet-500/47 to-transparent animate-ping duration-11700",style:{top:`${75-et.y*.04}%`,transform:`translateX(${Math.sin(Date.now()*.001)*24}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-7/8 w-px h-26 bg-gradient-to-b from-transparent via-teal-500/49 to-transparent animate-pulse duration-10200",style:{top:`${55+et.y*.06}%`,transform:`translateX(${Math.cos(Date.now()*9e-4)*16}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-7/8 w-px h-18 bg-gradient-to-b from-transparent via-slate-500/45 to-transparent animate-ping duration-12600",style:{top:`${30-et.y*.02}%`,transform:`translateX(${Math.sin(Date.now()*.0014)*20}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-1/12 w-0.5 h-35 bg-gradient-to-b from-transparent via-rose-500/43 to-transparent animate-pulse duration-9300",style:{top:`${8+et.y*.11}%`,transform:`translateX(${Math.cos(Date.now()*.0017)*25}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-1/12 w-0.5 h-38 bg-gradient-to-b from-transparent via-amber-500/46 to-transparent animate-ping duration-7500",style:{top:`${65-et.y*.09}%`,transform:`translateX(${Math.sin(Date.now()*.0019)*27}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-5/12 w-0.5 h-40 bg-gradient-to-b from-transparent via-lime-500/49 to-transparent animate-pulse duration-13800",style:{top:`${22+et.y*.06}%`,transform:`translateX(${Math.cos(Date.now()*5e-4)*18}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-5/12 w-0.5 h-33 bg-gradient-to-b from-transparent via-sky-500/44 to-transparent animate-ping duration-10200",style:{top:`${80-et.y*.07}%`,transform:`translateX(${Math.sin(Date.now()*.0018)*23}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-7/12 w-0.5 h-42 bg-gradient-to-b from-transparent via-fuchsia-500/50 to-transparent animate-pulse duration-8400",style:{top:`${12+et.y*.08}%`,transform:`translateX(${Math.cos(Date.now()*.0021)*26}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-7/12 w-0.5 h-36 bg-gradient-to-b from-transparent via-indigo-500/47 to-transparent animate-ping duration-12000",style:{top:`${58-et.y*.05}%`,transform:`translateX(${Math.sin(Date.now()*4e-4)*21}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-11/12 w-0.5 h-44 bg-gradient-to-b from-transparent via-zinc-500/48 to-transparent animate-pulse duration-10800",style:{top:`${28+et.y*.1}%`,transform:`translateX(${Math.cos(Date.now()*.002)*24}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute right-11/12 w-0.5 h-31 bg-gradient-to-b from-transparent via-stone-500/45 to-transparent animate-ping duration-8700",style:{top:`${72-et.y*.04}%`,transform:`translateX(${Math.sin(Date.now()*.0022)*19}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-1/20 w-0.5 h-50 bg-gradient-to-b from-transparent via-purple-400/35 to-transparent animate-pulse duration-15600",style:{top:`${12+et.y*.08}%`,transform:`translateX(${Math.cos(Date.now()*.0023)*15}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-3/20 w-0.5 h-45 bg-gradient-to-b from-transparent via-purple-400/38 to-transparent animate-ping duration-14400",style:{top:`${22+et.y*.09}%`,transform:`translateX(${Math.sin(Date.now()*.0025)*18}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-9/20 w-0.5 h-52 bg-gradient-to-b from-transparent via-green-400/40 to-transparent animate-pulse duration-11700",style:{top:`${38+et.y*.06}%`,transform:`translateX(${Math.cos(Date.now()*.0027)*20}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-11/20 w-0.5 h-48 bg-gradient-to-b from-transparent via-red-400/36 to-transparent animate-ping duration-13200",style:{top:`${28+et.y*.07}%`,transform:`translateX(${Math.sin(Date.now()*.0029)*16}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-13/20 w-0.5 h-55 bg-gradient-to-b from-transparent via-yellow-400/42 to-transparent animate-pulse duration-11100",style:{top:`${8+et.y*.1}%`,transform:`translateX(${Math.cos(Date.now()*.0031)*22}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-17/20 w-0.5 h-41 bg-gradient-to-b from-transparent via-cyan-400/39 to-transparent animate-ping duration-15300",style:{top:`${45+et.y*.05}%`,transform:`translateX(${Math.sin(Date.now()*.0033)*17}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute left-19/20 w-0.5 h-47 bg-gradient-to-b from-transparent via-pink-400/37 to-transparent animate-pulse duration-13800",style:{top:`${32+et.y*.08}%`,transform:`translateX(${Math.cos(Date.now()*.0035)*19}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-20 h-px bg-gradient-to-r from-transparent via-yellow-500/24 to-transparent transform rotate-45 animate-pulse duration-9900",style:{top:`${25+et.y*.03}%`,left:`${30+et.x*.02}%`,transform:`translate(${Math.sin(Date.now()*6e-4)*20}px, ${Math.cos(Date.now()*6e-4)*15}px) rotate(45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-16 h-px bg-gradient-to-r from-transparent via-orange-500/26 to-transparent transform -rotate-45 animate-ping duration-8100",style:{top:`${60-et.y*.04}%`,right:`${20+et.x*.03}%`,transform:`translate(${Math.cos(Date.now()*5e-4)*18}px, ${Math.sin(Date.now()*5e-4)*12}px) rotate(-45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-22 h-px bg-gradient-to-r from-transparent via-pink-500/25 to-transparent transform rotate-45 animate-pulse duration-11700",style:{bottom:`${30+et.y*.05}%`,left:`${45-et.x*.02}%`,transform:`translate(${Math.sin(Date.now()*.0012)*16}px, ${Math.cos(Date.now()*.0012)*20}px) rotate(45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-18 h-px bg-gradient-to-r from-transparent via-teal-500/28 to-transparent transform -rotate-45 animate-ping duration-9300",style:{top:`${40+et.y*.02}%`,right:`${40+et.x*.04}%`,transform:`translate(${Math.cos(Date.now()*.001)*14}px, ${Math.sin(Date.now()*.001)*17}px) rotate(-45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-25 h-px bg-gradient-to-r from-transparent via-emerald-500/30 to-transparent transform rotate-45 animate-pulse duration-12600",style:{top:`${15+et.y*.06}%`,left:`${55+et.x*.03}%`,transform:`translate(${Math.cos(Date.now()*8e-4)*22}px, ${Math.sin(Date.now()*8e-4)*18}px) rotate(45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-30 h-px bg-gradient-to-r from-transparent via-violet-500/32 to-transparent transform -rotate-45 animate-ping duration-11400",style:{bottom:`${20+et.y*.04}%`,right:`${60+et.x*.05}%`,transform:`translate(${Math.sin(Date.now()*.0011)*19}px, ${Math.cos(Date.now()*.0011)*25}px) rotate(-45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-28 h-px bg-gradient-to-r from-transparent via-lime-500/29 to-transparent transform rotate-45 animate-pulse duration-10500",style:{top:`${70+et.y*.02}%`,left:`${15+et.x*.07}%`,transform:`translate(${Math.cos(Date.now()*.0014)*16}px, ${Math.sin(Date.now()*.0014)*21}px) rotate(45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-32 h-px bg-gradient-to-r from-transparent via-amber-500/33 to-transparent transform -rotate-45 animate-ping duration-13500",style:{top:`${35+et.y*.08}%`,right:`${25+et.x*.06}%`,transform:`translate(${Math.sin(Date.now()*7e-4)*23}px, ${Math.cos(Date.now()*7e-4)*14}px) rotate(-45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-26 h-px bg-gradient-to-r from-transparent via-rose-500/27 to-transparent transform rotate-45 animate-pulse duration-8700",style:{bottom:`${45+et.y*.05}%`,left:`${70+et.x*.04}%`,transform:`translate(${Math.cos(Date.now()*.0016)*20}px, ${Math.sin(Date.now()*.0016)*17}px) rotate(45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-24 h-px bg-gradient-to-r from-transparent via-sky-500/31 to-transparent transform -rotate-45 animate-ping duration-12300",style:{top:`${50+et.y*.03}%`,right:`${10+et.x*.09}%`,transform:`translate(${Math.sin(Date.now()*.0013)*18}px, ${Math.cos(Date.now()*.0013)*22}px) rotate(-45deg)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-2 h-2 bg-purple-500/40 rounded-full animate-pulse duration-12000",style:{top:`${30+et.y*.05}%`,left:`${30+et.x*.05}%`,transform:`translate(${Math.sin(Date.now()*.001)*10}px, ${Math.cos(Date.now()*.001)*10}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-1.5 h-1.5 bg-purple-500/35 rounded-full animate-ping duration-10500",style:{top:`${70+et.y*.03}%`,right:`${40+et.x*.04}%`,transform:`translate(${Math.cos(Date.now()*8e-4)*8}px, ${Math.sin(Date.now()*8e-4)*12}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-2.5 h-2.5 bg-purple-500/30 rounded-full animate-pulse duration-15000",style:{bottom:`${20+et.y*.06}%`,left:`${60+et.x*.03}%`,transform:`translate(${Math.sin(Date.now()*.0012)*15}px, ${Math.cos(Date.now()*.0012)*8}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-1 h-1 bg-green-500/45 rounded-full animate-ping duration-8400",style:{top:`${15+et.y*.08}%`,right:`${70+et.x*.02}%`,transform:`translate(${Math.cos(Date.now()*.0015)*6}px, ${Math.sin(Date.now()*.0015)*14}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-3 h-3 bg-cyan-500/25 rounded-full animate-pulse duration-12600",style:{top:`${85+et.y*.02}%`,left:`${15+et.x*.07}%`,transform:`translate(${Math.sin(Date.now()*9e-4)*12}px, ${Math.cos(Date.now()*9e-4)*9}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute w-1.5 h-1.5 bg-yellow-500/40 rounded-full animate-ping duration-10800",style:{bottom:`${40+et.y*.04}%`,right:`${15+et.x*.08}%`,transform:`translate(${Math.cos(Date.now()*.0011)*11}px, ${Math.sin(Date.now()*.0011)*7}px)`}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10 animate-pulse duration-18000",style:{background:`
              linear-gradient(90deg, transparent 24px, rgba(139, 92, 246, 0.15) 25px, rgba(139, 92, 246, 0.15) 26px, transparent 27px),
              linear-gradient(rgba(139, 92, 246, 0.1) 24px, transparent 25px, transparent 26px, rgba(139, 92, 246, 0.1) 27px)
            `,backgroundSize:"50px 50px",transform:`translateX(${et.x*.02}px) translateY(${et.y*.02}px)`}})]}),jsxRuntimeExports.jsx("div",{className:"bg-background/80 backdrop-blur-sm border-b border-border py-4 md:py-6 px-4 md:px-6 flex-shrink-0 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-2 md:hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("img",{src:"/assets/gimind-logo.png",alt:"GiminD Logo",className:"h-8"})}),jsxRuntimeExports.jsx("h1",{className:"text-lg font-bold text-center text-foreground font-poppins font-extrabold",children:"Meet Mindy, Our Superhuman Closer"})]}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[jsxRuntimeExports.jsx("img",{src:"/assets/gimind-logo.png",alt:"GiminD Logo",className:"h-10"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-center text-foreground font-poppins font-extrabold flex-1 ml-4",children:"Meet Mindy, Our Superhuman Closer"}),jsxRuntimeExports.jsx("div",{className:"w-10"})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-2 md:p-6 overflow-hidden relative z-10 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"max-w-full md:max-w-[70%] mx-auto h-full w-full",children:_e?jsxRuntimeExports.jsx("div",{className:"bg-card/90 backdrop-blur-sm border border-border rounded-lg overflow-hidden shadow-2xl h-full",children:jsxRuntimeExports.jsx("div",{className:"h-full",children:jsxRuntimeExports.jsx(VideoCallInterface,{})})}):jsxRuntimeExports.jsx("div",{id:"talk-to-mindy-card",className:"h-full w-full flex items-center justify-center min-h-[60vh]",children:jsxRuntimeExports.jsxs("div",{className:"relative rounded-lg flex items-center justify-center overflow-hidden",children:[jsxRuntimeExports.jsx("span",{className:"absolute top-0 left-0 w-full h-0.5 bg-gradient-to-r from-background via-purple-500 to-background animate-border-top"}),jsxRuntimeExports.jsx("span",{className:"absolute top-0 right-0 w-0.5 h-full bg-gradient-to-b from-background via-purple-500 to-background animate-border-right"}),jsxRuntimeExports.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-l from-background via-purple-500 to-background animate-border-bottom"}),jsxRuntimeExports.jsx("span",{className:"absolute top-0 left-0 w-0.5 h-full bg-gradient-to-t from-background via-purple-500 to-background animate-border-left"}),jsxRuntimeExports.jsx(Card,{className:"relative bg-card/90 backdrop-blur-sm border-0 shadow-2xl z-10 m-0.5",children:jsxRuntimeExports.jsx(CardContent,{className:"p-8 md:p-12",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-6xl font-bold text-foreground",children:"Ready to Meet Mindy?"}),jsxRuntimeExports.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto",children:"Experience the future of AI-powered conversations. Click below to start your personalized session."})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>$(!0),size:"lg",className:"text-lg px-8 py-6 bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Talk to Mindy"]})]})})})]})})})}),jsxRuntimeExports.jsxs("div",{className:"relative bg-background/80 backdrop-blur-sm border-t border-border py-4 md:py-8 px-4 md:px-6 flex-shrink-0 z-10 mt-4 md:mt-8 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-900/20 via-purple-800/10 to-transparent"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600/15 via-transparent to-purple-600/10"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-purple-900/30 to-transparent"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-full bg-gradient-to-l from-purple-700/20 to-transparent"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-full bg-gradient-to-r from-purple-800/15 to-transparent"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-1/4 w-64 h-64 bg-gradient-to-t from-purple-500/20 to-transparent rounded-full blur-3xl animate-pulse duration-12000"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-1/3 w-48 h-48 bg-gradient-to-t from-purple-500/15 to-transparent rounded-full blur-2xl animate-pulse duration-18000"}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto text-center space-y-6 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2 md:space-y-3",children:[jsxRuntimeExports.jsx("img",{src:"/assets/gimind-logo-white.png",alt:"GiminD Logo",className:"h-12 md:h-16 mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-base md:text-xl text-foreground font-medium",children:"The Smartest Person In The Room"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center space-x-6 md:space-x-12 text-sm md:text-base",children:[jsxRuntimeExports.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors duration-200",children:"Privacy"}),jsxRuntimeExports.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors duration-200",children:"Terms Of Use"}),jsxRuntimeExports.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors duration-200",children:"Contact Us"})]})]})]})]})},NotFound=()=>{const _e=useLocation();return reactExports.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",_e.pathname)},[_e.pathname]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),jsxRuntimeExports.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},queryClient=new QueryClient,App=()=>jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsxs(TooltipProvider,{children:[jsxRuntimeExports.jsx(Toaster$1,{}),jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Index,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})})]})});var build_umd={exports:{}};(function(_e,$){(function(tt,nt){_e.exports=nt()})(commonjsGlobal,function(){return function(){var et={"./packages/@logrocket/console/src/index.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=void 0;var lt=at(st("./packages/@logrocket/console/src/registerConsole.js")),dt=lt.default;ot.default=dt},"./packages/@logrocket/console/src/registerConsole.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ht;var lt=at(st("./node_modules/@babel/runtime/helpers/typeof.js")),dt=at(st("./packages/@logrocket/utils/src/enhanceFunc.ts")),pt=st("./packages/@logrocket/exceptions/src/index.js");function ht(vt){var mt=[],kt=["log","warn","info","error","debug"];return kt.forEach(function(bt){mt.push((0,dt.default)(console,bt,function(){for(var gt=arguments.length,St=new Array(gt),yt=0;yt<gt;yt++)St[yt]=arguments[yt];vt.addEvent("lr.core.LogEvent",function(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Tt=Et.isEnabled;if((0,lt.default)(Tt)==="object"&&Tt[bt]===!1||Tt===!1)return null;if(bt==="error"&&Et.shouldAggregateConsoleErrors)if(St&&St.length>=2&&St[0]==="ERROR"){var wt="";try{wt=" ".concat(St[1])}catch{}pt.Capture.captureMessage(vt,"".concat(St[0]).concat(wt),St,{},!0)}else pt.Capture.captureMessage(vt,St[0],St,{},!0);return{logLevel:bt.toUpperCase(),args:St}})}))}),function(){mt.forEach(function(bt){return bt()})}}},"./packages/@logrocket/exceptions/src/Capture.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.captureMessage=ht,ot.captureException=vt;var lt=st("./packages/@logrocket/utils/src/scrubException.ts"),dt=at(st("./packages/@logrocket/utils/src/TraceKit.js")),pt=at(st("./packages/@logrocket/exceptions/src/stackTraceFromError.js"));function ht(mt,kt,bt){var gt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},St=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,yt={exceptionType:St?"CONSOLE":"MESSAGE",message:kt,messageArgs:bt,browserHref:window.location?window.location.href:""};(0,lt.scrubException)(yt,gt),mt.addEvent("lr.core.Exception",function(){return yt})}function vt(mt,kt){var bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},gt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,St=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"WINDOW",yt=gt||dt.default.computeStackTrace(kt),Et={exceptionType:St,errorType:yt.name,message:yt.message,browserHref:window.location?window.location.href:""};(0,lt.scrubException)(Et,bt);var Tt={_stackTrace:(0,pt.default)(yt)};mt.addEvent("lr.core.Exception",function(){return Et},Tt)}},"./packages/@logrocket/exceptions/src/index.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),lt=st("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(ot,"__esModule",{value:!0}),Object.defineProperty(ot,"registerExceptions",{enumerable:!0,get:function(){return dt.default}}),ot.Capture=void 0;var dt=at(st("./packages/@logrocket/exceptions/src/registerExceptions.js")),pt=vt(st("./packages/@logrocket/exceptions/src/Capture.js"));ot.Capture=pt;function ht(mt){if(typeof WeakMap!="function")return null;var kt=new WeakMap,bt=new WeakMap;return(ht=function(St){return St?bt:kt})(mt)}function vt(mt,kt){if(mt&&mt.__esModule)return mt;if(mt===null||lt(mt)!=="object"&&typeof mt!="function")return{default:mt};var bt=ht(kt);if(bt&&bt.has(mt))return bt.get(mt);var gt={},St=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var yt in mt)if(yt!=="default"&&Object.prototype.hasOwnProperty.call(mt,yt)){var Et=St?Object.getOwnPropertyDescriptor(mt,yt):null;Et&&(Et.get||Et.set)?Object.defineProperty(gt,yt,Et):gt[yt]=mt[yt]}return gt.default=mt,bt&&bt.set(mt,gt),gt}},"./packages/@logrocket/exceptions/src/raven/raven.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=void 0;var lt=at(st("./node_modules/@babel/runtime/helpers/classCallCheck.js")),dt=at(st("./node_modules/@babel/runtime/helpers/createClass.js")),pt=at(st("./packages/@logrocket/utils/src/TraceKit.js")),ht=Object.prototype;function vt(yt){return yt===void 0}function mt(yt){return typeof yt=="function"}function kt(yt,Et){return ht.hasOwnProperty.call(yt,Et)}function bt(yt,Et,Tt,wt){var Rt=yt[Et];yt[Et]=Tt(Rt),wt&&wt.push([yt,Et,Rt])}var gt=typeof window<"u"?window:typeof st.g<"u"?st.g:typeof self<"u"?self:{};gt.document;var St=function(){function yt(Et){var Tt=Et.captureException;(0,lt.default)(this,yt),this._errorHandler=this._errorHandler.bind(this),this._ignoreOnError=0,this._wrappedBuiltIns=[],this.captureException=Tt,pt.default.report.subscribe(this._errorHandler),this._instrumentTryCatch()}return(0,dt.default)(yt,[{key:"uninstall",value:function(){pt.default.report.unsubscribe(this._errorHandler);for(var Tt;this._wrappedBuiltIns.length;){Tt=this._wrappedBuiltIns.shift();var wt=Tt[0],Rt=Tt[1],xt=Tt[2];wt[Rt]=xt}}},{key:"_errorHandler",value:function(Tt){this._ignoreOnError||this.captureException(Tt)}},{key:"_ignoreNextOnError",value:function(){var Tt=this;this._ignoreOnError+=1,setTimeout(function(){Tt._ignoreOnError-=1})}},{key:"context",value:function(Tt,wt,Rt){return mt(Tt)&&(Rt=wt||[],wt=Tt,Tt=void 0),this.wrap(Tt,wt).apply(this,Rt)}},{key:"wrap",value:function(Tt,wt,Rt){var xt=this;if(vt(wt)&&!mt(Tt))return Tt;if(mt(Tt)&&(wt=Tt,Tt=void 0),!mt(wt))return wt;try{if(wt.__lr__)return wt;if(wt.__lr_wrapper__)return wt.__lr_wrapper__;if(!Object.isExtensible(wt))return wt}catch{return wt}function Pt(){var Nt=[],Bt=arguments.length,Jt=!Tt||Tt&&Tt.deep!==!1;for(Rt&&mt(Rt)&&Rt.apply(this,arguments);Bt--;)Nt[Bt]=Jt?xt.wrap(Tt,arguments[Bt]):arguments[Bt];try{return wt.apply(this,Nt)}catch(ln){throw xt._ignoreNextOnError(),xt.captureException(pt.default.computeStackTrace(ln),Tt),ln}}for(var At in wt)kt(wt,At)&&(Pt[At]=wt[At]);return Pt.prototype=wt.prototype,wt.__lr_wrapper__=Pt,Pt.__lr__=!0,Pt.__inner__=wt,Pt}},{key:"_instrumentTryCatch",value:function(){var Tt=this,wt=Tt._wrappedBuiltIns;function Rt(Bt){return function(Jt,ln){for(var on=new Array(arguments.length),an=0;an<on.length;++an)on[an]=arguments[an];var Lt=on[0];return mt(Lt)&&(on[0]=Tt.wrap(Lt)),Bt.apply?Bt.apply(this,on):Bt(on[0],on[1])}}function xt(Bt){var Jt=gt[Bt]&&gt[Bt].prototype;Jt&&Jt.hasOwnProperty&&Jt.hasOwnProperty("addEventListener")&&(bt(Jt,"addEventListener",function(ln){return function(on,an,Lt,en){try{an&&an.handleEvent&&(an.handleEvent=Tt.wrap(an.handleEvent))}catch{}var rn;return ln.call(this,on,Tt.wrap(an,void 0,rn),Lt,en)}},wt),bt(Jt,"removeEventListener",function(ln){return function(on,an,Lt,en){try{var rn=an==null?void 0:an.__lr_wrapper__;rn&&ln.call(this,on,rn,Lt,en)}catch{}return ln.call(this,on,an,Lt,en)}},void 0))}bt(gt,"setTimeout",Rt,wt),bt(gt,"setInterval",Rt,wt),gt.requestAnimationFrame&&bt(gt,"requestAnimationFrame",function(Bt){return function(Jt){return Bt(Tt.wrap(Jt))}},wt);for(var Pt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],At=0;At<Pt.length;At++)xt(Pt[At]);var Nt=gt.jQuery||gt.$;Nt&&Nt.fn&&Nt.fn.ready&&bt(Nt.fn,"ready",function(Bt){return function(Jt){return Bt.call(this,Tt.wrap(Jt))}},wt)}}]),yt}();ot.default=St},"./packages/@logrocket/exceptions/src/registerExceptions.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),lt=st("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=mt;var dt=at(st("./packages/@logrocket/exceptions/src/raven/raven.js")),pt=vt(st("./packages/@logrocket/exceptions/src/Capture.js"));function ht(kt){if(typeof WeakMap!="function")return null;var bt=new WeakMap,gt=new WeakMap;return(ht=function(yt){return yt?gt:bt})(kt)}function vt(kt,bt){if(kt&&kt.__esModule)return kt;if(kt===null||lt(kt)!=="object"&&typeof kt!="function")return{default:kt};var gt=ht(bt);if(gt&&gt.has(kt))return gt.get(kt);var St={},yt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in kt)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(kt,Et)){var Tt=yt?Object.getOwnPropertyDescriptor(kt,Et):null;Tt&&(Tt.get||Tt.set)?Object.defineProperty(St,Et,Tt):St[Et]=kt[Et]}return St.default=kt,gt&&gt.set(kt,St),St}function mt(kt){var bt=new dt.default({captureException:function(yt){pt.captureException(kt,null,null,yt)}}),gt=function(yt){yt.reason instanceof Error?pt.captureException(kt,yt.reason,null,null,"UNHANDLED_REJECTION"):kt.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:yt.reason||"Unhandled Promise rejection"}})};return window.addEventListener("unhandledrejection",gt),function(){window.removeEventListener("unhandledrejection",gt),bt.uninstall()}}},"./packages/@logrocket/exceptions/src/stackTraceFromError.js":function(it,ot){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=st;function st(at){function lt(dt){return dt===null?void 0:dt}return at.stack?at.stack.map(function(dt){return{lineNumber:lt(dt.line),columnNumber:lt(dt.column),fileName:lt(dt.url),functionName:lt(dt.func)}}):void 0}},"./packages/@logrocket/network/src/fetchIntercept.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=void 0;var lt=at(st("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),dt=st("./packages/@logrocket/network/src/registerXHR.js"),pt=[];function ht(bt,gt){for(var St=pt.reduce(function(Rt,xt){return[xt].concat(Rt)},[]),yt=arguments.length,Et=new Array(yt>2?yt-2:0),Tt=2;Tt<yt;Tt++)Et[Tt-2]=arguments[Tt];var wt=Promise.resolve(Et);return St.forEach(function(Rt){var xt=Rt.request,Pt=Rt.requestError;(xt||Pt)&&(wt=wt.then(function(At){return xt.apply(void 0,[gt].concat((0,lt.default)(At)))},function(At){return Pt.apply(void 0,[gt].concat((0,lt.default)(At)))}))}),wt=wt.then(function(Rt){(0,dt.setActive)(!1);var xt,Pt;try{xt=bt.apply(void 0,(0,lt.default)(Rt))}catch(At){Pt=At}if((0,dt.setActive)(!0),Pt)throw Pt;return xt}),St.forEach(function(Rt){var xt=Rt.response,Pt=Rt.responseError;(xt||Pt)&&(wt=wt.then(function(At){return xt(gt,At)},function(At){return Pt&&Pt(gt,At)}))}),wt}function vt(bt){if(!(!bt.fetch||!bt.Promise)){var gt=bt.fetch.polyfill;bt.fetch=function(St){var yt=0;return function(){for(var Et=arguments.length,Tt=new Array(Et),wt=0;wt<Et;wt++)Tt[wt]=arguments[wt];return ht.apply(void 0,[St,yt++].concat(Tt))}}(bt.fetch),gt&&(bt.fetch.polyfill=gt)}}var mt=!1,kt={register:function(gt){return mt||(mt=!0,vt(window)),pt.push(gt),function(){var St=pt.indexOf(gt);St>=0&&pt.splice(St,1)}},clear:function(){pt=[]}};ot.default=kt},"./packages/@logrocket/network/src/index.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=St;var lt=at(st("./node_modules/@babel/runtime/helpers/defineProperty.js")),dt=at(st("./node_modules/@babel/runtime/helpers/typeof.js")),pt=at(st("./packages/@logrocket/network/src/registerFetch.js")),ht=st("./packages/@logrocket/network/src/registerIonic.ts"),vt=at(st("./packages/@logrocket/network/src/registerNetworkInformation.js")),mt=at(st("./packages/@logrocket/network/src/registerXHR.js")),kt=at(st("./packages/@logrocket/utils/src/mapValues.ts"));function bt(yt,Et){var Tt=Object.keys(yt);if(Object.getOwnPropertySymbols){var wt=Object.getOwnPropertySymbols(yt);Et&&(wt=wt.filter(function(Rt){return Object.getOwnPropertyDescriptor(yt,Rt).enumerable})),Tt.push.apply(Tt,wt)}return Tt}function gt(yt){for(var Et=1;Et<arguments.length;Et++){var Tt=arguments[Et]!=null?arguments[Et]:{};Et%2?bt(Object(Tt),!0).forEach(function(wt){(0,lt.default)(yt,wt,Tt[wt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(yt,Object.getOwnPropertyDescriptors(Tt)):bt(Object(Tt)).forEach(function(wt){Object.defineProperty(yt,wt,Object.getOwnPropertyDescriptor(Tt,wt))})}return yt}function St(yt){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{isReactNative:!1,isDisabled:!1};if((Et==null?void 0:Et.isDisabled)===!0)return function(){};var Tt=Et.isReactNative,wt=Et.shouldAugmentNPS,Rt=Et.shouldParseXHRBlob,xt={},Pt=function(en){var rn=4096e3,sn=en;if((0,dt.default)(en)==="object"&&en!=null){var hn=Object.getPrototypeOf(en);(hn===Object.prototype||hn===null)&&(sn=JSON.stringify(en))}if(sn&&sn.length&&sn.length>rn&&typeof sn=="string"){var mn=sn.substring(0,1e3);return"".concat(mn,` ... LogRocket truncating to first 1000 characters.
      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference/network`)}return en},At=function(en,rn){var sn=rn.method;yt.addEvent("lr.network.RequestEvent",function(){var hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},mn=hn.isEnabled,wn=mn===void 0?!0:mn,Cn=hn.requestSanitizer,kn=Cn===void 0?function(nn){return nn}:Cn;if(!wn)return null;var yn=null;try{yn=kn(gt(gt({},rn),{},{reqId:en}))}catch(nn){console.error(nn)}if(yn){var En=yn.url;if(typeof document<"u"&&typeof document.createElement=="function"){var vn=document.createElement("a");vn.href=yn.url,En=vn.href}return{reqId:en,url:En,headers:(0,kt.default)(yn.headers,function(nn){return"".concat(nn)}),body:Pt(yn.body),method:sn,referrer:yn.referrer||void 0,mode:yn.mode||void 0,credentials:yn.credentials||void 0}}return xt[en]=!0,null})},Nt=function(en,rn){var sn=rn.method,hn=rn.status,mn=rn.responseType;yt.addEvent("lr.network.ResponseEvent",function(){var wn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Cn=wn.isEnabled,kn=Cn===void 0?!0:Cn,yn=wn.responseSanitizer,En=yn===void 0?function(nn){return nn}:yn;if(kn){if(xt[en])return delete xt[en],null}else return null;var vn=null;try{vn=En(gt(gt({},rn),{},{reqId:en}))}catch(nn){console.error(nn)}return vn?{reqId:en,responseType:mn,status:vn.status,headers:(0,kt.default)(vn.headers,function(nn){return"".concat(nn)}),body:Pt(vn.body),method:sn}:{reqId:en,responseType:mn,status:hn,headers:{},body:null,method:sn}})},Bt=function(en){return yt.isDisabled||xt[en]===!0},Jt=(0,pt.default)({addRequest:At,addResponse:Nt,isIgnored:Bt}),ln=(0,mt.default)({addRequest:At,addResponse:Nt,isIgnored:Bt,logger:yt,shouldAugmentNPS:wt,shouldParseXHRBlob:Rt}),on=(0,ht.registerIonic)({addRequest:At,addResponse:Nt,isIgnored:Bt}),an=Tt?function(){}:(0,vt.default)(yt);return function(){an(),Jt(),ln(),on()}}},"./packages/@logrocket/network/src/registerFetch.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=gt;var lt=at(st("./node_modules/@babel/runtime/helpers/defineProperty.js")),dt=at(st("./packages/@logrocket/utils/src/mapValues.ts")),pt=at(st("./packages/@logrocket/network/src/fetchIntercept.js"));function ht(St,yt){var Et=Object.keys(St);if(Object.getOwnPropertySymbols){var Tt=Object.getOwnPropertySymbols(St);yt&&(Tt=Tt.filter(function(wt){return Object.getOwnPropertyDescriptor(St,wt).enumerable})),Et.push.apply(Et,Tt)}return Et}function vt(St){for(var yt=1;yt<arguments.length;yt++){var Et=arguments[yt]!=null?arguments[yt]:{};yt%2?ht(Object(Et),!0).forEach(function(Tt){(0,lt.default)(St,Tt,Et[Tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(St,Object.getOwnPropertyDescriptors(Et)):ht(Object(Et)).forEach(function(Tt){Object.defineProperty(St,Tt,Object.getOwnPropertyDescriptor(Et,Tt))})}return St}function mt(St){if(St==null||typeof St.forEach!="function")return St;var yt={};return St.forEach(function(Et,Tt){yt[Tt]?yt[Tt]="".concat(yt[Tt],",").concat(Et):yt[Tt]="".concat(Et)}),yt}var kt=function(yt){return(0,dt.default)(mt(yt),function(Et){return"".concat(Et)})};function bt(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{url:St.url,headers:kt(St.headers),method:St.method&&St.method.toUpperCase(),referrer:St.referrer||void 0,mode:St.mode||void 0,credentials:St.credentials||void 0}}function gt(St){var yt=St.addRequest,Et=St.addResponse,Tt=St.isIgnored,wt="fetch-",Rt={},xt=pt.default.register({request:function(At){for(var Nt=arguments.length,Bt=new Array(Nt>1?Nt-1:0),Jt=1;Jt<Nt;Jt++)Bt[Jt-1]=arguments[Jt];var ln;if(typeof Request<"u"&&Bt[0]instanceof Request){var on;try{on=Bt[0].clone().text()}catch(an){on=Promise.resolve("LogRocket fetch error: ".concat(an.message))}ln=on.then(function(an){return vt(vt({},bt(Bt[0])),{},{body:an})},function(an){return vt(vt({},bt(Bt[0])),{},{body:"LogRocket fetch error: ".concat(an.message)})})}else ln=Promise.resolve(vt(vt({},bt(Bt[1])),{},{url:"".concat(Bt[0]),body:(Bt[1]||{}).body}));return ln.then(function(an){return Rt[At]=an.method,yt("".concat(wt).concat(At),an),Bt})},requestError:function(At,Nt){return Promise.reject(Nt)},response:function(At,Nt){var Bt,Jt;if(Tt("".concat(wt).concat(At)))return Nt;if(Nt.headers.get("content-type")==="text/event-stream")Jt=Promise.resolve("LogRocket skipped consuming an event-stream body.");else{try{Bt=Nt.clone()}catch(en){var ln={url:Nt.url,responseType:Nt.type.toUpperCase(),status:Nt.status,headers:kt(Nt.headers),body:"LogRocket fetch error: ".concat(en.message),method:Rt[At]};return delete Rt[At],Et("".concat(wt).concat(At),ln),Nt}try{if(window.TextDecoder&&Bt.body){var on=Bt.body.getReader(),an=new window.TextDecoder("utf-8"),Lt="";Jt=on.read().then(function en(rn){var sn=rn.done,hn=rn.value;if(sn)return Lt;var mn=hn?an.decode(hn,{stream:!0}):"";return Lt+=mn,on.read().then(en)})}else Jt=Bt.text()}catch(en){Jt=Promise.resolve("LogRocket error reading body: ".concat(en.message))}}return Jt.catch(function(en){if(!(en.name==="AbortError"&&en instanceof DOMException))return"LogRocket error reading body: ".concat(en.message)}).then(function(en){var rn={url:Nt.url,responseType:Nt.type.toUpperCase(),status:Nt.status,headers:kt(Nt.headers),body:en,method:Rt[At]};delete Rt[At],Et("".concat(wt).concat(At),rn)}),Nt},responseError:function(At,Nt){var Bt={url:void 0,status:0,headers:{},body:"".concat(Nt)};return Et("".concat(wt).concat(At),Bt),Promise.reject(Nt)}});return xt}},"./packages/@logrocket/network/src/registerIonic.ts":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.mergeHeaders=on,ot.serializeQueryParams=hn,ot.appendQueryParamsString=mn,ot.processData=kn,ot.registerIonic=vn;var lt=at(st("./node_modules/@babel/runtime/helpers/defineProperty.js")),dt=at(st("./node_modules/@babel/runtime/helpers/typeof.js")),pt=at(st("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),ht=at(st("./packages/@logrocket/utils/src/protectFunc.ts"));function vt(nn,un){var Mt=typeof Symbol<"u"&&nn[Symbol.iterator]||nn["@@iterator"];if(!Mt){if(Array.isArray(nn)||(Mt=mt(nn))||un){Mt&&(nn=Mt);var jt=0,zt=function(){};return{s:zt,n:function(){return jt>=nn.length?{done:!0}:{done:!1,value:nn[jt++]}},e:function(gn){throw gn},f:zt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dn=!0,fn=!1,tn;return{s:function(){Mt=Mt.call(nn)},n:function(){var gn=Mt.next();return dn=gn.done,gn},e:function(gn){fn=!0,tn=gn},f:function(){try{!dn&&Mt.return!=null&&Mt.return()}finally{if(fn)throw tn}}}}function mt(nn,un){if(nn){if(typeof nn=="string")return kt(nn,un);var Mt=Object.prototype.toString.call(nn).slice(8,-1);if(Mt==="Object"&&nn.constructor&&(Mt=nn.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(nn);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return kt(nn,un)}}function kt(nn,un){(un==null||un>nn.length)&&(un=nn.length);for(var Mt=0,jt=new Array(un);Mt<un;Mt++)jt[Mt]=nn[Mt];return jt}function bt(nn,un){var Mt=Object.keys(nn);if(Object.getOwnPropertySymbols){var jt=Object.getOwnPropertySymbols(nn);un&&(jt=jt.filter(function(zt){return Object.getOwnPropertyDescriptor(nn,zt).enumerable})),Mt.push.apply(Mt,jt)}return Mt}function gt(nn){for(var un=1;un<arguments.length;un++){var Mt=arguments[un]!=null?arguments[un]:{};un%2?bt(Object(Mt),!0).forEach(function(jt){(0,lt.default)(nn,jt,Mt[jt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nn,Object.getOwnPropertyDescriptors(Mt)):bt(Object(Mt)).forEach(function(jt){Object.defineProperty(nn,jt,Object.getOwnPropertyDescriptor(Mt,jt))})}return nn}var St=new Set(["get","put","post","patch","head","delete","options","upload","download"]),yt=new Set(["urlencoded","json","utf8"]),Et=new Set(["raw","multipart"]),Tt="ionic-",wt=new Set(["desktop","mobileweb","pwa"]),Rt=new Set(["FormData"]),xt=new Set,Pt=new Set(["string"]),At=new Set(["string","array"]),Nt={utf8:Pt,urlencoded:new Set(["object"]),json:new Set(["array","object"]),raw:new Set(["Uint8Array","ArrayBuffer"]),default:xt};function Bt(nn,un,Mt){if(typeof un!="string")throw new Error("".concat(Mt," must be one of: ").concat((0,pt.default)(nn).join(", ")));if(un=un.trim().toLowerCase(),!nn.has(un))throw new Error("".concat(Mt," must be one of: ").concat((0,pt.default)(nn).join(", ")));return un}function Jt(nn,un,Mt){if((0,dt.default)(nn)!=="object")throw new Error(Mt);for(var jt=0,zt=Object.keys(nn);jt<zt.length;jt++){var dn=zt[jt];if(!un.has((0,dt.default)(nn[dn])))throw new Error(Mt)}return nn}function ln(nn,un){var Mt=new URL(nn),jt=Mt.host;return un.getHeaders(jt)||null}function on(nn,un){return gt(gt({},nn),un)}function an(nn,un,Mt){var jt=Mt.getHeaders("*")||{},zt=ln(nn,Mt)||{};return on(on(jt,zt),un)}function Lt(nn,un){return un?encodeURIComponent(nn):nn}function en(nn,un,Mt){return nn.length?Mt?"".concat(encodeURIComponent(nn),"[").concat(encodeURIComponent(un),"]"):"".concat(nn,"[").concat(un,"]"):Mt?encodeURIComponent(un):un}function rn(nn,un,Mt){var jt=[],zt=vt(un),dn;try{for(zt.s();!(dn=zt.n()).done;){var fn=dn.value;if(Array.isArray(fn)){jt.push(rn("".concat(nn,"[]"),fn,Mt));continue}else if((0,dt.default)(fn)==="object"){jt.push(sn("".concat(nn,"[]").concat(fn),Mt,void 0));continue}jt.push("".concat(en(nn,"",Mt),"=").concat(Lt(fn,Mt)))}}catch(tn){zt.e(tn)}finally{zt.f()}return jt.join("&")}function sn(nn,un,Mt){var jt=[];for(var zt in un)if(un.hasOwnProperty(zt)){var dn=nn.length?"".concat(nn,"[").concat(zt,"]"):zt;if(Array.isArray(un[zt])){jt.push(rn(dn,un[zt],Mt));continue}else if((0,dt.default)(un[zt])==="object"&&un[zt]!==null){jt.push(sn(dn,un[zt],Mt));continue}jt.push("".concat(en(nn,zt,Mt),"=").concat(Lt(un[zt],Mt)))}return jt.join("&")}function hn(nn,un){return sn("",nn,un)}function mn(nn,un){if(!nn.length||!un.length)return nn;var Mt=new URL(nn),jt=Mt.host,zt=Mt.pathname,dn=Mt.search,fn=Mt.hash,tn=Mt.protocol;return"".concat(tn,"//").concat(jt).concat(zt).concat(dn.length?"".concat(dn,"&").concat(un):"?".concat(un)).concat(fn)}function wn(nn){return Nt[nn]||Nt.default}function Cn(nn){return nn==="multipart"?Rt:xt}function kn(nn,un){var Mt=(0,dt.default)(nn),jt=wn(un),zt=Cn(un);if(zt.size>0){var dn=!1;if(zt.forEach(function(fn){st.g[fn]&&nn instanceof st.g[fn]&&(dn=!0)}),!dn)throw new Error("INSTANCE_TYPE_MISMATCH_DATA ".concat((0,pt.default)(zt).join(", ")))}if(zt.size===0&&!jt.has(Mt))throw new Error("TYPE_MISMATCH_DATA ".concat((0,pt.default)(jt).join(", ")));switch(un){case"utf8":return nn;default:return JSON.stringify(nn,void 0,2)}}function yn(nn,un){nn=nn||{};var Mt,jt=nn.data;try{Mt=Bt(yt,nn.serializer||un.getDataSerializer(),"serializer / data payload type")}catch{Mt=Bt(Et,nn.serializer||un.getDataSerializer(),"serializer / data payload type"),jt={}}return{data:jt,filePath:nn.filePath,followRedirect:nn.followRedirect,headers:Jt(nn.headers||{},Pt,"Invalid header type, must be string"),method:Bt(St,nn.method||St[0],"method"),name:nn.name,params:Jt(nn.params||{},At,"Invalid param, must be of type string or array"),responseType:nn.responseType,serializer:Mt,connectTimeout:nn.connectTimeout,readTimeout:nn.readTimeout,timeout:nn.timeout}}var En=0;function vn(nn){var un,Mt,jt,zt=nn.addRequest,dn=nn.addResponse,fn=nn.isIgnored,tn=(un=window.cordova)===null||un===void 0||(Mt=un.plugin)===null||Mt===void 0?void 0:Mt.http,pn={},gn=!1;if(typeof tn>"u")return function(){};var Tn=(jt=window.ionic)===null||jt===void 0?void 0:jt.platforms;if(typeof Tn<"u"&&typeof Tn.some=="function"&&Tn.some(function(Rn){return wt.has(Rn)}))return function(){};var In=tn.sendRequest,Nn=(0,ht.default)(function(Rn,Qn,$n){if(!fn("".concat(Tt).concat($n)))try{var Xn={url:Rn.url||"",status:Rn.status<600&&Rn.status>=100?Rn.status:0,headers:Rn.headers||{},body:Qn?Rn.data:Rn.error,method:pn[$n].toUpperCase()};dn("".concat(Tt).concat($n),Xn)}catch(mr){var Dn={url:Rn.url||"",status:Rn.status<600&&Rn.status>=100?Rn.status:0,headers:Rn.headers||{},body:"LogRocket fetch error: ".concat(mr.message),method:pn[$n].toUpperCase()};dn("".concat(Tt).concat($n),Dn)}});return tn.sendRequest=function(Rn,Qn,$n,Xn){var Dn=++En,mr=function(cr){gn||(Nn(cr,!0,Dn),delete pn[Dn]),$n(cr)},Zn=function(cr){gn||(Nn(cr,!1,Dn),delete pn[Dn]),Xn(cr)};if(!gn)try{var er=yn(Qn,tn),Yr=mn(Rn,sn("",er.params,!0)),Gr=an(Rn,er.headers,tn),_r=er.method||"get";pn[Dn]=_r;var Zr={url:Yr,method:_r.toUpperCase(),headers:Gr||{},body:kn(er.data||{},er.serializer)};zt("".concat(Tt).concat(Dn),Zr)}catch(Un){var Pr={url:Rn,method:(Qn.method||"get").toUpperCase(),headers:{},body:"LogRocket fetch error: ".concat(Un.message)};zt("".concat(Tt).concat(Dn),Pr)}return In(Rn,Qn,mr,Zn)},function(){gn=!0,tn.sendRequest=In,pn={}}}},"./packages/@logrocket/network/src/registerNetworkInformation.js":function(it,ot){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=at;var st={"slow-2g":"SLOW2G","2g":"TWOG","3g":"THREEG","4g":"FOURG"};function at(lt){var dt=void 0;function pt(){var ht={online:window.navigator.onLine,effectiveType:"UNKOWN"};window.navigator.onLine?window.navigator.connection&&window.navigator.connection.effectiveType&&(ht.effectiveType=st[window.navigator.connection.effectiveType]||"UNKNOWN"):ht.effectiveType="NONE",!(dt&&ht.online===dt.online&&ht.effectiveType===dt.effectiveType)&&(dt=ht,lt.addEvent("lr.network.NetworkStatusEvent",function(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},mt=vt.isEnabled,kt=mt===void 0?!0:mt;return kt?ht:null}))}return setTimeout(pt),window.navigator.connection&&typeof window.navigator.connection.addEventListener=="function"&&window.navigator.connection.addEventListener("change",pt),window.addEventListener("online",pt),window.addEventListener("offline",pt),function(){window.removeEventListener("offline",pt),window.removeEventListener("online",pt),window.navigator.connection&&typeof window.navigator.connection.removeEventListener=="function"&&window.navigator.connection.removeEventListener("change",pt)}}},"./packages/@logrocket/network/src/registerXHR.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.setActive=bt,ot.default=St;var lt=at(st("./packages/@logrocket/utils/src/mapValues.ts")),dt=at(st("./packages/@logrocket/utils/src/enhanceFunc.ts")),pt=at(st("./packages/@logrocket/utils/src/protectFunc.ts")),ht=at(st("./packages/@logrocket/utils/src/startsWith.js")),vt=st("./packages/@logrocket/utils/src/constants/nps.js"),mt=st("./packages/@logrocket/utils/src/constants/statusCodes.ts"),kt=!0;function bt(yt){kt=yt}var gt=0;function St(yt){var Et=yt.addRequest,Tt=yt.addResponse,wt=yt.isIgnored,Rt=yt.logger,xt=yt.shouldAugmentNPS,Pt=xt===void 0?!0:xt,At=yt.shouldParseXHRBlob,Nt=At===void 0?!1:At,Bt=XMLHttpRequest,Jt=new WeakMap,ln=!1,on="xhr-";return window._lrXMLHttpRequest=XMLHttpRequest,XMLHttpRequest=function(Lt,en){var rn=new Bt(Lt,en);if(!kt)return rn;Jt.set(rn,{xhrId:++gt,requestHeaders:{},sent:!1,done:!1});var sn=rn.open;function hn(){for(var yn=arguments.length,En=new Array(yn),vn=0;vn<yn;vn++)En[vn]=arguments[vn];try{var nn=En[1];if(window.URL&&typeof window.URL=="function"&&nn.search(vt.WOOTRIC_RESPONSES_REGEX)===0){var un=new window.URL(Rt.recordingURL);un.searchParams.set("nps","wootric");var Mt=new window.URL(nn),jt=Mt.searchParams.get("response[text]"),zt=jt?"".concat(jt,`

`):"";Mt.searchParams.set("response[text]","".concat(zt,"<").concat(un.href,"|View LogRocket session>")),En[1]=Mt.href}}catch{}return sn.apply(this,En)}var mn=rn.send;function wn(){for(var yn=arguments.length,En=new Array(yn),vn=0;vn<yn;vn++)En[vn]=arguments[vn];try{var nn=Jt.get(rn);if(window.URL&&typeof window.URL=="function"&&nn&&nn.url&&nn.url.search(vt.DELIGHTED_RESPONSES_REGEX)===0&&En.length&&En[0].indexOf(vt.DELIGHTED_FEEDBACK_PREFIX)!==-1){var un=new window.URL(Rt.recordingURL);un.searchParams.set("nps","delighted");var Mt=encodeURIComponent(un.href),jt=En[0].split("&").map(function(zt){if((0,ht.default)(zt,vt.DELIGHTED_FEEDBACK_PREFIX)){var dn=zt===vt.DELIGHTED_FEEDBACK_PREFIX;return"".concat(zt).concat(dn?"":`

`,"<").concat(Mt,"|View LogRocket session>")}return zt}).join("&");En[0]=jt}}catch{}return mn.apply(this,En)}Pt&&(rn.open=hn,rn.send=wn);var Cn=function(){var En;if(!ln){var vn=Jt.get(rn);if(!(!vn||wt("".concat(on).concat(vn.xhrId)))&&!(!vn.sent||!vn.done)){var nn=vn.status||mt.XHR_CUSTOM_STATUS_CODES.error;nn===mt.XHR_CUSTOM_STATUS_CODES.error&&((En=window.navigator)===null||En===void 0?void 0:En.onLine)===!1&&(nn=mt.XHR_CUSTOM_STATUS_CODES.offline);var un={url:vn.url,status:nn,headers:vn.responseHeaders,body:vn.responseBody,method:(vn.method||"").toUpperCase()};if(Nt&&un.body instanceof Blob){var Mt=new FileReader;Mt.readAsText(un.body),Mt.onload=function(){try{un.body=JSON.parse(Mt.result)}catch{}Tt("".concat(on).concat(vn.xhrId),un)}}else Tt("".concat(on).concat(vn.xhrId),un)}}};(0,dt.default)(rn,"open",(0,pt.default)(function(yn,En){if(!ln){var vn=Jt.get(rn);vn.method=yn,vn.url=En}})),(0,dt.default)(rn,"send",(0,pt.default)(function(yn){if(!ln){var En=Jt.get(rn);if(En){var vn={url:En.url,method:En.method&&En.method.toUpperCase(),headers:(0,lt.default)(En.requestHeaders||{},function(nn){return nn.join(", ")}),body:yn};Et("".concat(on).concat(En.xhrId),vn),En.sent=!0,Cn()}}})),(0,dt.default)(rn,"setRequestHeader",(0,pt.default)(function(yn,En){if(!ln){var vn=Jt.get(rn);vn&&(vn.requestHeaders=vn.requestHeaders||{},vn.requestHeaders[yn]=vn.requestHeaders[yn]||[],vn.requestHeaders[yn].push(En))}}));var kn={readystatechange:(0,pt.default)(function(){if(!ln&&rn.readyState===4){var yn=Jt.get(rn);if(!yn||wt("".concat(on).concat(yn.xhrId)))return;var En=rn.getAllResponseHeaders()||"";yn.responseHeaders=En.split(/[\r\n]+/).reduce(function(nn,un){var Mt=nn,jt=un.split(": ");if(jt.length>0){var zt=jt.shift(),dn=jt.join(": ");nn[zt]?Mt[zt]+=", ".concat(dn):Mt[zt]=dn}return Mt},{});var vn;try{switch(rn.responseType){case"json":vn=Rt._shouldCloneResponse?JSON.parse(JSON.stringify(rn.response)):rn.response;break;case"arraybuffer":case"blob":{vn=rn.response;break}case"document":{vn=rn.responseXML;break}case"text":case"":{vn=rn.responseText;break}default:vn=""}}catch{vn="LogRocket: Error accessing response."}yn.responseBody=vn,yn.status=rn.status,yn.done=!0}}),abort:(0,pt.default)(function(){var yn=Jt.get(rn);yn&&(yn.status=mt.XHR_CUSTOM_STATUS_CODES.aborted)}),timeout:(0,pt.default)(function(){var yn=Jt.get(rn);yn&&(yn.status=mt.XHR_CUSTOM_STATUS_CODES.timeout)}),loadend:(0,pt.default)(function(){Cn()})};return Object.keys(kn).forEach(function(yn){rn.addEventListener(yn,kn[yn])}),rn},XMLHttpRequest.prototype=Bt.prototype,["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(an){XMLHttpRequest[an]=Bt[an]}),function(){ln=!0,XMLHttpRequest=Bt}}},"./packages/@logrocket/now/src/index.js":function(it,ot){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=void 0;var st=Date.now.bind(Date),at=st(),lt=typeof performance<"u"&&performance.now?performance.now.bind(performance):function(){return st()-at};ot.default=lt},"./packages/@logrocket/redux/src/createEnhancer.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=mt;var lt=at(st("./node_modules/@babel/runtime/helpers/defineProperty.js")),dt=at(st("./packages/@logrocket/now/src/index.js"));function pt(kt,bt){var gt=Object.keys(kt);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(kt);bt&&(St=St.filter(function(yt){return Object.getOwnPropertyDescriptor(kt,yt).enumerable})),gt.push.apply(gt,St)}return gt}function ht(kt){for(var bt=1;bt<arguments.length;bt++){var gt=arguments[bt]!=null?arguments[bt]:{};bt%2?pt(Object(gt),!0).forEach(function(St){(0,lt.default)(kt,St,gt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(kt,Object.getOwnPropertyDescriptors(gt)):pt(Object(gt)).forEach(function(St){Object.defineProperty(kt,St,Object.getOwnPropertyDescriptor(gt,St))})}return kt}var vt=0;function mt(kt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},gt=bt.stateSanitizer,St=gt===void 0?function(Tt){return Tt}:gt,yt=bt.actionSanitizer,Et=yt===void 0?function(Tt){return Tt}:yt;return function(Tt){return function(wt,Rt,xt){var Pt=Tt(wt,Rt,xt),At=Pt.dispatch,Nt=vt++;kt.addEvent("lr.redux.InitialState",function(){var Jt;try{Jt=St(Pt.getState())}catch(ln){console.error(ln.toString())}return{state:Jt,storeId:Nt}});var Bt=function(ln){var on=(0,dt.default)(),an,Lt;try{Lt=At(ln)}catch(rn){an=rn}finally{var en=(0,dt.default)()-on;kt.addEvent("lr.redux.ReduxAction",function(){var rn=null,sn=null;try{rn=St(Pt.getState()),sn=Et(ln)}catch(hn){console.error(hn.toString())}return rn&&sn?{storeId:Nt,action:sn,duration:en,stateDelta:rn}:null})}if(an)throw an;return Lt};return ht(ht({},Pt),{},{dispatch:Bt})}}}},"./packages/@logrocket/redux/src/createMiddleware.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=pt;var lt=at(st("./packages/@logrocket/now/src/index.js")),dt=0;function pt(ht){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},mt=vt.stateSanitizer,kt=mt===void 0?function(St){return St}:mt,bt=vt.actionSanitizer,gt=bt===void 0?function(St){return St}:bt;return function(St){var yt=dt++;return ht.addEvent("lr.redux.InitialState",function(){var Et;try{Et=kt(St.getState())}catch(Tt){console.error(Tt.toString())}return{state:Et,storeId:yt}}),function(Et){return function(Tt){var wt=(0,lt.default)(),Rt,xt;try{xt=Et(Tt)}catch(At){Rt=At}finally{var Pt=(0,lt.default)()-wt;ht.addEvent("lr.redux.ReduxAction",function(){var At=null,Nt=null;try{At=kt(St.getState()),Nt=gt(Tt)}catch(Bt){console.error(Bt.toString())}return At&&Nt?{storeId:yt,action:Nt,duration:Pt,stateDelta:At}:null})}if(Rt)throw Rt;return xt}}}}},"./packages/@logrocket/redux/src/index.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),Object.defineProperty(ot,"createEnhancer",{enumerable:!0,get:function(){return lt.default}}),Object.defineProperty(ot,"createMiddleware",{enumerable:!0,get:function(){return dt.default}});var lt=at(st("./packages/@logrocket/redux/src/createEnhancer.js")),dt=at(st("./packages/@logrocket/redux/src/createMiddleware.js"))},"./packages/@logrocket/utils/src/TraceKit.js":function(it,ot,st){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=void 0;var at={collectWindowErrors:!0,debug:!1},lt=typeof window<"u"?window:typeof st.g<"u"?st.g:typeof self<"u"?self:{},dt=[].slice,pt="?",ht=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function vt(){return typeof document>"u"||typeof document.location>"u"?"":document.location.href}at.report=function(){var bt=[],gt=null,St=null,yt=null;function Et(on){Nt(),bt.push(on)}function Tt(on){for(var an=bt.length-1;an>=0;--an)bt[an]===on&&bt.splice(an,1)}function wt(){Bt(),bt=[]}function Rt(on,an){var Lt=null;if(!(an&&!at.collectWindowErrors)){for(var en in bt)if(bt.hasOwnProperty(en))try{bt[en].apply(null,[on].concat(dt.call(arguments,2)))}catch(rn){Lt=rn}if(Lt)throw Lt}}var xt,Pt;function At(on,an,Lt,en,rn){var sn=null;if(yt)at.computeStackTrace.augmentStackTraceWithInitialElement(yt,an,Lt,on),Jt();else if(rn)sn=at.computeStackTrace(rn),Rt(sn,!0);else{var hn={url:an,line:Lt,column:en},mn=void 0,wn=on,Cn;if({}.toString.call(on)==="[object String]"){var Cn=on.match(ht);Cn&&(mn=Cn[1],wn=Cn[2])}hn.func=pt,sn={name:mn,message:wn,url:vt(),stack:[hn]},Rt(sn,!0)}return xt?xt.apply(this,arguments):!1}function Nt(){Pt||(xt=lt.onerror,lt.onerror=At,Pt=!0)}function Bt(){Pt&&(lt.onerror=xt,Pt=!1,xt=void 0)}function Jt(){var on=yt,an=gt;gt=null,yt=null,St=null,Rt.apply(null,[on,!1].concat(an))}function ln(on,an){var Lt=dt.call(arguments,1);if(yt){if(St===on)return;Jt()}var en=at.computeStackTrace(on);if(yt=en,St=on,gt=Lt,setTimeout(function(){St===on&&Jt()},en.incomplete?2e3:0),an!==!1)throw on}return ln.subscribe=Et,ln.unsubscribe=Tt,ln.uninstall=wt,ln}(),at.computeStackTrace=function(){function bt(Et){if(!(typeof Et.stack>"u"||!Et.stack)){var Tt=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,wt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,Rt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,xt=Et.stack.split(`
`),Pt=[],At,Nt;/^(.*) is undefined$/.exec(Et.message);for(var Bt=0,Jt=xt.length;Bt<Jt;++Bt){if(At=Tt.exec(xt[Bt])){var ln=At[2]&&At[2].indexOf("native")!==-1;Nt={url:ln?null:At[2],func:At[1]||pt,args:ln?[At[2]]:[],line:At[3]?+At[3]:null,column:At[4]?+At[4]:null}}else if(At=Rt.exec(xt[Bt]))Nt={url:At[2],func:At[1]||pt,args:[],line:+At[3],column:At[4]?+At[4]:null};else if(At=wt.exec(xt[Bt]))Nt={url:At[3],func:At[1]||pt,args:At[2]?At[2].split(","):[],line:At[4]?+At[4]:null,column:At[5]?+At[5]:null};else continue;!Nt.func&&Nt.line&&(Nt.func=pt),Pt.push(Nt)}return Pt.length?(!Pt[0].column&&typeof Et.columnNumber<"u"&&(Pt[0].column=Et.columnNumber+1),{name:Et.name,message:Et.message,url:vt(),stack:Pt}):null}}function gt(Et,Tt,wt,Rt){var xt={url:Tt,line:wt};if(xt.url&&xt.line){if(Et.incomplete=!1,xt.func||(xt.func=pt),Et.stack.length>0&&Et.stack[0].url===xt.url){if(Et.stack[0].line===xt.line)return!1;if(!Et.stack[0].line&&Et.stack[0].func===xt.func)return Et.stack[0].line=xt.line,!1}return Et.stack.unshift(xt),Et.partial=!0,!0}else Et.incomplete=!0;return!1}function St(Et,Tt){for(var wt=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,Rt=[],xt={},Pt=!1,At,Nt,Bt=St.caller;Bt&&!Pt;Bt=Bt.caller)if(!(Bt===yt||Bt===at.report)){if(Nt={url:null,func:pt,line:null,column:null},Bt.name?Nt.func=Bt.name:(At=wt.exec(Bt.toString()))&&(Nt.func=At[1]),typeof Nt.func>"u")try{Nt.func=At.input.substring(0,At.input.indexOf("{"))}catch{}xt[""+Bt]?Pt=!0:xt[""+Bt]=!0,Rt.push(Nt)}Tt&&Rt.splice(0,Tt);var Jt={name:Et.name,message:Et.message,url:vt(),stack:Rt};return gt(Jt,Et.sourceURL||Et.fileName,Et.line||Et.lineNumber,Et.message||Et.description),Jt}function yt(Et,Tt){var wt=null;Tt=Tt==null?0:+Tt;try{if(wt=bt(Et),wt)return wt}catch(Rt){if(at.debug)throw Rt}try{if(wt=St(Et,Tt+1),wt)return wt}catch(Rt){if(at.debug)throw Rt}return{name:Et.name,message:Et.message,url:vt()}}return yt.augmentStackTraceWithInitialElement=gt,yt.computeStackTraceFromStackProp=bt,yt}();var mt=at;ot.default=mt},"./packages/@logrocket/utils/src/constants/nps.js":function(it,ot){Object.defineProperty(ot,"__esModule",{value:!0}),ot.DELIGHTED_FEEDBACK_PREFIX=ot.DELIGHTED_RESPONSES_REGEX=ot.WOOTRIC_RESPONSES_REGEX=void 0;var st=/^https:\/\/production.wootric.com\/responses/;ot.WOOTRIC_RESPONSES_REGEX=st;var at=/^https:\/\/web.delighted.com\/e\/[a-zA-Z-]*\/c/;ot.DELIGHTED_RESPONSES_REGEX=at;var lt="comment=";ot.DELIGHTED_FEEDBACK_PREFIX=lt},"./packages/@logrocket/utils/src/constants/statusCodes.ts":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.getStatusText=mt,ot.XHR_CUSTOM_FAILURE_STATUSES=ot.XHR_CUSTOM_STATUS_CODES=ot.STATUS_CODES=void 0;var lt=at(st("./node_modules/@babel/runtime/helpers/defineProperty.js")),dt,pt={0:"",100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};ot.STATUS_CODES=pt;var ht={error:0,timeout:444,aborted:499,offline:1001};ot.XHR_CUSTOM_STATUS_CODES=ht;var vt=(dt={},(0,lt.default)(dt,ht.error,"Error"),(0,lt.default)(dt,ht.timeout,"Timeout"),(0,lt.default)(dt,ht.aborted,"Aborted"),(0,lt.default)(dt,ht.offline,"Offline"),dt);ot.XHR_CUSTOM_FAILURE_STATUSES=vt;function mt(kt){return pt[String(kt)]}},"./packages/@logrocket/utils/src/createUnsubListener.ts":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.createUnsubListener=ht,ot.Handler=void 0;var lt=at(st("./node_modules/@babel/runtime/helpers/classCallCheck.js")),dt=at(st("./node_modules/@babel/runtime/helpers/createClass.js")),pt=function(){function vt(mt){(0,lt.default)(this,vt),this._value=void 0,this._value=mt}return(0,dt.default)(vt,[{key:"get",value:function(){return this._value}},{key:"clear",value:function(){this._value=void 0}}]),vt}();ot.Handler=pt;function ht(vt){return function(){vt.clear()}}},"./packages/@logrocket/utils/src/enhanceFunc.ts":function(it,ot,st){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=dt;var at=st("./packages/@logrocket/utils/src/createUnsubListener.ts"),lt=function(){};function dt(pt,ht,vt){if(typeof pt[ht]!="function")return lt;try{var mt=function(){for(var St,yt=arguments.length,Et=new Array(yt),Tt=0;Tt<yt;Tt++)Et[Tt]=arguments[Tt];var wt=kt.apply(this,Et);return(St=bt.get())===null||St===void 0||St.apply(this,Et),wt},kt=pt[ht],bt=new at.Handler(vt);return pt[ht]=mt,function(){bt.clear(),pt[ht]===mt&&(pt[ht]=kt)}}catch{return lt}}},"./packages/@logrocket/utils/src/logError.js":function(it,ot){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=void 0;var st=typeof console<"u"&&console.error&&console.error.bind,at=st?console.error.bind(console):function(){},lt=at;ot.default=lt},"./packages/@logrocket/utils/src/mapValues.ts":function(it,ot){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=st;function st(at,lt){if(at==null)return{};var dt={};return Object.keys(at).forEach(function(pt){dt[pt]=lt(at[pt])}),dt}},"./packages/@logrocket/utils/src/protectFunc.ts":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=pt;var lt=at(st("./packages/@logrocket/utils/src/sendTelemetryData.js")),dt=at(st("./packages/@logrocket/utils/src/logError.js"));function pt(ht){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return function(){var mt;try{mt=ht.apply(void 0,arguments)}catch(bt){if(typeof window<"u"&&window._lrdebug)throw bt;var kt=vt(bt);(0,dt.default)("LogRocket",bt),(0,lt.default)(bt,kt)}return mt}}},"./packages/@logrocket/utils/src/scrubException.ts":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.scrubException=bt;var lt=at(st("./node_modules/@babel/runtime/helpers/typeof.js"));function dt(gt,St){var yt=typeof Symbol<"u"&&gt[Symbol.iterator]||gt["@@iterator"];if(!yt){if(Array.isArray(gt)||(yt=pt(gt))||St){yt&&(gt=yt);var Et=0,Tt=function(){};return{s:Tt,n:function(){return Et>=gt.length?{done:!0}:{done:!1,value:gt[Et++]}},e:function(At){throw At},f:Tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wt=!0,Rt=!1,xt;return{s:function(){yt=yt.call(gt)},n:function(){var At=yt.next();return wt=At.done,At},e:function(At){Rt=!0,xt=At},f:function(){try{!wt&&yt.return!=null&&yt.return()}finally{if(Rt)throw xt}}}}function pt(gt,St){if(gt){if(typeof gt=="string")return ht(gt,St);var yt=Object.prototype.toString.call(gt).slice(8,-1);if(yt==="Object"&&gt.constructor&&(yt=gt.constructor.name),yt==="Map"||yt==="Set")return Array.from(gt);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return ht(gt,St)}}function ht(gt,St){(St==null||St>gt.length)&&(St=gt.length);for(var yt=0,Et=new Array(St);yt<St;yt++)Et[yt]=gt[yt];return Et}function vt(gt){return/boolean|number|string/.test((0,lt.default)(gt))}var mt=["level","logger"],kt=["tags","extra"];function bt(gt,St){if(St){var yt=dt(mt),Et;try{for(yt.s();!(Et=yt.n()).done;){var Tt=Et.value,wt=St[Tt];vt(wt)&&(gt[Tt]=wt.toString())}}catch(an){yt.e(an)}finally{yt.f()}var Rt=dt(kt),xt;try{for(Rt.s();!(xt=Rt.n()).done;){for(var Pt=xt.value,At=St[Pt]||{},Nt={},Bt=0,Jt=Object.keys(At);Bt<Jt.length;Bt++){var ln=Jt[Bt],on=At[ln];vt(on)&&(Nt[ln.toString()]=on.toString())}gt[Pt]=Nt}}catch(an){Rt.e(an)}finally{Rt.f()}}}},"./packages/@logrocket/utils/src/sendTelemetryData.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.sendTelemetry=bt,ot.default=gt;var lt=at(st("./node_modules/@babel/runtime/helpers/defineProperty.js")),dt=at(st("./packages/@logrocket/utils/src/logError.js")),pt=at(st("./packages/@logrocket/utils/src/TraceKit.js"));function ht(St,yt){var Et=Object.keys(St);if(Object.getOwnPropertySymbols){var Tt=Object.getOwnPropertySymbols(St);yt&&(Tt=Tt.filter(function(wt){return Object.getOwnPropertyDescriptor(St,wt).enumerable})),Et.push.apply(Et,Tt)}return Et}function vt(St){for(var yt=1;yt<arguments.length;yt++){var Et=arguments[yt]!=null?arguments[yt]:{};yt%2?ht(Object(Et),!0).forEach(function(Tt){(0,lt.default)(St,Tt,Et[Tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(St,Object.getOwnPropertyDescriptors(Et)):ht(Object(Et)).forEach(function(Tt){Object.defineProperty(St,Tt,Object.getOwnPropertyDescriptor(Et,Tt))})}return St}var mt="8304d923ee86bbba88df4d491ccbc1c75ecfbe70";function kt(St){try{var yt,Et,Tt=St.message,wt="https://e.logrocket.com/api/3/store/?sentry_version=7&sentry_client=http%2F3.8.0&sentry_key=b64162b4187a4c5caae8a68a7e291793",Rt=JSON.stringify(vt({message:Tt,logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":typeof navigator<"u"&&navigator.userAgent},url:typeof location<"u"&&location.href},release:mt,environment:((yt=window)===null||yt===void 0||(Et=yt.__SDKCONFIG__)===null||Et===void 0?void 0:Et.scriptEnv)||"prod"},St));if(typeof window<"u"){var xt=window._lrXMLHttpRequest||XMLHttpRequest,Pt=new xt;Pt.open("POST",wt),Pt.send(Rt)}else typeof fetch<"u"&&fetch(wt,{method:"POST",body:Rt}).catch(function(At){(0,dt.default)("Failed to send via fetch",At)})}catch(At){(0,dt.default)("Failed to send",At)}}function bt(St,yt){if(typeof window<"u"&&window._lrdebug)return void(0,dt.default)(St);yt&&yt.extra&&yt.extra.appID&&typeof yt.extra.appID.indexOf=="function"&&yt.extra.appID.indexOf("au2drp/")===0&&Math.random()>=.25||kt(vt({message:St},yt))}function gt(St,yt){try{var Et=St.message,Tt;try{Tt=JSON.stringify(yt).slice(0,1e3)}catch{try{Tt="Could not stringify payload: ".concat(Object.prototype.toString.call(yt))}catch{}}var wt;try{wt=pt.default.computeStackTrace(St).stack.map(function(Rt){return{filename:Rt.url,lineno:Rt.line,colno:Rt.column,function:Rt.func||"?"}})}catch{}kt({message:Et,extra:{stringPayload:Tt},exception:{values:[{type:St.type,value:Et,stacktrace:{frames:wt}}]}})}catch(Rt){(0,dt.default)("Failed to send",Rt)}}},"./packages/@logrocket/utils/src/startsWith.js":function(it,ot){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=st;function st(at,lt){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return at&&lt&&at.substring(dt,dt+lt.length)===lt}},"./packages/logrocket/src/LogRocket.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.MAX_QUEUE_SIZE=void 0;var lt=at(st("./node_modules/@babel/runtime/helpers/classCallCheck.js")),dt=at(st("./node_modules/@babel/runtime/helpers/createClass.js")),pt=at(st("./node_modules/@babel/runtime/helpers/defineProperty.js")),ht=at(st("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),vt=at(st("./packages/@logrocket/network/src/index.js")),mt=st("./packages/@logrocket/exceptions/src/index.js"),kt=at(st("./packages/@logrocket/console/src/index.js")),bt=st("./packages/@logrocket/redux/src/index.js");function gt(wt,Rt){var xt=Object.keys(wt);if(Object.getOwnPropertySymbols){var Pt=Object.getOwnPropertySymbols(wt);Rt&&(Pt=Pt.filter(function(At){return Object.getOwnPropertyDescriptor(wt,At).enumerable})),xt.push.apply(xt,Pt)}return xt}function St(wt){for(var Rt=1;Rt<arguments.length;Rt++){var xt=arguments[Rt]!=null?arguments[Rt]:{};Rt%2?gt(Object(xt),!0).forEach(function(Pt){(0,pt.default)(wt,Pt,xt[Pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(wt,Object.getOwnPropertyDescriptors(xt)):gt(Object(xt)).forEach(function(Pt){Object.defineProperty(wt,Pt,Object.getOwnPropertyDescriptor(xt,Pt))})}return wt}var yt=1e3;ot.MAX_QUEUE_SIZE=yt;var Et=function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xt=Rt.ingestServer,Pt=(0,ht.default)(Rt,["ingestServer"]);return xt?St({serverURL:"".concat(xt,"/i"),statsURL:"".concat(xt,"/s")},Pt):Pt},Tt=function(){function wt(){var Rt=this;(0,lt.default)(this,wt),this._buffer=[],["log","info","warn","error","debug"].forEach(function(xt){Rt[xt]=function(){for(var Pt=arguments.length,At=new Array(Pt),Nt=0;Nt<Pt;Nt++)At[Nt]=arguments[Nt];Rt.addEvent("lr.core.LogEvent",function(){var Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xt==="error"&&Bt.shouldAggregateConsoleErrors&&mt.Capture.captureMessage(Rt,At[0],At,{},!0),{logLevel:xt.toUpperCase(),args:At}},{shouldCaptureStackTrace:!0})}}),this._isInitialized=!1,this._installed=[],window._lr_surl_cb=this.getSessionURL.bind(this)}return(0,dt.default)(wt,[{key:"addEvent",value:function(xt,Pt){var At=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Nt=Date.now();this._run(function(Bt){Bt.addEvent(xt,Pt,St(St({},At),{},{timeOverride:Nt}))})}},{key:"onLogger",value:function(xt){for(this._logger=xt;this._buffer.length>0;){var Pt=this._buffer.shift();Pt(this._logger)}}},{key:"_run",value:function(xt){if(!this._isDisabled)if(this._logger)xt(this._logger);else{if(this._buffer.length>=yt){this._isDisabled=!0,console.warn("LogRocket: script did not load. Check that you have a valid network connection."),this.uninstall();return}this._buffer.push(xt.bind(this))}}},{key:"init",value:function(xt){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._isInitialized){var At,Nt=Pt.shouldAugmentNPS,Bt=Nt===void 0?!0:Nt,Jt=Pt.shouldParseXHRBlob,ln=Jt===void 0?!1:Jt,on=Pt.shouldDetectExceptions,an=on===void 0?!0:on;an&&this._installed.push((0,mt.registerExceptions)(this)),this._installed.push((0,vt.default)(this,{shouldAugmentNPS:!!Bt,shouldParseXHRBlob:!!ln,isDisabled:(Pt==null||(At=Pt.network)===null||At===void 0?void 0:At.isEnabled)===!1})),this._installed.push((0,kt.default)(this)),this._isInitialized=!0,this._run(function(Lt){Lt.init(xt,Et(Pt))})}}},{key:"start",value:function(){this._run(function(xt){xt.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(xt){return xt()}),this._buffer=[],this._run(function(xt){xt.uninstall()})}},{key:"identify",value:function(xt,Pt){this._run(function(At){At.identify(xt,Pt)})}},{key:"startNewSession",value:function(){this._run(function(xt){xt.startNewSession()})}},{key:"track",value:function(xt,Pt){this._run(function(At){At.track(xt,Pt)})}},{key:"getSessionURL",value:function(xt){if(typeof xt!="function")throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(Pt){Pt.getSessionURL?Pt.getSessionURL(xt):xt(Pt.recordingURL)})}},{key:"trackScrollEvent",value:function(xt){this._logger&&this._logger.trackScrollEvent(xt)}},{key:"getVersion",value:function(xt){this._run(function(Pt){xt(Pt.version)})}},{key:"captureMessage",value:function(xt){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};mt.Capture.captureMessage(this,xt,[xt],Pt)}},{key:"captureException",value:function(xt){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};mt.Capture.captureException(this,xt,Pt)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}},{key:"reduxEnhancer",value:function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,bt.createEnhancer)(this,xt)}},{key:"reduxMiddleware",value:function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,bt.createMiddleware)(this,xt)}},{key:"isDisabled",get:function(){return!!(this._isDisabled||this._logger&&this._logger._isDisabled)}}]),wt}();ot.default=Tt},"./packages/logrocket/src/makeLogRocket.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ht;var lt=at(st("./packages/logrocket/src/LogRocket.js")),dt="LogRocket on React Native requires the LogRocket React Native specific SDK. See setup guide here https://docs.logrocket.com/reference/react-native.",pt=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(kt){return function(){return kt.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(kt){return function(bt){return kt(bt)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}};function ht(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pt,kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return new lt.default};if(typeof navigator<"u"&&navigator.product==="ReactNative")throw new Error(dt);if(typeof window<"u"){if(window._disableLogRocket)return mt();if(window.MutationObserver&&window.WeakMap){window._lrMutationObserver=window.MutationObserver;var bt=kt();return vt(bt),bt}}return pt()}},"./packages/logrocket/src/setup.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(ot,"__esModule",{value:!0}),ot.getDomainsAndEnv=vt,ot.setupBaseSDKCONFIG=mt,ot.default=kt;var lt=at(st("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),dt=at(st("./packages/logrocket/src/makeLogRocket.js")),pt={"cdn.logrocket.com":"https://r.logrocket.io","cdn.logrocket.io":"https://r.logrocket.io","cdn.lr-ingest.io":"https://r.lr-ingest.io","cdn.lr-in.com":"https://r.lr-in.com","cdn.lr-in-prod.com":"https://r.lr-in-prod.com","cdn.lr-ingest.com":"https://r.lr-ingest.com","cdn.ingest-lr.com":"https://r.ingest-lr.com","cdn.lr-intake.com":"https://r.lr-intake.com","cdn.intake-lr.com":"https://r.intake-lr.com","cdn.logr-ingest.com":"https://r.logr-ingest.com","cdn.lrkt-in.com":"https://r.lrkt-in.com","cdn.lgrckt-in.com":"https://r.lgrckt-in.com","cdn-staging.logrocket.io":"https://staging-i.logrocket.io","cdn-staging.lr-ingest.io":"https://staging-i.lr-ingest.io","cdn-staging.lr-in.com":"https://staging-i.lr-in.com","cdn-staging.lr-in-prod.com":"https://staging-i.lr-in-prod.com","cdn-staging.lr-ingest.com":"https://staging-i.lr-ingest.com","cdn-staging.ingest-lr.com":"https://staging-i.ingest-lr.com","cdn-staging.lr-intake.com":"https://staging-i.lr-intake.com","cdn-staging.intake-lr.com":"https://staging-i.intake-lr.com","cdn-staging.logr-ingest.com":"https://staging-i.logr-ingest.com","cdn-staging.lrkt-in.com":"https://staging-i.lrkt-in.com","cdn-staging.lgrckt-in.com":"https://staging-i.lgrckt-in.com"};function ht(bt){return bt.startsWith("cdn-staging")?"staging":bt.startsWith("localhost")?"development":"prod"}function vt(bt){if(bt==="script"||bt==="shopify-pixel"){try{var gt=document.currentScript,St=gt.src.match(/^(https?:\/\/([^\\]+))\/.+$/),yt=St&&St[2];if(yt&&pt[yt])return{scriptEnv:ht(yt),scriptOrigin:St&&St[1],scriptIngest:pt[yt]}}catch{}return{scriptEnv:"prod",scriptOrigin:"https://cdn.logrocket.io"}}else return{scriptEnv:void 0,scriptOrigin:"https://cdn.lgrckt-in.com",scriptIngest:"https://r.lgrckt-in.com"}}function mt(bt){typeof window.__SDKCONFIG__>"u"&&(window.__SDKCONFIG__={}),window.__SDKCONFIG__.serverURL="".concat(bt,"/i"),window.__SDKCONFIG__.statsURL="".concat(bt,"/s")}function kt(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},gt=bt.enterpriseServer,St=bt.sdkVersion,yt=St===void 0?"10.1.0":St,Et=(0,lt.default)(bt,["enterpriseServer","sdkVersion"]),Tt=vt(yt),wt=Tt.scriptEnv,Rt=Tt.scriptOrigin,xt=Tt.scriptIngest,Pt=Et.sdkServer||gt,At=Et.ingestServer||gt||xt,Nt=(0,dt.default)(function(){var Bt=document.createElement("script");At&&(mt(At),window.__SDKCONFIG__.scriptEnv=wt),Pt?Bt.src="".concat(Pt,"/logger.min.js"):window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?Bt.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?Bt.src=window._lrAsyncScript:Bt.src="".concat(Rt,"/logger-1.min.js"),Bt.async=!0,document.head.appendChild(Bt),Bt.onload=function(){typeof window._LRLogger=="function"?setTimeout(function(){Nt.onLogger(new window._LRLogger({sdkVersion:yt}))}):(console.warn("LogRocket: script execution has been blocked by a product or service."),Nt.uninstall())},Bt.onerror=function(){console.warn("LogRocket: script could not load. Check that you have a valid network connection."),Nt.uninstall()}});return Nt}},"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":function(it){function ot(st,at){(at==null||at>st.length)&&(at=st.length);for(var lt=0,dt=new Array(at);lt<at;lt++)dt[lt]=st[lt];return dt}it.exports=ot,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function lt(dt){if(Array.isArray(dt))return at(dt)}it.exports=lt,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(it){function ot(st,at){if(!(st instanceof at))throw new TypeError("Cannot call a class as a function")}it.exports=ot,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function lt(pt,ht){for(var vt=0;vt<ht.length;vt++){var mt=ht[vt];mt.enumerable=mt.enumerable||!1,mt.configurable=!0,"value"in mt&&(mt.writable=!0),Object.defineProperty(pt,at(mt.key),mt)}}function dt(pt,ht,vt){return ht&&lt(pt.prototype,ht),vt&&lt(pt,vt),Object.defineProperty(pt,"prototype",{writable:!1}),pt}it.exports=dt,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function lt(dt,pt,ht){return pt=at(pt),pt in dt?Object.defineProperty(dt,pt,{value:ht,enumerable:!0,configurable:!0,writable:!0}):dt[pt]=ht,dt}it.exports=lt,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":function(it){function ot(st){return st&&st.__esModule?st:{default:st}}it.exports=ot,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/iterableToArray.js":function(it){function ot(st){if(typeof Symbol<"u"&&st[Symbol.iterator]!=null||st["@@iterator"]!=null)return Array.from(st)}it.exports=ot,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":function(it){function ot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}it.exports=ot,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");function lt(dt,pt){if(dt==null)return{};var ht=at(dt,pt),vt,mt;if(Object.getOwnPropertySymbols){var kt=Object.getOwnPropertySymbols(dt);for(mt=0;mt<kt.length;mt++)vt=kt[mt],!(pt.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(dt,vt)&&(ht[vt]=dt[vt])}return ht}it.exports=lt,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":function(it){function ot(st,at){if(st==null)return{};var lt={},dt=Object.keys(st),pt,ht;for(ht=0;ht<dt.length;ht++)pt=dt[ht],!(at.indexOf(pt)>=0)&&(lt[pt]=st[pt]);return lt}it.exports=ot,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),lt=st("./node_modules/@babel/runtime/helpers/iterableToArray.js"),dt=st("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),pt=st("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");function ht(vt){return at(vt)||lt(vt)||dt(vt)||pt()}it.exports=ht,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/typeof.js").default;function lt(dt,pt){if(at(dt)!=="object"||dt===null)return dt;var ht=dt[Symbol.toPrimitive];if(ht!==void 0){var vt=ht.call(dt,pt||"default");if(at(vt)!=="object")return vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(pt==="string"?String:Number)(dt)}it.exports=lt,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/typeof.js").default,lt=st("./node_modules/@babel/runtime/helpers/toPrimitive.js");function dt(pt){var ht=lt(pt,"string");return at(ht)==="symbol"?ht:String(ht)}it.exports=dt,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(it){function ot(st){"@babel/helpers - typeof";return it.exports=ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(at){return typeof at}:function(at){return at&&typeof Symbol=="function"&&at.constructor===Symbol&&at!==Symbol.prototype?"symbol":typeof at},it.exports.__esModule=!0,it.exports.default=it.exports,ot(st)}it.exports=ot,it.exports.__esModule=!0,it.exports.default=it.exports},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":function(it,ot,st){var at=st("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function lt(dt,pt){if(dt){if(typeof dt=="string")return at(dt,pt);var ht=Object.prototype.toString.call(dt).slice(8,-1);if(ht==="Object"&&dt.constructor&&(ht=dt.constructor.name),ht==="Map"||ht==="Set")return Array.from(dt);if(ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return at(dt,pt)}}it.exports=lt,it.exports.__esModule=!0,it.exports.default=it.exports}},tt={};function nt(it){var ot=tt[it];if(ot!==void 0)return ot.exports;var st=tt[it]={exports:{}};return et[it](st,st.exports,nt),st.exports}(function(){nt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})();var rt={};return function(){var it=rt;/*!**********************************************!*\
  !*** ./packages/logrocket/src/module-npm.js ***!
  \**********************************************/var ot=nt("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var st=ot(nt("./packages/logrocket/src/setup.js")),at=(0,st.default)(),lt=at;it.default=lt}(),rt=rt.default,rt}()})})(build_umd);var build_umdExports=build_umd.exports;const LogRocket=getDefaultExportFromCjs$1(build_umdExports);LogRocket.init("albawr/1mind_clone");createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
